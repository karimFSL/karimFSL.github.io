---
sidebar_position: 3
title: Docker Hub - Solution Gratuite
description: Configuration rapide de Docker Hub pour vos projets
---

# ğŸ³ Docker Hub - Solution Gratuite

Solution simple et gratuite pour dÃ©marrer avec Docker.

:::info Plan gratuit
- âœ… **1 repo privÃ©** gratuit
- âœ… **Repos publics illimitÃ©s**
- âš ï¸ **200 pulls/6h** (rate limit)
- ğŸ’° **Pro** : 5$/mois - repos privÃ©s illimitÃ©s
:::

---

## ğŸš€ Configuration rapide

### 1. CrÃ©er un compte Docker Hub

1. Aller sur [hub.docker.com](https://hub.docker.com)
2. S'inscrire gratuitement
3. CrÃ©er un **Access Token** :
   - Account Settings â†’ Security â†’ New Access Token
   - Nom : `gitlab-ci-token`
   - Permissions : Read, Write, Delete
   - **Copier le token** (affichÃ© une seule fois)

### 2. CrÃ©er un repository

1. **Repositories** â†’ **Create Repository**
2. Nom : `my-app`
3. VisibilitÃ© : **Private** (1 gratuit) ou **Public**

---

## ğŸ¦Š GitLab CI

### Variables GitLab

**Settings** â†’ **CI/CD** â†’ **Variables** :

| Variable | Valeur | MasquÃ© |
|----------|--------|--------|
| `DOCKER_USERNAME` | Votre username Docker Hub | âŒ |
| `DOCKER_PASSWORD` | Token crÃ©Ã© ci-dessus | âœ… |

### Pipeline GitLab CI

```yaml title=".gitlab-ci.yml"
# Build et push vers Docker Hub

stages:
  - build

variables:
  IMAGE_NAME: your-username/my-app
  IMAGE_TAG: $CI_COMMIT_SHORT_SHA

build:
  stage: build
  image: docker:24
  services:
    - docker:24-dind
  before_script:
    - echo $DOCKER_PASSWORD | docker login -u $DOCKER_USERNAME --password-stdin
  script:
    # Build
    - docker build -t $IMAGE_NAME:$IMAGE_TAG .
    - docker tag $IMAGE_NAME:$IMAGE_TAG $IMAGE_NAME:latest
    
    # Push
    - docker push $IMAGE_NAME:$IMAGE_TAG
    - docker push $IMAGE_NAME:latest
    
    - echo "âœ… Image pushed to Docker Hub"
    - echo "docker pull $IMAGE_NAME:$IMAGE_TAG"
  only:
    - main
```

### Pipeline simplifiÃ© (Kaniko)

```yaml title=".gitlab-ci.yml"
# Alternative sans Docker-in-Docker

build-kaniko:
  stage: build
  image:
    name: gcr.io/kaniko-project/executor:latest
    entrypoint: [""]
  script:
    - mkdir -p /kaniko/.docker
    - echo "{\"auths\":{\"https://index.docker.io/v1/\":{\"username\":\"$DOCKER_USERNAME\",\"password\":\"$DOCKER_PASSWORD\"}}}" > /kaniko/.docker/config.json
    - /kaniko/executor --context . --dockerfile Dockerfile --destination your-username/my-app:$CI_COMMIT_SHORT_SHA --destination your-username/my-app:latest
  only:
    - main
```

---

## ğŸ“¦ Pull depuis Kubernetes

```bash
# CrÃ©er le secret
kubectl create secret docker-registry dockerhub-secret \
  --docker-server=https://index.docker.io/v1/ \
  --docker-username=your-username \
  --docker-password=your-token \
  --namespace=production
```

```yaml title="deployment.yaml"
apiVersion: apps/v1
kind: Deployment
metadata:
  name: my-app
spec:
  template:
    spec:
      imagePullSecrets:
        - name: dockerhub-secret
      containers:
        - name: app
          image: your-username/my-app:latest
```

---

## âš ï¸ Limitations

### Rate Limiting

**Gratuit :** 200 pulls/6h (par IP)

**Solutions :**
- Utiliser un compte authentifiÃ© : 5000 pulls/jour
- Cache local avec Harbor en proxy
- Passer au plan Pro (5$/mois)

### Ã‰viter les rate limits en CI/CD

```yaml
# Utiliser un registry mirror
variables:
  DOCKER_DRIVER: overlay2
  DOCKER_REGISTRY_MIRROR: https://mirror.gcr.io
```

---

## ğŸ’¡ Conseils

**âœ… Gratuit - Utilisez si :**
- Projet open source (public)
- < 10 dÃ©veloppeurs
- Pas de besoins de sÃ©curitÃ© avancÃ©s

**âŒ Limitations - Passez Ã  Harbor/autre si :**
- > 200 pulls/6h nÃ©cessaires
- Besoin scan de vulnÃ©rabilitÃ©s
- Besoin > 1 repo privÃ©
- Enterprise/production critique

---

## ğŸ”„ Migration vers Harbor

Si vous dÃ©passez les limites gratuites :

```bash
# Harbor peut rÃ©pliquer depuis Docker Hub
# Configuration dans Harbor UI :
# Administration > Registries > New Endpoint
# Type: Docker Hub
# URL: https://hub.docker.com
```

---

**Docker Hub : Simple pour dÃ©marrer ! ğŸ³**