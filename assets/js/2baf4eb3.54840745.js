"use strict";(globalThis.webpackChunkdocusaurus_poc=globalThis.webpackChunkdocusaurus_poc||[]).push([[7354],{5085:(n,e,r)=>{r.r(e),r.d(e,{assets:()=>c,contentTitle:()=>s,default:()=>_,frontMatter:()=>o,metadata:()=>a,toc:()=>u});const a=JSON.parse('{"id":"infrastructure/iac/terraform/terraform-aws","title":"\ud83c\udfd7\ufe0f Terraform - Infrastructure Multi-Cloud","description":"Infrastructure as Code avec Terraform pour Java, Drupal, Angular sur AWS, Azure, GCP et SecNumCloud.","source":"@site/docs/infrastructure/iac/terraform/terraform-aws.md","sourceDirName":"infrastructure/iac/terraform","slug":"/infrastructure/iac/terraform/terraform-aws","permalink":"/docs/infrastructure/iac/terraform/terraform-aws","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/infrastructure/iac/terraform/terraform-aws.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"docs","previous":{"title":"\ud83c\udfae AWX - Orchestration Ansible","permalink":"/docs/infrastructure/iac/ansible/awx-orchestration"},"next":{"title":"S\xe9curit\xe9","permalink":"/docs/security/"}}');var t=r(4848),i=r(8453);const o={sidebar_position:1},s="\ud83c\udfd7\ufe0f Terraform - Infrastructure Multi-Cloud",c={},u=[{value:"\ud83c\udfaf Architecture Terraform",id:"-architecture-terraform",level:2},{value:"\ud83d\udcc1 Structure du projet",id:"-structure-du-projet",level:2},{value:"\ud83c\udf10 Module VPC Multi-Cloud",id:"-module-vpc-multi-cloud",level:2},{value:"AWS VPC Module",id:"aws-vpc-module",level:3},{value:"\u2638\ufe0f Module EKS",id:"\ufe0f-module-eks",level:2}];function l(n){const e={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",mermaid:"mermaid",p:"p",pre:"pre",...(0,i.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.header,{children:(0,t.jsx)(e.h1,{id:"\ufe0f-terraform---infrastructure-multi-cloud",children:"\ud83c\udfd7\ufe0f Terraform - Infrastructure Multi-Cloud"})}),"\n",(0,t.jsx)(e.p,{children:"Infrastructure as Code avec Terraform pour Java, Drupal, Angular sur AWS, Azure, GCP et SecNumCloud."}),"\n",(0,t.jsx)(e.h2,{id:"-architecture-terraform",children:"\ud83c\udfaf Architecture Terraform"}),"\n",(0,t.jsx)(e.mermaid,{value:'graph TB\n    subgraph "Terraform Structure"\n        direction TB\n        ROOT[\ud83d\udcc1 Root Module]\n        \n        subgraph "Modules"\n            NETWORK[\ud83c\udf10 Network Module]\n            COMPUTE[\ud83d\udcbb Compute Module]\n            DATABASE[\ud83d\uddc4\ufe0f Database Module]\n            STORAGE[\ud83d\udce6 Storage Module]\n            K8S[\u2638\ufe0f Kubernetes Module]\n            SECURITY[\ud83d\udd12 Security Module]\n            MONITORING[\ud83d\udcca Monitoring Module]\n        end\n        \n        subgraph "Environments"\n            DEV[\ud83d\udd27 Dev]\n            STAGING[\ud83c\udfad Staging]\n            PROD[\ud83d\ude80 Production]\n        end\n        \n        ROOT --\x3e NETWORK\n        ROOT --\x3e COMPUTE\n        ROOT --\x3e DATABASE\n        ROOT --\x3e STORAGE\n        ROOT --\x3e K8S\n        ROOT --\x3e SECURITY\n        ROOT --\x3e MONITORING\n        \n        NETWORK --\x3e DEV\n        NETWORK --\x3e STAGING\n        NETWORK --\x3e PROD\n        \n        COMPUTE --\x3e DEV\n        COMPUTE --\x3e STAGING\n        COMPUTE --\x3e PROD\n    end\n    \n    subgraph "Cloud Providers"\n        AWS[\u2601\ufe0f AWS]\n        AZURE[\ud83d\udd37 Azure]\n        GCP[\ud83c\udf10 GCP]\n        SECNUM[\ud83d\udee1\ufe0f SecNumCloud]\n    end\n    \n    DEV --\x3e AWS\n    STAGING --\x3e AZURE\n    PROD --\x3e AWS\n    PROD --\x3e SECNUM\n    \n    subgraph "State Management"\n        S3[\ud83d\udce6 S3 Backend]\n        DYNAMODB[\ud83d\udd10 DynamoDB Lock]\n        ENCRYPTION[\ud83d\udd12 Encryption at Rest]\n    end\n    \n    ROOT -.State.-> S3\n    S3 --\x3e DYNAMODB\n    S3 --\x3e ENCRYPTION'}),"\n",(0,t.jsx)(e.h2,{id:"-structure-du-projet",children:"\ud83d\udcc1 Structure du projet"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"terraform/\n\u251c\u2500\u2500 modules/                          # Modules r\xe9utilisables\n\u2502   \u251c\u2500\u2500 vpc/\n\u2502   \u2502   \u251c\u2500\u2500 main.tf\n\u2502   \u2502   \u251c\u2500\u2500 variables.tf\n\u2502   \u2502   \u251c\u2500\u2500 outputs.tf\n\u2502   \u2502   \u2514\u2500\u2500 README.md\n\u2502   \u251c\u2500\u2500 eks/\n\u2502   \u2502   \u251c\u2500\u2500 main.tf\n\u2502   \u2502   \u251c\u2500\u2500 variables.tf\n\u2502   \u2502   \u251c\u2500\u2500 outputs.tf\n\u2502   \u2502   \u2514\u2500\u2500 README.md\n\u2502   \u251c\u2500\u2500 rds/\n\u2502   \u251c\u2500\u2500 s3/\n\u2502   \u251c\u2500\u2500 ecr/\n\u2502   \u251c\u2500\u2500 alb/\n\u2502   \u2514\u2500\u2500 security-groups/\n\u251c\u2500\u2500 environments/\n\u2502   \u251c\u2500\u2500 dev/\n\u2502   \u2502   \u251c\u2500\u2500 main.tf\n\u2502   \u2502   \u251c\u2500\u2500 terraform.tfvars\n\u2502   \u2502   \u2514\u2500\u2500 backend.tf\n\u2502   \u251c\u2500\u2500 staging/\n\u2502   \u2502   \u251c\u2500\u2500 main.tf\n\u2502   \u2502   \u251c\u2500\u2500 terraform.tfvars\n\u2502   \u2502   \u2514\u2500\u2500 backend.tf\n\u2502   \u2514\u2500\u2500 prod/\n\u2502       \u251c\u2500\u2500 main.tf\n\u2502       \u251c\u2500\u2500 terraform.tfvars\n\u2502       \u2514\u2500\u2500 backend.tf\n\u251c\u2500\u2500 global/\n\u2502   \u251c\u2500\u2500 s3/                          # Backend S3\n\u2502   \u251c\u2500\u2500 iam/                         # IAM roles/policies\n\u2502   \u2514\u2500\u2500 route53/                     # DNS zones\n\u2514\u2500\u2500 scripts/\n    \u251c\u2500\u2500 init-backend.sh\n    \u251c\u2500\u2500 plan-all.sh\n    \u2514\u2500\u2500 apply-all.sh\n"})}),"\n",(0,t.jsx)(e.h2,{id:"-module-vpc-multi-cloud",children:"\ud83c\udf10 Module VPC Multi-Cloud"}),"\n",(0,t.jsx)(e.h3,{id:"aws-vpc-module",children:"AWS VPC Module"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-hcl",metastring:'title="modules/vpc-aws/main.tf"',children:'terraform {\n  required_version = ">= 1.5"\n  required_providers {\n    aws = {\n      source  = "hashicorp/aws"\n      version = "~> 5.0"\n    }\n  }\n}\n\nvariable "environment" {\n  description = "Environment name"\n  type        = string\n}\n\nvariable "vpc_cidr" {\n  description = "CIDR block for VPC"\n  type        = string\n  default     = "10.0.0.0/16"\n}\n\nvariable "availability_zones" {\n  description = "List of AZs"\n  type        = list(string)\n  default     = ["eu-west-1a", "eu-west-1b", "eu-west-1c"]\n}\n\nvariable "enable_nat_gateway" {\n  description = "Enable NAT Gateway"\n  type        = bool\n  default     = true\n}\n\nvariable "single_nat_gateway" {\n  description = "Use single NAT Gateway (dev)"\n  type        = bool\n  default     = false\n}\n\nvariable "tags" {\n  description = "Additional tags"\n  type        = map(string)\n  default     = {}\n}\n\n# VPC\nresource "aws_vpc" "main" {\n  cidr_block           = var.vpc_cidr\n  enable_dns_hostnames = true\n  enable_dns_support   = true\n\n  tags = merge(\n    {\n      Name        = "${var.environment}-vpc"\n      Environment = var.environment\n      ManagedBy   = "Terraform"\n    },\n    var.tags\n  )\n}\n\n# Internet Gateway\nresource "aws_internet_gateway" "main" {\n  vpc_id = aws_vpc.main.id\n\n  tags = {\n    Name        = "${var.environment}-igw"\n    Environment = var.environment\n  }\n}\n\n# Public Subnets\nresource "aws_subnet" "public" {\n  count                   = length(var.availability_zones)\n  vpc_id                  = aws_vpc.main.id\n  cidr_block              = cidrsubnet(var.vpc_cidr, 4, count.index)\n  availability_zone       = var.availability_zones[count.index]\n  map_public_ip_on_launch = true\n\n  tags = {\n    Name        = "${var.environment}-public-${count.index + 1}"\n    Environment = var.environment\n    Tier        = "public"\n    "kubernetes.io/role/elb" = "1"\n  }\n}\n\n# Private Subnets (Application)\nresource "aws_subnet" "private_app" {\n  count             = length(var.availability_zones)\n  vpc_id            = aws_vpc.main.id\n  cidr_block        = cidrsubnet(var.vpc_cidr, 4, count.index + 3)\n  availability_zone = var.availability_zones[count.index]\n\n  tags = {\n    Name        = "${var.environment}-private-app-${count.index + 1}"\n    Environment = var.environment\n    Tier        = "private-app"\n    "kubernetes.io/role/internal-elb" = "1"\n  }\n}\n\n# Private Subnets (Database)\nresource "aws_subnet" "private_db" {\n  count             = length(var.availability_zones)\n  vpc_id            = aws_vpc.main.id\n  cidr_block        = cidrsubnet(var.vpc_cidr, 4, count.index + 6)\n  availability_zone = var.availability_zones[count.index]\n\n  tags = {\n    Name        = "${var.environment}-private-db-${count.index + 1}"\n    Environment = var.environment\n    Tier        = "private-db"\n  }\n}\n\n# Elastic IPs for NAT Gateways\nresource "aws_eip" "nat" {\n  count  = var.enable_nat_gateway ? (var.single_nat_gateway ? 1 : length(var.availability_zones)) : 0\n  domain = "vpc"\n\n  tags = {\n    Name        = "${var.environment}-nat-eip-${count.index + 1}"\n    Environment = var.environment\n  }\n\n  depends_on = [aws_internet_gateway.main]\n}\n\n# NAT Gateways\nresource "aws_nat_gateway" "main" {\n  count         = var.enable_nat_gateway ? (var.single_nat_gateway ? 1 : length(var.availability_zones)) : 0\n  allocation_id = aws_eip.nat[count.index].id\n  subnet_id     = aws_subnet.public[count.index].id\n\n  tags = {\n    Name        = "${var.environment}-nat-${count.index + 1}"\n    Environment = var.environment\n  }\n\n  depends_on = [aws_internet_gateway.main]\n}\n\n# Route Table - Public\nresource "aws_route_table" "public" {\n  vpc_id = aws_vpc.main.id\n\n  route {\n    cidr_block = "0.0.0.0/0"\n    gateway_id = aws_internet_gateway.main.id\n  }\n\n  tags = {\n    Name        = "${var.environment}-public-rt"\n    Environment = var.environment\n  }\n}\n\n# Route Table Association - Public\nresource "aws_route_table_association" "public" {\n  count          = length(aws_subnet.public)\n  subnet_id      = aws_subnet.public[count.index].id\n  route_table_id = aws_route_table.public.id\n}\n\n# Route Tables - Private\nresource "aws_route_table" "private" {\n  count  = var.enable_nat_gateway ? (var.single_nat_gateway ? 1 : length(var.availability_zones)) : 0\n  vpc_id = aws_vpc.main.id\n\n  route {\n    cidr_block     = "0.0.0.0/0"\n    nat_gateway_id = aws_nat_gateway.main[count.index].id\n  }\n\n  tags = {\n    Name        = "${var.environment}-private-rt-${count.index + 1}"\n    Environment = var.environment\n  }\n}\n\n# Route Table Association - Private App\nresource "aws_route_table_association" "private_app" {\n  count          = length(aws_subnet.private_app)\n  subnet_id      = aws_subnet.private_app[count.index].id\n  route_table_id = var.single_nat_gateway ? aws_route_table.private[0].id : aws_route_table.private[count.index].id\n}\n\n# Route Table Association - Private DB\nresource "aws_route_table_association" "private_db" {\n  count          = length(aws_subnet.private_db)\n  subnet_id      = aws_subnet.private_db[count.index].id\n  route_table_id = var.single_nat_gateway ? aws_route_table.private[0].id : aws_route_table.private[count.index].id\n}\n\n# VPC Flow Logs\nresource "aws_flow_log" "main" {\n  iam_role_arn    = aws_iam_role.flow_log.arn\n  log_destination = aws_cloudwatch_log_group.flow_log.arn\n  traffic_type    = "ALL"\n  vpc_id          = aws_vpc.main.id\n\n  tags = {\n    Name        = "${var.environment}-vpc-flow-log"\n    Environment = var.environment\n  }\n}\n\nresource "aws_cloudwatch_log_group" "flow_log" {\n  name              = "/aws/vpc/${var.environment}"\n  retention_in_days = 30\n\n  tags = {\n    Environment = var.environment\n  }\n}\n\nresource "aws_iam_role" "flow_log" {\n  name = "${var.environment}-vpc-flow-log-role"\n\n  assume_role_policy = jsonencode({\n    Version = "2012-10-17"\n    Statement = [\n      {\n        Action = "sts:AssumeRole"\n        Effect = "Allow"\n        Principal = {\n          Service = "vpc-flow-logs.amazonaws.com"\n        }\n      }\n    ]\n  })\n}\n\nresource "aws_iam_role_policy" "flow_log" {\n  name = "${var.environment}-vpc-flow-log-policy"\n  role = aws_iam_role.flow_log.id\n\n  policy = jsonencode({\n    Version = "2012-10-17"\n    Statement = [\n      {\n        Action = [\n          "logs:CreateLogGroup",\n          "logs:CreateLogStream",\n          "logs:PutLogEvents",\n          "logs:DescribeLogGroups",\n          "logs:DescribeLogStreams"\n        ]\n        Effect   = "Allow"\n        Resource = "*"\n      }\n    ]\n  })\n}\n\n# Outputs\noutput "vpc_id" {\n  description = "VPC ID"\n  value       = aws_vpc.main.id\n}\n\noutput "vpc_cidr" {\n  description = "VPC CIDR"\n  value       = aws_vpc.main.cidr_block\n}\n\noutput "public_subnet_ids" {\n  description = "List of public subnet IDs"\n  value       = aws_subnet.public[*].id\n}\n\noutput "private_app_subnet_ids" {\n  description = "List of private application subnet IDs"\n  value       = aws_subnet.private_app[*].id\n}\n\noutput "private_db_subnet_ids" {\n  description = "List of private database subnet IDs"\n  value       = aws_subnet.private_db[*].id\n}\n\noutput "nat_gateway_ips" {\n  description = "NAT Gateway public IPs"\n  value       = aws_eip.nat[*].public_ip\n}\n'})}),"\n",(0,t.jsx)(e.h2,{id:"\ufe0f-module-eks",children:"\u2638\ufe0f Module EKS"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-hcl",metastring:'title="modules/eks/main.tf"',children:'terraform {\n  required_providers {\n    aws = {\n      source  = "hashicorp/aws"\n      version = "~> 5.0"\n    }\n    kubernetes = {\n      source  = "hashicorp/kubernetes"\n      version = "~> 2.23"\n    }\n  }\n}\n\nvariable "environment" {\n  description = "Environment name"\n  type        = string\n}\n\nvariable "vpc_id" {\n  description = "VPC ID"\n  type        = string\n}\n\nvariable "subnet_ids" {\n  description = "Subnet IDs for EKS"\n  type        = list(string)\n}\n\nvariable "cluster_version" {\n  description = "Kubernetes version"\n  type        = string\n  default     = "1.28"\n}\n\nvariable "node_groups" {\n  description = "Node group configurations"\n  type = map(object({\n    desired_size   = number\n    min_size       = number\n    max_size       = number\n    instance_types = list(string)\n  }))\n  default = {\n    general = {\n      desired_size   = 2\n      min_size       = 1\n      max_size       = 4\n      instance_types = ["t3.medium"]\n    }\n  }\n}\n\n# EKS Cluster\nresource "aws_eks_cluster" "main" {\n  name     = "${var.environment}-eks-cluster"\n  role_arn = aws_iam_role.cluster.arn\n  version  = var.cluster_version\n\n  vpc_config {\n    subnet_ids              = var.subnet_ids\n    endpoint_private_access = true\n    endpoint_public_access  = true\n    public_access_cidrs     = ["0.0.0.0/0"]\n    \n    security_group_ids = [aws_security_group.cluster.id]\n  }\n\n  encryption_config {\n    provider {\n      key_arn = aws_kms_key.eks.arn\n    }\n    resources = ["secrets"]\n  }\n\n  enabled_cluster_log_types = [\n    "api",\n    "audit",\n    "authenticator",\n    "controllerManager",\n    "scheduler"\n  ]\n\n  depends_on = [\n    aws_iam_role_policy_attachment.cluster_AmazonEKSClusterPolicy,\n    aws_iam_role_policy_attachment.cluster_AmazonEKSVPCResourceController,\n    aws_cloudwatch_log_group.cluster\n  ]\n\n  tags = {\n    Name        = "${var.environment}-eks-cluster"\n    Environment = var.environment\n  }\n}\n\n# KMS Key for EKS encryption\nresource "aws_kms_key" "eks" {\n  description             = "EKS Secret Encryption Key"\n  deletion_window_in_days = 10\n  enable_key_rotation     = true\n\n  tags = {\n    Name        = "${var.environment}-eks-key"\n    Environment = var.environment\n  }\n}\n\nresource "aws_kms_alias" "eks" {\n  name          = "alias/${var.environment}-eks"\n  target_key_id = aws_kms_key.eks.key_id\n}\n\n# CloudWatch Log Group\nresource "aws_cloudwatch_log_group" "cluster" {\n  name              = "/aws/eks/${var.environment}-cluster/cluster"\n  retention_in_days = 30\n\n  tags = {\n    Environment = var.environment\n  }\n}\n\n# IAM Role for EKS Cluster\nresource "aws_iam_role" "cluster" {\n  name = "${var.environment}-eks-cluster-role"\n\n  assume_role_policy = jsonencode({\n    Version = "2012-10-17"\n    Statement = [{\n      Action = "sts:AssumeRole"\n      Effect = "Allow"\n      Principal = {\n        Service = "eks.amazonaws.com"\n      }\n    }]\n  })\n}\n\nresource "aws_iam_role_policy_attachment" "cluster_AmazonEKSClusterPolicy" {\n  policy_arn = "arn:aws:iam::aws:policy/AmazonEKSClusterPolicy"\n  role       = aws_iam_role.cluster.name\n}\n\nresource "aws_iam_role_policy_attachment" "cluster_AmazonEKSVPCResourceController" {\n  policy_arn = "arn:aws:iam::aws:policy/AmazonEKSVPCResourceController"\n  role       = aws_iam_role.cluster.name\n}\n\n# Security Group for EKS Cluster\nresource "aws_security_group" "cluster" {\n  name        = "${var.environment}-eks-cluster-sg"\n  description = "Security group for EKS cluster"\n  vpc_id      = var.vpc_id\n\n  egress {\n    from_port   = 0\n    to_port     = 0\n    protocol    = "-1"\n    cidr_blocks = ["0.0.0.0/0"]\n  }\n\n  tags = {\n    Name        = "${var.environment}-eks-cluster-sg"\n    Environment = var.environment\n  }\n}\n\n# Node Groups\nresource "aws_eks_node_group" "main" {\n  for_each = var.node_groups\n\n  cluster_name    = aws_eks_cluster.main.name\n  node_group_name = "${var.environment}-${each.key}"\n  node_role_arn   = aws_iam_role.node_group.arn\n  subnet_ids      = var.subnet_ids\n\n  scaling_config {\n    desired_size = each.value.desired_size\n    max_size     = each.value.max_size\n    min_size     = each.value.min_size\n  }\n\n  instance_types = each.value.instance_types\n\n  update_config {\n    max_unavailable = 1\n  }\n\n  launch_template {\n    id      = aws_launch_template.node_group[each.key].id\n    version = aws_launch_template.node_group[each.key].latest_version\n  }\n\n  depends_on = [\n    aws_iam_role_policy_attachment.node_group_AmazonEKSWorkerNodePolicy,\n    aws_iam_role_policy_attachment.node_group_AmazonEKS_CNI_Policy,\n    aws_iam_role_policy_attachment.node_group_AmazonEC2ContainerRegistryReadOnly,\n  ]\n\n  tags = {\n    Name        = "${var.environment}-${each.key}-node-group"\n    Environment = var.environment\n  }\n}\n\n# Launch Template for Node Groups\nresource "aws_launch_template" "node_group" {\n  for_each = var.node_groups\n\n  name_prefix = "${var.environment}-${each.key}-"\n\n  block_device_mappings {\n    device_name = "/dev/xvda"\n\n    ebs {\n      volume_size           = 50\n      volume_type           = "gp3"\n      iops                  = 3000\n      throughput            = 125\n      encrypted             = true\n      delete_on_termination = true\n    }\n  }\n\n  metadata_options {\n    http_endpoint               = "enabled"\n    http_tokens                 = "required"\n    http_put_response_hop_limit = 1\n  }\n\n  tag_specifications {\n    resource_type = "instance"\n    tags = {\n      Name        = "${var.environment}-${each.key}-node"\n      Environment = var.environment\n    }\n  }\n}\n\n# IAM Role for Node Group\nresource "aws_iam_role" "node_group" {\n  name = "${var.environment}-eks-node-group-role"\n\n  assume_role_policy = jsonencode({\n    Version = "2012-10-17"\n    Statement = [{\n      Action = "sts:AssumeRole"\n      Effect = "Allow"\n      Principal = {\n        Service = "ec2.amazonaws.com"\n      }\n    }]\n  })\n}\n\nresource "aws_iam_role_policy_attachment" "node_group_AmazonEKSWorkerNodePolicy" {\n  policy_arn = "arn:aws:iam::aws:policy/AmazonEKSWorkerNodePolicy"\n  role       = aws_iam_role.node_group.name\n}\n\nresource "aws_iam_role_policy_attachment" "node_group_AmazonEKS_CNI_Policy" {\n  policy_arn = "arn:aws:iam::aws:policy/AmazonEKS_CNI_Policy"\n  role       = aws_iam_role.node_group.name\n}\n\nresource "aws_iam_role_policy_attachment" "node_group_AmazonEC2ContainerRegistryReadOnly" {\n  policy_arn = "arn:aws:iam::aws:policy/AmazonEC2ContainerRegistryReadOnly"\n  role       = aws_iam_role.node_group.name\n}\n\n# OIDC Provider for IRSA\ndata "tls_certificate" "cluster" {\n  url = aws_eks_cluster.main.identity[0].oidc[0].issuer\n}\n\nresource "aws_iam_openid_connect_provider" "cluster" {\n  client_id_list  = ["sts.amazonaws.com"]\n  thumbprint_list = [data.tls_certificate.cluster.certificates[0].sha1_fingerprint]\n  url             = aws_eks_cluster.main.identity[0].oidc[0].issuer\n\n  tags = {\n    Name        = "${var.environment}-eks-oidc"\n    Environment = var.environment\n  }\n}\n\n# Outputs\noutput "cluster_id" {\n  description = "EKS cluster ID"\n  value       = aws_eks_cluster.main.id\n}\n\noutput "cluster_endpoint" {\n  description = "EKS cluster endpoint"\n  value       = aws_eks_cluster.main.endpoint\n}\n\noutput "cluster_security_group_id" {\n  description = "Security group ID attached to the EKS cluster"\n  value       = aws_security_group.cluster.id\n}\n\noutput "cluster_oidc_issuer_url" {\n  description = "The URL on the EKS cluster OIDC Issuer"\n  value       = try(aws_eks_cluster.main.identity[0].oidc[0].issuer, "")\n}\n\noutput "oidc_provider_arn" {\n  description = "ARN of the OIDC Provider for EKS"\n  value       = aws_iam_openid_connect_provider.cluster.arn\n}\n'})}),"\n",(0,t.jsx)(e.p,{children:"Suite avec les environnements et Azure/GCP dans le prochain message..."})]})}function _(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(l,{...n})}):l(n)}},8453:(n,e,r)=>{r.d(e,{R:()=>o,x:()=>s});var a=r(6540);const t={},i=a.createContext(t);function o(n){const e=a.useContext(i);return a.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function s(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:o(n.components),a.createElement(i.Provider,{value:e},n.children)}}}]);