"use strict";(globalThis.webpackChunkdocusaurus_poc=globalThis.webpackChunkdocusaurus_poc||[]).push([[79],{4722:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>u,frontMatter:()=>o,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"tools/renovate","title":"\ud83d\udd04 Renovate - Automatisation des d\xe9pendances","description":"Renovate automatise la mise \xe0 jour des d\xe9pendances de vos projets. C\'est essentiel pour maintenir la s\xe9curit\xe9 et la fra\xeecheur de votre stack.","source":"@site/docs/tools/renovate.md","sourceDirName":"tools","slug":"/tools/renovate","permalink":"/docs/tools/renovate","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/tools/renovate.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"docs","previous":{"title":"Outils","permalink":"/docs/tools/"},"next":{"title":"Ecosystem","permalink":"/docs/ecosystem/"}}');var r=a(4848),t=a(8453);const o={sidebar_position:1},i="\ud83d\udd04 Renovate - Automatisation des d\xe9pendances",c={},l=[{value:"\ud83c\udfaf Pourquoi Renovate ?",id:"-pourquoi-renovate-",level:2},{value:"\ud83d\ude80 Installation",id:"-installation",level:2},{value:"GitHub App (Recommand\xe9)",id:"github-app-recommand\xe9",level:3},{value:"Self-hosted",id:"self-hosted",level:3},{value:"\ud83d\udcdd Configuration de base",id:"-configuration-de-base",level:2},{value:"\u2699\ufe0f Configuration Java/Maven",id:"\ufe0f-configuration-javamaven",level:2},{value:"\ud83d\udd37 Configuration Drupal/Composer",id:"-configuration-drupalcomposer",level:2},{value:"\ud83d\udc33 Configuration Docker",id:"-configuration-docker",level:2},{value:"\ud83c\udfaf Strat\xe9gies avanc\xe9es",id:"-strat\xe9gies-avanc\xe9es",level:2},{value:"Groupement intelligent",id:"groupement-intelligent",level:3},{value:"Vuln\xe9rabilit\xe9s en priorit\xe9",id:"vuln\xe9rabilit\xe9s-en-priorit\xe9",level:3},{value:"Auto-merge s\xe9lectif",id:"auto-merge-s\xe9lectif",level:3},{value:"\ud83d\udd12 S\xe9curit\xe9 et conformit\xe9",id:"-s\xe9curit\xe9-et-conformit\xe9",level:2},{value:"V\xe9rification de signatures",id:"v\xe9rification-de-signatures",level:3},{value:"Tests obligatoires",id:"tests-obligatoires",level:3},{value:"\ud83d\udd04 Int\xe9gration CI/CD",id:"-int\xe9gration-cicd",level:2},{value:"GitHub Actions validation",id:"github-actions-validation",level:3},{value:"Self-hosted avec GitHub Actions",id:"self-hosted-avec-github-actions",level:3},{value:"\ud83d\udcca Dashboard et m\xe9triques",id:"-dashboard-et-m\xe9triques",level:2},{value:"Dependency Dashboard",id:"dependency-dashboard",level:3},{value:"Notifications Slack",id:"notifications-slack",level:3},{value:"\ud83c\udfaf Configuration compl\xe8te par stack",id:"-configuration-compl\xe8te-par-stack",level:2},{value:"Stack Java compl\xe8te",id:"stack-java-compl\xe8te",level:3},{value:"Stack Drupal compl\xe8te",id:"stack-drupal-compl\xe8te",level:3},{value:"\ud83d\udd27 Troubleshooting",id:"-troubleshooting",level:2},{value:"Renovate ne cr\xe9e pas de PR",id:"renovate-ne-cr\xe9e-pas-de-pr",level:3},{value:"Trop de PR cr\xe9\xe9es",id:"trop-de-pr-cr\xe9\xe9es",level:3},{value:"Erreurs de merge",id:"erreurs-de-merge",level:3},{value:"\ud83d\udcda Ressources",id:"-ressources",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"-renovate---automatisation-des-d\xe9pendances",children:"\ud83d\udd04 Renovate - Automatisation des d\xe9pendances"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Renovate"})," automatise la mise \xe0 jour des d\xe9pendances de vos projets. C'est essentiel pour maintenir la s\xe9curit\xe9 et la fra\xeecheur de votre stack."]}),"\n",(0,r.jsx)(n.h2,{id:"-pourquoi-renovate-",children:"\ud83c\udfaf Pourquoi Renovate ?"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\u2705 ",(0,r.jsx)(n.strong,{children:"Automatique"})," : Cr\xe9eation automatique de PR"]}),"\n",(0,r.jsxs)(n.li,{children:["\u2705 ",(0,r.jsx)(n.strong,{children:"Multi-langage"})," : Java, PHP, Node.js, Python, Docker, Terraform"]}),"\n",(0,r.jsxs)(n.li,{children:["\u2705 ",(0,r.jsx)(n.strong,{children:"Flexible"})," : Configuration fine par projet"]}),"\n",(0,r.jsxs)(n.li,{children:["\u2705 ",(0,r.jsx)(n.strong,{children:"S\xe9curit\xe9"})," : Int\xe9gration avec scanners de vuln\xe9rabilit\xe9s"]}),"\n",(0,r.jsxs)(n.li,{children:["\u2705 ",(0,r.jsx)(n.strong,{children:"Gratuit"})," : Pour projets open-source"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"-installation",children:"\ud83d\ude80 Installation"}),"\n",(0,r.jsx)(n.h3,{id:"github-app-recommand\xe9",children:"GitHub App (Recommand\xe9)"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Installer l'app : ",(0,r.jsx)(n.a,{href:"https://github.com/apps/renovate",children:"https://github.com/apps/renovate"})]}),"\n",(0,r.jsx)(n.li,{children:"Autoriser sur votre organisation"}),"\n",(0,r.jsxs)(n.li,{children:["Ajouter un fichier ",(0,r.jsx)(n.code,{children:"renovate.json"})," au projet"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"self-hosted",children:"Self-hosted"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Docker\ndocker run -e RENOVATE_TOKEN=$GITHUB_TOKEN renovate/renovate\n\n# npm\nnpm install -g renovate\nrenovate --token=$GITHUB_TOKEN votre-org/votre-repo\n"})}),"\n",(0,r.jsx)(n.h2,{id:"-configuration-de-base",children:"\ud83d\udcdd Configuration de base"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",metastring:'title="renovate.json"',children:'{\n  "$schema": "https://docs.renovatebot.com/renovate-schema.json",\n  "extends": [\n    "config:recommended"\n  ],\n  "schedule": ["before 3am on Monday"],\n  "timezone": "Europe/Paris",\n  "labels": ["dependencies"],\n  "assignees": ["@devops-team"],\n  "reviewers": ["@tech-leads"],\n  "prConcurrentLimit": 5,\n  "prHourlyLimit": 2\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"\ufe0f-configuration-javamaven",children:"\u2699\ufe0f Configuration Java/Maven"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",metastring:'title="renovate.json"',children:'{\n  "extends": ["config:recommended"],\n  "packageRules": [\n    {\n      "matchManagers": ["maven"],\n      "matchUpdateTypes": ["minor", "patch"],\n      "groupName": "Spring Boot dependencies",\n      "matchPackagePatterns": ["^org.springframework.boot"],\n      "schedule": ["before 3am on Monday"]\n    },\n    {\n      "matchManagers": ["maven"],\n      "matchUpdateTypes": ["major"],\n      "enabled": false,\n      "description": "Require manual approval for major updates"\n    },\n    {\n      "matchManagers": ["maven"],\n      "matchDepTypes": ["test"],\n      "automerge": true,\n      "automergeType": "pr"\n    }\n  ],\n  "maven": {\n    "fileMatch": ["(^|/)pom\\\\.xml$"],\n    "versioning": "maven"\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"-configuration-drupalcomposer",children:"\ud83d\udd37 Configuration Drupal/Composer"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",metastring:'title="renovate.json"',children:'{\n  "extends": ["config:recommended"],\n  "packageRules": [\n    {\n      "matchManagers": ["composer"],\n      "matchPackagePatterns": ["^drupal/"],\n      "groupName": "Drupal core and modules",\n      "schedule": ["before 3am on Tuesday"],\n      "commitMessagePrefix": "[DRUPAL]"\n    },\n    {\n      "matchManagers": ["composer"],\n      "matchDepTypes": ["require-dev"],\n      "automerge": true\n    },\n    {\n      "matchManagers": ["composer"],\n      "matchPackageNames": ["drupal/core"],\n      "enabled": true,\n      "major": {\n        "enabled": false\n      }\n    }\n  ],\n  "composer": {\n    "fileMatch": ["(^|/)composer\\\\.json$"]\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"-configuration-docker",children:"\ud83d\udc33 Configuration Docker"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",metastring:'title="renovate.json"',children:'{\n  "docker": {\n    "enabled": true,\n    "major": {\n      "enabled": false\n    }\n  },\n  "packageRules": [\n    {\n      "matchDatasources": ["docker"],\n      "matchUpdateTypes": ["major"],\n      "enabled": false\n    },\n    {\n      "matchDatasources": ["docker"],\n      "matchPackageNames": [\n        "eclipse-temurin",\n        "maven",\n        "php"\n      ],\n      "groupName": "Base images",\n      "schedule": ["before 3am on Wednesday"]\n    }\n  ]\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"-strat\xe9gies-avanc\xe9es",children:"\ud83c\udfaf Strat\xe9gies avanc\xe9es"}),"\n",(0,r.jsx)(n.h3,{id:"groupement-intelligent",children:"Groupement intelligent"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "packageRules": [\n    {\n      "groupName": "All non-major dependencies",\n      "groupSlug": "all-minor-patch",\n      "matchPackagePatterns": ["*"],\n      "matchUpdateTypes": ["minor", "patch"],\n      "schedule": ["before 3am on Monday"]\n    },\n    {\n      "groupName": "Test dependencies",\n      "matchDepTypes": ["test", "devDependencies"],\n      "automerge": true,\n      "automergeType": "branch"\n    }\n  ]\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"vuln\xe9rabilit\xe9s-en-priorit\xe9",children:"Vuln\xe9rabilit\xe9s en priorit\xe9"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "vulnerabilityAlerts": {\n    "enabled": true,\n    "labels": ["security"],\n    "assignees": ["@security-team"],\n    "prPriority": 10\n  },\n  "osvVulnerabilityAlerts": true\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"auto-merge-s\xe9lectif",children:"Auto-merge s\xe9lectif"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "packageRules": [\n    {\n      "matchUpdateTypes": ["patch"],\n      "matchCurrentVersion": "!/^0/",\n      "automerge": true,\n      "automergeType": "pr",\n      "automergeStrategy": "squash",\n      "requiredStatusChecks": [\n        "ci/build",\n        "ci/test",\n        "security/trivy"\n      ]\n    }\n  ]\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"-s\xe9curit\xe9-et-conformit\xe9",children:"\ud83d\udd12 S\xe9curit\xe9 et conformit\xe9"}),"\n",(0,r.jsx)(n.h3,{id:"v\xe9rification-de-signatures",children:"V\xe9rification de signatures"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "packageRules": [\n    {\n      "matchDatasources": ["docker"],\n      "postUpgradeTasks": {\n        "commands": [\n          "cosign verify --key cosign.pub {{{depName}}}:{{{newVersion}}}"\n        ],\n        "fileFilters": ["**/*"],\n        "executionMode": "branch"\n      }\n    }\n  ]\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"tests-obligatoires",children:"Tests obligatoires"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "prCreation": "not-pending",\n  "packageRules": [\n    {\n      "matchPackagePatterns": ["*"],\n      "stabilityDays": 3,\n      "minimumReleaseAge": "3 days"\n    }\n  ]\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"-int\xe9gration-cicd",children:"\ud83d\udd04 Int\xe9gration CI/CD"}),"\n",(0,r.jsx)(n.h3,{id:"github-actions-validation",children:"GitHub Actions validation"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",metastring:'title=".github/workflows/renovate-validate.yml"',children:"name: Validate Renovate Config\n\non:\n  pull_request:\n    paths:\n      - 'renovate.json'\n      - '.github/renovate.json'\n\njobs:\n  validate:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      \n      - name: Validate Renovate config\n        uses: rinchsan/renovate-config-validator@v0.1.0\n        with:\n          pattern: 'renovate.json'\n"})}),"\n",(0,r.jsx)(n.h3,{id:"self-hosted-avec-github-actions",children:"Self-hosted avec GitHub Actions"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",metastring:'title=".github/workflows/renovate.yml"',children:"name: Renovate\n\non:\n  schedule:\n    - cron: '0 2 * * 1'  # Monday 2 AM\n  workflow_dispatch:\n\njobs:\n  renovate:\n    runs-on: ubuntu-latest\n    steps:\n      - name: Checkout\n        uses: actions/checkout@v4\n      \n      - name: Self-hosted Renovate\n        uses: renovatebot/github-action@v40.0.0\n        with:\n          configurationFile: renovate.json\n          token: ${{ secrets.RENOVATE_TOKEN }}\n        env:\n          LOG_LEVEL: debug\n          RENOVATE_REPOSITORIES: ${{ github.repository }}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"-dashboard-et-m\xe9triques",children:"\ud83d\udcca Dashboard et m\xe9triques"}),"\n",(0,r.jsx)(n.h3,{id:"dependency-dashboard",children:"Dependency Dashboard"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "dependencyDashboard": true,\n  "dependencyDashboardTitle": "\ud83d\udcca Dependency Updates Dashboard",\n  "dependencyDashboardLabels": ["dependencies", "renovate"],\n  "dependencyDashboardFooter": "Managed by Renovate Bot \ud83e\udd16"\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"notifications-slack",children:"Notifications Slack"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "onboarding": false,\n  "platform": "github",\n  "repositories": ["votre-org/votre-repo"],\n  "notifications": {\n    "slack": {\n      "enabled": true,\n      "webhookUrl": "https://hooks.slack.com/services/YOUR/WEBHOOK/URL",\n      "channel": "#devops-updates"\n    }\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"-configuration-compl\xe8te-par-stack",children:"\ud83c\udfaf Configuration compl\xe8te par stack"}),"\n",(0,r.jsx)(n.h3,{id:"stack-java-compl\xe8te",children:"Stack Java compl\xe8te"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",metastring:'title="renovate-java.json"',children:'{\n  "$schema": "https://docs.renovatebot.com/renovate-schema.json",\n  "extends": ["config:recommended"],\n  "timezone": "Europe/Paris",\n  "schedule": ["before 3am on Monday"],\n  "labels": ["dependencies", "java"],\n  "assignees": ["@java-team"],\n  \n  "packageRules": [\n    {\n      "matchManagers": ["maven"],\n      "matchPackagePatterns": ["^org.springframework"],\n      "groupName": "Spring Framework",\n      "schedule": ["before 3am on Monday"]\n    },\n    {\n      "matchManagers": ["maven"],\n      "matchPackageNames": ["org.springframework.boot:spring-boot-starter-parent"],\n      "versioning": "maven"\n    },\n    {\n      "matchManagers": ["maven"],\n      "matchUpdateTypes": ["major"],\n      "enabled": false\n    },\n    {\n      "matchManagers": ["maven"],\n      "matchDepTypes": ["test"],\n      "automerge": true,\n      "automergeType": "branch"\n    }\n  ],\n  \n  "vulnerabilityAlerts": {\n    "enabled": true,\n    "labels": ["security", "vulnerability"],\n    "assignees": ["@security-team"]\n  },\n  \n  "prConcurrentLimit": 5,\n  "prHourlyLimit": 2,\n  "minimumReleaseAge": "3 days",\n  "stabilityDays": 3\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"stack-drupal-compl\xe8te",children:"Stack Drupal compl\xe8te"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",metastring:'title="renovate-drupal.json"',children:'{\n  "$schema": "https://docs.renovatebot.com/renovate-schema.json",\n  "extends": ["config:recommended"],\n  "timezone": "Europe/Paris",\n  "schedule": ["before 3am on Tuesday"],\n  "labels": ["dependencies", "drupal"],\n  \n  "packageRules": [\n    {\n      "matchManagers": ["composer"],\n      "matchPackageNames": ["drupal/core-recommended"],\n      "groupName": "Drupal Core",\n      "major": {\n        "enabled": false\n      }\n    },\n    {\n      "matchManagers": ["composer"],\n      "matchPackagePatterns": ["^drupal/"],\n      "excludePackageNames": ["drupal/core-recommended"],\n      "groupName": "Drupal Modules",\n      "schedule": ["before 3am on Tuesday"]\n    },\n    {\n      "matchManagers": ["composer"],\n      "matchDepTypes": ["require-dev"],\n      "automerge": true,\n      "labels": ["dev-dependencies"]\n    }\n  ],\n  \n  "composer": {\n    "ignorePlugins": ["dealerdirect/phpcodesniffer-composer-installer"]\n  },\n  \n  "postUpgradeTasks": {\n    "commands": [\n      "composer normalize",\n      "drush updatedb --no-interaction",\n      "drush cache:rebuild"\n    ],\n    "fileFilters": ["composer.json", "composer.lock"]\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"-troubleshooting",children:"\ud83d\udd27 Troubleshooting"}),"\n",(0,r.jsx)(n.h3,{id:"renovate-ne-cr\xe9e-pas-de-pr",children:"Renovate ne cr\xe9e pas de PR"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "logLevel": "debug",\n  "printConfig": true\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"trop-de-pr-cr\xe9\xe9es",children:"Trop de PR cr\xe9\xe9es"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "prConcurrentLimit": 3,\n  "prHourlyLimit": 1,\n  "branchConcurrentLimit": 5\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"erreurs-de-merge",children:"Erreurs de merge"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "automerge": false,\n  "rebaseWhen": "behind-base-branch",\n  "conflictResolution": "auto"\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"-ressources",children:"\ud83d\udcda Ressources"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://docs.renovatebot.com/",children:"Documentation Renovate"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://docs.renovatebot.com/configuration-options/",children:"Configuration Options"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://docs.renovatebot.com/presets-default/",children:"Presets"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://github.com/renovatebot/renovate/tree/main/examples",children:"Examples"})}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Renovate maintient automatiquement vos d\xe9pendances \xe0 jour et s\xe9curis\xe9es !"})," \ud83d\udd04\u2728"]})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,n,a)=>{a.d(n,{R:()=>o,x:()=>i});var s=a(6540);const r={},t=s.createContext(r);function o(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);