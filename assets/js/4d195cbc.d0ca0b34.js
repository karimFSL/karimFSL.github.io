"use strict";(globalThis.webpackChunkdocusaurus_poc=globalThis.webpackChunkdocusaurus_poc||[]).push([[6204],{2717:(e,i,s)=>{s.r(i),s.d(i,{assets:()=>d,contentTitle:()=>c,default:()=>h,frontMatter:()=>t,metadata:()=>n,toc:()=>o});const n=JSON.parse('{"id":"microservices/overview","title":"Concepts Microservices","description":"\ud83d\udd01 DRY (Don\'t Repeat Yourself)","source":"@site/docs/microservices/overview.md","sourceDirName":"microservices","slug":"/microservices/overview","permalink":"/docs/microservices/overview","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/microservices/overview.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"docs","previous":{"title":"Microservices","permalink":"/docs/microservices/"},"next":{"title":"Migration","permalink":"/docs/microservices/migration"}}');var r=s(4848),l=s(8453);const t={sidebar_position:1},c="Concepts Microservices",d={},o=[{value:"\ud83d\udd01 DRY (Don&#39;t Repeat Yourself)",id:"-dry-dont-repeat-yourself",level:2},{value:"\ud83e\udde9 Principes des Microservices",id:"-principes-des-microservices",level:2},{value:"\u2705 Principes fondamentaux",id:"-principes-fondamentaux",level:3},{value:"Organisation du d\xe9veloppement",id:"organisation-du-d\xe9veloppement",level:3},{value:"\ud83d\udce1 Communication entre services",id:"-communication-entre-services",level:2},{value:"Types de communication",id:"types-de-communication",level:3},{value:"Formats de donn\xe9es",id:"formats-de-donn\xe9es",level:3},{value:"\ud83d\uddc3 Gestion des Bases de Donn\xe9es",id:"-gestion-des-bases-de-donn\xe9es",level:2},{value:"\u2705 Principe fondamental",id:"-principe-fondamental",level:3},{value:"\ud83c\udfaf Pourquoi une base par microservice ?",id:"-pourquoi-une-base-par-microservice-",level:3},{value:"\ud83d\udd17 1. D\xe9couplage fort",id:"-1-d\xe9couplage-fort",level:4},{value:"\u2699\ufe0f 2. Polyglot Persistence",id:"\ufe0f-2-polyglot-persistence",level:4},{value:"\ud83d\ude80 3. Performance &amp; scalabilit\xe9",id:"-3-performance--scalabilit\xe9",level:4},{value:"\ud83e\uddf1 Niveaux de s\xe9paration possibles",id:"-niveaux-de-s\xe9paration-possibles",level:3},{value:"\ud83d\udee0 Patterns utiles",id:"-patterns-utiles",level:3},{value:"\ud83d\ude80 Indicateurs DORA",id:"-indicateurs-dora",level:2},{value:"\ud83d\udca1 Conditions pour la performance d&#39;\xe9quipe",id:"-conditions-pour-la-performance-d\xe9quipe",level:3},{value:"\ud83e\uddf1 Limites des monolithes",id:"-limites-des-monolithes",level:2},{value:"\ud83e\udde9 Avantages des microservices",id:"-avantages-des-microservices",level:2},{value:"\ud83d\udd39 Modularit\xe9 &amp; simplicit\xe9",id:"-modularit\xe9--simplicit\xe9",level:3},{value:"\ud83d\udd39 Ind\xe9pendance technologique",id:"-ind\xe9pendance-technologique",level:3},{value:"\ud83d\udd39 D\xe9ploiement ind\xe9pendant",id:"-d\xe9ploiement-ind\xe9pendant",level:3},{value:"\ud83d\udd39 Scalabilit\xe9 sp\xe9cifique",id:"-scalabilit\xe9-sp\xe9cifique",level:3},{value:"\u26a0\ufe0f Inconv\xe9nients des microservices",id:"\ufe0f-inconv\xe9nients-des-microservices",level:2},{value:"\ud83d\udd38 Complexit\xe9 accrue",id:"-complexit\xe9-accrue",level:3},{value:"\ud83d\udd38 Gestion des pannes",id:"-gestion-des-pannes",level:3},{value:"\ud83d\udd0c Inter-Process Communication (IPC)",id:"-inter-process-communication-ipc",level:2},{value:"\ud83e\udded Deux dimensions",id:"-deux-dimensions",level:3},{value:"1. Relation",id:"1-relation",level:4},{value:"2. Type",id:"2-type",level:4},{value:"\ud83d\udcec Types d&#39;interactions",id:"-types-dinteractions",level:3},{value:"Exemple d&#39;usage",id:"exemple-dusage",level:3},{value:"\ud83e\uddf0 Technologies IPC",id:"-technologies-ipc",level:3},{value:"\ud83d\udd04 \xc9volution des APIs",id:"-\xe9volution-des-apis",level:2},{value:"1. Complexit\xe9 li\xe9e \xe0 l&#39;\xe9volution",id:"1-complexit\xe9-li\xe9e-\xe0-l\xe9volution",level:3},{value:"2. Compatibilit\xe9 ascendante (Backward Compatibility)",id:"2-compatibilit\xe9-ascendante-backward-compatibility",level:3},{value:"3. Changements incompatibles",id:"3-changements-incompatibles",level:3},{value:"\u274c Gestion des d\xe9faillances partielles (Partial Failures)",id:"-gestion-des-d\xe9faillances-partielles-partial-failures",level:2},{value:"Strat\xe9gies de r\xe9silience",id:"strat\xe9gies-de-r\xe9silience",level:3},{value:"D\xe9tail des strat\xe9gies",id:"d\xe9tail-des-strat\xe9gies",level:3},{value:"1. Timeout r\xe9seau",id:"1-timeout-r\xe9seau",level:4},{value:"2. Limite de requ\xeates simultan\xe9es",id:"2-limite-de-requ\xeates-simultan\xe9es",level:4},{value:"3. Circuit Breaker Pattern",id:"3-circuit-breaker-pattern",level:4},{value:"4. Fallbacks",id:"4-fallbacks",level:4},{value:"\ud83d\uddc4 Comparaison : Monolithe vs Microservices",id:"-comparaison--monolithe-vs-microservices",level:2},{value:"\ud83c\udfe2 Architecture Monolithe",id:"-architecture-monolithe",level:3},{value:"\ud83e\udde9 Architecture Microservices",id:"-architecture-microservices",level:3},{value:"Ressources compl\xe9mentaires",id:"ressources-compl\xe9mentaires",level:2}];function a(e){const i={a:"a",admonition:"admonition",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.header,{children:(0,r.jsx)(i.h1,{id:"concepts-microservices",children:"Concepts Microservices"})}),"\n",(0,r.jsx)(i.h2,{id:"-dry-dont-repeat-yourself",children:"\ud83d\udd01 DRY (Don't Repeat Yourself)"}),"\n",(0,r.jsx)(i.p,{children:"Principe partag\xe9 par l'Agilit\xe9 et la programmation orient\xe9e objet."}),"\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"Objectif :"})," \xe9viter la duplication de code \u2192 cr\xe9er des composants r\xe9utilisables."]}),"\n",(0,r.jsx)(i.admonition,{title:"Attention",type:"warning",children:(0,r.jsxs)(i.p,{children:["Trop de factorisation (ex : classes utilitaires globales) peut casser le d\xe9couplage entre modules. En microservices, ",(0,r.jsx)(i.strong,{children:"la modularit\xe9 et l'ind\xe9pendance priment sur la factorisation extr\xeame"}),"."]})}),"\n",(0,r.jsx)(i.h2,{id:"-principes-des-microservices",children:"\ud83e\udde9 Principes des Microservices"}),"\n",(0,r.jsx)(i.h3,{id:"-principes-fondamentaux",children:"\u2705 Principes fondamentaux"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Minimal mais complet"})," : Chaque microservice couvre une fonction m\xe9tier pr\xe9cise ou une pr\xe9occupation transverse"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Autonome & ind\xe9pendant"})," : D\xe9veloppement et d\xe9ploiement s\xe9par\xe9s"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Scalable automatiquement"})," : Mise \xe0 l'\xe9chelle facilit\xe9e"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Exposition d'une API simple"})," : Communication claire entre microservices"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"R\xe9silient"})," : Faible couplage \u2013 une panne ne bloque pas l'ensemble du syst\xe8me"]}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"organisation-du-d\xe9veloppement",children:"Organisation du d\xe9veloppement"}),"\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"R\xe9partition par domaines fonctionnels :"})," Un service = un processus m\xe9tier"]}),"\n",(0,r.jsx)(i.p,{children:(0,r.jsx)(i.strong,{children:"\xc9quipes align\xe9es avec l'architecture :"})}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"D\xe9ploiements ind\xe9pendants"}),"\n",(0,r.jsx)(i.li,{children:"Cycles courts de d\xe9veloppement"}),"\n",(0,r.jsx)(i.li,{children:"Isolation des bugs"}),"\n",(0,r.jsx)(i.li,{children:"Testabilit\xe9 accrue"}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"-communication-entre-services",children:"\ud83d\udce1 Communication entre services"}),"\n",(0,r.jsx)(i.h3,{id:"types-de-communication",children:"Types de communication"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Synchrone"})," : REST, gRPC, Thrift"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Asynchrone"})," : AMQP, Kafka, STOMP"]}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"formats-de-donn\xe9es",children:"Formats de donn\xe9es"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Texte"})," : JSON/XML (lisibles, mais plus lourds)"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Binaire"})," : Avro/Protobuf (compacts et performants)"]}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"-gestion-des-bases-de-donn\xe9es",children:"\ud83d\uddc3 Gestion des Bases de Donn\xe9es"}),"\n",(0,r.jsx)(i.h3,{id:"-principe-fondamental",children:"\u2705 Principe fondamental"}),"\n",(0,r.jsx)(i.admonition,{title:"R\xe8gle d'or",type:"tip",children:(0,r.jsxs)(i.p,{children:["Chaque microservice doit poss\xe9der ",(0,r.jsx)(i.strong,{children:"sa propre base de donn\xe9es"})," et ne jamais acc\xe9der directement \xe0 celle d'un autre service."]})}),"\n",(0,r.jsx)(i.h3,{id:"-pourquoi-une-base-par-microservice-",children:"\ud83c\udfaf Pourquoi une base par microservice ?"}),"\n",(0,r.jsx)(i.h4,{id:"-1-d\xe9couplage-fort",children:"\ud83d\udd17 1. D\xe9couplage fort"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Si deux microservices partagent une base, ils deviennent \xe9troitement li\xe9s"}),"\n",(0,r.jsx)(i.li,{children:"Une modification de sch\xe9ma pour un service peut casser l'autre service"}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"R\xe9sultat"})," : les d\xe9ploiements doivent \xeatre coordonn\xe9s, ce qu'on veut \xe9viter en microservices"]}),"\n"]}),"\n",(0,r.jsx)(i.h4,{id:"\ufe0f-2-polyglot-persistence",children:"\u2699\ufe0f 2. Polyglot Persistence"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Chaque service peut choisir le type de base de donn\xe9es adapt\xe9 \xe0 son besoin (SQL, NoSQL, Graph, etc.)"}),"\n",(0,r.jsx)(i.li,{children:"Plus besoin de faire des compromis technologiques entre services"}),"\n"]}),"\n",(0,r.jsx)(i.h4,{id:"-3-performance--scalabilit\xe9",children:"\ud83d\ude80 3. Performance & scalabilit\xe9"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Chaque base peut \xeatre h\xe9berg\xe9e et optimis\xe9e ind\xe9pendamment"}),"\n",(0,r.jsx)(i.li,{children:"Meilleure r\xe9partition de charge et mont\xe9e en charge plus fine"}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"-niveaux-de-s\xe9paration-possibles",children:"\ud83e\uddf1 Niveaux de s\xe9paration possibles"}),"\n",(0,r.jsxs)(i.table,{children:[(0,r.jsx)(i.thead,{children:(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.th,{children:"Architecture"}),(0,r.jsx)(i.th,{children:"Avantages"}),(0,r.jsx)(i.th,{children:"Inconv\xe9nients"})]})}),(0,r.jsxs)(i.tbody,{children:[(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.strong,{children:"1 base / microservice"})}),(0,r.jsx)(i.td,{children:"Ind\xe9pendance, coh\xe9rence m\xe9tier"}),(0,r.jsx)(i.td,{children:"Complexit\xe9 de synchronisation, pas d'ACID global"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.strong,{children:"BDD partag\xe9e"})}),(0,r.jsx)(i.td,{children:"Simplicit\xe9 d'acc\xe8s concurrent"}),(0,r.jsx)(i.td,{children:"Couplage fort, goulot d'\xe9tranglement"})]})]})]}),"\n",(0,r.jsxs)(i.table,{children:[(0,r.jsx)(i.thead,{children:(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.th,{children:"Niveau de s\xe9paration"}),(0,r.jsx)(i.th,{children:"Description"}),(0,r.jsx)(i.th,{children:"Avantages"}),(0,r.jsx)(i.th,{children:"Inconv\xe9nients"})]})}),(0,r.jsxs)(i.tbody,{children:[(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.strong,{children:"Sch\xe9ma par service"})}),(0,r.jsx)(i.td,{children:"Sch\xe9ma d\xe9di\xe9 dans une m\xeame BDD"}),(0,r.jsx)(i.td,{children:"Facile \xe0 mettre en place"}),(0,r.jsx)(i.td,{children:"Risque d'acc\xe8s non contr\xf4l\xe9 entre sch\xe9mas"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.strong,{children:"BDD par service"})}),(0,r.jsx)(i.td,{children:"Chaque service a sa propre base sur le m\xeame serveur"}),(0,r.jsx)(i.td,{children:"Meilleure s\xe9paration logique"}),(0,r.jsx)(i.td,{children:"Couplage physique possible"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.strong,{children:"Serveur BDD par service"})}),(0,r.jsx)(i.td,{children:"Base + serveur d\xe9di\xe9s par service"}),(0,r.jsx)(i.td,{children:"Isolation maximale, performance"}),(0,r.jsx)(i.td,{children:"Co\xfbt et complexit\xe9 accrus"})]})]})]}),"\n",(0,r.jsx)(i.h3,{id:"-patterns-utiles",children:"\ud83d\udee0 Patterns utiles"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.strong,{children:"Saga Pattern"})}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"CQRS"})," (Command Query Responsibility Segregation)"]}),"\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.strong,{children:"Eventual Consistency"})}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"-indicateurs-dora",children:"\ud83d\ude80 Indicateurs DORA"}),"\n",(0,r.jsx)(i.p,{children:"Les 4 m\xe9triques cl\xe9s pour mesurer la performance DevOps :"}),"\n",(0,r.jsxs)(i.ol,{children:["\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.strong,{children:"Fr\xe9quence de d\xe9ploiement"})}),"\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.strong,{children:"Lead Time for Changes"})}),"\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.strong,{children:"Taux d'\xe9chec des d\xe9ploiements"})}),"\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.strong,{children:"Temps de restauration de service"})}),"\n"]}),"\n",(0,r.jsxs)(i.p,{children:["\ud83d\udd04 ",(0,r.jsx)(i.strong,{children:"Objectif"})," : am\xe9liorer la rapidit\xe9, la stabilit\xe9 et la r\xe9silience des livraisons logicielles."]}),"\n",(0,r.jsx)(i.h3,{id:"-conditions-pour-la-performance-d\xe9quipe",children:"\ud83d\udca1 Conditions pour la performance d'\xe9quipe"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"D\xe9veloppement, test et d\xe9ploiement ind\xe9pendants entre \xe9quipes"}),"\n",(0,r.jsx)(i.li,{children:"Boucles de feedback rapides et pipelines de d\xe9ploiement efficaces"}),"\n",(0,r.jsx)(i.li,{children:"Adoption facilit\xe9e de technologies vari\xe9es selon les sous-domaines"}),"\n",(0,r.jsx)(i.li,{children:"Possibilit\xe9 de faire \xe9voluer les stacks techniques par microservice"}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"-limites-des-monolithes",children:"\ud83e\uddf1 Limites des monolithes"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Complexit\xe9 croissante"})," \u2192 difficile \xe0 maintenir, d\xe9marrage lent"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"D\xe9ploiements lourds"})," \u2192 pas de d\xe9ploiement partiel"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Manque de scalabilit\xe9 fine"})," \u2192 Mauvais ajustement aux infrastructures sp\xe9cifiques"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Faible fiabilit\xe9"})," \u2192 Un bug dans un module peut faire planter tout le syst\xe8me"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Verrou technologique"})," \u2192 migration difficile"]}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"-avantages-des-microservices",children:"\ud83e\udde9 Avantages des microservices"}),"\n",(0,r.jsx)(i.h3,{id:"-modularit\xe9--simplicit\xe9",children:"\ud83d\udd39 Modularit\xe9 & simplicit\xe9"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"D\xe9veloppement par domaine m\xe9tier"}),"\n",(0,r.jsx)(i.li,{children:"Maintenance cibl\xe9e et simplifi\xe9e"}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"-ind\xe9pendance-technologique",children:"\ud83d\udd39 Ind\xe9pendance technologique"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Chaque service choisit sa stack (polyglot persistence)"}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"-d\xe9ploiement-ind\xe9pendant",children:"\ud83d\udd39 D\xe9ploiement ind\xe9pendant"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Favorise l'int\xe9gration continue et l'A/B testing"}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"-scalabilit\xe9-sp\xe9cifique",children:"\ud83d\udd39 Scalabilit\xe9 sp\xe9cifique"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Chaque service peut \xeatre optimis\xe9 mat\xe9riellement"}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"\ufe0f-inconv\xe9nients-des-microservices",children:"\u26a0\ufe0f Inconv\xe9nients des microservices"}),"\n",(0,r.jsx)(i.h3,{id:"-complexit\xe9-accrue",children:"\ud83d\udd38 Complexit\xe9 accrue"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Tests plus complexes"}),"\n",(0,r.jsx)(i.li,{children:"Coordination multi-services difficile (n\xe9cessite API Gateway, Service Discovery pour g\xe9rer dynamiquement les adresses r\xe9seau)"}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"-gestion-des-pannes",children:"\ud83d\udd38 Gestion des pannes"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Services distants \u2192 timeouts, d\xe9faillances partielles"}),"\n"]}),"\n",(0,r.jsx)(i.p,{children:(0,r.jsx)(i.strong,{children:"Solutions :"})}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Timeout, limites de requ\xeates"}),"\n",(0,r.jsx)(i.li,{children:"Circuit breaker (ex: Hystrix, resilience4j)"}),"\n",(0,r.jsx)(i.li,{children:"Fallbacks (cache, valeurs par d\xe9faut)"}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"-inter-process-communication-ipc",children:"\ud83d\udd0c Inter-Process Communication (IPC)"}),"\n",(0,r.jsx)(i.p,{children:"Dans un syst\xe8me distribu\xe9, chaque microservice est un processus ind\xe9pendant. Il faut donc choisir un m\xe9canisme de communication entre services (IPC)."}),"\n",(0,r.jsx)(i.h3,{id:"-deux-dimensions",children:"\ud83e\udded Deux dimensions"}),"\n",(0,r.jsx)(i.h4,{id:"1-relation",children:"1. Relation"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Un-\xe0-un"})," : une requ\xeate \u2192 un service"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Un-\xe0-plusieurs"})," : une requ\xeate \u2192 plusieurs services"]}),"\n"]}),"\n",(0,r.jsx)(i.h4,{id:"2-type",children:"2. Type"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Synchrone"})," : le client attend la r\xe9ponse"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Asynchrone"})," : le client n'attend pas, la r\xe9ponse peut arriver plus tard"]}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"-types-dinteractions",children:"\ud83d\udcec Types d'interactions"}),"\n",(0,r.jsxs)(i.table,{children:[(0,r.jsx)(i.thead,{children:(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.th,{children:"Type"}),(0,r.jsx)(i.th,{children:"Description"})]})}),(0,r.jsxs)(i.tbody,{children:[(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.strong,{children:"Request/Response"})}),(0,r.jsx)(i.td,{children:"Le client envoie une requ\xeate et attend une r\xe9ponse"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.strong,{children:"Notification"})}),(0,r.jsx)(i.td,{children:"Envoi sans r\xe9ponse attendue (fire and forget)"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.strong,{children:"Request/Async Response"})}),(0,r.jsx)(i.td,{children:"Requ\xeate envoy\xe9e, r\xe9ponse re\xe7ue plus tard sans bloquer le client"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.strong,{children:"Publish/Subscribe"})}),(0,r.jsx)(i.td,{children:"Diffusion d'un message \xe0 plusieurs services abonn\xe9s"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.strong,{children:"Publish/Async Response"})}),(0,r.jsx)(i.td,{children:"Le client attend des r\xe9ponses de plusieurs services pendant un temps donn\xe9"})]})]})]}),"\n",(0,r.jsx)(i.h3,{id:"exemple-dusage",children:"Exemple d'usage"}),"\n",(0,r.jsx)(i.p,{children:"Un smartphone demande un trajet :"}),"\n",(0,r.jsxs)(i.ol,{children:["\n",(0,r.jsx)(i.li,{children:"Il notifie le service de gestion des trajets"}),"\n",(0,r.jsx)(i.li,{children:"Celui-ci appelle (en request/response) le service passager pour v\xe9rifier le compte"}),"\n",(0,r.jsx)(i.li,{children:"Puis il publie une demande de prise en charge \u2192 notification aux services de dispatch"}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"-technologies-ipc",children:"\ud83e\uddf0 Technologies IPC"}),"\n",(0,r.jsxs)(i.table,{children:[(0,r.jsx)(i.thead,{children:(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.th,{children:"Type"}),(0,r.jsx)(i.th,{children:"Exemples"}),(0,r.jsx)(i.th,{children:"Description"})]})}),(0,r.jsxs)(i.tbody,{children:[(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.strong,{children:"Synchrone"})}),(0,r.jsx)(i.td,{children:"REST, gRPC, Thrift"}),(0,r.jsx)(i.td,{children:"Appels imm\xe9diats, simples \xe0 impl\xe9menter"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.strong,{children:"Asynchrone"})}),(0,r.jsx)(i.td,{children:"AMQP, Kafka, STOMP"}),(0,r.jsx)(i.td,{children:"Pour les \xe9v\xe9nements, meilleure r\xe9silience"})]})]})]}),"\n",(0,r.jsx)(i.h2,{id:"-\xe9volution-des-apis",children:"\ud83d\udd04 \xc9volution des APIs"}),"\n",(0,r.jsx)(i.h3,{id:"1-complexit\xe9-li\xe9e-\xe0-l\xe9volution",children:"1. Complexit\xe9 li\xe9e \xe0 l'\xe9volution"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Monolithe"})," : simple \u2192 on met \xe0 jour une seule base de code"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Microservices"})," : complexe \u2192 services versionn\xe9s, clients multiples, d\xe9ploiements progressifs"]}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"2-compatibilit\xe9-ascendante-backward-compatibility",children:"2. Compatibilit\xe9 ascendante (Backward Compatibility)"}),"\n",(0,r.jsx)(i.p,{children:"\u2795 Ajout d'attributs dans une requ\xeate ou r\xe9ponse existante"}),"\n",(0,r.jsx)(i.p,{children:(0,r.jsx)(i.strong,{children:"R\xe8gles :"})}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Les clients doivent ignorer les champs inconnus"}),"\n",(0,r.jsx)(i.li,{children:"Les services doivent fournir des valeurs par d\xe9faut pour les champs manquants"}),"\n"]}),"\n",(0,r.jsx)(i.admonition,{title:"Principe de robustesse (Postel's law)",type:"tip",children:(0,r.jsx)(i.p,{children:"\xab Sois tol\xe9rant en r\xe9ception, strict en \xe9mission. \xbb"})}),"\n",(0,r.jsx)(i.h3,{id:"3-changements-incompatibles",children:"3. Changements incompatibles"}),"\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"Exemple :"})," suppression ou modification d'un champ obligatoire"]}),"\n",(0,r.jsx)(i.p,{children:(0,r.jsx)(i.strong,{children:"\ud83c\udfaf Solution : versionnement de l'API"})}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:["Ex : ",(0,r.jsx)(i.code,{children:"/v1/products"}),", ",(0,r.jsx)(i.code,{children:"/v2/products"})]}),"\n"]}),"\n",(0,r.jsx)(i.p,{children:"Un service peut :"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"G\xe9rer plusieurs versions en parall\xe8le"}),"\n",(0,r.jsx)(i.li,{children:"Ou d\xe9ployer plusieurs instances sp\xe9cialis\xe9es par version"}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"-gestion-des-d\xe9faillances-partielles-partial-failures",children:"\u274c Gestion des d\xe9faillances partielles (Partial Failures)"}),"\n",(0,r.jsx)(i.p,{children:"Un microservice peut ne pas r\xe9pondre. Sans pr\xe9caution, cela plante tout le syst\xe8me."}),"\n",(0,r.jsx)(i.h3,{id:"strat\xe9gies-de-r\xe9silience",children:"Strat\xe9gies de r\xe9silience"}),"\n",(0,r.jsxs)(i.table,{children:[(0,r.jsx)(i.thead,{children:(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.th,{children:"Strat\xe9gie"}),(0,r.jsx)(i.th,{children:"Description"})]})}),(0,r.jsxs)(i.tbody,{children:[(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.strong,{children:"\u23f3 Timeouts"})}),(0,r.jsx)(i.td,{children:"Ne jamais attendre ind\xe9finiment une r\xe9ponse"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.strong,{children:"\ud83d\udeab Limites de requ\xeates"})}),(0,r.jsx)(i.td,{children:"Bloquer de nouvelles requ\xeates si un service est satur\xe9"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.strong,{children:"\ud83d\udca5 Circuit Breaker"})}),(0,r.jsx)(i.td,{children:"Couper automatiquement les appels vers un service en \xe9chec r\xe9p\xe9titif"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.strong,{children:"\ud83e\uddf0 Fallbacks"})}),(0,r.jsx)(i.td,{children:"Utiliser des donn\xe9es en cache ou des valeurs par d\xe9faut en cas d'\xe9chec"})]})]})]}),"\n",(0,r.jsx)(i.h3,{id:"d\xe9tail-des-strat\xe9gies",children:"D\xe9tail des strat\xe9gies"}),"\n",(0,r.jsx)(i.h4,{id:"1-timeout-r\xe9seau",children:"1. Timeout r\xe9seau"}),"\n",(0,r.jsxs)(i.p,{children:["\u274c Ne jamais bloquer ind\xe9finiment",(0,r.jsx)(i.br,{}),"\n","\u2705 Toujours d\xe9finir un timeout",(0,r.jsx)(i.br,{}),"\n","\ud83e\uddf5 \xc9vite de saturer les threads d'ex\xe9cution"]}),"\n",(0,r.jsx)(i.h4,{id:"2-limite-de-requ\xeates-simultan\xe9es",children:"2. Limite de requ\xeates simultan\xe9es"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Mettre un quota de requ\xeates en vol par client ou service"}),"\n",(0,r.jsx)(i.li,{children:"Ne pas envoyer une requ\xeate si on sait qu'elle va \xe9chouer (file pleine)"}),"\n"]}),"\n",(0,r.jsx)(i.h4,{id:"3-circuit-breaker-pattern",children:"3. Circuit Breaker Pattern"}),"\n",(0,r.jsxs)(i.p,{children:["\u26d4 Trop d'\xe9checs \u2192 on coupe temporairement l'acc\xe8s au service",(0,r.jsx)(i.br,{}),"\n","\ud83d\udd01 Apr\xe8s une dur\xe9e, on r\xe9essaye",(0,r.jsx)(i.br,{}),"\n","\u2705 Si succ\xe8s, on r\xe9ouvre le circuit"]}),"\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"\ud83d\udce6 Outils :"})," Hystrix (JVM) ou \xe9quivalent dans d'autres stacks (ex: resilience4j, Polly, Istio...)"]}),"\n",(0,r.jsx)(i.h4,{id:"4-fallbacks",children:"4. Fallbacks"}),"\n",(0,r.jsx)(i.p,{children:"\ud83d\udd19 Fournir une valeur de secours"}),"\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"Exemple :"})," Si le service de recommandations est en panne :"]}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Retourner une liste vide au lieu de bloquer toute la page produit"}),"\n",(0,r.jsx)(i.li,{children:"Utiliser des donn\xe9es en cache"}),"\n",(0,r.jsx)(i.li,{children:"Afficher un message d'erreur simple"}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"-comparaison--monolithe-vs-microservices",children:"\ud83d\uddc4 Comparaison : Monolithe vs Microservices"}),"\n",(0,r.jsx)(i.h3,{id:"-architecture-monolithe",children:"\ud83c\udfe2 Architecture Monolithe"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"1 seule BDD relationnelle"}),"\n",(0,r.jsxs)(i.li,{children:["Acc\xe8s ACID classique avec transactions :","\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"A"}),"tomicit\xe9"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"C"}),"oh\xe9rence"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"I"}),"solation"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"D"}),"urabilit\xe9"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"-architecture-microservices",children:"\ud83e\udde9 Architecture Microservices"}),"\n",(0,r.jsx)(i.p,{children:"Chaque service a sa propre base priv\xe9e (pas d'acc\xe8s partag\xe9)"}),"\n",(0,r.jsx)(i.p,{children:(0,r.jsx)(i.strong,{children:"Avantages :"})}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Faible couplage"}),"\n",(0,r.jsx)(i.li,{children:"Autonomie"}),"\n",(0,r.jsx)(i.li,{children:"Meilleure scalabilit\xe9"}),"\n"]}),"\n",(0,r.jsx)(i.p,{children:(0,r.jsx)(i.strong,{children:"Inconv\xe9nients :"})}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Transactions distribu\xe9es difficiles (pas de 2PC dans NoSQL)"}),"\n",(0,r.jsx)(i.li,{children:"Requ\xeates inter-services complexes"}),"\n"]}),"\n",(0,r.jsx)(i.hr,{}),"\n",(0,r.jsx)(i.h2,{id:"ressources-compl\xe9mentaires",children:"Ressources compl\xe9mentaires"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.a,{href:"https://microservices.io/patterns/data/database-per-service.html",children:"Pattern: Database per service"})}),"\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.a,{href:"https://martinfowler.com/bliki/CircuitBreaker.html",children:"Circuit Breaker Pattern"})}),"\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.a,{href:"https://cloud.google.com/blog/products/devops-sre/using-the-four-keys-to-measure-your-devops-performance",children:"DORA Metrics"})}),"\n"]})]})}function h(e={}){const{wrapper:i}={...(0,l.R)(),...e.components};return i?(0,r.jsx)(i,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},8453:(e,i,s)=>{s.d(i,{R:()=>t,x:()=>c});var n=s(6540);const r={},l=n.createContext(r);function t(e){const i=n.useContext(l);return n.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function c(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),n.createElement(l.Provider,{value:i},e.children)}}}]);