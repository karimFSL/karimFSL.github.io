"use strict";(globalThis.webpackChunkdocusaurus_poc=globalThis.webpackChunkdocusaurus_poc||[]).push([[1236],{98:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>u,frontMatter:()=>t,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"infrastructure/iac/ansible/awx-orchestration","title":"\ud83c\udfae AWX - Orchestration Ansible","description":"AWX (Ansible Automation Platform open-source) est l\'interface web pour orchestrer Ansible \xe0 grande \xe9chelle avec RBAC, workflows et int\xe9gration CI/CD.","source":"@site/docs/infrastructure/iac/ansible/awx-orchestration.md","sourceDirName":"infrastructure/iac/ansible","slug":"/infrastructure/iac/ansible/awx-orchestration","permalink":"/docs/infrastructure/iac/ansible/awx-orchestration","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/infrastructure/iac/ansible/awx-orchestration.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"docs","previous":{"title":"\u2699\ufe0f Ansible - Configuration Multi-Cloud","permalink":"/docs/infrastructure/iac/ansible/ansible-multicloud"},"next":{"title":"\ud83c\udfd7\ufe0f Terraform - Infrastructure Multi-Cloud","permalink":"/docs/infrastructure/iac/terraform/terraform-aws"}}');var i=r(4848),a=r(8453);const t={sidebar_position:2},l="\ud83c\udfae AWX - Orchestration Ansible",o={},c=[{value:"\ud83c\udfaf AWX dans l&#39;\xe9cosyst\xe8me",id:"-awx-dans-l\xe9cosyst\xe8me",level:2},{value:"\ud83d\udca1 Pourquoi AWX ?",id:"-pourquoi-awx-",level:2},{value:"Sans AWX (Ansible CLI uniquement)",id:"sans-awx-ansible-cli-uniquement",level:3},{value:"Avec AWX",id:"avec-awx",level:3},{value:"\ud83d\ude80 Installation rapide",id:"-installation-rapide",level:2},{value:"Option 1 : Docker Compose (Dev/Demo)",id:"option-1--docker-compose-devdemo",level:3},{value:"Option 2 : Kubernetes avec Operator (Production)",id:"option-2--kubernetes-avec-operator-production",level:3},{value:"\ud83d\udccb Concepts cl\xe9s",id:"-concepts-cl\xe9s",level:2},{value:"1. Organizations (Organisations)",id:"1-organizations-organisations",level:3},{value:"2. Projects (Projets)",id:"2-projects-projets",level:3},{value:"3. Inventories (Inventaires)",id:"3-inventories-inventaires",level:3},{value:"4. Credentials (Identifiants)",id:"4-credentials-identifiants",level:3},{value:"5. Job Templates (Mod\xe8les de job)",id:"5-job-templates-mod\xe8les-de-job",level:3},{value:"6. Workflows (Workflows)",id:"6-workflows-workflows",level:3},{value:"\ud83d\udd04 Int\xe9gration avec CI/CD",id:"-int\xe9gration-avec-cicd",level:2},{value:"Cas d&#39;usage : D\xe9ploiement automatique",id:"cas-dusage--d\xe9ploiement-automatique",level:3},{value:"R\xe9sultat dans AWX",id:"r\xe9sultat-dans-awx",level:3},{value:"\ud83c\udfad Workflows avanc\xe9s",id:"-workflows-avanc\xe9s",level:2},{value:"Exemple : D\xe9ploiement multi-cloud progressif",id:"exemple--d\xe9ploiement-multi-cloud-progressif",level:3},{value:"\ud83d\udd10 RBAC (Role-Based Access Control)",id:"-rbac-role-based-access-control",level:2},{value:"Structure des permissions",id:"structure-des-permissions",level:3},{value:"Exemple : D\xe9veloppeur lance un d\xe9ploiement",id:"exemple--d\xe9veloppeur-lance-un-d\xe9ploiement",level:3},{value:"\ud83d\udcca Monitoring et Notifications",id:"-monitoring-et-notifications",level:2},{value:"Notifications int\xe9gr\xe9es",id:"notifications-int\xe9gr\xe9es",level:3},{value:"M\xe9triques Prometheus",id:"m\xe9triques-prometheus",level:3},{value:"\ud83c\udfaf Cas d&#39;usage r\xe9els",id:"-cas-dusage-r\xe9els",level:2},{value:"1. Onboarding nouveau serveur",id:"1-onboarding-nouveau-serveur",level:3},{value:"2. Patch Tuesday (mises \xe0 jour mensuelles)",id:"2-patch-tuesday-mises-\xe0-jour-mensuelles",level:3},{value:"3. DR (Disaster Recovery) Test",id:"3-dr-disaster-recovery-test",level:3},{value:"\ud83d\udcc8 Avantages pour l&#39;\xe9quipe",id:"-avantages-pour-l\xe9quipe",level:2},{value:"\ud83d\ude80 Pour aller plus loin",id:"-pour-aller-plus-loin",level:2},{value:"Int\xe9grations avanc\xe9es",id:"int\xe9grations-avanc\xe9es",level:3},{value:"Ansible Collections dans AWX",id:"ansible-collections-dans-awx",level:3}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",mermaid:"mermaid",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"-awx---orchestration-ansible",children:"\ud83c\udfae AWX - Orchestration Ansible"})}),"\n",(0,i.jsx)(n.p,{children:"AWX (Ansible Automation Platform open-source) est l'interface web pour orchestrer Ansible \xe0 grande \xe9chelle avec RBAC, workflows et int\xe9gration CI/CD."}),"\n",(0,i.jsx)(n.h2,{id:"-awx-dans-l\xe9cosyst\xe8me",children:"\ud83c\udfaf AWX dans l'\xe9cosyst\xe8me"}),"\n",(0,i.jsx)(n.mermaid,{value:'graph TB\r\n    subgraph "D\xe9veloppement"\r\n        DEV[\ud83d\udc68\u200d\ud83d\udcbb D\xe9veloppeurs]\r\n        GIT[\ud83d\udce6 GitLab/GitHub]\r\n    end\r\n    \r\n    subgraph "AWX Platform"\r\n        AWX[\ud83c\udfae AWX]\r\n        PROJECTS[\ud83d\udcc1 Projects]\r\n        INVENTORY[\ud83d\udccb Inventory]\r\n        TEMPLATES[\ud83d\udcc4 Job Templates]\r\n        WORKFLOWS[\ud83d\udd04 Workflows]\r\n        CREDS[\ud83d\udd10 Credentials]\r\n    end\r\n    \r\n    subgraph "Ex\xe9cution"\r\n        ANSIBLE[\u2699\ufe0f Ansible]\r\n        PLAYBOOKS[\ud83d\udcdd Playbooks]\r\n    end\r\n    \r\n    subgraph "Infrastructure Multi-Cloud"\r\n        AWS[\u2601\ufe0f AWS]\r\n        AZURE[\u2601\ufe0f Azure]\r\n        GCP[\u2601\ufe0f GCP]\r\n        SECNUM[\ud83d\udd12 SecNumCloud]\r\n    end\r\n    \r\n    subgraph "Int\xe9grations"\r\n        CICD[\ud83d\udd04 CI/CD Pipeline]\r\n        SLACK[\ud83d\udcac Slack]\r\n        VAULT[\ud83d\udd12 HashiCorp Vault]\r\n        PROM[\ud83d\udcca Prometheus]\r\n    end\r\n    \r\n    DEV --\x3e GIT\r\n    GIT --\x3e PROJECTS\r\n    \r\n    AWX --\x3e PROJECTS\r\n    AWX --\x3e INVENTORY\r\n    AWX --\x3e TEMPLATES\r\n    AWX --\x3e WORKFLOWS\r\n    AWX --\x3e CREDS\r\n    \r\n    VAULT --\x3e CREDS\r\n    \r\n    TEMPLATES --\x3e ANSIBLE\r\n    WORKFLOWS --\x3e ANSIBLE\r\n    ANSIBLE --\x3e PLAYBOOKS\r\n    \r\n    PLAYBOOKS --\x3e AWS\r\n    PLAYBOOKS --\x3e AZURE\r\n    PLAYBOOKS --\x3e GCP\r\n    PLAYBOOKS --\x3e SECNUM\r\n    \r\n    CICD --\x3e AWX\r\n    AWX --\x3e SLACK\r\n    AWX --\x3e PROM'}),"\n",(0,i.jsx)(n.h2,{id:"-pourquoi-awx-",children:"\ud83d\udca1 Pourquoi AWX ?"}),"\n",(0,i.jsx)(n.h3,{id:"sans-awx-ansible-cli-uniquement",children:"Sans AWX (Ansible CLI uniquement)"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Probl\xe8mes :\r\n\u274c Pas d'historique centralis\xe9 des ex\xe9cutions\r\n\u274c Pas de contr\xf4le d'acc\xe8s (qui peut d\xe9ployer o\xf9 ?)\r\n\u274c Secrets en fichiers locaux (risque de fuite)\r\n\u274c Pas d'interface pour les non-techniciens\r\n\u274c Difficile d'int\xe9grer avec CI/CD\r\n\u274c Logs dispers\xe9s sur chaque serveur\n"})}),"\n",(0,i.jsx)(n.h3,{id:"avec-awx",children:"Avec AWX"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Avantages :\r\n\u2705 Interface web intuitive\r\n\u2705 RBAC granulaire (organisations, \xe9quipes, permissions)\r\n\u2705 Gestion s\xe9curis\xe9e des credentials\r\n\u2705 Historique complet de tous les jobs\r\n\u2705 Workflows complexes avec conditions\r\n\u2705 API REST pour automatisation\r\n\u2705 Notifications Slack/Email/Webhooks\r\n\u2705 Scheduling de jobs (cron int\xe9gr\xe9)\r\n\u2705 Surveys (formulaires) pour param\xe9trer les jobs\n"})}),"\n",(0,i.jsx)(n.h2,{id:"-installation-rapide",children:"\ud83d\ude80 Installation rapide"}),"\n",(0,i.jsx)(n.h3,{id:"option-1--docker-compose-devdemo",children:"Option 1 : Docker Compose (Dev/Demo)"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# T\xe9l\xe9charger\r\ngit clone https://github.com/ansible/awx.git\r\ncd awx/tools/docker-compose\r\n\r\n# G\xe9n\xe9rer le secret\r\nopenssl rand -base64 30 > credentials/secret_key\r\n\r\n# Lancer AWX\r\ndocker-compose up -d\r\n\r\n# Attendre que tout d\xe9marre (~2 minutes)\r\ndocker-compose ps\r\n\r\n# Acc\xe9der \xe0 l'interface\r\n# URL: http://localhost:80\r\n# User: admin\r\n# Password: password (voir .env)\n"})}),"\n",(0,i.jsx)(n.h3,{id:"option-2--kubernetes-avec-operator-production",children:"Option 2 : Kubernetes avec Operator (Production)"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Installer l'operator\r\nkubectl apply -f https://raw.githubusercontent.com/ansible/awx-operator/devel/deploy/awx-operator.yaml\r\n\r\n# Cr\xe9er une instance AWX\r\ncat <<EOF | kubectl apply -f -\r\napiVersion: awx.ansible.com/v1beta1\r\nkind: AWX\r\nmetadata:\r\n  name: awx-prod\r\n  namespace: awx\r\nspec:\r\n  service_type: ClusterIP\r\n  ingress_type: ingress\r\n  ingress_hosts:\r\n    - hostname: awx.example.com\r\n      tls_secret: awx-tls\r\nEOF\r\n\r\n# Suivre le d\xe9ploiement\r\nkubectl get awx -n awx -w\n"})}),"\n",(0,i.jsx)(n.h2,{id:"-concepts-cl\xe9s",children:"\ud83d\udccb Concepts cl\xe9s"}),"\n",(0,i.jsx)(n.h3,{id:"1-organizations-organisations",children:"1. Organizations (Organisations)"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"R\xf4le"})," : Isolation multi-tenant"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Organization: Production\r\n  \u251c\u2500\u2500 Teams: DevOps, Developers, Ops\r\n  \u251c\u2500\u2500 Projects: Infrastructure, Applications\r\n  \u251c\u2500\u2500 Inventories: AWS, Azure, GCP\r\n  \u2514\u2500\u2500 Credentials: SSH keys, API tokens\n"})}),"\n",(0,i.jsx)(n.h3,{id:"2-projects-projets",children:"2. Projects (Projets)"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"R\xf4le"})," : Lien avec Git o\xf9 sont les playbooks"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"Name: Infrastructure Automation\r\nSCM Type: Git\r\nSCM URL: https://gitlab.com/company/ansible-infra.git\r\nSCM Branch: main\r\nUpdate on Launch: Yes  # Pull automatique avant chaque job\n"})}),"\n",(0,i.jsx)(n.h3,{id:"3-inventories-inventaires",children:"3. Inventories (Inventaires)"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"R\xf4le"})," : Liste des serveurs \xe0 g\xe9rer"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Static Inventory"})," :"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"Production:\r\n  \u251c\u2500\u2500 Web Servers\r\n  \u2502   \u251c\u2500\u2500 web01.aws (10.0.1.10)\r\n  \u2502   \u251c\u2500\u2500 web02.aws (10.0.1.11)\r\n  \u2502   \u2514\u2500\u2500 web03.azure (10.1.1.10)\r\n  \u2514\u2500\u2500 Databases\r\n      \u251c\u2500\u2500 db01.aws (10.0.2.10)\r\n      \u2514\u2500\u2500 db02.gcp (10.2.2.10)\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Dynamic Inventory"})," : Synchronisation automatique avec AWS/Azure/GCP"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"Source: Amazon EC2\r\nCredential: AWS Production\r\nRegions: eu-west-1, us-east-1\r\nFilters: tag:Environment=production\r\nUpdate on Launch: Yes\n"})}),"\n",(0,i.jsx)(n.h3,{id:"4-credentials-identifiants",children:"4. Credentials (Identifiants)"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"R\xf4le"})," : Gestion s\xe9curis\xe9e des secrets"]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Usage"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Machine"})}),(0,i.jsx)(n.td,{children:"SSH vers serveurs"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Source Control"})}),(0,i.jsx)(n.td,{children:"Git SSH key"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Vault"})}),(0,i.jsx)(n.td,{children:"Ansible Vault password"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Cloud"})}),(0,i.jsx)(n.td,{children:"AWS/Azure/GCP API keys"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"HashiCorp Vault"})}),(0,i.jsx)(n.td,{children:"Integration avec Vault externe"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"5-job-templates-mod\xe8les-de-job",children:"5. Job Templates (Mod\xe8les de job)"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"R\xf4le"})," : Configuration r\xe9utilisable pour lancer un playbook"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"Name: Deploy Java Application\r\nInventory: Production\r\nProject: Applications\r\nPlaybook: playbooks/deploy-java.yml\r\nCredentials:\r\n  - Production SSH\r\n  - Ansible Vault\r\nVariables:\r\n  app_version: latest\r\n  environment: production\r\nAsk Variables on Launch: Yes  # Permet de modifier les variables\n"})}),"\n",(0,i.jsx)(n.h3,{id:"6-workflows-workflows",children:"6. Workflows (Workflows)"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"R\xf4le"})," : Orchestration de plusieurs jobs avec conditions"]}),"\n",(0,i.jsx)(n.mermaid,{value:"graph TD\r\n    START[\ud83c\udfac Start] --\x3e BACKUP[\ud83d\udcbe Backup DB]\r\n    BACKUP --\x3e|Success| DEPLOY[\ud83d\ude80 Deploy App]\r\n    BACKUP --\x3e|Failure| NOTIFY_FAIL[\u274c Slack: Backup Failed]\r\n    \r\n    DEPLOY --\x3e|Success| TEST[\ud83e\uddea Smoke Tests]\r\n    DEPLOY --\x3e|Failure| ROLLBACK[\u21a9\ufe0f Rollback]\r\n    \r\n    TEST --\x3e|Success| NOTIFY_OK[\u2705 Slack: Deploy Success]\r\n    TEST --\x3e|Failure| ROLLBACK\r\n    \r\n    ROLLBACK --\x3e NOTIFY_ROLLBACK[\u26a0\ufe0f Slack: Rollback Done]"}),"\n",(0,i.jsx)(n.h2,{id:"-int\xe9gration-avec-cicd",children:"\ud83d\udd04 Int\xe9gration avec CI/CD"}),"\n",(0,i.jsx)(n.h3,{id:"cas-dusage--d\xe9ploiement-automatique",children:"Cas d'usage : D\xe9ploiement automatique"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",metastring:'title=".gitlab-ci.yml"',children:'stages:\r\n  - build\r\n  - trigger-awx\r\n\r\nbuild:app:\r\n  stage: build\r\n  script:\r\n    - mvn package\r\n    - docker build -t registry.com/my-app:$CI_COMMIT_SHA .\r\n    - docker push registry.com/my-app:$CI_COMMIT_SHA\r\n\r\n# D\xe9clencher AWX pour d\xe9ployer\r\ndeploy:staging:\r\n  stage: trigger-awx\r\n  script:\r\n    - |\r\n      curl -X POST https://awx.example.com/api/v2/job_templates/5/launch/ \\\r\n        -H "Authorization: Bearer $AWX_TOKEN" \\\r\n        -H "Content-Type: application/json" \\\r\n        -d \'{\r\n          "extra_vars": {\r\n            "app_version": "\'$CI_COMMIT_SHA\'",\r\n            "environment": "staging"\r\n          }\r\n        }\'\r\n  environment:\r\n    name: staging\r\n  only:\r\n    - main\r\n\r\ndeploy:production:\r\n  stage: trigger-awx\r\n  script:\r\n    - |\r\n      curl -X POST https://awx.example.com/api/v2/job_templates/5/launch/ \\\r\n        -H "Authorization: Bearer $AWX_TOKEN" \\\r\n        -d \'{\r\n          "extra_vars": {\r\n            "app_version": "\'$CI_COMMIT_TAG\'",\r\n            "environment": "production"\r\n          }\r\n        }\'\r\n  environment:\r\n    name: production\r\n  when: manual\r\n  only:\r\n    - tags\n'})}),"\n",(0,i.jsx)(n.h3,{id:"r\xe9sultat-dans-awx",children:"R\xe9sultat dans AWX"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Job #247 - Deploy Java Application\r\n\u251c\u2500\u2500 Launched by: GitLab CI (via API)\r\n\u251c\u2500\u2500 Variables: \r\n\u2502   \u2514\u2500\u2500 app_version: a1b2c3d\r\n\u2502   \u2514\u2500\u2500 environment: staging\r\n\u251c\u2500\u2500 Status: \u2705 Successful\r\n\u251c\u2500\u2500 Duration: 2m 34s\r\n\u2514\u2500\u2500 Output: [Voir logs d\xe9taill\xe9s]\n"})}),"\n",(0,i.jsx)(n.h2,{id:"-workflows-avanc\xe9s",children:"\ud83c\udfad Workflows avanc\xe9s"}),"\n",(0,i.jsx)(n.h3,{id:"exemple--d\xe9ploiement-multi-cloud-progressif",children:"Exemple : D\xe9ploiement multi-cloud progressif"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"Workflow: Progressive Multi-Cloud Deployment\r\n\r\nNodes:\r\n  1. Backup Databases (All clouds)\r\n     \u2193 Success\r\n  2. Deploy to AWS eu-west-1\r\n     \u251c\u2500 Success \u2192 3\r\n     \u2514\u2500 Failure \u2192 Rollback & Stop\r\n  3. Smoke Tests AWS\r\n     \u251c\u2500 Success \u2192 4\r\n     \u2514\u2500 Failure \u2192 Rollback AWS & Stop\r\n  4. Deploy to Azure westeurope\r\n     \u251c\u2500 Success \u2192 5\r\n     \u2514\u2500 Failure \u2192 Rollback AWS & Azure & Stop\r\n  5. Smoke Tests Azure\r\n     \u251c\u2500 Success \u2192 6\r\n     \u2514\u2500 Failure \u2192 Rollback All & Stop\r\n  6. Deploy to GCP us-central1\r\n     \u251c\u2500 Success \u2192 7\r\n     \u2514\u2500 Failure \u2192 Rollback All & Stop\r\n  7. Final Health Check (All)\r\n     \u251c\u2500 Success \u2192 Notify Slack Success\r\n     \u2514\u2500 Failure \u2192 Notify Slack Warning\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Avantage"})," : Si un d\xe9ploiement \xe9choue, AWX rollback automatiquement les d\xe9ploiements pr\xe9c\xe9dents ! \ud83d\udee1\ufe0f"]}),"\n",(0,i.jsx)(n.h2,{id:"-rbac-role-based-access-control",children:"\ud83d\udd10 RBAC (Role-Based Access Control)"}),"\n",(0,i.jsx)(n.h3,{id:"structure-des-permissions",children:"Structure des permissions"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Organization: Production\r\n\u251c\u2500\u2500 Team: DevOps\r\n\u2502   \u2514\u2500\u2500 Permissions:\r\n\u2502       \u251c\u2500\u2500 Execute: All Job Templates \u2705\r\n\u2502       \u251c\u2500\u2500 Admin: All Inventories \u2705\r\n\u2502       \u2514\u2500\u2500 Admin: All Credentials \u2705\r\n\u2502\r\n\u251c\u2500\u2500 Team: Developers\r\n\u2502   \u2514\u2500\u2500 Permissions:\r\n\u2502       \u251c\u2500\u2500 Execute: Deploy Applications \u2705\r\n\u2502       \u251c\u2500\u2500 Read: Inventories (Dev, Staging) \u2705\r\n\u2502       \u2514\u2500\u2500 Read: Credentials \u274c (secrets cach\xe9s)\r\n\u2502\r\n\u2514\u2500\u2500 Team: Auditors\r\n    \u2514\u2500\u2500 Permissions:\r\n        \u251c\u2500\u2500 Read: All Jobs History \u2705\r\n        \u251c\u2500\u2500 Execute: Nothing \u274c\r\n        \u2514\u2500\u2500 Read: Credentials \u274c\n"})}),"\n",(0,i.jsx)(n.h3,{id:"exemple--d\xe9veloppeur-lance-un-d\xe9ploiement",children:"Exemple : D\xe9veloppeur lance un d\xe9ploiement"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'\ud83d\udc68\u200d\ud83d\udcbb D\xe9veloppeur se connecte \xe0 AWX\r\n    \u2193\r\n\ud83d\udd0d Voit uniquement ses Job Templates autoris\xe9s\r\n    \u2193\r\n\ud83c\udfaf Clique sur "Deploy Java Application"\r\n    \u2193\r\n\ud83d\udccb Remplit le Survey:\r\n    - Environment: staging \u2705 (autoris\xe9)\r\n    - Environment: production \u274c (bloqu\xe9 par RBAC)\r\n    \u2193\r\n\ud83d\ude80 Lance le job\r\n    \u2193\r\n\ud83d\udcca Voit les logs en temps r\xe9el\r\n    \u2193\r\n\u2705 Re\xe7oit notification Slack\n'})}),"\n",(0,i.jsx)(n.h2,{id:"-monitoring-et-notifications",children:"\ud83d\udcca Monitoring et Notifications"}),"\n",(0,i.jsx)(n.h3,{id:"notifications-int\xe9gr\xe9es",children:"Notifications int\xe9gr\xe9es"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'Job Template: Deploy Production\r\n\r\nNotifications:\r\n  On Start:\r\n    - Slack: #deployments\r\n      Message: "\ud83d\ude80 D\xe9ploiement production d\xe9marr\xe9 par @{username}"\r\n      \r\n  On Success:\r\n    - Slack: #deployments\r\n      Message: "\u2705 D\xe9ploiement r\xe9ussi en {duration}"\r\n    - Email: ops-team@example.com\r\n    - Webhook: https://monitoring.example.com/deployment-success\r\n    \r\n  On Failure:\r\n    - Slack: #alerts\r\n      Message: "\u274c D\xc9PLOIEMENT \xc9CHOU\xc9 ! @channel"\r\n    - PagerDuty: Incident cr\xe9ation\r\n    - Email: ops-team@example.com (urgent)\n'})}),"\n",(0,i.jsx)(n.h3,{id:"m\xe9triques-prometheus",children:"M\xe9triques Prometheus"}),"\n",(0,i.jsx)(n.p,{children:"AWX expose des m\xe9triques :"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'# Nombre de jobs ex\xe9cut\xe9s\r\nawx_jobs_total{status="successful"} 1247\r\nawx_jobs_total{status="failed"} 23\r\n\r\n# Dur\xe9e moyenne des jobs\r\nawx_job_duration_seconds{template="deploy-java"} 156.3\r\n\r\n# Jobs en cours\r\nawx_jobs_running 3\n'})}),"\n",(0,i.jsx)(n.h2,{id:"-cas-dusage-r\xe9els",children:"\ud83c\udfaf Cas d'usage r\xe9els"}),"\n",(0,i.jsx)(n.h3,{id:"1-onboarding-nouveau-serveur",children:"1. Onboarding nouveau serveur"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Sans AWX"})," :"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Process manuel\r\n1. Se connecter en SSH\r\n2. Installer packages\r\n3. Configurer firewall\r\n4. Installer monitoring\r\n5. Configurer logs\r\n6. Ajouter \xe0 l'inventaire\r\n\u2192 ~2 heures par serveur\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Avec AWX"})," :"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# Job Template: "Bootstrap New Server"\r\n1. Ajouter IP dans inventory dynamique\r\n2. Lancer job "Bootstrap New Server"\r\n3. AWX fait tout automatiquement\r\n\u2192 ~5 minutes, reproductible\n'})}),"\n",(0,i.jsx)(n.h3,{id:"2-patch-tuesday-mises-\xe0-jour-mensuelles",children:"2. Patch Tuesday (mises \xe0 jour mensuelles)"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Workflow AWX"})," :"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Patch Management Workflow:\r\n1. Take snapshot of all VMs (AWS/Azure/GCP)\r\n2. Update packages on 10% of servers (canary)\r\n3. Wait 1 hour + monitoring\r\n4. If OK \u2192 Update remaining 90% by batches of 30%\r\n5. If KO \u2192 Rollback snapshots + Alert\n"})}),"\n",(0,i.jsx)(n.h3,{id:"3-dr-disaster-recovery-test",children:"3. DR (Disaster Recovery) Test"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Job Template schedul\xe9 (1er dimanche du mois)"})," :"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"Name: DR Test - Failover to Azure\r\nSchedule: 0 2 * * 0  # 2h du matin, tous les dimanches\r\n\r\nSteps:\r\n  1. Backup production (AWS)\r\n  2. Deploy to DR site (Azure)\r\n  3. Smoke tests\r\n  4. Generate DR report\r\n  5. Destroy DR environment\r\n  6. Slack notification avec rapport\n"})}),"\n",(0,i.jsx)(n.h2,{id:"-avantages-pour-l\xe9quipe",children:"\ud83d\udcc8 Avantages pour l'\xe9quipe"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Persona"}),(0,i.jsx)(n.th,{children:"B\xe9n\xe9fice AWX"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"DevOps"})}),(0,i.jsx)(n.td,{children:"API pour automatisation, historique complet, workflows"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"D\xe9veloppeurs"})}),(0,i.jsx)(n.td,{children:"Self-service pour d\xe9ployer (avec garde-fous RBAC)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Ops"})}),(0,i.jsx)(n.td,{children:"Vue centralis\xe9e, notifications, rollback facile"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Managers"})}),(0,i.jsx)(n.td,{children:"Dashboard, m\xe9triques, audit trail"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Security"})}),(0,i.jsx)(n.td,{children:"Credentials s\xe9curis\xe9s, audit complet, RBAC"})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"-pour-aller-plus-loin",children:"\ud83d\ude80 Pour aller plus loin"}),"\n",(0,i.jsx)(n.h3,{id:"int\xe9grations-avanc\xe9es",children:"Int\xe9grations avanc\xe9es"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"ServiceNow"})," : Cr\xe9ation automatique de Change Requests"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Jira"})," : Mise \xe0 jour des tickets apr\xe8s d\xe9ploiement"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"HashiCorp Vault"})," : Rotation automatique des secrets"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Git"})," : Approval process avec Merge Requests"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Terraform Cloud"})," : AWX lance Terraform pour provisionner puis configure"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"ansible-collections-dans-awx",children:"Ansible Collections dans AWX"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"# requirements.yml dans le Project Git\r\ncollections:\r\n  - name: community.general\r\n  - name: ansible.posix\r\n  - name: amazon.aws\r\n  - name: azure.azcollection\r\n  - name: google.cloud\n"})}),"\n",(0,i.jsx)(n.p,{children:"AWX installe automatiquement ces collections avant l'ex\xe9cution ! \ud83d\udce6"}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"AWX transforme Ansible en plateforme d'automatisation d'entreprise ! \ud83c\udfae"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Id\xe9al pour orchestrer l'infrastructure multi-cloud \xe0 grande \xe9chelle ! \ud83c\udf0d"})})]})}function u(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>t,x:()=>l});var s=r(6540);const i={},a=s.createContext(i);function t(e){const n=s.useContext(a);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),s.createElement(a.Provider,{value:n},e.children)}}}]);