"use strict";(globalThis.webpackChunkdocusaurus_poc=globalThis.webpackChunkdocusaurus_poc||[]).push([[9166],{2876:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>o,contentTitle:()=>l,default:()=>c,frontMatter:()=>a,metadata:()=>s,toc:()=>p});const s=JSON.parse('{"id":"development/java/web-layer/map-struct","title":"MapStruct - Guide pratique","description":"Introduction","source":"@site/docs/development/java/web-layer/map-struct.md","sourceDirName":"development/java/web-layer","slug":"/development/java/web-layer/map-struct","permalink":"/docs/development/java/web-layer/map-struct","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/development/java/web-layer/map-struct.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"docs","previous":{"title":"G\xe9n\xe9ration API & DTO avec OpenAPI en Java","permalink":"/docs/development/java/web-layer/open-api"},"next":{"title":"Couche donn\xe9es","permalink":"/docs/development/java/data-layer/"}}');var t=n(4848),i=n(8453);const a={sidebar_position:3},l="MapStruct - Guide pratique",o={},p=[{value:"Introduction",id:"introduction",level:2},{value:"Installation",id:"installation",level:2},{value:"D\xe9pendances Maven",id:"d\xe9pendances-maven",level:3},{value:"Utilisation de base",id:"utilisation-de-base",level:2},{value:"1. Mapper simple",id:"1-mapper-simple",level:3},{value:"Mappings personnalis\xe9s",id:"mappings-personnalis\xe9s",level:2},{value:"1. Champs avec noms diff\xe9rents",id:"1-champs-avec-noms-diff\xe9rents",level:3},{value:"2. Ignorer certains champs",id:"2-ignorer-certains-champs",level:3},{value:"3. Valeurs par d\xe9faut",id:"3-valeurs-par-d\xe9faut",level:3},{value:"4. Expressions personnalis\xe9es",id:"4-expressions-personnalis\xe9es",level:3},{value:"Mappings de collections",id:"mappings-de-collections",level:2},{value:"1. Mapper des relations simples",id:"1-mapper-des-relations-simples",level:3},{value:"2. Utiliser d&#39;autres mappers",id:"2-utiliser-dautres-mappers",level:3},{value:"Mise \xe0 jour d&#39;entit\xe9s existantes",id:"mise-\xe0-jour-dentit\xe9s-existantes",level:2},{value:"@MappingTarget pour update",id:"mappingtarget-pour-update",level:3},{value:"M\xe9thodes personnalis\xe9es",id:"m\xe9thodes-personnalis\xe9es",level:2},{value:"@Named pour r\xe9utiliser des m\xe9thodes",id:"named-pour-r\xe9utiliser-des-m\xe9thodes",level:3},{value:"Mappings bidirectionnels",id:"mappings-bidirectionnels",level:2},{value:"G\xe9rer les relations parent-enfant",id:"g\xe9rer-les-relations-parent-enfant",level:3},{value:"Configuration avanc\xe9e",id:"configuration-avanc\xe9e",level:2},{value:"Strat\xe9gies de null",id:"strat\xe9gies-de-null",level:3},{value:"Politique de mapping non d\xe9fini",id:"politique-de-mapping-non-d\xe9fini",level:3},{value:"Exemples pratiques",id:"exemples-pratiques",level:2},{value:"Mapper avec transformations",id:"mapper-avec-transformations",level:3},{value:"Mapper avec dates",id:"mapper-avec-dates",level:3},{value:"G\xe9n\xe9ration et compilation",id:"g\xe9n\xe9ration-et-compilation",level:2},{value:"Voir le code g\xe9n\xe9r\xe9",id:"voir-le-code-g\xe9n\xe9r\xe9",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Probl\xe8me : Mapper non inject\xe9",id:"probl\xe8me--mapper-non-inject\xe9",level:3},{value:"Probl\xe8me : Lombok + MapStruct",id:"probl\xe8me--lombok--mapstruct",level:3},{value:"Probl\xe8me : IntelliJ ne reconna\xeet pas le mapper",id:"probl\xe8me--intellij-ne-reconna\xeet-pas-le-mapper",level:3},{value:"Bonnes pratiques",id:"bonnes-pratiques",level:2},{value:"\u2705 \xc0 faire",id:"-\xe0-faire",level:3},{value:"\u274c \xc0 \xe9viter",id:"-\xe0-\xe9viter",level:3},{value:"Checklist",id:"checklist",level:2},{value:"Ressources",id:"ressources",level:2}];function d(e){const r={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",input:"input",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.header,{children:(0,t.jsx)(r.h1,{id:"mapstruct---guide-pratique",children:"MapStruct - Guide pratique"})}),"\n",(0,t.jsx)(r.h2,{id:"introduction",children:"Introduction"}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.strong,{children:"MapStruct"})," est un g\xe9n\xe9rateur de code qui simplifie la conversion entre objets Java (Entit\xe9s \u2194 DTOs). Il g\xe9n\xe8re le code de mapping au moment de la compilation, ce qui le rend performant et type-safe."]}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.strong,{children:"Pourquoi MapStruct ?"})}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsx)(r.li,{children:"\u2705 G\xe9n\xe9ration de code \xe0 la compilation (pas de r\xe9flexion)"}),"\n",(0,t.jsx)(r.li,{children:"\u2705 Performance optimale"}),"\n",(0,t.jsx)(r.li,{children:"\u2705 Type-safe (erreurs d\xe9tect\xe9es \xe0 la compilation)"}),"\n",(0,t.jsx)(r.li,{children:"\u2705 Code lisible et debuggable"}),"\n",(0,t.jsx)(r.li,{children:"\u2705 Moins de code boilerplate"}),"\n"]}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h2,{id:"installation",children:"Installation"}),"\n",(0,t.jsx)(r.h3,{id:"d\xe9pendances-maven",children:"D\xe9pendances Maven"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-xml",children:"<properties>\r\n    <mapstruct.version>1.5.5.Final</mapstruct.version>\r\n    <lombok.version>1.18.30</lombok.version>\r\n</properties>\r\n\r\n<dependencies>\r\n    \x3c!-- MapStruct --\x3e\r\n    <dependency>\r\n        <groupId>org.mapstruct</groupId>\r\n        <artifactId>mapstruct</artifactId>\r\n        <version>${mapstruct.version}</version>\r\n    </dependency>\r\n</dependencies>\r\n\r\n<build>\r\n    <plugins>\r\n        <plugin>\r\n            <groupId>org.apache.maven.plugins</groupId>\r\n            <artifactId>maven-compiler-plugin</artifactId>\r\n            <version>3.11.0</version>\r\n            <configuration>\r\n                <source>17</source>\r\n                <target>17</target>\r\n                <annotationProcessorPaths>\r\n                    \x3c!-- MapStruct processor --\x3e\r\n                    <path>\r\n                        <groupId>org.mapstruct</groupId>\r\n                        <artifactId>mapstruct-processor</artifactId>\r\n                        <version>${mapstruct.version}</version>\r\n                    </path>\r\n                    \x3c!-- Lombok (si utilis\xe9) --\x3e\r\n                    <path>\r\n                        <groupId>org.projectlombok</groupId>\r\n                        <artifactId>lombok</artifactId>\r\n                        <version>${lombok.version}</version>\r\n                    </path>\r\n                    \x3c!-- Binding Lombok + MapStruct --\x3e\r\n                    <path>\r\n                        <groupId>org.projectlombok</groupId>\r\n                        <artifactId>lombok-mapstruct-binding</artifactId>\r\n                        <version>0.2.0</version>\r\n                    </path>\r\n                </annotationProcessorPaths>\r\n            </configuration>\r\n        </plugin>\r\n    </plugins>\r\n</build>\n"})}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h2,{id:"utilisation-de-base",children:"Utilisation de base"}),"\n",(0,t.jsx)(r.h3,{id:"1-mapper-simple",children:"1. Mapper simple"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-java",children:"package com.company.project.model.mapper;\r\n\r\nimport com.company.project.model.dto.UserDTO;\r\nimport com.company.project.model.entity.User;\r\nimport org.mapstruct.Mapper;\r\nimport org.mapstruct.MappingConstants;\r\n\r\n@Mapper(componentModel = MappingConstants.ComponentModel.SPRING)\r\npublic interface UserMapper {\r\n\r\n    // Entit\xe9 \u2192 DTO\r\n    UserDTO toDTO(User entity);\r\n\r\n    // DTO \u2192 Entit\xe9\r\n    User toEntity(UserDTO dto);\r\n\r\n    // Liste d'entit\xe9s \u2192 Liste de DTOs\r\n    List<UserDTO> toDTOList(List<User> entities);\r\n}\n"})}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.strong,{children:"Utilisation dans un service :"})}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-java",children:'@Service\r\n@RequiredArgsConstructor\r\npublic class UserService {\r\n\r\n    private final UserRepository userRepository;\r\n    private final UserMapper userMapper;\r\n\r\n    public UserDTO findById(UUID id) {\r\n        User user = userRepository.findById(id)\r\n                .orElseThrow(() -> new ResourceNotFoundException("User not found"));\r\n        return userMapper.toDTO(user);\r\n    }\r\n\r\n    @Transactional\r\n    public UserDTO create(UserDTO dto) {\r\n        User entity = userMapper.toEntity(dto);\r\n        User saved = userRepository.save(entity);\r\n        return userMapper.toDTO(saved);\r\n    }\r\n}\n'})}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h2,{id:"mappings-personnalis\xe9s",children:"Mappings personnalis\xe9s"}),"\n",(0,t.jsx)(r.h3,{id:"1-champs-avec-noms-diff\xe9rents",children:"1. Champs avec noms diff\xe9rents"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-java",children:'@Mapper(componentModel = "spring")\r\npublic interface ProductMapper {\r\n\r\n    @Mapping(source = "productName", target = "name")\r\n    @Mapping(source = "productPrice", target = "price")\r\n    ProductDTO toDTO(Product entity);\r\n}\n'})}),"\n",(0,t.jsx)(r.h3,{id:"2-ignorer-certains-champs",children:"2. Ignorer certains champs"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-java",children:'@Mapper(componentModel = "spring")\r\npublic interface UserMapper {\r\n\r\n    @Mapping(target = "password", ignore = true)\r\n    @Mapping(target = "createdAt", ignore = true)\r\n    @Mapping(target = "updatedAt", ignore = true)\r\n    User toEntity(UserDTO dto);\r\n}\n'})}),"\n",(0,t.jsx)(r.h3,{id:"3-valeurs-par-d\xe9faut",children:"3. Valeurs par d\xe9faut"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-java",children:'@Mapper(componentModel = "spring")\r\npublic interface OrderMapper {\r\n\r\n    @Mapping(target = "status", constant = "PENDING")\r\n    @Mapping(target = "active", defaultValue = "true")\r\n    Order toEntity(OrderDTO dto);\r\n}\n'})}),"\n",(0,t.jsx)(r.h3,{id:"4-expressions-personnalis\xe9es",children:"4. Expressions personnalis\xe9es"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-java",children:'@Mapper(componentModel = "spring", imports = {UUID.class, LocalDateTime.class})\r\npublic interface UserMapper {\r\n\r\n    @Mapping(target = "id", expression = "java(UUID.randomUUID())")\r\n    @Mapping(target = "createdAt", expression = "java(LocalDateTime.now())")\r\n    User toEntity(UserDTO dto);\r\n}\n'})}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h2,{id:"mappings-de-collections",children:"Mappings de collections"}),"\n",(0,t.jsx)(r.h3,{id:"1-mapper-des-relations-simples",children:"1. Mapper des relations simples"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-java",children:'@Mapper(componentModel = "spring")\r\npublic interface UserMapper {\r\n\r\n    // MapStruct map automatiquement les collections\r\n    @Mapping(target = "roleNames", source = "roles")\r\n    UserDTO toDTO(User entity);\r\n\r\n    // M\xe9thode personnalis\xe9e pour mapper Role \u2192 String\r\n    default String mapRole(Role role) {\r\n        return role != null ? role.getName() : null;\r\n    }\r\n}\n'})}),"\n",(0,t.jsx)(r.h3,{id:"2-utiliser-dautres-mappers",children:"2. Utiliser d'autres mappers"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-java",children:'@Mapper(componentModel = "spring", uses = {AddressMapper.class, RoleMapper.class})\r\npublic interface UserMapper {\r\n\r\n    // MapStruct utilise automatiquement AddressMapper et RoleMapper\r\n    UserDTO toDTO(User entity);\r\n}\n'})}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h2,{id:"mise-\xe0-jour-dentit\xe9s-existantes",children:"Mise \xe0 jour d'entit\xe9s existantes"}),"\n",(0,t.jsx)(r.h3,{id:"mappingtarget-pour-update",children:"@MappingTarget pour update"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-java",children:'@Mapper(componentModel = "spring")\r\npublic interface UserMapper {\r\n\r\n    UserDTO toDTO(User entity);\r\n\r\n    User toEntity(UserDTO dto);\r\n\r\n    // Mise \xe0 jour d\'une entit\xe9 existante\r\n    @Mapping(target = "id", ignore = true)\r\n    @Mapping(target = "createdAt", ignore = true)\r\n    @Mapping(target = "password", ignore = true)\r\n    void updateEntityFromDTO(UserDTO dto, @MappingTarget User entity);\r\n}\n'})}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.strong,{children:"Utilisation :"})}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-java",children:'@Service\r\n@RequiredArgsConstructor\r\npublic class UserService {\r\n\r\n    private final UserRepository userRepository;\r\n    private final UserMapper userMapper;\r\n\r\n    @Transactional\r\n    public UserDTO update(UUID id, UserDTO dto) {\r\n        User entity = userRepository.findById(id)\r\n                .orElseThrow(() -> new ResourceNotFoundException("User not found"));\r\n        \r\n        // Met \xe0 jour l\'entit\xe9 existante\r\n        userMapper.updateEntityFromDTO(dto, entity);\r\n        \r\n        User updated = userRepository.save(entity);\r\n        return userMapper.toDTO(updated);\r\n    }\r\n}\n'})}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h2,{id:"m\xe9thodes-personnalis\xe9es",children:"M\xe9thodes personnalis\xe9es"}),"\n",(0,t.jsx)(r.h3,{id:"named-pour-r\xe9utiliser-des-m\xe9thodes",children:"@Named pour r\xe9utiliser des m\xe9thodes"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-java",children:'@Mapper(componentModel = "spring")\r\npublic interface UserMapper {\r\n\r\n    @Mapping(target = "roles", source = "roles", qualifiedByName = "mapRolesToStrings")\r\n    UserDTO toDTO(User entity);\r\n\r\n    @Named("mapRolesToStrings")\r\n    default Set<String> mapRolesToStrings(Set<Role> roles) {\r\n        if (roles == null) {\r\n            return Collections.emptySet();\r\n        }\r\n        return roles.stream()\r\n                .map(Role::getName)\r\n                .collect(Collectors.toSet());\r\n    }\r\n\r\n    @Named("mapStringsToRoles")\r\n    default Set<Role> mapStringsToRoles(Set<String> roleNames) {\r\n        // Logique personnalis\xe9e\r\n        return roleNames.stream()\r\n                .map(name -> Role.builder().name(name).build())\r\n                .collect(Collectors.toSet());\r\n    }\r\n}\n'})}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h2,{id:"mappings-bidirectionnels",children:"Mappings bidirectionnels"}),"\n",(0,t.jsx)(r.h3,{id:"g\xe9rer-les-relations-parent-enfant",children:"G\xe9rer les relations parent-enfant"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-java",children:'@Mapper(componentModel = "spring")\r\npublic interface OrderMapper {\r\n\r\n    @Mapping(target = "items", source = "items")\r\n    OrderDTO toDTO(Order entity);\r\n\r\n    @Mapping(target = "order", ignore = true) // \xc9vite la boucle infinie\r\n    OrderItemDTO itemToDTO(OrderItem item);\r\n}\n'})}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h2,{id:"configuration-avanc\xe9e",children:"Configuration avanc\xe9e"}),"\n",(0,t.jsx)(r.h3,{id:"strat\xe9gies-de-null",children:"Strat\xe9gies de null"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-java",children:'@Mapper(\r\n    componentModel = "spring",\r\n    nullValuePropertyMappingStrategy = NullValuePropertyMappingStrategy.IGNORE,\r\n    nullValueCheckStrategy = NullValueCheckStrategy.ALWAYS\r\n)\r\npublic interface UserMapper {\r\n    // Si un champ du DTO est null, il n\'est pas mapp\xe9 (garde la valeur existante)\r\n    void updateEntityFromDTO(UserDTO dto, @MappingTarget User entity);\r\n}\n'})}),"\n",(0,t.jsx)(r.h3,{id:"politique-de-mapping-non-d\xe9fini",children:"Politique de mapping non d\xe9fini"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-java",children:'@Mapper(\r\n    componentModel = "spring",\r\n    unmappedTargetPolicy = ReportingPolicy.IGNORE  // IGNORE, WARN, ou ERROR\r\n)\r\npublic interface UserMapper {\r\n    UserDTO toDTO(User entity);\r\n}\n'})}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h2,{id:"exemples-pratiques",children:"Exemples pratiques"}),"\n",(0,t.jsx)(r.h3,{id:"mapper-avec-transformations",children:"Mapper avec transformations"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-java",children:'@Mapper(componentModel = "spring")\r\npublic interface ProductMapper {\r\n\r\n    @Mapping(target = "price", source = "priceInCents", qualifiedByName = "centsToEuros")\r\n    @Mapping(target = "fullName", expression = "java(entity.getName() + \\" - \\" + entity.getCategory())")\r\n    ProductDTO toDTO(Product entity);\r\n\r\n    @Named("centsToEuros")\r\n    default BigDecimal centsToEuros(Long cents) {\r\n        return cents != null ? BigDecimal.valueOf(cents).divide(BigDecimal.valueOf(100)) : null;\r\n    }\r\n}\n'})}),"\n",(0,t.jsx)(r.h3,{id:"mapper-avec-dates",children:"Mapper avec dates"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-java",children:'@Mapper(componentModel = "spring")\r\npublic interface EventMapper {\r\n\r\n    @Mapping(target = "eventDate", source = "date", dateFormat = "yyyy-MM-dd HH:mm:ss")\r\n    EventDTO toDTO(Event entity);\r\n\r\n    @Mapping(target = "date", source = "eventDate", dateFormat = "yyyy-MM-dd HH:mm:ss")\r\n    Event toEntity(EventDTO dto);\r\n}\n'})}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h2,{id:"g\xe9n\xe9ration-et-compilation",children:"G\xe9n\xe9ration et compilation"}),"\n",(0,t.jsx)(r.h3,{id:"voir-le-code-g\xe9n\xe9r\xe9",children:"Voir le code g\xe9n\xe9r\xe9"}),"\n",(0,t.jsxs)(r.p,{children:["Apr\xe8s compilation (",(0,t.jsx)(r.code,{children:"mvn compile"}),"), les impl\xe9mentations g\xe9n\xe9r\xe9es se trouvent dans :"]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:"target/generated-sources/annotations/com/company/project/model/mapper/UserMapperImpl.java\n"})}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.strong,{children:"Exemple de code g\xe9n\xe9r\xe9 :"})}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-java",children:"@Component\r\npublic class UserMapperImpl implements UserMapper {\r\n\r\n    @Override\r\n    public UserDTO toDTO(User entity) {\r\n        if (entity == null) {\r\n            return null;\r\n        }\r\n\r\n        UserDTO.UserDTOBuilder userDTO = UserDTO.builder();\r\n\r\n        userDTO.id(entity.getId());\r\n        userDTO.email(entity.getEmail());\r\n        userDTO.firstName(entity.getFirstName());\r\n        userDTO.lastName(entity.getLastName());\r\n        // ... autres champs\r\n\r\n        return userDTO.build();\r\n    }\r\n\r\n    // ... autres m\xe9thodes\r\n}\n"})}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,t.jsx)(r.h3,{id:"probl\xe8me--mapper-non-inject\xe9",children:"Probl\xe8me : Mapper non inject\xe9"}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.strong,{children:"Erreur :"})," ",(0,t.jsx)(r.code,{children:"No qualifying bean of type 'UserMapper'"})]}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.strong,{children:"Solution :"})," V\xe9rifier que :"]}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:'componentModel = "spring"'})," est pr\xe9sent dans ",(0,t.jsx)(r.code,{children:"@Mapper"})]}),"\n",(0,t.jsxs)(r.li,{children:["Le projet est bien compil\xe9 (",(0,t.jsx)(r.code,{children:"mvn clean compile"}),")"]}),"\n",(0,t.jsx)(r.li,{children:"Les annotation processors sont configur\xe9s dans le pom.xml"}),"\n"]}),"\n",(0,t.jsx)(r.h3,{id:"probl\xe8me--lombok--mapstruct",children:"Probl\xe8me : Lombok + MapStruct"}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.strong,{children:"Solution :"})," Ajouter le binding :"]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-xml",children:"<path>\r\n    <groupId>org.projectlombok</groupId>\r\n    <artifactId>lombok-mapstruct-binding</artifactId>\r\n    <version>0.2.0</version>\r\n</path>\n"})}),"\n",(0,t.jsx)(r.h3,{id:"probl\xe8me--intellij-ne-reconna\xeet-pas-le-mapper",children:"Probl\xe8me : IntelliJ ne reconna\xeet pas le mapper"}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.strong,{children:"Solution :"})}),"\n",(0,t.jsxs)(r.ol,{children:["\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"File"})," \u2192 ",(0,t.jsx)(r.code,{children:"Settings"})," \u2192 ",(0,t.jsx)(r.code,{children:"Build, Execution, Deployment"})," \u2192 ",(0,t.jsx)(r.code,{children:"Compiler"})," \u2192 ",(0,t.jsx)(r.code,{children:"Annotation Processors"})]}),"\n",(0,t.jsx)(r.li,{children:'Cocher "Enable annotation processing"'}),"\n",(0,t.jsx)(r.li,{children:"Rebuild le projet"}),"\n"]}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h2,{id:"bonnes-pratiques",children:"Bonnes pratiques"}),"\n",(0,t.jsx)(r.h3,{id:"-\xe0-faire",children:"\u2705 \xc0 faire"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-java",children:'// Utiliser componentModel spring\r\n@Mapper(componentModel = "spring")\r\n\r\n// Cr\xe9er des mappers d\xe9di\xe9s par entit\xe9\r\nUserMapper, ProductMapper, OrderMapper\r\n\r\n// Ignorer les champs sensibles\r\n@Mapping(target = "password", ignore = true)\r\n\r\n// Utiliser @MappingTarget pour les updates\r\nvoid updateEntityFromDTO(DTO dto, @MappingTarget Entity entity);\r\n\r\n// Documenter les mappings complexes\r\n@Mapping(target = "fullPrice", source = "price") // Price includes VAT\n'})}),"\n",(0,t.jsx)(r.h3,{id:"-\xe0-\xe9viter",children:"\u274c \xc0 \xe9viter"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-java",children:"// Ne pas mapper directement dans les services\r\n// \u274c MAUVAIS\r\npublic UserDTO findById(UUID id) {\r\n    User user = repository.findById(id).orElseThrow();\r\n    UserDTO dto = new UserDTO();\r\n    dto.setId(user.getId());\r\n    dto.setEmail(user.getEmail());\r\n    // ... laborieux et source d'erreurs\r\n    return dto;\r\n}\r\n\r\n// \u2705 BON\r\npublic UserDTO findById(UUID id) {\r\n    User user = repository.findById(id).orElseThrow();\r\n    return userMapper.toDTO(user);\r\n}\r\n\r\n// Ne pas mapper des entit\xe9s JPA avec des relations LAZY non initialis\xe9es\r\n// Utiliser JOIN FETCH dans les requ\xeates ou g\xe9rer les mappings sp\xe9cifiquement\n"})}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h2,{id:"checklist",children:"Checklist"}),"\n",(0,t.jsxs)(r.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(r.li,{className:"task-list-item",children:[(0,t.jsx)(r.input,{type:"checkbox",disabled:!0})," ","D\xe9pendances MapStruct ajout\xe9es"]}),"\n",(0,t.jsxs)(r.li,{className:"task-list-item",children:[(0,t.jsx)(r.input,{type:"checkbox",disabled:!0})," ","Annotation processors configur\xe9s"]}),"\n",(0,t.jsxs)(r.li,{className:"task-list-item",children:[(0,t.jsx)(r.input,{type:"checkbox",disabled:!0})," ","Mapper cr\xe9\xe9 avec ",(0,t.jsx)(r.code,{children:'@Mapper(componentModel = "spring")'})]}),"\n",(0,t.jsxs)(r.li,{className:"task-list-item",children:[(0,t.jsx)(r.input,{type:"checkbox",disabled:!0})," ","Mapper inject\xe9 dans les services avec ",(0,t.jsx)(r.code,{children:"@RequiredArgsConstructor"})]}),"\n",(0,t.jsxs)(r.li,{className:"task-list-item",children:[(0,t.jsx)(r.input,{type:"checkbox",disabled:!0})," ","Champs sensibles ignor\xe9s (password, etc.)"]}),"\n",(0,t.jsxs)(r.li,{className:"task-list-item",children:[(0,t.jsx)(r.input,{type:"checkbox",disabled:!0})," ","Projet compil\xe9 : ",(0,t.jsx)(r.code,{children:"mvn clean compile"})]}),"\n",(0,t.jsxs)(r.li,{className:"task-list-item",children:[(0,t.jsx)(r.input,{type:"checkbox",disabled:!0})," ","Code g\xe9n\xe9r\xe9 v\xe9rifi\xe9 dans ",(0,t.jsx)(r.code,{children:"target/generated-sources"})]}),"\n"]}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h2,{id:"ressources",children:"Ressources"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsx)(r.li,{children:(0,t.jsx)(r.a,{href:"https://mapstruct.org/documentation/stable/reference/html/",children:"Documentation officielle MapStruct"})}),"\n",(0,t.jsx)(r.li,{children:(0,t.jsx)(r.a,{href:"https://github.com/mapstruct/mapstruct-examples",children:"MapStruct Examples"})}),"\n",(0,t.jsx)(r.li,{children:(0,t.jsx)(r.a,{href:"https://www.baeldung.com/mapstruct",children:"Baeldung - MapStruct Guide"})}),"\n"]})]})}function c(e={}){const{wrapper:r}={...(0,i.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,r,n)=>{n.d(r,{R:()=>a,x:()=>l});var s=n(6540);const t={},i=s.createContext(t);function a(e){const r=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function l(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),s.createElement(i.Provider,{value:r},e.children)}}}]);