"use strict";(globalThis.webpackChunkdocusaurus_poc=globalThis.webpackChunkdocusaurus_poc||[]).push([[5768],{8453:(e,r,n)=>{n.d(r,{R:()=>a,x:()=>l});var s=n(6540);const i={},t=s.createContext(i);function a(e){const r=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function l(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),s.createElement(t.Provider,{value:r},e.children)}},9455:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>o,contentTitle:()=>l,default:()=>u,frontMatter:()=>a,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"microservices/patterns/bff","title":"Backend for Frontend (BFF)","description":"Concept","source":"@site/docs/microservices/patterns/bff.md","sourceDirName":"microservices/patterns","slug":"/microservices/patterns/bff","permalink":"/docs/microservices/patterns/bff","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/microservices/patterns/bff.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docs","previous":{"title":"Patterns","permalink":"/docs/microservices/patterns/"},"next":{"title":"Circuit Breaker Pattern","permalink":"/docs/microservices/patterns/circuit-breaker"}}');var i=n(4848),t=n(8453);const a={},l="Backend for Frontend (BFF)",o={},d=[{value:"Concept",id:"concept",level:2},{value:"\ud83c\udfaf Probl\xe8me r\xe9solu",id:"-probl\xe8me-r\xe9solu",level:2},{value:"Sans BFF",id:"sans-bff",level:3},{value:"Avec BFF",id:"avec-bff",level:3},{value:"\ud83c\udfd7\ufe0f Architecture",id:"\ufe0f-architecture",level:2},{value:"Structure typique",id:"structure-typique",level:3},{value:"\ud83d\udcbb Exemples",id:"-exemples",level:2},{value:"Endpoint BFF Web",id:"endpoint-bff-web",level:3},{value:"Endpoint BFF Mobile",id:"endpoint-bff-mobile",level:3},{value:"\ud83c\udfa8 Cas d&#39;usage",id:"-cas-dusage",level:2},{value:"1. Optimisation r\xe9seau mobile",id:"1-optimisation-r\xe9seau-mobile",level:3},{value:"2. Adaptation du format",id:"2-adaptation-du-format",level:3},{value:"3. Logique m\xe9tier sp\xe9cifique",id:"3-logique-m\xe9tier-sp\xe9cifique",level:3},{value:"\ud83d\udd27 Technologies",id:"-technologies",level:2},{value:"Node.js / Express",id:"nodejs--express",level:3},{value:"GraphQL",id:"graphql",level:3},{value:"Spring Boot (Java)",id:"spring-boot-java",level:3},{value:"\ud83d\udee1\ufe0f S\xe9curit\xe9",id:"\ufe0f-s\xe9curit\xe9",level:2},{value:"Authentication d\xe9l\xe9gu\xe9e",id:"authentication-d\xe9l\xe9gu\xe9e",level:3},{value:"Rate limiting par client",id:"rate-limiting-par-client",level:3},{value:"\u2696\ufe0f BFF vs API Gateway",id:"\ufe0f-bff-vs-api-gateway",level:2},{value:"\u26a0\ufe0f Pi\xe8ges \xe0 \xe9viter",id:"\ufe0f-pi\xe8ges-\xe0-\xe9viter",level:2},{value:"1. Duplication excessive",id:"1-duplication-excessive",level:3},{value:"2. BFF trop \xe9pais",id:"2-bff-trop-\xe9pais",level:3},{value:"3. Un BFF pour tout",id:"3-un-bff-pour-tout",level:3},{value:"\u2705 Bonnes pratiques",id:"-bonnes-pratiques",level:2},{value:"\ud83d\udcca M\xe9triques",id:"-m\xe9triques",level:2},{value:"\ud83e\uddea Tests",id:"-tests",level:2},{value:"Test d&#39;agr\xe9gation",id:"test-dagr\xe9gation",level:3},{value:"Ressources",id:"ressources",level:2}];function c(e){const r={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.header,{children:(0,i.jsx)(r.h1,{id:"backend-for-frontend-bff",children:"Backend for Frontend (BFF)"})}),"\n",(0,i.jsx)(r.h2,{id:"concept",children:"Concept"}),"\n",(0,i.jsxs)(r.p,{children:["Le pattern ",(0,i.jsx)(r.strong,{children:"BFF (Backend for Frontend)"})," consiste \xe0 cr\xe9er des backends s\xe9par\xe9s et sp\xe9cialis\xe9s pour chaque type de client (web, mobile, IoT, partenaires, etc.)."]}),"\n",(0,i.jsx)(r.admonition,{title:"Principe",type:"tip",children:(0,i.jsx)(r.p,{children:"Un BFF par type d'interface utilisateur pour optimiser l'exp\xe9rience de chaque client."})}),"\n",(0,i.jsx)(r.h2,{id:"-probl\xe8me-r\xe9solu",children:"\ud83c\udfaf Probl\xe8me r\xe9solu"}),"\n",(0,i.jsx)(r.h3,{id:"sans-bff",children:"Sans BFF"}),"\n",(0,i.jsx)(r.mermaid,{value:"graph LR\r\n    Web[Web App]\r\n    Mobile[Mobile App]\r\n    API[API Gateway unique]\r\n    S1[Service 1]\r\n    S2[Service 2]\r\n    S3[Service 3]\r\n    \r\n    Web --\x3e API\r\n    Mobile --\x3e API\r\n    API --\x3e S1\r\n    API --\x3e S2\r\n    API --\x3e S3"}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"Probl\xe8mes :"})}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"L'API doit satisfaire tous les clients \u2192 compromis"}),"\n",(0,i.jsx)(r.li,{children:"Mobile t\xe9l\xe9charge des donn\xe9es inutiles \u2192 consommation data/batterie"}),"\n",(0,i.jsx)(r.li,{children:"Web fait plusieurs appels \u2192 latence r\xe9seau"}),"\n",(0,i.jsx)(r.li,{children:"Logique de pr\xe9sentation dans les apps clientes \u2192 duplication"}),"\n"]}),"\n",(0,i.jsx)(r.h3,{id:"avec-bff",children:"Avec BFF"}),"\n",(0,i.jsx)(r.mermaid,{value:"graph LR\r\n    Web[Web App]\r\n    Mobile[Mobile App]\r\n    BFF_Web[BFF Web]\r\n    BFF_Mobile[BFF Mobile]\r\n    S1[Service 1]\r\n    S2[Service 2]\r\n    S3[Service 3]\r\n    \r\n    Web --\x3e BFF_Web\r\n    Mobile --\x3e BFF_Mobile\r\n    BFF_Web --\x3e S1\r\n    BFF_Web --\x3e S2\r\n    BFF_Mobile --\x3e S1\r\n    BFF_Mobile --\x3e S3"}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"Avantages :"})}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"Payload optimis\xe9 par client"}),"\n",(0,i.jsx)(r.li,{children:"Agr\xe9gation c\xf4t\xe9 serveur"}),"\n",(0,i.jsx)(r.li,{children:"Adaptation aux contraintes de chaque plateforme"}),"\n"]}),"\n",(0,i.jsx)(r.h2,{id:"\ufe0f-architecture",children:"\ud83c\udfd7\ufe0f Architecture"}),"\n",(0,i.jsx)(r.h3,{id:"structure-typique",children:"Structure typique"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{children:"\u251c\u2500\u2500 bff-web/\r\n\u2502   \u251c\u2500\u2500 endpoints/\r\n\u2502   \u2502   \u251c\u2500\u2500 dashboard.js\r\n\u2502   \u2502   \u2514\u2500\u2500 profile.js\r\n\u2502   \u2514\u2500\u2500 aggregators/\r\n\u2502       \u2514\u2500\u2500 user-aggregator.js\r\n\u251c\u2500\u2500 bff-mobile/\r\n\u2502   \u251c\u2500\u2500 endpoints/\r\n\u2502   \u2502   \u251c\u2500\u2500 home.js\r\n\u2502   \u2502   \u2514\u2500\u2500 feed.js\r\n\u2502   \u2514\u2500\u2500 transformers/\r\n\u2502       \u2514\u2500\u2500 mobile-transformer.js\r\n\u251c\u2500\u2500 bff-partner-api/\r\n\u2502   \u2514\u2500\u2500 endpoints/\r\n\u2502       \u2514\u2500\u2500 public-data.js\r\n\u2514\u2500\u2500 core-services/\r\n    \u251c\u2500\u2500 user-service/\r\n    \u251c\u2500\u2500 product-service/\r\n    \u2514\u2500\u2500 order-service/\n"})}),"\n",(0,i.jsx)(r.h2,{id:"-exemples",children:"\ud83d\udcbb Exemples"}),"\n",(0,i.jsx)(r.h3,{id:"endpoint-bff-web",children:"Endpoint BFF Web"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-javascript",children:"// bff-web/endpoints/dashboard.js\r\nrouter.get('/dashboard', async (req, res) => {\r\n  const userId = req.user.id;\r\n  \r\n  // Agr\xe9gation de plusieurs services\r\n  const [user, orders, recommendations, stats] = await Promise.all([\r\n    userService.getUser(userId),\r\n    orderService.getRecentOrders(userId),\r\n    recommendationService.getPersonalized(userId),\r\n    analyticsService.getUserStats(userId)\r\n  ]);\r\n  \r\n  // Format adapt\xe9 pour le web (d\xe9taill\xe9)\r\n  res.json({\r\n    user: {\r\n      name: user.fullName,\r\n      email: user.email,\r\n      avatar: user.profilePicture,\r\n      membership: user.membershipTier\r\n    },\r\n    recentOrders: orders.map(o => ({\r\n      id: o.id,\r\n      date: o.createdAt,\r\n      total: o.totalAmount,\r\n      items: o.items.length,\r\n      status: o.status\r\n    })),\r\n    recommendations: recommendations,\r\n    statistics: {\r\n      totalSpent: stats.totalAmount,\r\n      orderCount: stats.orderCount,\r\n      savedAmount: stats.discountTotal\r\n    }\r\n  });\r\n});\n"})}),"\n",(0,i.jsx)(r.h3,{id:"endpoint-bff-mobile",children:"Endpoint BFF Mobile"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-javascript",children:"// bff-mobile/endpoints/home.js\r\nrouter.get('/home', async (req, res) => {\r\n  const userId = req.user.id;\r\n  \r\n  // Uniquement les donn\xe9es essentielles pour mobile\r\n  const [user, lastOrder] = await Promise.all([\r\n    userService.getUser(userId),\r\n    orderService.getLastOrder(userId)\r\n  ]);\r\n  \r\n  // Format ultra-l\xe9ger pour mobile\r\n  res.json({\r\n    user: {\r\n      name: user.firstName, // Pr\xe9nom uniquement\r\n      points: user.loyaltyPoints\r\n    },\r\n    lastOrder: lastOrder ? {\r\n      id: lastOrder.id,\r\n      status: lastOrder.status,\r\n      eta: lastOrder.estimatedDelivery\r\n    } : null,\r\n    // Images optimis\xe9es pour mobile\r\n    banners: await getBanners({ size: 'mobile' })\r\n  });\r\n});\n"})}),"\n",(0,i.jsx)(r.h2,{id:"-cas-dusage",children:"\ud83c\udfa8 Cas d'usage"}),"\n",(0,i.jsx)(r.h3,{id:"1-optimisation-r\xe9seau-mobile",children:"1. Optimisation r\xe9seau mobile"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"Web :"})," 10 appels API pour charger une page\r\n",(0,i.jsx)(r.strong,{children:"Mobile BFF :"})," 1 appel agr\xe9g\xe9"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-javascript",children:"// Mobile BFF agr\xe8ge tout en un appel\r\nGET /bff/mobile/product/123\r\n\r\nResponse:\r\n{\r\n  product: {...},\r\n  reviews: [...],\r\n  relatedProducts: [...],\r\n  availability: {...}\r\n}\n"})}),"\n",(0,i.jsx)(r.h3,{id:"2-adaptation-du-format",children:"2. Adaptation du format"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-javascript",children:'// Web : donn\xe9es compl\xe8tes\r\n{\r\n  user: {\r\n    firstName: "John",\r\n    lastName: "Doe",\r\n    email: "john.doe@example.com",\r\n    address: {\r\n      street: "123 Main St",\r\n      city: "Paris",\r\n      postalCode: "75001",\r\n      country: "France"\r\n    },\r\n    phoneNumbers: [...]\r\n  }\r\n}\r\n\r\n// Mobile : donn\xe9es essentielles\r\n{\r\n  name: "John D.",\r\n  email: "john.doe@example.com"\r\n}\n'})}),"\n",(0,i.jsx)(r.h3,{id:"3-logique-m\xe9tier-sp\xe9cifique",children:"3. Logique m\xe9tier sp\xe9cifique"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-javascript",children:"// BFF Web : Fonctionnalit\xe9s avanc\xe9es\r\nrouter.post('/cart/bulk-add', async (req, res) => {\r\n  // Ajout en masse avec import CSV\r\n  await cartService.addMultipleItems(req.body.items);\r\n});\r\n\r\n// BFF Mobile : Fonctionnalit\xe9s simplifi\xe9es\r\nrouter.post('/cart/add', async (req, res) => {\r\n  // Ajout unitaire avec scan QR\r\n  await cartService.addItem(req.body.barcode);\r\n});\n"})}),"\n",(0,i.jsx)(r.h2,{id:"-technologies",children:"\ud83d\udd27 Technologies"}),"\n",(0,i.jsx)(r.h3,{id:"nodejs--express",children:"Node.js / Express"}),"\n",(0,i.jsx)(r.p,{children:"L\xe9ger, rapide, bon pour I/O intensif"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-javascript",children:"const express = require('express');\r\nconst app = express();\r\n\r\napp.get('/bff/products', async (req, res) => {\r\n  const products = await aggregateProducts();\r\n  res.json(transform(products, req.deviceType));\r\n});\n"})}),"\n",(0,i.jsx)(r.h3,{id:"graphql",children:"GraphQL"}),"\n",(0,i.jsx)(r.p,{children:"Flexible, client choisit les champs"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-graphql",children:"# BFF expos\xe9 en GraphQL\r\ntype Query {\r\n  dashboard: Dashboard\r\n}\r\n\r\ntype Dashboard {\r\n  user: User\r\n  orders: [Order]\r\n  recommendations: [Product]\r\n}\r\n\r\n# Client mobile demande moins de champs\r\nquery {\r\n  dashboard {\r\n    user { name points }\r\n    orders { id status }\r\n  }\r\n}\n"})}),"\n",(0,i.jsx)(r.h3,{id:"spring-boot-java",children:"Spring Boot (Java)"}),"\n",(0,i.jsx)(r.p,{children:"Pour environnements Java"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-java",children:'@RestController\r\n@RequestMapping("/bff/mobile")\r\npublic class MobileBFFController {\r\n    \r\n    @GetMapping("/home")\r\n    public HomeResponse getHome(@AuthenticationPrincipal User user) {\r\n        return homeAggregator.aggregate(user.getId());\r\n    }\r\n}\n'})}),"\n",(0,i.jsx)(r.h2,{id:"\ufe0f-s\xe9curit\xe9",children:"\ud83d\udee1\ufe0f S\xe9curit\xe9"}),"\n",(0,i.jsx)(r.h3,{id:"authentication-d\xe9l\xe9gu\xe9e",children:"Authentication d\xe9l\xe9gu\xe9e"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-javascript",children:"// BFF valide le token mais ne g\xe8re pas l'auth\r\nconst auth = async (req, res, next) => {\r\n  const token = req.headers.authorization;\r\n  const user = await authService.validateToken(token);\r\n  req.user = user;\r\n  next();\r\n};\r\n\r\napp.use(auth);\n"})}),"\n",(0,i.jsx)(r.h3,{id:"rate-limiting-par-client",children:"Rate limiting par client"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-javascript",children:"const rateLimit = require('express-rate-limit');\r\n\r\n// Web : plus g\xe9n\xe9reux\r\nconst webLimiter = rateLimit({\r\n  windowMs: 60 * 1000,\r\n  max: 100\r\n});\r\n\r\n// Mobile : plus strict\r\nconst mobileLimiter = rateLimit({\r\n  windowMs: 60 * 1000,\r\n  max: 30\r\n});\r\n\r\napp.use('/bff/web', webLimiter);\r\napp.use('/bff/mobile', mobileLimiter);\n"})}),"\n",(0,i.jsx)(r.h2,{id:"\ufe0f-bff-vs-api-gateway",children:"\u2696\ufe0f BFF vs API Gateway"}),"\n",(0,i.jsxs)(r.table,{children:[(0,i.jsx)(r.thead,{children:(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.th,{children:"Aspect"}),(0,i.jsx)(r.th,{children:"BFF"}),(0,i.jsx)(r.th,{children:"API Gateway"})]})}),(0,i.jsxs)(r.tbody,{children:[(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.strong,{children:"Ownership"})}),(0,i.jsx)(r.td,{children:"Par \xe9quipe frontend"}),(0,i.jsx)(r.td,{children:"\xc9quipe plateforme"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.strong,{children:"Logique m\xe9tier"})}),(0,i.jsx)(r.td,{children:"Oui (agr\xe9gation, transformation)"}),(0,i.jsx)(r.td,{children:"Non (routage uniquement)"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.strong,{children:"Nombre"})}),(0,i.jsx)(r.td,{children:"Plusieurs (1 par client)"}),(0,i.jsx)(r.td,{children:"Unique"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.strong,{children:"\xc9volution"})}),(0,i.jsx)(r.td,{children:"Ind\xe9pendante par client"}),(0,i.jsx)(r.td,{children:"Impacte tous les clients"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.strong,{children:"Latence"})}),(0,i.jsx)(r.td,{children:"Peut agr\xe9ger \u2192 gain"}),(0,i.jsx)(r.td,{children:"Proxy simple \u2192 overhead"})]})]})]}),"\n",(0,i.jsx)(r.admonition,{title:"Utiliser les deux",type:"tip",children:(0,i.jsx)(r.p,{children:"API Gateway pour routage/s\xe9curit\xe9 + BFF pour logique client-sp\xe9cifique"})}),"\n",(0,i.jsx)(r.h2,{id:"\ufe0f-pi\xe8ges-\xe0-\xe9viter",children:"\u26a0\ufe0f Pi\xe8ges \xe0 \xe9viter"}),"\n",(0,i.jsx)(r.h3,{id:"1-duplication-excessive",children:"1. Duplication excessive"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"Probl\xe8me :"})," Copier-coller de code entre BFFs"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"Solution :"})," Librairies partag\xe9es pour logique commune"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-javascript",children:"// Shared library\r\nconst { pagination, imageResize } = require('@company/bff-commons');\r\n\r\n// Dans chaque BFF\r\nconst results = pagination(data, req.query.page);\n"})}),"\n",(0,i.jsx)(r.h3,{id:"2-bff-trop-\xe9pais",children:"2. BFF trop \xe9pais"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"Probl\xe8me :"})," Logique m\xe9tier dans le BFF"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"Solution :"})," BFF = orchestration uniquement, logique dans les services"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-javascript",children:"// \u274c Mauvais : calcul dans BFF\r\nconst discount = order.total * 0.1;\r\n\r\n// \u2705 Bon : appel au service m\xe9tier\r\nconst discount = await pricingService.calculateDiscount(order);\n"})}),"\n",(0,i.jsx)(r.h3,{id:"3-un-bff-pour-tout",children:"3. Un BFF pour tout"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"Probl\xe8me :"})," BFF g\xe9n\xe9rique qui sert tous les clients"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"Solution :"})," Vraiment s\xe9parer par type de client"]}),"\n",(0,i.jsx)(r.h2,{id:"-bonnes-pratiques",children:"\u2705 Bonnes pratiques"}),"\n",(0,i.jsxs)(r.ol,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Ownership clair"})," : \xe9quipe frontend poss\xe8de son BFF"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Versioning"})," : ",(0,i.jsx)(r.code,{children:"/v1/bff/mobile"}),", ",(0,i.jsx)(r.code,{children:"/v2/bff/mobile"})]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Caching agressif"})," : r\xe9duire appels aux services"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Monitoring par BFF"})," : m\xe9triques s\xe9par\xe9es"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Tests de contrat"})," : garantir compatibilit\xe9 avec clients"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Documentation"})," : OpenAPI/Swagger par BFF"]}),"\n"]}),"\n",(0,i.jsx)(r.h2,{id:"-m\xe9triques",children:"\ud83d\udcca M\xe9triques"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-javascript",children:'// Exemple de m\xe9triques\r\nbff_requests_total{client="mobile", endpoint="/home"}\r\nbff_response_time{client="web", endpoint="/dashboard"}\r\nbff_aggregation_count{client="mobile"} // Nombre de services agr\xe9g\xe9s\r\nbff_cache_hit_rate{client="web"}\n'})}),"\n",(0,i.jsx)(r.h2,{id:"-tests",children:"\ud83e\uddea Tests"}),"\n",(0,i.jsx)(r.h3,{id:"test-dagr\xe9gation",children:"Test d'agr\xe9gation"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-javascript",children:"describe('Mobile BFF - Home endpoint', () => {\r\n  it('should aggregate user and order data', async () => {\r\n    userService.getUser.mockResolvedValue({ id: 1, name: 'John' });\r\n    orderService.getLastOrder.mockResolvedValue({ id: 123 });\r\n    \r\n    const response = await request(app).get('/bff/mobile/home');\r\n    \r\n    expect(response.body).toEqual({\r\n      user: { name: 'John', points: expect.any(Number) },\r\n      lastOrder: { id: 123, status: expect.any(String) }\r\n    });\r\n  });\r\n});\n"})}),"\n",(0,i.jsx)(r.h2,{id:"ressources",children:"Ressources"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.a,{href:"https://samnewman.io/patterns/architectural/bff/",children:"Pattern: Backends For Frontends"})}),"\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.a,{href:"https://www.thoughtworks.com/en-us/insights/blog/bff-soundcloud",children:"BFF @ SoundCloud"})}),"\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.a,{href:"https://principledgraphql.com/operations#10-separate-the-graphql-layer-from-the-service-layer",children:"GraphQL as a BFF"})}),"\n"]})]})}function u(e={}){const{wrapper:r}={...(0,t.R)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}}}]);