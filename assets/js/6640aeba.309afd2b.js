"use strict";(globalThis.webpackChunkdocusaurus_poc=globalThis.webpackChunkdocusaurus_poc||[]).push([[2230],{6506:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>l,contentTitle:()=>t,default:()=>m,frontMatter:()=>r,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"security/software-composition-analysis/sbom","title":"\ud83d\udccb SBOM - Software Bill of Materials","description":"Le SBOM est un inventaire complet des composants logiciels utilis\xe9s dans une application.","source":"@site/docs/security/software-composition-analysis/sbom.md","sourceDirName":"security/software-composition-analysis","slug":"/security/software-composition-analysis/sbom","permalink":"/docs/security/software-composition-analysis/sbom","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/security/software-composition-analysis/sbom.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"docs","previous":{"title":"\ud83d\udd0d Trivy - Scan de vuln\xe9rabilit\xe9s","permalink":"/docs/security/software-composition-analysis/trivy"},"next":{"title":"Application Security Testing","permalink":"/docs/security/application-security-testing/"}}');var o=s(4848),a=s(8453);const r={sidebar_position:3},t="\ud83d\udccb SBOM - Software Bill of Materials",l={},c=[{value:"\ud83c\udfaf Pourquoi un SBOM ?",id:"-pourquoi-un-sbom-",level:2},{value:"\ud83d\udcca Formats SBOM",id:"-formats-sbom",level:2},{value:"CycloneDX (Recommand\xe9)",id:"cyclonedx-recommand\xe9",level:3},{value:"SPDX",id:"spdx",level:3},{value:"\ud83d\udd27 G\xe9n\xe9ration du SBOM",id:"-g\xe9n\xe9ration-du-sbom",level:2},{value:"Syft (Recommand\xe9 - Universel)",id:"syft-recommand\xe9---universel",level:3},{value:"Outils sp\xe9cifiques par langage",id:"outils-sp\xe9cifiques-par-langage",level:3},{value:"Configuration Maven (Java)",id:"configuration-maven-java",level:3},{value:"\ud83d\udd04 Int\xe9gration CI/CD",id:"-int\xe9gration-cicd",level:2},{value:"Pipeline GitLab CI",id:"pipeline-gitlab-ci",level:3},{value:"Pipeline Jenkins",id:"pipeline-jenkins",level:3},{value:"Dependency Track (Plateforme centralis\xe9e)",id:"dependency-track-plateforme-centralis\xe9e",level:3},{value:"\ud83d\udd10 Signature et v\xe9rification",id:"-signature-et-v\xe9rification",level:2},{value:"Cosign",id:"cosign",level:3},{value:"Sigstore (keyless)",id:"sigstore-keyless",level:3},{value:"\ud83c\udfaf Meilleures pratiques",id:"-meilleures-pratiques",level:2},{value:"1. G\xe9n\xe9ration automatique",id:"1-g\xe9n\xe9ration-automatique",level:3},{value:"2. Validation syst\xe9matique",id:"2-validation-syst\xe9matique",level:3},{value:"3. Signature des SBOMs",id:"3-signature-des-sboms",level:3},{value:"4. Analyse continue",id:"4-analyse-continue",level:3},{value:"5. Storage centralis\xe9",id:"5-storage-centralis\xe9",level:3},{value:"\ud83d\udccb SBOM Compliance",id:"-sbom-compliance",level:2},{value:"NTIA Minimum Elements",id:"ntia-minimum-elements",level:3},{value:"\ud83d\udd04 Script d&#39;automatisation",id:"-script-dautomatisation",level:2},{value:"Makefile",id:"makefile",level:3},{value:"\ud83d\udcc8 M\xe9triques importantes",id:"-m\xe9triques-importantes",level:2},{value:"\ud83c\udd98 Troubleshooting",id:"-troubleshooting",level:2},{value:"SBOM incomplet",id:"sbom-incomplet",level:3},{value:"Conversion de format",id:"conversion-de-format",level:3},{value:"\ud83d\udcda Ressources",id:"-ressources",level:2}];function d(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...n.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e.header,{children:(0,o.jsx)(e.h1,{id:"-sbom---software-bill-of-materials",children:"\ud83d\udccb SBOM - Software Bill of Materials"})}),"\n",(0,o.jsxs)(e.p,{children:["Le ",(0,o.jsx)(e.strong,{children:"SBOM"})," est un inventaire complet des composants logiciels utilis\xe9s dans une application."]}),"\n",(0,o.jsx)(e.h2,{id:"-pourquoi-un-sbom-",children:"\ud83c\udfaf Pourquoi un SBOM ?"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsxs)(e.li,{children:["\u2705 ",(0,o.jsx)(e.strong,{children:"Tra\xe7abilit\xe9"})," : Savoir ce qui est dans vos applications"]}),"\n",(0,o.jsxs)(e.li,{children:["\u2705 ",(0,o.jsx)(e.strong,{children:"S\xe9curit\xe9"})," : Identifier rapidement les vuln\xe9rabilit\xe9s (ex: Log4Shell)"]}),"\n",(0,o.jsxs)(e.li,{children:["\u2705 ",(0,o.jsx)(e.strong,{children:"Conformit\xe9"})," : R\xe9pondre aux exigences r\xe9glementaires"]}),"\n",(0,o.jsxs)(e.li,{children:["\u2705 ",(0,o.jsx)(e.strong,{children:"Supply Chain Security"})," : Prot\xe9ger la cha\xeene d'approvisionnement"]}),"\n"]}),"\n",(0,o.jsx)(e.h2,{id:"-formats-sbom",children:"\ud83d\udcca Formats SBOM"}),"\n",(0,o.jsx)(e.h3,{id:"cyclonedx-recommand\xe9",children:"CycloneDX (Recommand\xe9)"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-json",children:'{\n  "bomFormat": "CycloneDX",\n  "specVersion": "1.5",\n  "components": [\n    {\n      "type": "library",\n      "name": "spring-boot-starter-web",\n      "version": "3.2.0",\n      "purl": "pkg:maven/org.springframework.boot/spring-boot-starter-web@3.2.0"\n    }\n  ]\n}\n'})}),"\n",(0,o.jsx)(e.h3,{id:"spdx",children:"SPDX"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-json",children:'{\n  "spdxVersion": "SPDX-2.3",\n  "name": "mon-app",\n  "packages": [\n    {\n      "name": "spring-boot-starter-web",\n      "versionInfo": "3.2.0"\n    }\n  ]\n}\n'})}),"\n",(0,o.jsx)(e.h2,{id:"-g\xe9n\xe9ration-du-sbom",children:"\ud83d\udd27 G\xe9n\xe9ration du SBOM"}),"\n",(0,o.jsx)(e.h3,{id:"syft-recommand\xe9---universel",children:"Syft (Recommand\xe9 - Universel)"}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.strong,{children:"Installation"})}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",children:"# Linux/macOS\ncurl -sSfL https://raw.githubusercontent.com/anchore/syft/main/install.sh | sh -s -- -b /usr/local/bin\n\n# Docker\ndocker pull anchore/syft:latest\n"})}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.strong,{children:"Utilisation"})}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",children:"# Image Docker\nsyft mon-app:latest -o cyclonedx-json > sbom.json\n\n# R\xe9pertoire\nsyft dir:. -o cyclonedx-json > sbom.json\n\n# Fichier (JAR, ZIP, TAR...)\nsyft target/mon-app.jar -o cyclonedx-json > sbom.json\n\n# Format SPDX\nsyft mon-app:latest -o spdx-json > sbom.json\n"})}),"\n",(0,o.jsx)(e.h3,{id:"outils-sp\xe9cifiques-par-langage",children:"Outils sp\xe9cifiques par langage"}),"\n",(0,o.jsxs)(e.table,{children:[(0,o.jsx)(e.thead,{children:(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.th,{children:"Langage"}),(0,o.jsx)(e.th,{children:"Outil"}),(0,o.jsx)(e.th,{children:"Commande"})]})}),(0,o.jsxs)(e.tbody,{children:[(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{children:(0,o.jsx)(e.strong,{children:"Java"})}),(0,o.jsx)(e.td,{children:"CycloneDX Maven"}),(0,o.jsx)(e.td,{children:(0,o.jsx)(e.code,{children:"mvn cyclonedx:makeAggregateBom"})})]}),(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{children:(0,o.jsx)(e.strong,{children:"Java"})}),(0,o.jsx)(e.td,{children:"CycloneDX Gradle"}),(0,o.jsx)(e.td,{children:(0,o.jsx)(e.code,{children:"gradle cyclonedxBom"})})]}),(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{children:(0,o.jsx)(e.strong,{children:"PHP"})}),(0,o.jsx)(e.td,{children:"CycloneDX Composer"}),(0,o.jsx)(e.td,{children:(0,o.jsx)(e.code,{children:"cyclonedx-php-composer make-sbom"})})]}),(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{children:(0,o.jsx)(e.strong,{children:"Node.js"})}),(0,o.jsx)(e.td,{children:"CycloneDX npm"}),(0,o.jsx)(e.td,{children:(0,o.jsx)(e.code,{children:"cyclonedx-npm --output-file sbom.json"})})]}),(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{children:(0,o.jsx)(e.strong,{children:"Python"})}),(0,o.jsx)(e.td,{children:"CycloneDX Python"}),(0,o.jsx)(e.td,{children:(0,o.jsx)(e.code,{children:"cyclonedx-py --output sbom.json"})})]}),(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{children:(0,o.jsx)(e.strong,{children:".NET"})}),(0,o.jsx)(e.td,{children:"CycloneDX .NET"}),(0,o.jsx)(e.td,{children:(0,o.jsx)(e.code,{children:"dotnet cyclonedx"})})]}),(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{children:(0,o.jsx)(e.strong,{children:"Go"})}),(0,o.jsx)(e.td,{children:"CycloneDX Go"}),(0,o.jsx)(e.td,{children:(0,o.jsx)(e.code,{children:"cyclonedx-gomod mod -json > sbom.json"})})]})]})]}),"\n",(0,o.jsx)(e.h3,{id:"configuration-maven-java",children:"Configuration Maven (Java)"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-xml",children:"\x3c!-- pom.xml --\x3e\n<plugin>\n    <groupId>org.cyclonedx</groupId>\n    <artifactId>cyclonedx-maven-plugin</artifactId>\n    <version>2.7.11</version>\n    <executions>\n        <execution>\n            <phase>package</phase>\n            <goals>\n                <goal>makeAggregateBom</goal>\n            </goals>\n        </execution>\n    </executions>\n</plugin>\n"})}),"\n",(0,o.jsx)(e.h2,{id:"-int\xe9gration-cicd",children:"\ud83d\udd04 Int\xe9gration CI/CD"}),"\n",(0,o.jsx)(e.h3,{id:"pipeline-gitlab-ci",children:"Pipeline GitLab CI"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-yaml",children:'# .gitlab-ci.yml\nstages:\n  - build\n  - sbom\n  - security\n\nvariables:\n  SBOM_FILE: "sbom.json"\n\ngenerate-sbom:\n  stage: sbom\n  image: anchore/syft:latest\n  script:\n    # Pour image Docker\n    - syft $CI_REGISTRY_IMAGE:$CI_COMMIT_SHA -o cyclonedx-json=$SBOM_FILE\n    # OU pour r\xe9pertoire\n    - syft dir:. -o cyclonedx-json=$SBOM_FILE\n    # OU pour artifact\n    - syft path/to/artifact.jar -o cyclonedx-json=$SBOM_FILE\n  artifacts:\n    paths:\n      - $SBOM_FILE\n    reports:\n      cyclonedx: $SBOM_FILE\n\nscan-sbom:\n  stage: security\n  image: anchore/grype:latest\n  script:\n    - grype sbom:$SBOM_FILE --fail-on high\n  dependencies:\n    - generate-sbom\n\n# Template GitLab int\xe9gr\xe9\ninclude:\n  - template: Security/Dependency-Scanning.gitlab-ci.yml\n'})}),"\n",(0,o.jsx)(e.h3,{id:"pipeline-jenkins",children:"Pipeline Jenkins"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-groovy",children:"pipeline {\n    agent any\n    stages {\n        stage('Generate SBOM') {\n            steps {\n                sh 'syft . -o cyclonedx-json=sbom.json'\n            }\n        }\n        stage('Scan SBOM') {\n            steps {\n                sh 'grype sbom:sbom.json --fail-on high'\n            }\n        }\n        stage('Archive') {\n            steps {\n                archiveArtifacts artifacts: 'sbom.json'\n            }\n        }\n    }\n}\n\n## \ud83d\udd0d Analyse du SBOM\n\n### Grype (Scan de vuln\xe9rabilit\xe9s)\n\n```bash\n# Scanner un SBOM\ngrype sbom:sbom.json\n\n# Format JSON\ngrype sbom:sbom.json -o json > vulnerabilities.json\n\n# S\xe9v\xe9rit\xe9 minimale\ngrype sbom:sbom.json --fail-on high\n"})}),"\n",(0,o.jsx)(e.h3,{id:"dependency-track-plateforme-centralis\xe9e",children:"Dependency Track (Plateforme centralis\xe9e)"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-yaml",children:"# docker-compose.yml\nservices:\n  dtrack-apiserver:\n    image: dependencytrack/apiserver:latest\n    environment:\n      - ALPINE_DATABASE_MODE=external\n      - ALPINE_DATABASE_URL=jdbc:postgresql://postgres:5432/dtrack\n      - ALPINE_DATABASE_USERNAME=dtrack\n      - ALPINE_DATABASE_PASSWORD=changeme\n    ports:\n      - '8081:8080'\n  \n  dtrack-frontend:\n    image: dependencytrack/frontend:latest\n    environment:\n      - API_BASE_URL=http://dtrack-apiserver:8080\n    ports:\n      - '8080:8080'\n  \n  postgres:\n    image: postgres:15-alpine\n    environment:\n      - POSTGRES_DB=dtrack\n      - POSTGRES_USER=dtrack\n      - POSTGRES_PASSWORD=changeme\n"})}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.strong,{children:"Upload automatique"})}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",children:'curl -X POST "http://localhost:8081/api/v1/bom" \\\n  -H "X-Api-Key: YOUR_API_KEY" \\\n  -F "project=PROJECT_UUID" \\\n  -F "bom=@sbom.json"\n'})}),"\n",(0,o.jsx)(e.h2,{id:"-signature-et-v\xe9rification",children:"\ud83d\udd10 Signature et v\xe9rification"}),"\n",(0,o.jsx)(e.h3,{id:"cosign",children:"Cosign"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",children:"# Signer\ncosign sign-blob --key cosign.key sbom.json --output-signature sbom.sig\n\n# V\xe9rifier\ncosign verify-blob --key cosign.pub --signature sbom.sig sbom.json\n"})}),"\n",(0,o.jsx)(e.h3,{id:"sigstore-keyless",children:"Sigstore (keyless)"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",children:"# Signature sans cl\xe9\ncosign sign-blob sbom.json --bundle sbom.bundle\n\n# V\xe9rification\ncosign verify-blob \\\n  --bundle sbom.bundle \\\n  --certificate-identity=user@example.com \\\n  --certificate-oidc-issuer=https://accounts.google.com \\\n  sbom.json\n"})}),"\n",(0,o.jsx)(e.h2,{id:"-meilleures-pratiques",children:"\ud83c\udfaf Meilleures pratiques"}),"\n",(0,o.jsx)(e.h3,{id:"1-g\xe9n\xe9ration-automatique",children:"1. G\xe9n\xe9ration automatique"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-yaml",children:"# \xc0 chaque build\non: [push, merge_request, tag]\n"})}),"\n",(0,o.jsx)(e.h3,{id:"2-validation-syst\xe9matique",children:"2. Validation syst\xe9matique"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",children:"cyclonedx validate --input-file sbom.json\n"})}),"\n",(0,o.jsx)(e.h3,{id:"3-signature-des-sboms",children:"3. Signature des SBOMs"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",children:"# Production uniquement\nonly: [main, tags]\n"})}),"\n",(0,o.jsx)(e.h3,{id:"4-analyse-continue",children:"4. Analyse continue"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-yaml",children:"# Scan quotidien dans scheduled pipeline\nschedule:\n  - cron: '0 2 * * *'\n"})}),"\n",(0,o.jsx)(e.h3,{id:"5-storage-centralis\xe9",children:"5. Storage centralis\xe9"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",children:"# Dependency Track ou Artifactory\nartifacts:\n  expire_in: never  # SBOMs produits\n"})}),"\n",(0,o.jsx)(e.h2,{id:"-sbom-compliance",children:"\ud83d\udccb SBOM Compliance"}),"\n",(0,o.jsx)(e.h3,{id:"ntia-minimum-elements",children:"NTIA Minimum Elements"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-json",children:'{\n  "minimum_elements": {\n    "author": "Organization Name",\n    "timestamp": "2024-01-01T00:00:00Z",\n    "component": {\n      "name": "component-name",\n      "version": "1.0.0",\n      "unique_identifier": "pkg:maven/..."\n    }\n  }\n}\n'})}),"\n",(0,o.jsx)(e.h2,{id:"-script-dautomatisation",children:"\ud83d\udd04 Script d'automatisation"}),"\n",(0,o.jsx)(e.h3,{id:"makefile",children:"Makefile"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-makefile",children:'.PHONY: sbom scan sign upload\n\nsbom:\n\tsyft . -o cyclonedx-json=sbom.json\n\tcyclonedx validate --input-file sbom.json\n\nscan:\n\tgrype sbom:sbom.json --fail-on high\n\nsign:\n\tcosign sign-blob --key cosign.key sbom.json --output-signature sbom.sig\n\nupload:\n\tcurl -X POST "$(DTRACK_URL)/api/v1/bom" \\\n\t\t-H "X-Api-Key: $(DTRACK_API_KEY)" \\\n\t\t-F "project=$(PROJECT_UUID)" \\\n\t\t-F "bom=@sbom.json"\n\nall: sbom scan sign upload\n'})}),"\n",(0,o.jsx)(e.h2,{id:"-m\xe9triques-importantes",children:"\ud83d\udcc8 M\xe9triques importantes"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-yaml",children:"- Total components: 350\n- Direct dependencies: 50\n- Critical vulnerabilities: 0\n- High vulnerabilities: 2\n- SBOM freshness: < 24h\n"})}),"\n",(0,o.jsx)(e.h2,{id:"-troubleshooting",children:"\ud83c\udd98 Troubleshooting"}),"\n",(0,o.jsx)(e.h3,{id:"sbom-incomplet",children:"SBOM incomplet"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",children:"# V\xe9rifier\ncyclonedx validate --input-file sbom.json\n\n# R\xe9g\xe9n\xe9rer avec verbose\nsyft . -vv -o cyclonedx-json\n"})}),"\n",(0,o.jsx)(e.h3,{id:"conversion-de-format",children:"Conversion de format"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",children:"cyclonedx convert \\\n  --input-file sbom.spdx.json \\\n  --output-file sbom.cdx.json \\\n  --input-format spdx-json \\\n  --output-format cyclonedx-json\n"})}),"\n",(0,o.jsx)(e.h2,{id:"-ressources",children:"\ud83d\udcda Ressources"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:(0,o.jsx)(e.a,{href:"https://cyclonedx.org/",children:"CycloneDX Specification"})}),"\n",(0,o.jsx)(e.li,{children:(0,o.jsx)(e.a,{href:"https://github.com/anchore/syft",children:"Syft Documentation"})}),"\n",(0,o.jsx)(e.li,{children:(0,o.jsx)(e.a,{href:"https://dependencytrack.org/",children:"Dependency Track"})}),"\n",(0,o.jsx)(e.li,{children:(0,o.jsx)(e.a,{href:"https://www.ntia.gov/sbom",children:"NTIA SBOM Guidelines"})}),"\n"]}),"\n",(0,o.jsx)(e.hr,{}),"\n",(0,o.jsxs)(e.p,{children:[(0,o.jsx)(e.strong,{children:"Votre SBOM est maintenant automatiquement g\xe9n\xe9r\xe9, valid\xe9, scann\xe9 et archiv\xe9 !"})," \ud83d\udccb\ud83d\udd12"]})]})}function m(n={}){const{wrapper:e}={...(0,a.R)(),...n.components};return e?(0,o.jsx)(e,{...n,children:(0,o.jsx)(d,{...n})}):d(n)}},8453:(n,e,s)=>{s.d(e,{R:()=>r,x:()=>t});var i=s(6540);const o={},a=i.createContext(o);function r(n){const e=i.useContext(a);return i.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function t(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:r(n.components),i.createElement(a.Provider,{value:e},n.children)}}}]);