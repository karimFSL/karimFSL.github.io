"use strict";(globalThis.webpackChunkdocusaurus_poc=globalThis.webpackChunkdocusaurus_poc||[]).push([[5357],{6590:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>p,frontMatter:()=>a,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"development/java/web-layer/open-api","title":"G\xe9n\xe9ration API & DTO avec OpenAPI en Java","description":"Introduction","source":"@site/docs/development/java/web-layer/open-api.md","sourceDirName":"development/java/web-layer","slug":"/development/java/web-layer/open-api","permalink":"/docs/development/java/web-layer/open-api","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/development/java/web-layer/open-api.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"docs","previous":{"title":"S\xe9curit\xe9","permalink":"/docs/development/java/web-layer/security"},"next":{"title":"MapStruct - Guide pratique","permalink":"/docs/development/java/web-layer/map-struct"}}');var t=r(4848),s=r(8453);const a={sidebar_position:2},o="G\xe9n\xe9ration API & DTO avec OpenAPI en Java",c={},d=[{value:"Introduction",id:"introduction",level:2},{value:"Outils principaux",id:"outils-principaux",level:2},{value:"Configuration Maven",id:"configuration-maven",level:2},{value:"Configuration Gradle",id:"configuration-gradle",level:2},{value:"Exemple de sp\xe9cification OpenAPI",id:"exemple-de-sp\xe9cification-openapi",level:2},{value:"Code g\xe9n\xe9r\xe9 - Interface API",id:"code-g\xe9n\xe9r\xe9---interface-api",level:2},{value:"Code g\xe9n\xe9r\xe9 - DTO",id:"code-g\xe9n\xe9r\xe9---dto",level:2},{value:"Impl\xe9mentation dans votre contr\xf4leur",id:"impl\xe9mentation-dans-votre-contr\xf4leur",level:2},{value:"Annotations principales g\xe9n\xe9r\xe9es",id:"annotations-principales-g\xe9n\xe9r\xe9es",level:2},{value:"Options de configuration utiles",id:"options-de-configuration-utiles",level:2},{value:"Commandes",id:"commandes",level:2},{value:"Bonnes pratiques",id:"bonnes-pratiques",level:2},{value:"Structure du projet",id:"structure-du-projet",level:2},{value:"Ressources",id:"ressources",level:2}];function l(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"g\xe9n\xe9ration-api--dto-avec-openapi-en-java",children:"G\xe9n\xe9ration API & DTO avec OpenAPI en Java"})}),"\n",(0,t.jsx)(n.h2,{id:"introduction",children:"Introduction"}),"\n",(0,t.jsx)(n.p,{children:"OpenAPI permet de g\xe9n\xe9rer automatiquement du code Java (APIs et DTOs) \xe0 partir d'une sp\xe9cification OpenAPI, garantissant la coh\xe9rence entre documentation et impl\xe9mentation."}),"\n",(0,t.jsx)(n.h2,{id:"outils-principaux",children:"Outils principaux"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"OpenAPI Generator"})," : outil de g\xe9n\xe9ration de code multi-langage"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Swagger Codegen"})," : alternative pour la g\xe9n\xe9ration de code"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"configuration-maven",children:"Configuration Maven"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-xml",children:"<plugin>\r\n    <groupId>org.openapitools</groupId>\r\n    <artifactId>openapi-generator-maven-plugin</artifactId>\r\n    <version>7.0.1</version>\r\n    <executions>\r\n        <execution>\r\n            <goals>\r\n                <goal>generate</goal>\r\n            </goals>\r\n            <configuration>\r\n                <inputSpec>${project.basedir}/src/main/resources/openapi.yaml</inputSpec>\r\n                <generatorName>spring</generatorName>\r\n                <apiPackage>com.example.api</apiPackage>\r\n                <modelPackage>com.example.dto</modelPackage>\r\n                <configOptions>\r\n                    <interfaceOnly>true</interfaceOnly>\r\n                    <useSpringBoot3>true</useSpringBoot3>\r\n                </configOptions>\r\n            </configuration>\r\n        </execution>\r\n    </executions>\r\n</plugin>\n"})}),"\n",(0,t.jsx)(n.h2,{id:"configuration-gradle",children:"Configuration Gradle"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-gradle",children:'plugins {\r\n    id "org.openapi.generator" version "7.0.1"\r\n}\r\n\r\nopenApiGenerate {\r\n    generatorName = "spring"\r\n    inputSpec = "$rootDir/src/main/resources/openapi.yaml"\r\n    outputDir = "$buildDir/generated"\r\n    apiPackage = "com.example.api"\r\n    modelPackage = "com.example.dto"\r\n    configOptions = [\r\n        interfaceOnly: "true",\r\n        useSpringBoot3: "true"\r\n    ]\r\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"exemple-de-sp\xe9cification-openapi",children:"Exemple de sp\xe9cification OpenAPI"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"openapi: 3.0.0\r\ninfo:\r\n  title: User API\r\n  version: 1.0.0\r\npaths:\r\n  /users/{id}:\r\n    get:\r\n      tags:\r\n        - user\r\n      operationId: getUser\r\n      parameters:\r\n        - name: id\r\n          in: path\r\n          required: true\r\n          schema:\r\n            type: integer\r\n            format: int64\r\n      responses:\r\n        '200':\r\n          description: User found\r\n          content:\r\n            application/json:\r\n              schema:\r\n                $ref: '#/components/schemas/User'\r\ncomponents:\r\n  schemas:\r\n    User:\r\n      type: object\r\n      required:\r\n        - id\r\n        - name\r\n      properties:\r\n        id:\r\n          type: integer\r\n          format: int64\r\n        name:\r\n          type: string\r\n          maxLength: 100\r\n        email:\r\n          type: string\r\n          format: email\n"})}),"\n",(0,t.jsx)(n.h2,{id:"code-g\xe9n\xe9r\xe9---interface-api",children:"Code g\xe9n\xe9r\xe9 - Interface API"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'@Generated(value = "org.openapitools.codegen.languages.SpringCodegen")\r\n@Validated\r\n@Tag(name = "user", description = "the user API")\r\npublic interface UserApi {\r\n\r\n    @Operation(\r\n        operationId = "getUser",\r\n        summary = "",\r\n        tags = { "user" },\r\n        responses = {\r\n            @ApiResponse(responseCode = "200", description = "User found", \r\n                content = @Content(schema = @Schema(implementation = User.class)))\r\n        }\r\n    )\r\n    @RequestMapping(\r\n        method = RequestMethod.GET,\r\n        value = "/users/{id}",\r\n        produces = { "application/json" }\r\n    )\r\n    ResponseEntity<User> getUser(\r\n        @Parameter(name = "id", required = true) \r\n        @PathVariable("id") Long id\r\n    );\r\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"code-g\xe9n\xe9r\xe9---dto",children:"Code g\xe9n\xe9r\xe9 - DTO"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'@Generated(value = "org.openapitools.codegen.languages.SpringCodegen")\r\n@Schema(name = "User", description = "")\r\npublic class User {\r\n\r\n    @NotNull\r\n    private Long id;\r\n\r\n    @NotNull\r\n    @Size(max = 100)\r\n    private String name;\r\n\r\n    @Email\r\n    private String email;\r\n\r\n    // Getters et Setters\r\n    public Long getId() {\r\n        return id;\r\n    }\r\n\r\n    public void setId(Long id) {\r\n        this.id = id;\r\n    }\r\n\r\n    // ... autres getters/setters\r\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"impl\xe9mentation-dans-votre-contr\xf4leur",children:"Impl\xe9mentation dans votre contr\xf4leur"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"@RestController\r\npublic class UserController implements UserApi {\r\n    \r\n    @Override\r\n    public ResponseEntity<User> getUser(Long id) {\r\n        // Votre logique m\xe9tier\r\n        return ResponseEntity.ok(userService.findById(id));\r\n    }\r\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"annotations-principales-g\xe9n\xe9r\xe9es",children:"Annotations principales g\xe9n\xe9r\xe9es"}),"\n",(0,t.jsx)(n.p,{children:"Les annotations Swagger/OpenAPI g\xe9n\xe9r\xe9es incluent :"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"@Generated"})," : Indique que le code est g\xe9n\xe9r\xe9 automatiquement"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"@Schema"})," : Documentation du mod\xe8le pour Swagger UI"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"@Operation"})," : Documentation de l'op\xe9ration API"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"@ApiResponse"})," : Documentation des r\xe9ponses possibles"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"@Parameter"})," : Documentation des param\xe8tres"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"@Tag"})," : Regroupement des endpoints"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Ces annotations permettent la g\xe9n\xe9ration automatique de la documentation Swagger UI."}),"\n",(0,t.jsx)(n.h2,{id:"options-de-configuration-utiles",children:"Options de configuration utiles"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Option"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"interfaceOnly"})}),(0,t.jsx)(n.td,{children:"G\xe9n\xe8re uniquement les interfaces API"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"useTags"})}),(0,t.jsx)(n.td,{children:"Groupe les APIs par tags OpenAPI"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"dateLibrary"})}),(0,t.jsxs)(n.td,{children:["Biblioth\xe8que pour les dates (",(0,t.jsx)(n.code,{children:"java8"}),", ",(0,t.jsx)(n.code,{children:"legacy"}),")"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"serializationLibrary"})}),(0,t.jsx)(n.td,{children:"Jackson, Gson, etc."})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"commandes",children:"Commandes"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Maven"})," : ",(0,t.jsx)(n.code,{children:"mvn clean generate-sources"})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Gradle"})," : ",(0,t.jsx)(n.code,{children:"./gradlew openApiGenerate"})]}),"\n",(0,t.jsx)(n.h2,{id:"bonnes-pratiques",children:"Bonnes pratiques"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Versionnez"})," votre fichier OpenAPI dans le projet"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Ignorez"})," le code g\xe9n\xe9r\xe9 dans ",(0,t.jsx)(n.code,{children:".gitignore"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"N'\xe9ditez jamais"})," le code g\xe9n\xe9r\xe9 directement"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"R\xe9g\xe9n\xe9rez"})," \xe0 chaque modification du contrat OpenAPI"]}),"\n",(0,t.jsxs)(n.li,{children:["Utilisez ",(0,t.jsx)(n.code,{children:"interfaceOnly=true"})," pour s\xe9parer contrat et impl\xe9mentation"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"structure-du-projet",children:"Structure du projet"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"src/\r\n\u251c\u2500\u2500 main/\r\n\u2502   \u251c\u2500\u2500 resources/\r\n\u2502   \u2502   \u2514\u2500\u2500 openapi.yaml          # Sp\xe9cification OpenAPI\r\n\u2502   \u2514\u2500\u2500 java/\r\n\u2502       \u2514\u2500\u2500 com/example/\r\n\u2502           \u251c\u2500\u2500 controller/        # Impl\xe9mentations\r\n\u2502           \u2514\u2500\u2500 service/           # Logique m\xe9tier\r\n\u2514\u2500\u2500 target/generated-sources/      # Code g\xe9n\xe9r\xe9 (ignor\xe9 par Git)\r\n    \u2514\u2500\u2500 openapi/\r\n        \u251c\u2500\u2500 api/                   # Interfaces API\r\n        \u2514\u2500\u2500 model/                 # DTOs\n"})}),"\n",(0,t.jsx)(n.h2,{id:"ressources",children:"Ressources"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://openapi-generator.tech/",children:"OpenAPI Generator Documentation"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://swagger.io/specification/",children:"OpenAPI Specification"})}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>a,x:()=>o});var i=r(6540);const t={},s=i.createContext(t);function a(e){const n=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);