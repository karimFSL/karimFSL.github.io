"use strict";(globalThis.webpackChunkdocusaurus_poc=globalThis.webpackChunkdocusaurus_poc||[]).push([[5357],{6590:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>p,frontMatter:()=>a,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"development/java/web-layer/open-api","title":"G\xe9n\xe9ration API & DTO avec OpenAPI en Java","description":"Introduction","source":"@site/docs/development/java/web-layer/open-api.md","sourceDirName":"development/java/web-layer","slug":"/development/java/web-layer/open-api","permalink":"/docs/development/java/web-layer/open-api","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/development/java/web-layer/open-api.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"docs","previous":{"title":"S\xe9curit\xe9","permalink":"/docs/development/java/web-layer/security"},"next":{"title":"MapStruct - Guide pratique","permalink":"/docs/development/java/web-layer/map-struct"}}');var t=i(4848),s=i(8453);const a={sidebar_position:2},o="G\xe9n\xe9ration API & DTO avec OpenAPI en Java",c={},d=[{value:"Introduction",id:"introduction",level:2},{value:"Outils principaux",id:"outils-principaux",level:2},{value:"Configuration Maven",id:"configuration-maven",level:2},{value:"Configuration Gradle",id:"configuration-gradle",level:2},{value:"Exemple de sp\xe9cification OpenAPI",id:"exemple-de-sp\xe9cification-openapi",level:2},{value:"Code g\xe9n\xe9r\xe9 - Interface API",id:"code-g\xe9n\xe9r\xe9---interface-api",level:2},{value:"Code g\xe9n\xe9r\xe9 - DTO",id:"code-g\xe9n\xe9r\xe9---dto",level:2},{value:"Impl\xe9mentation dans votre contr\xf4leur",id:"impl\xe9mentation-dans-votre-contr\xf4leur",level:2},{value:"Annotations principales g\xe9n\xe9r\xe9es",id:"annotations-principales-g\xe9n\xe9r\xe9es",level:2},{value:"Options de configuration utiles",id:"options-de-configuration-utiles",level:2},{value:"Commandes",id:"commandes",level:2},{value:"Bonnes pratiques",id:"bonnes-pratiques",level:2},{value:"Structure du projet",id:"structure-du-projet",level:2},{value:"Ressources",id:"ressources",level:2}];function l(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"g\xe9n\xe9ration-api--dto-avec-openapi-en-java",children:"G\xe9n\xe9ration API & DTO avec OpenAPI en Java"})}),"\n",(0,t.jsx)(n.h2,{id:"introduction",children:"Introduction"}),"\n",(0,t.jsx)(n.p,{children:"OpenAPI permet de g\xe9n\xe9rer automatiquement du code Java (APIs et DTOs) \xe0 partir d'une sp\xe9cification OpenAPI, garantissant la coh\xe9rence entre documentation et impl\xe9mentation."}),"\n",(0,t.jsx)(n.h2,{id:"outils-principaux",children:"Outils principaux"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"OpenAPI Generator"})," : outil de g\xe9n\xe9ration de code multi-langage"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Swagger Codegen"})," : alternative pour la g\xe9n\xe9ration de code"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"configuration-maven",children:"Configuration Maven"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-xml",children:"<plugin>\n    <groupId>org.openapitools</groupId>\n    <artifactId>openapi-generator-maven-plugin</artifactId>\n    <version>7.0.1</version>\n    <executions>\n        <execution>\n            <goals>\n                <goal>generate</goal>\n            </goals>\n            <configuration>\n                <inputSpec>${project.basedir}/src/main/resources/openapi.yaml</inputSpec>\n                <generatorName>spring</generatorName>\n                <apiPackage>com.example.api</apiPackage>\n                <modelPackage>com.example.dto</modelPackage>\n                <configOptions>\n                    <interfaceOnly>true</interfaceOnly>\n                    <useSpringBoot3>true</useSpringBoot3>\n                </configOptions>\n            </configuration>\n        </execution>\n    </executions>\n</plugin>\n"})}),"\n",(0,t.jsx)(n.h2,{id:"configuration-gradle",children:"Configuration Gradle"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-gradle",children:'plugins {\n    id "org.openapi.generator" version "7.0.1"\n}\n\nopenApiGenerate {\n    generatorName = "spring"\n    inputSpec = "$rootDir/src/main/resources/openapi.yaml"\n    outputDir = "$buildDir/generated"\n    apiPackage = "com.example.api"\n    modelPackage = "com.example.dto"\n    configOptions = [\n        interfaceOnly: "true",\n        useSpringBoot3: "true"\n    ]\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"exemple-de-sp\xe9cification-openapi",children:"Exemple de sp\xe9cification OpenAPI"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"openapi: 3.0.0\ninfo:\n  title: User API\n  version: 1.0.0\npaths:\n  /users/{id}:\n    get:\n      tags:\n        - user\n      operationId: getUser\n      parameters:\n        - name: id\n          in: path\n          required: true\n          schema:\n            type: integer\n            format: int64\n      responses:\n        '200':\n          description: User found\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/User'\ncomponents:\n  schemas:\n    User:\n      type: object\n      required:\n        - id\n        - name\n      properties:\n        id:\n          type: integer\n          format: int64\n        name:\n          type: string\n          maxLength: 100\n        email:\n          type: string\n          format: email\n"})}),"\n",(0,t.jsx)(n.h2,{id:"code-g\xe9n\xe9r\xe9---interface-api",children:"Code g\xe9n\xe9r\xe9 - Interface API"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'@Generated(value = "org.openapitools.codegen.languages.SpringCodegen")\n@Validated\n@Tag(name = "user", description = "the user API")\npublic interface UserApi {\n\n    @Operation(\n        operationId = "getUser",\n        summary = "",\n        tags = { "user" },\n        responses = {\n            @ApiResponse(responseCode = "200", description = "User found", \n                content = @Content(schema = @Schema(implementation = User.class)))\n        }\n    )\n    @RequestMapping(\n        method = RequestMethod.GET,\n        value = "/users/{id}",\n        produces = { "application/json" }\n    )\n    ResponseEntity<User> getUser(\n        @Parameter(name = "id", required = true) \n        @PathVariable("id") Long id\n    );\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"code-g\xe9n\xe9r\xe9---dto",children:"Code g\xe9n\xe9r\xe9 - DTO"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'@Generated(value = "org.openapitools.codegen.languages.SpringCodegen")\n@Schema(name = "User", description = "")\npublic class User {\n\n    @NotNull\n    private Long id;\n\n    @NotNull\n    @Size(max = 100)\n    private String name;\n\n    @Email\n    private String email;\n\n    // Getters et Setters\n    public Long getId() {\n        return id;\n    }\n\n    public void setId(Long id) {\n        this.id = id;\n    }\n\n    // ... autres getters/setters\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"impl\xe9mentation-dans-votre-contr\xf4leur",children:"Impl\xe9mentation dans votre contr\xf4leur"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"@RestController\npublic class UserController implements UserApi {\n    \n    @Override\n    public ResponseEntity<User> getUser(Long id) {\n        // Votre logique m\xe9tier\n        return ResponseEntity.ok(userService.findById(id));\n    }\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"annotations-principales-g\xe9n\xe9r\xe9es",children:"Annotations principales g\xe9n\xe9r\xe9es"}),"\n",(0,t.jsx)(n.p,{children:"Les annotations Swagger/OpenAPI g\xe9n\xe9r\xe9es incluent :"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"@Generated"})," : Indique que le code est g\xe9n\xe9r\xe9 automatiquement"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"@Schema"})," : Documentation du mod\xe8le pour Swagger UI"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"@Operation"})," : Documentation de l'op\xe9ration API"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"@ApiResponse"})," : Documentation des r\xe9ponses possibles"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"@Parameter"})," : Documentation des param\xe8tres"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"@Tag"})," : Regroupement des endpoints"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Ces annotations permettent la g\xe9n\xe9ration automatique de la documentation Swagger UI."}),"\n",(0,t.jsx)(n.h2,{id:"options-de-configuration-utiles",children:"Options de configuration utiles"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Option"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"interfaceOnly"})}),(0,t.jsx)(n.td,{children:"G\xe9n\xe8re uniquement les interfaces API"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"useTags"})}),(0,t.jsx)(n.td,{children:"Groupe les APIs par tags OpenAPI"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"dateLibrary"})}),(0,t.jsxs)(n.td,{children:["Biblioth\xe8que pour les dates (",(0,t.jsx)(n.code,{children:"java8"}),", ",(0,t.jsx)(n.code,{children:"legacy"}),")"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"serializationLibrary"})}),(0,t.jsx)(n.td,{children:"Jackson, Gson, etc."})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"commandes",children:"Commandes"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Maven"})," : ",(0,t.jsx)(n.code,{children:"mvn clean generate-sources"})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Gradle"})," : ",(0,t.jsx)(n.code,{children:"./gradlew openApiGenerate"})]}),"\n",(0,t.jsx)(n.h2,{id:"bonnes-pratiques",children:"Bonnes pratiques"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Versionnez"})," votre fichier OpenAPI dans le projet"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Ignorez"})," le code g\xe9n\xe9r\xe9 dans ",(0,t.jsx)(n.code,{children:".gitignore"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"N'\xe9ditez jamais"})," le code g\xe9n\xe9r\xe9 directement"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"R\xe9g\xe9n\xe9rez"})," \xe0 chaque modification du contrat OpenAPI"]}),"\n",(0,t.jsxs)(n.li,{children:["Utilisez ",(0,t.jsx)(n.code,{children:"interfaceOnly=true"})," pour s\xe9parer contrat et impl\xe9mentation"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"structure-du-projet",children:"Structure du projet"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"src/\n\u251c\u2500\u2500 main/\n\u2502   \u251c\u2500\u2500 resources/\n\u2502   \u2502   \u2514\u2500\u2500 openapi.yaml          # Sp\xe9cification OpenAPI\n\u2502   \u2514\u2500\u2500 java/\n\u2502       \u2514\u2500\u2500 com/example/\n\u2502           \u251c\u2500\u2500 controller/        # Impl\xe9mentations\n\u2502           \u2514\u2500\u2500 service/           # Logique m\xe9tier\n\u2514\u2500\u2500 target/generated-sources/      # Code g\xe9n\xe9r\xe9 (ignor\xe9 par Git)\n    \u2514\u2500\u2500 openapi/\n        \u251c\u2500\u2500 api/                   # Interfaces API\n        \u2514\u2500\u2500 model/                 # DTOs\n"})}),"\n",(0,t.jsx)(n.h2,{id:"ressources",children:"Ressources"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://openapi-generator.tech/",children:"OpenAPI Generator Documentation"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://swagger.io/specification/",children:"OpenAPI Specification"})}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>a,x:()=>o});var r=i(6540);const t={},s=r.createContext(t);function a(e){const n=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);