{"searchDocs":[{"title":"Application View","type":0,"sectionRef":"#","url":"/docs/architecture/application-view","content":"Application View","keywords":"","version":"Next"},{"title":"Architecture","type":0,"sectionRef":"#","url":"/docs/architecture","content":"Architecture","keywords":"","version":"Next"},{"title":"Projet A","type":0,"sectionRef":"#","url":"/docs/architecture/application-view/projet A","content":"Projet A","keywords":"","version":"Next"},{"title":"Microservices A.1","type":0,"sectionRef":"#","url":"/docs/architecture/application-view/projet A/microservicesA.1","content":"Microservices A.1","keywords":"","version":"Next"},{"title":"Microfrontend A ( Angular )","type":0,"sectionRef":"#","url":"/docs/architecture/application-view/projet A/MicrofrontendA","content":"Microfrontend A ( Angular )","keywords":"","version":"Next"},{"title":"Microservices A.2","type":0,"sectionRef":"#","url":"/docs/architecture/application-view/projet A/microservicesA.2","content":"Microservices A.2","keywords":"","version":"Next"},{"title":"Microfrontend B ( Angular)","type":0,"sectionRef":"#","url":"/docs/architecture/application-view/projet B/MicrofrontendB","content":"Microfrontend B ( Angular)","keywords":"","version":"Next"},{"title":"Microservices B.1","type":0,"sectionRef":"#","url":"/docs/architecture/application-view/projet B/microservicesB.1","content":"Microservices B.1","keywords":"","version":"Next"},{"title":"Projet B","type":0,"sectionRef":"#","url":"/docs/architecture/application-view/projet B","content":"Projet B","keywords":"","version":"Next"},{"title":"Devops view","type":0,"sectionRef":"#","url":"/docs/architecture/devops-view","content":"Devops view","keywords":"","version":"Next"},{"title":"Cloud public","type":0,"sectionRef":"#","url":"/docs/architecture/infrastrcture-view/cloud-public","content":"Cloud public","keywords":"","version":"Next"},{"title":"Infrastructure view","type":0,"sectionRef":"#","url":"/docs/architecture/infrastrcture-view","content":"Infrastructure view","keywords":"","version":"Next"},{"title":"Cloud priv√©","type":0,"sectionRef":"#","url":"/docs/architecture/infrastrcture-view/cloud-prive","content":"Cloud priv√©","keywords":"","version":"Next"},{"title":"Microservices B.2","type":0,"sectionRef":"#","url":"/docs/architecture/application-view/projet B/microservicesB.2","content":"Microservices B.2","keywords":"","version":"Next"},{"title":"On Premise","type":0,"sectionRef":"#","url":"/docs/architecture/infrastrcture-view/on-premise","content":"On Premise","keywords":"","version":"Next"},{"title":"Kubernetes as a service","type":0,"sectionRef":"#","url":"/docs/architecture/infrastrcture-view/kubernetes-as-a-service","content":"Kubernetes as a service","keywords":"","version":"Next"},{"title":"Security view","type":0,"sectionRef":"#","url":"/docs/architecture/security-view","content":"Security view","keywords":"","version":"Next"},{"title":"SecNumCloud","type":0,"sectionRef":"#","url":"/docs/architecture/infrastrcture-view/SecNumCloud","content":"SecNumCloud","keywords":"","version":"Next"},{"title":"Test View","type":0,"sectionRef":"#","url":"/docs/architecture/test-view","content":"Test View","keywords":"","version":"Next"},{"title":"Developer Guide","type":0,"sectionRef":"#","url":"/docs/development","content":"Developer Guide","keywords":"","version":"Next"},{"title":"Bonnes pratiques","type":0,"sectionRef":"#","url":"/docs/development/angular/best-practices","content":"Bonnes pratiques","keywords":"","version":"Next"},{"title":"Angular guide","type":0,"sectionRef":"#","url":"/docs/development/angular","content":"Angular guide","keywords":"","version":"Next"},{"title":"D√©marrage","type":0,"sectionRef":"#","url":"/docs/development/demarrage","content":"D√©marrage","keywords":"","version":"Next"},{"title":"Installation outil","type":0,"sectionRef":"#","url":"/docs/development/demarrage/installation-outils","content":"Installation outil TODO","keywords":"","version":"Next"},{"title":"Devops guide","type":0,"sectionRef":"#","url":"/docs/development/devops","content":"Devops guide","keywords":"","version":"Next"},{"title":"CI/CD guide","type":0,"sectionRef":"#","url":"/docs/development/devops/cicd","content":"CI/CD guide","keywords":"","version":"Next"},{"title":"Infrastructure As Code guide","type":0,"sectionRef":"#","url":"/docs/development/devops/infrastructure-as-code","content":"Infrastructure As Code guide","keywords":"","version":"Next"},{"title":"Infrastructure guide","type":0,"sectionRef":"#","url":"/docs/development/devops/infrastructure","content":"Infrastructure guide","keywords":"","version":"Next"},{"title":"Mise en place de DevContainer","type":0,"sectionRef":"#","url":"/docs/development/devops/tips/devcontainer","content":"Mise en place de DevContainer TODO","keywords":"","version":"Next"},{"title":"GitFlow","type":0,"sectionRef":"#","url":"/docs/development/demarrage/gitflow","content":"","keywords":"","version":"Next"},{"title":"1. Principes de Git Flow‚Äã","type":1,"pageTitle":"GitFlow","url":"/docs/development/demarrage/gitflow#1-principes-de-git-flow","content":" Le diagramme suivant montre le flux de d√©veloppement cible avec Git.    Branches principales :  main ou master : repr√©sente une version stable apr√®s releasedevelop : branche de d√©veloppement qui √©volue au fil des sprints, elle doit toujours √™tre fonctionnelle et op√©rationnellefeature/NOM : branche de fonctionnalit√©, VOTRE branche sp√©cifique √† une story ou t√¢che. Vous pouvez la d√©ployer sur un environnement de d√©veloppementbugfix/NOM : branche pour corriger des bugs, elle doit √™tre fusionn√©e dans develophotfix/NOM : branche pour corriger un bug CRITIQUE sur une version publi√©e    ","version":"Next","tagName":"h2"},{"title":"2. Configuration de Git‚Äã","type":1,"pageTitle":"GitFlow","url":"/docs/development/demarrage/gitflow#2-configuration-de-git","content":" Pour bien d√©marrer votre d√©veloppement avec Git, certaines options sont recommand√©es :  git config --global pull.rebase true git config --global fetch.prune true git config --global core.editor &quot;'C:/Program Files/Notepad++/notepad++.exe' -multiInst -notabbar -nosession -noPlugin&quot; git config --global diff.colorMoved zebra   Explications :  Premi√®re ligne : toujours rebaser votre d√©p√¥t local lors du pull des nouvelles mises √† jourDeuxi√®me ligne : nettoyer votre d√©p√¥t local lors du fetch (nettoyage limit√© aux r√©f√©rences de branches supprim√©es apr√®s une merge request)Troisi√®me ligne (optionnel) : utiliser Notepad++ comme √©diteur GitQuatri√®me ligne (optionnel) : utile pour lire les diffs dans un terminal    ","version":"Next","tagName":"h2"},{"title":"3. Corriger un bug‚Äã","type":1,"pageTitle":"GitFlow","url":"/docs/development/demarrage/gitflow#3-corriger-un-bug","content":" Pour corriger un bug :  # Si le d√©p√¥t local n'existe pas git clone &lt;url&gt; # Si le d√©p√¥t local existe d√©j√† git switch develop git pull origin develop # Cr√©er une nouvelle branche git checkout -b bugfix/&lt;nom-descriptif-du-bug&gt; # ... Corriger le bug et √† la fin : git add . git commit -m &quot;[JIR1-123456] Fix: correction du bug XYZ&quot; git push origin bugfix/&lt;nom-descriptif-du-bug&gt;     ","version":"Next","tagName":"h2"},{"title":"4. D√©marrer une nouvelle fonctionnalit√©‚Äã","type":1,"pageTitle":"GitFlow","url":"/docs/development/demarrage/gitflow#4-d√©marrer-une-nouvelle-fonctionnalit√©","content":" Pour d√©marrer une nouvelle fonctionnalit√©, voici les √©tapes simples :  # Si le d√©p√¥t local n'existe pas git clone &lt;url&gt; # Si le d√©p√¥t local existe d√©j√† git switch develop git pull origin develop # Cr√©er votre branche de fonctionnalit√© git checkout -b feature/NOM # ex: feature/packaging-application # ... Sous-t√¢che de la fonctionnalit√© git add . git commit -m &quot;[JIR1-123456] Step 1: impl√©mentation de XYZ&quot; # ... Sous-t√¢che de la fonctionnalit√© git add . git commit -m &quot;[JIR1-123456] Step 2: ajout des tests&quot; # Pousser vos changements quand termin√© git add . git commit -m &quot;[JIR1-123456] New feature: ajout de la fonctionnalit√© XYZ&quot; git push origin feature/NOM   NOTE : V√©rifiez que vous √™tes toujours synchronis√© avec la derni√®re version de d√©veloppement. Vous devrez rebaser votre travail.  Exemple de rebase :  # Mettre √† jour sa branche git pull # Rebaser sur develop git pull --rebase origin develop # Suivre les √©tapes de rebase (voir plus bas) # Si le conflit de merge est simple, il sera r√©solu automatiquement # Une fois les conflits r√©solus git push origin feature/&lt;nom-de-la-feature&gt;     ","version":"Next","tagName":"h2"},{"title":"5. Cas d'usage courants‚Äã","type":1,"pageTitle":"GitFlow","url":"/docs/development/demarrage/gitflow#5-cas-dusage-courants","content":" ","version":"Next","tagName":"h2"},{"title":"5.1 Rebase difficile‚Äã","type":1,"pageTitle":"GitFlow","url":"/docs/development/demarrage/gitflow#51-rebase-difficile","content":" Il y a deux possibilit√©s :  Option 1 : Peu de modifications (cherry-pick)  Si vous avez peu de modifications et savez exactement ce qui a √©t√© modifi√© :  # Pousser votre branche actuelle git push origin feature/&lt;nom-de-la-feature&gt; # Cloner un repo propre git switch develop git pull # Cr√©er une nouvelle branche git checkout -b feature/&lt;nom-de-la-feature-secours&gt; # Si le cherry-pick est facile git cherry-pick &lt;commit-ref&gt; # Sinon, copier vos fichiers dans la nouvelle branche # ... # Tester et pousser vers la nouvelle branche git add . git commit -m &quot;[JIR1-123456] New feature: XYZ&quot; git push origin feature/&lt;branche-de-secours&gt;   Une fois merg√©e, vous pouvez supprimer l'ancienne branche.  Option 2 : Beaucoup de conflits (rebase manuel)  Si vous avez beaucoup de conflits :  # Mettre √† jour votre branche git pull # Rebaser sur develop git pull --rebase origin develop   Utilisez VS Code pour r√©soudre les conflits  Pour chaque commit r√©solu :  # Ajouter les fichiers r√©solus git add . git commit -m &quot;[JIR1-123456] Fix: r√©solution des conflits sur &lt;commit_ref&gt;&quot; # Continuer le rebase git rebase --continue     ","version":"Next","tagName":"h3"},{"title":"5.2 Merge‚Äã","type":1,"pageTitle":"GitFlow","url":"/docs/development/demarrage/gitflow#52-merge","content":" Pour simplifier et par praticit√©, les merges sont pr√©f√©r√©s lors de la synchronisation entre branches.  # R√©cup√©rer les r√©f√©rences distantes git fetch -a # Merger les branches git merge origin/feature/machin # √âditer les conflits git add . # Commiter git commit -m &quot;[JIR1-XXXX] Merge: synchronisation ...&quot; # Pousser git push     ","version":"Next","tagName":"h3"},{"title":"5.3 Modifier un commit‚Äã","type":1,"pageTitle":"GitFlow","url":"/docs/development/demarrage/gitflow#53-modifier-un-commit","content":" Pour modifier un commit :  git commit --amend   Cela ouvrira l'√©diteur et vous pourrez changer le message ou le contenu du commit.    ","version":"Next","tagName":"h3"},{"title":"5.4 Ajouter des fichiers au dernier commit‚Äã","type":1,"pageTitle":"GitFlow","url":"/docs/development/demarrage/gitflow#54-ajouter-des-fichiers-au-dernier-commit","content":" Pour ajouter des fichiers au dernier commit existant :  git commit --amend --no-edit     ","version":"Next","tagName":"h3"},{"title":"Commandes Git utiles suppl√©mentaires‚Äã","type":1,"pageTitle":"GitFlow","url":"/docs/development/demarrage/gitflow#commandes-git-utiles-suppl√©mentaires","content":" # Voir l'historique des commits git log --oneline --graph --decorate --all # Voir les diff√©rences avant de commiter git diff # Voir le statut des fichiers git status # Annuler les modifications locales git checkout -- &lt;fichier&gt; # Annuler le dernier commit (garder les changements) git reset --soft HEAD~1 # Annuler le dernier commit (supprimer les changements) git reset --hard HEAD~1 # Mettre de c√¥t√© des modifications temporairement git stash # R√©cup√©rer les modifications mises de c√¥t√© git stash pop # Voir la liste des branches git branch -a # Supprimer une branche locale git branch -d feature/nom-branche # Supprimer une branche distante git push origin --delete feature/nom-branche     ","version":"Next","tagName":"h2"},{"title":"Bonnes pratiques‚Äã","type":1,"pageTitle":"GitFlow","url":"/docs/development/demarrage/gitflow#bonnes-pratiques","content":" ‚úÖ √Ä faire :  Commiter r√©guli√®rement avec des messages clairsToujours travailler sur une branche d√©di√©e (jamais directement sur develop ou main)Synchroniser r√©guli√®rement avec develop pour √©viter les gros conflitsFaire des commits atomiques (une modification logique = un commit)Pr√©fixer vos commits avec la r√©f√©rence du ticket : [JIR1-12345]  ‚ùå √Ä √©viter :  Commiter directement sur develop ou mainFaire des commits trop gros avec plusieurs modifications non li√©esOublier de pull avant de commencer √† travaillerPousser du code non test√©    ","version":"Next","tagName":"h2"},{"title":"Workflow recommand√©‚Äã","type":1,"pageTitle":"GitFlow","url":"/docs/development/demarrage/gitflow#workflow-recommand√©","content":" ","version":"Next","tagName":"h2"},{"title":"Workflow quotidien‚Äã","type":1,"pageTitle":"GitFlow","url":"/docs/development/demarrage/gitflow#workflow-quotidien","content":" Matin : Mettre √† jour votre branche   git switch develop git pull origin develop git switch feature/ma-branche git pull --rebase origin develop   Pendant la journ√©e : Commiter r√©guli√®rement   git add . git commit -m &quot;[JIR1-123] Description claire&quot;   Fin de journ√©e : Pousser votre travail   git push origin feature/ma-branche   ","version":"Next","tagName":"h3"},{"title":"Avant de cr√©er une Merge Request‚Äã","type":1,"pageTitle":"GitFlow","url":"/docs/development/demarrage/gitflow#avant-de-cr√©er-une-merge-request","content":" # 1. S'assurer d'√™tre √† jour avec develop git switch develop git pull origin develop # 2. Rebaser sa branche git switch feature/ma-branche git pull --rebase origin develop # 3. R√©soudre les conflits √©ventuels # 4. Tester que tout fonctionne # 5. Pousser git push origin feature/ma-branche # 6. Cr√©er la Merge Request dans GitLab  ","version":"Next","tagName":"h3"},{"title":"Connexion √† Git avec GitLab","type":0,"sectionRef":"#","url":"/docs/development/devops/tips/gitlab-authentication","content":"","keywords":"","version":"Next"},{"title":"Cr√©ation d'un Personal Access Token‚Äã","type":1,"pageTitle":"Connexion √† Git avec GitLab","url":"/docs/development/devops/tips/gitlab-authentication#cr√©ation-dun-personal-access-token","content":" Depuis GitLab 17.5, l'authentification par login/mot de passe n'est plus autoris√©e. Vous devez obligatoirement utiliser un Personal Access Token (jeton d'acc√®s personnel).  ","version":"Next","tagName":"h2"},{"title":"√âtapes de cr√©ation‚Äã","type":1,"pageTitle":"Connexion √† Git avec GitLab","url":"/docs/development/devops/tips/gitlab-authentication#√©tapes-de-cr√©ation","content":" Pour cr√©er un Personal Access Token, utilisez ce lien :  https://gitlab-hostname/-/user_settings/personal_access_tokens?name=TokenForGit&amp;scopes=api%2Cread_user   ","version":"Next","tagName":"h3"},{"title":"Configuration du token‚Äã","type":1,"pageTitle":"Connexion √† Git avec GitLab","url":"/docs/development/devops/tips/gitlab-authentication#configuration-du-token","content":" Les deux port√©es (scopes) √† s√©lectionner sont :  apiread_user  Astuce : Si vous souhaitez que votre token n'expire jamais, supprimez la date d'expiration.      ","version":"Next","tagName":"h3"},{"title":"Connexion depuis Git Bash‚Äã","type":1,"pageTitle":"Connexion √† Git avec GitLab","url":"/docs/development/devops/tips/gitlab-authentication#connexion-depuis-git-bash","content":" Lors de l'apparition de la fen√™tre de connexion dans Git Bash, vous devez entrer votre adresse e-mail :      ","version":"Next","tagName":"h2"},{"title":"Points importants‚Äã","type":1,"pageTitle":"Connexion √† Git avec GitLab","url":"/docs/development/devops/tips/gitlab-authentication#points-importants","content":" ‚ö†Ô∏è Obligatoire : L'utilisation d'un Personal Access Token est requise depuis GitLab 17.5üîí S√©curit√© : Conservez votre token en lieu s√ªr, il remplace votre mot de passe‚è∞ Expiration : D√©finissez une date d'expiration appropri√©e selon vos besoins de s√©curit√© ","version":"Next","tagName":"h2"},{"title":"Versioning (Gestion des versions)","type":0,"sectionRef":"#","url":"/docs/development/demarrage/versioning","content":"","keywords":"","version":"Next"},{"title":"Introduction‚Äã","type":1,"pageTitle":"Versioning (Gestion des versions)","url":"/docs/development/demarrage/versioning#introduction","content":" Le versioning est un aspect critique du d√©veloppement logiciel et de la gestion des releases. Un versioning appropri√© permet aux d√©veloppeurs et aux utilisateurs de suivre les changements, g√©rer les d√©pendances et comprendre la stabilit√© et la compatibilit√© des composants logiciels.  Ce document pr√©sente les bonnes pratiques de versioning, avec un accent sur le respect des conventions de Semantic Versioning (SemVer) et la gestion des versions de pr√©-release.    ","version":"Next","tagName":"h2"},{"title":"Semantic Versioning (SemVer)‚Äã","type":1,"pageTitle":"Versioning (Gestion des versions)","url":"/docs/development/demarrage/versioning#semantic-versioning-semver","content":" Le Semantic Versioning (SemVer) est un sch√©ma de versioning qui vise √† donner du sens aux changements sous-jacents dans une release. Un num√©ro de version SemVer est format√© comme MAJEUR.MINEUR.CORRECTIF, o√π chaque segment a des implications sp√©cifiques :  MAJEUR : Incr√©ment√© pour les changements incompatibles de l'APIMINEUR : Incr√©ment√© pour l'ajout de fonctionnalit√©s r√©trocompatiblesCORRECTIF : Incr√©ment√© pour les corrections de bugs r√©trocompatibles    ","version":"Next","tagName":"h2"},{"title":"Exemples concrets‚Äã","type":1,"pageTitle":"Versioning (Gestion des versions)","url":"/docs/development/demarrage/versioning#exemples-concrets","content":" 1.0.0 ‚Üí Version stable initiale 1.1.0 ‚Üí Fonctionnalit√© r√©trocompatible ajout√©e 1.1.1 ‚Üí Correction de bug r√©trocompatible 2.0.0 ‚Üí Changements majeurs non r√©trocompatibles 2.0.0-rc.1 ‚Üí Release candidate n¬∞1 de la future version 2.0.0   ","version":"Next","tagName":"h3"},{"title":"Quand incr√©menter chaque segment ?‚Äã","type":1,"pageTitle":"Versioning (Gestion des versions)","url":"/docs/development/demarrage/versioning#quand-incr√©menter-chaque-segment-","content":" Segment\tQuand l'incr√©menter\tExemplesMAJEUR\tChangements cassant la r√©trocompatibilit√©\tSuppression d'une API, modification du comportement d'une m√©thode MINEUR\tAjout de nouvelles fonctionnalit√©s\tNouvelle fonctionnalit√©, nouveau endpoint API CORRECTIF\tCorrection de bugs\tFix de s√©curit√©, correction d'un comportement erron√©    ","version":"Next","tagName":"h3"},{"title":"Versions de pr√©-release‚Äã","type":1,"pageTitle":"Versioning (Gestion des versions)","url":"/docs/development/demarrage/versioning#versions-de-pr√©-release","content":" Les versions de pr√©-release sont utilis√©es pour indiquer que la version est instable et pourrait ne pas satisfaire les exigences de compatibilit√© pr√©vues. Elles sont indiqu√©es en ajoutant un tiret suivi d'une s√©rie d'identifiants s√©par√©s par des points.  ","version":"Next","tagName":"h2"},{"title":"Format‚Äã","type":1,"pageTitle":"Versioning (Gestion des versions)","url":"/docs/development/demarrage/versioning#format","content":" MAJEUR.MINEUR.CORRECTIF-identifiant.num√©ro   ","version":"Next","tagName":"h3"},{"title":"Identifiants courants de pr√©-release‚Äã","type":1,"pageTitle":"Versioning (Gestion des versions)","url":"/docs/development/demarrage/versioning#identifiants-courants-de-pr√©-release","content":" Identifiant\tDescription\tStabilit√©\tUsagealpha\tTests et d√©veloppement pr√©coces\t‚ö†Ô∏è Tr√®s instable\tD√©veloppement actif beta\tPlus stable qu'alpha\t‚ö†Ô∏è Instable\tTests internes/externes rc (release candidate)\tPotentiellement pr√™te pour la production\t‚úÖ Stable\tTests finaux avant release  ","version":"Next","tagName":"h3"},{"title":"Exemples‚Äã","type":1,"pageTitle":"Versioning (Gestion des versions)","url":"/docs/development/demarrage/versioning#exemples","content":" 1.0.0-alpha.1 ‚Üí Premi√®re version alpha 1.0.0-alpha.2 ‚Üí Deuxi√®me version alpha 1.0.0-beta.1 ‚Üí Premi√®re version beta 1.0.0-beta.2 ‚Üí Deuxi√®me version beta 1.0.0-rc.1 ‚Üí Premier release candidate 1.0.0-rc.2 ‚Üí Deuxi√®me release candidate 1.0.0 ‚Üí Version finale stable   ","version":"Next","tagName":"h3"},{"title":"Ordre des versions de pr√©-release‚Äã","type":1,"pageTitle":"Versioning (Gestion des versions)","url":"/docs/development/demarrage/versioning#ordre-des-versions-de-pr√©-release","content":" Les versions de pr√©-release pr√©c√®dent leurs versions normales associ√©es. Par exemple :  1.0.0-alpha.1 &lt; 1.0.0-alpha.2 &lt; 1.0.0-beta.1 &lt; 1.0.0-rc.1 &lt; 1.0.0   R√®gles d'ordre :  Les versions avec identifiants alphab√©tiques sont compar√©es lexicographiquementLes versions avec identifiants num√©riques sont compar√©es num√©riquementUne version de pr√©-release est toujours inf√©rieure √† la version normale associ√©e    ","version":"Next","tagName":"h3"},{"title":"Bonnes pratiques de versioning‚Äã","type":1,"pageTitle":"Versioning (Gestion des versions)","url":"/docs/development/demarrage/versioning#bonnes-pratiques-de-versioning","content":" ","version":"Next","tagName":"h2"},{"title":"1. ‚úÖ Incr√©menter les versions de mani√®re logique‚Äã","type":1,"pageTitle":"Versioning (Gestion des versions)","url":"/docs/development/demarrage/versioning#1--incr√©menter-les-versions-de-mani√®re-logique","content":" MAJEUR - Incr√©mentez quand :  Vous supprimez des fonctionnalit√©s existantesVous modifiez le comportement d'APIs existantesVous effectuez des changements cassant la r√©trocompatibilit√©  MINEUR - Incr√©mentez quand :  Vous ajoutez de nouvelles fonctionnalit√©s r√©trocompatiblesVous d√©pr√©ciez des fonctionnalit√©s (sans les supprimer)Vous am√©liorez significativement des fonctionnalit√©s internes  CORRECTIF - Incr√©mentez quand :  Vous corrigez des bugsVous effectuez des corrections de s√©curit√©Vous am√©liorez les performances sans changer l'API  ","version":"Next","tagName":"h3"},{"title":"2. üè∑Ô∏è Utiliser les tags de pr√©-release pour les versions instables‚Äã","type":1,"pageTitle":"Versioning (Gestion des versions)","url":"/docs/development/demarrage/versioning#2-Ô∏è-utiliser-les-tags-de-pr√©-release-pour-les-versions-instables","content":" Utilisez les tags de pr√©-release (alpha, beta, rc) pour indiquer les versions instables ou en phase de test.  Exemple de workflow :  # Phase de d√©veloppement 1.0.0-alpha.1 1.0.0-alpha.2 # Phase de tests internes 1.0.0-beta.1 1.0.0-beta.2 # Tests finaux 1.0.0-rc.1 1.0.0-rc.2 # Release stable 1.0.0   ","version":"Next","tagName":"h3"},{"title":"3. üìù Maintenir un Changelog‚Äã","type":1,"pageTitle":"Versioning (Gestion des versions)","url":"/docs/development/demarrage/versioning#3--maintenir-un-changelog","content":" Conservez un changelog d√©taill√© qui documente tous les changements effectu√©s dans chaque version.  Format recommand√© (Keep a Changelog) :  # Changelog ## [1.2.0] - 2024-12-17 ### Added - Nouvelle fonctionnalit√© d'export PDF - Support de l'authentification OAuth2 ### Changed - Am√©lioration des performances de la recherche - Mise √† jour de la documentation API ### Fixed - Correction du bug de pagination - Fix du memory leak dans le service de cache ### Deprecated - L'ancienne API REST sera supprim√©e en version 2.0.0 ## [1.1.1] - 2024-12-10 ### Fixed - Correction critique de s√©curit√© sur l'authentification   ","version":"Next","tagName":"h3"},{"title":"4. ü§ñ Automatiser le versioning‚Äã","type":1,"pageTitle":"Versioning (Gestion des versions)","url":"/docs/development/demarrage/versioning#4--automatiser-le-versioning","content":" Utilisez des outils automatis√©s pour g√©rer le versioning.  Outils recommand√©s :  Maven (Java) :  &lt;plugin&gt; &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt; &lt;artifactId&gt;versions-maven-plugin&lt;/artifactId&gt; &lt;version&gt;2.16.0&lt;/version&gt; &lt;/plugin&gt;   # Incr√©menter la version MAJEUR mvn versions:set -DnewVersion=2.0.0 # Incr√©menter la version MINEUR mvn versions:set -DnewVersion=1.1.0 # Incr√©menter la version CORRECTIF mvn versions:set -DnewVersion=1.0.1   NPM (Angular/Node.js) :  # Incr√©menter la version MAJEUR npm version major # Incr√©menter la version MINEUR npm version minor # Incr√©menter la version CORRECTIF npm version patch # Version de pr√©-release npm version prerelease --preid=beta   Semantic Release (automatisation compl√®te) :  npm install --save-dev semantic-release # Configuration dans package.json { &quot;release&quot;: { &quot;branches&quot;: [&quot;main&quot;, &quot;develop&quot;], &quot;plugins&quot;: [ &quot;@semantic-release/commit-analyzer&quot;, &quot;@semantic-release/release-notes-generator&quot;, &quot;@semantic-release/changelog&quot;, &quot;@semantic-release/npm&quot;, &quot;@semantic-release/git&quot; ] } }   ","version":"Next","tagName":"h3"},{"title":"5. üì¢ Communiquer clairement les changements‚Äã","type":1,"pageTitle":"Versioning (Gestion des versions)","url":"/docs/development/demarrage/versioning#5--communiquer-clairement-les-changements","content":" Communiquez clairement les changements de version, en particulier les mises √† jour MAJEURES.  √âl√©ments √† inclure dans les release notes :  ‚ú® Nouvelles fonctionnalit√©süîß Corrections de bugs‚ö†Ô∏è Breaking changes (changements cassants)üìö Mises √† jour de la documentationüîê Correctifs de s√©curit√©üöÄ Am√©liorations de performanceüì¶ Mises √† jour de d√©pendances  Exemple de release note :  # Version 2.0.0 - BREAKING CHANGES ## ‚ö†Ô∏è Breaking Changes - L'API REST v1 a √©t√© supprim√©e. Utilisez maintenant l'API v2. - Le format de configuration a chang√©. Voir le guide de migration ci-dessous. ## ‚ú® Nouvelles fonctionnalit√©s - Support de PostgreSQL 15 - Nouveau syst√®me de cache distribu√© avec Redis - Interface d'administration refonte compl√®te ## üîß Corrections - Fix du memory leak dans le service de notification - Correction de la gestion des timeouts ## üìö Guide de migration Pour migrer de la version 1.x vers 2.0.0, suivez ces √©tapes : 1. Mettre √† jour votre configuration (voir exemple) 2. Migrer les appels API v1 vers v2 (voir documentation) 3. Tester votre application   ","version":"Next","tagName":"h3"},{"title":"6. üõ°Ô∏è √âviter les breaking changes‚Äã","type":1,"pageTitle":"Versioning (Gestion des versions)","url":"/docs/development/demarrage/versioning#6-Ô∏è-√©viter-les-breaking-changes","content":" Minimisez les breaking changes pour assurer un chemin de mise √† jour fluide.  Strat√©gies pour √©viter les breaking changes :  D√©pr√©ciation progressive   @Deprecated(since = &quot;1.5&quot;, forRemoval = true) public void oldMethod() { // Sera supprim√© en version 2.0.0 } public void newMethod() { // Nouvelle impl√©mentation }   Versioning d'API   /api/v1/users ‚Üí Ancienne version /api/v2/users ‚Üí Nouvelle version   Feature flags   if (featureFlags.isEnabled(&quot;new-authentication&quot;)) { // Nouveau comportement } else { // Ancien comportement }   Configuration r√©trocompatible   # Supporter les deux formats database: url: &quot;jdbc:postgresql://localhost:5432/mydb&quot; # Ancien format connection-string: &quot;postgresql://localhost:5432/mydb&quot; # Nouveau format     ","version":"Next","tagName":"h3"},{"title":"Workflow de versioning recommand√©‚Äã","type":1,"pageTitle":"Versioning (Gestion des versions)","url":"/docs/development/demarrage/versioning#workflow-de-versioning-recommand√©","content":" ","version":"Next","tagName":"h2"},{"title":"Pour un projet Java/Maven‚Äã","type":1,"pageTitle":"Versioning (Gestion des versions)","url":"/docs/development/demarrage/versioning#pour-un-projet-javamaven","content":" # 1. Cr√©er une branche de release git checkout -b release/1.2.0 # 2. Mettre √† jour la version dans pom.xml mvn versions:set -DnewVersion=1.2.0 # 3. Mettre √† jour le CHANGELOG.md # ... √©diter manuellement # 4. Commiter les changements git add . git commit -m &quot;chore: bump version to 1.2.0&quot; # 5. Cr√©er un tag git tag -a v1.2.0 -m &quot;Release version 1.2.0&quot; # 6. Pousser git push origin release/1.2.0 git push origin v1.2.0 # 7. Merger dans main et develop git checkout main git merge release/1.2.0 git push origin main git checkout develop git merge release/1.2.0 git push origin develop   ","version":"Next","tagName":"h3"},{"title":"Pour un projet Angular/NPM‚Äã","type":1,"pageTitle":"Versioning (Gestion des versions)","url":"/docs/development/demarrage/versioning#pour-un-projet-angularnpm","content":" # 1. Cr√©er une branche de release git checkout -b release/1.2.0 # 2. Incr√©menter la version npm version minor # Cr√©e automatiquement le tag # 3. Mettre √† jour le CHANGELOG.md # ... √©diter manuellement # 4. Commiter et pousser git push origin release/1.2.0 git push origin --tags # 5. Merger dans main et develop git checkout main git merge release/1.2.0 git push origin main git checkout develop git merge release/1.2.0 git push origin develop     ","version":"Next","tagName":"h3"},{"title":"Gestion des versions selon l'environnement‚Äã","type":1,"pageTitle":"Versioning (Gestion des versions)","url":"/docs/development/demarrage/versioning#gestion-des-versions-selon-lenvironnement","content":" Environnement\tType de version\tExemple\tStabilit√©D√©veloppement\tSNAPSHOT / alpha\t1.2.0-SNAPSHOT\t‚ö†Ô∏è Instable Recette\tbeta\t1.2.0-beta.1\t‚ö†Ô∏è Tests en cours Pr√©-production\trc\t1.2.0-rc.1\t‚úÖ Stable Production\tStable\t1.2.0\t‚úÖ Production    ","version":"Next","tagName":"h2"},{"title":"Outils et ressources‚Äã","type":1,"pageTitle":"Versioning (Gestion des versions)","url":"/docs/development/demarrage/versioning#outils-et-ressources","content":" ","version":"Next","tagName":"h2"},{"title":"Outils de versioning‚Äã","type":1,"pageTitle":"Versioning (Gestion des versions)","url":"/docs/development/demarrage/versioning#outils-de-versioning","content":" Maven Versions Plugin - Gestion des versions Mavensemantic-release - Automatisation compl√®te du versioningstandard-version - G√©n√©ration automatique de changelogcommitizen - Aide √† la r√©daction de commits conventionnels  ","version":"Next","tagName":"h3"},{"title":"Ressources‚Äã","type":1,"pageTitle":"Versioning (Gestion des versions)","url":"/docs/development/demarrage/versioning#ressources","content":" Semantic Versioning SpecificationKeep a ChangelogConventional CommitsMaven Versions Plugin Documentation    ","version":"Next","tagName":"h3"},{"title":"Checklist avant une release‚Äã","type":1,"pageTitle":"Versioning (Gestion des versions)","url":"/docs/development/demarrage/versioning#checklist-avant-une-release","content":"  Le code est merg√© dans la branche de release Tous les tests passent (unitaires, int√©gration, e2e) Le CHANGELOG.md est √† jour La version est incr√©ment√©e correctement dans tous les fichiers La documentation est √† jour Les release notes sont r√©dig√©es Un tag Git est cr√©√© Les breaking changes sont document√©s avec un guide de migration L'√©quipe est inform√©e de la release Le d√©ploiement est planifi√©    ","version":"Next","tagName":"h2"},{"title":"Exemples de messages de commit‚Äã","type":1,"pageTitle":"Versioning (Gestion des versions)","url":"/docs/development/demarrage/versioning#exemples-de-messages-de-commit","content":" Pour faciliter l'automatisation du versioning, utilisez les Conventional Commits :  # MAJEUR (breaking change) feat!: suppression de l'API v1 BREAKING CHANGE: l'API v1 n'est plus support√©e # MINEUR (nouvelle fonctionnalit√©) feat: ajout de l'export PDF # CORRECTIF (bug fix) fix: correction du bug de pagination # Autres types docs: mise √† jour de la documentation chore: mise √† jour des d√©pendances refactor: refactoring du service d'authentification perf: am√©lioration des performances de recherche test: ajout de tests unitaires     ","version":"Next","tagName":"h2"},{"title":"R√©sum√©‚Äã","type":1,"pageTitle":"Versioning (Gestion des versions)","url":"/docs/development/demarrage/versioning#r√©sum√©","content":" ‚úÖ √Ä faire :  Suivre le Semantic Versioning (SemVer)Utiliser des versions de pr√©-release pour les versions instablesMaintenir un changelog d√©taill√©Automatiser le versioningCommuniquer clairement les changementsDocumenter les breaking changes  ‚ùå √Ä √©viter :  Sauter des versions arbitrairementFaire des breaking changes dans des versions MINOR ou PATCHOublier de documenter les changementsRelease en production sans tests suffisantsChanger la version manuellement sans processus clair ","version":"Next","tagName":"h2"},{"title":"Drupal guide","type":0,"sectionRef":"#","url":"/docs/development/drupal","content":"Drupal guide","keywords":"","version":"Next"},{"title":"Installation de WSL 2 et Docker","type":0,"sectionRef":"#","url":"/docs/development/devops/tips/wsl-installation","content":"","keywords":"","version":"Next"},{"title":"Installation de WSL‚Äã","type":1,"pageTitle":"Installation de WSL 2 et Docker","url":"/docs/development/devops/tips/wsl-installation#installation-de-wsl","content":" Entrez cette commande dans PowerShell puis red√©marrez votre machine :  wsl --install   V√©rifiez la version de distribution, elle doit √™tre Ubuntu :  wsl -l   Si Ubuntu n'est pas install√© :  wsl --install -d Ubuntu   Si Ubuntu n'est pas d√©fini par d√©faut :  wsl -s Ubuntu     ","version":"Next","tagName":"h2"},{"title":"Installation de Docker dans WSL2‚Äã","type":1,"pageTitle":"Installation de WSL 2 et Docker","url":"/docs/development/devops/tips/wsl-installation#installation-de-docker-dans-wsl2","content":" Lancez WSL depuis le menu Windows.  ","version":"Next","tagName":"h2"},{"title":"Installation‚Äã","type":1,"pageTitle":"Installation de WSL 2 et Docker","url":"/docs/development/devops/tips/wsl-installation#installation","content":" sudo apt-get update sudo apt-get install apt-transport-https ca-certificates curl gnupg lsb-release curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg echo &quot;deb [arch=amd64 signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable&quot; | sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null sudo apt-get update sudo apt-get install docker-ce docker-ce-cli containerd.io   ","version":"Next","tagName":"h3"},{"title":"Lancer Docker‚Äã","type":1,"pageTitle":"Installation de WSL 2 et Docker","url":"/docs/development/devops/tips/wsl-installation#lancer-docker","content":" sudo service docker start   Note : Apr√®s chaque red√©marrage, vous devez ouvrir WSL et lancer Docker (ou voir la section AutoStart ci-dessous).    ","version":"Next","tagName":"h3"},{"title":"Installation de docker-compose‚Äã","type":1,"pageTitle":"Installation de WSL 2 et Docker","url":"/docs/development/devops/tips/wsl-installation#installation-de-docker-compose","content":" sudo curl -SL https://github.com/docker/compose/releases/download/v2.2.3/docker-compose-linux-x86_64 -o /usr/local/bin/docker-compose sudo chmod +x /usr/local/bin/docker-compose   Important : Le d√©p√¥t par d√©faut n'est pas √† jour. Si vous installez docker-compose avec sudo apt install docker-compose, la version sera une ancienne version 1.25.0.    ","version":"Next","tagName":"h2"},{"title":"Gestion de Docker‚Äã","type":1,"pageTitle":"Installation de WSL 2 et Docker","url":"/docs/development/devops/tips/wsl-installation#gestion-de-docker","content":" ","version":"Next","tagName":"h2"},{"title":"Exposition de Docker sur localhost‚Äã","type":1,"pageTitle":"Installation de WSL 2 et Docker","url":"/docs/development/devops/tips/wsl-installation#exposition-de-docker-sur-localhost","content":" Si vous souhaitez g√©rer Docker avec le plugin Docker d'IntelliJ, vous devez exposer Docker sur localhost.  Ajoutez dans le fichier /etc/default/docker :  export DOCKER_OPTS=&quot;--host unix:// --host tcp://127.0.0.1:2375&quot;   ","version":"Next","tagName":"h3"},{"title":"Alternative : Portainer‚Äã","type":1,"pageTitle":"Installation de WSL 2 et Docker","url":"/docs/development/devops/tips/wsl-installation#alternative--portainer","content":" Vous pouvez √©galement installer un conteneur Portainer pour g√©rer votre environnement Docker.    ","version":"Next","tagName":"h3"},{"title":"Astuces‚Äã","type":1,"pageTitle":"Installation de WSL 2 et Docker","url":"/docs/development/devops/tips/wsl-installation#astuces","content":" ","version":"Next","tagName":"h2"},{"title":"WSL + VPN‚Äã","type":1,"pageTitle":"Installation de WSL 2 et Docker","url":"/docs/development/devops/tips/wsl-installation#wsl--vpn","content":" Si vous rencontrez des probl√®mes r√©seau lors du d√©marrage de WSL avec un VPN, vous pouvez utiliser cette image WSL pour cr√©er un pont entre HyperV et l'h√¥te.  Image √† utiliser : wsl-vpnkit-v0.3.8.tar.gz (utilisez uniquement cette version 0.3.8)  Installation‚Äã  Ouvrez une invite PowerShell et ex√©cutez les commandes suivantes :  wsl --import wsl-vpnkit $env:USERPROFILE\\wsl-vpnkit wsl-vpnkit-v0.3.8.tar.gz --version 2   Ex√©cutez cette commande chaque fois que vous perdez la connectivit√© r√©seau lors de la connexion au VPN :  wsl.exe -d wsl-vpnkit service wsl-vpnkit start     ","version":"Next","tagName":"h3"},{"title":"√âviter sudo‚Äã","type":1,"pageTitle":"Installation de WSL 2 et Docker","url":"/docs/development/devops/tips/wsl-installation#√©viter-sudo","content":" Pour ajouter l'utilisateur WSL au groupe Docker et √©viter d'ex√©cuter Docker avec sudo (facultatif) :  sudo usermod -aG docker $USER     ","version":"Next","tagName":"h3"},{"title":"AutoStart‚Äã","type":1,"pageTitle":"Installation de WSL 2 et Docker","url":"/docs/development/devops/tips/wsl-installation#autostart","content":" Pour d√©marrer automatiquement Docker au lancement de WSL :  √âditez sudoers :  sudo visudo   Ajoutez √† la fin du fichier :  # Docker daemon specification [user_ubuntu] ALL=(ALL) NOPASSWD: /usr/bin/dockerd   √âditez bashrc :  vi ~/.bashrc   Ajoutez √† la fin du fichier :  # Start Docker daemon automatically when logging in if not running. RUNNING=`ps aux | grep dockerd | grep -v grep` if [ -z &quot;$RUNNING&quot; ]; then sudo dockerd &gt; /dev/null 2&gt;&amp;1 &amp; disown fi     ","version":"Next","tagName":"h3"},{"title":"Backup / Restore‚Äã","type":1,"pageTitle":"Installation de WSL 2 et Docker","url":"/docs/development/devops/tips/wsl-installation#backup--restore","content":" Pour sauvegarder des volumes depuis Docker Desktop et les restaurer dans WSL :  ${PWD} = variable pour le r√©pertoire courant[VOLUME] = nom du volume  Backup‚Äã  docker run --rm -it -v ${PWD}:/destination -v [VOLUME]:/source ubuntu bash cd /source &amp;&amp; tar cvf /destination/[VOLUME].tar exit   Restore‚Äã  docker run --rm -it -v ${PWD}:/source -v [VOLUME]:/destination ubuntu bash cd /destination &amp;&amp; tar xvf /source/[VOLUME].tar exit  ","version":"Next","tagName":"h3"},{"title":"Bonnes pratiques","type":0,"sectionRef":"#","url":"/docs/development/drupal/best-practices","content":"Bonnes pratiques","keywords":"","version":"Next"},{"title":"Java guide","type":0,"sectionRef":"#","url":"/docs/development/java","content":"Java guide","keywords":"","version":"Next"},{"title":"G√©n√©ration automatique de Changelog avec git-cliff","type":0,"sectionRef":"#","url":"/docs/development/devops/tips/cliff","content":"","keywords":"","version":"Next"},{"title":"Introduction‚Äã","type":1,"pageTitle":"G√©n√©ration automatique de Changelog avec git-cliff","url":"/docs/development/devops/tips/cliff#introduction","content":" git-cliff est un g√©n√©rateur de changelog rapide et configurable qui g√©n√®re automatiquement des changelogs √† partir de l'historique Git en suivant les conventions Conventional Commits.  Pourquoi git-cliff ?  üöÄ Ultra-rapide (√©crit en Rust)üìù Support des Conventional Commitsüé® Hautement personnalisableüîß Int√©gration facile CI/CD    ","version":"Next","tagName":"h2"},{"title":"Installation rapide‚Äã","type":1,"pageTitle":"G√©n√©ration automatique de Changelog avec git-cliff","url":"/docs/development/devops/tips/cliff#installation-rapide","content":" # Linux/macOS cargo install git-cliff # Ou t√©l√©chargement direct curl -L https://github.com/orhun/git-cliff/releases/latest/download/git-cliff-x86_64-unknown-linux-gnu.tar.gz | tar xz sudo mv git-cliff /usr/local/bin/ # V√©rification git-cliff --version     ","version":"Next","tagName":"h2"},{"title":"Configuration de base‚Äã","type":1,"pageTitle":"G√©n√©ration automatique de Changelog avec git-cliff","url":"/docs/development/devops/tips/cliff#configuration-de-base","content":" Cr√©ez cliff.toml √† la racine de votre projet :  [changelog] header = &quot;&quot;&quot; # Changelog\\n Le format est bas√© sur [Keep a Changelog](https://keepachangelog.com/fr/1.0.0/).\\n &quot;&quot;&quot; body = &quot;&quot;&quot; {% if version %}\\ ## [{{ version | trim_start_matches(pat=&quot;v&quot;) }}] - {{ timestamp | date(format=&quot;%Y-%m-%d&quot;) }} {% else %}\\ ## [Non publi√©] {% endif %}\\ {% for group, commits in commits | group_by(attribute=&quot;group&quot;) %} ### {{ group }} {% for commit in commits %} - {{ commit.message | upper_first }}{% if commit.breaking %} [**BREAKING**]{% endif %}\\ {% endfor %} {% endfor %}\\n &quot;&quot;&quot; footer = &quot;&quot;&quot; &lt;!-- generated by git-cliff --&gt; &quot;&quot;&quot; [git] conventional_commits = true filter_unconventional = true commit_parsers = [ { message = &quot;^feat&quot;, group = &quot;‚ú® Nouvelles fonctionnalit√©s&quot; }, { message = &quot;^fix&quot;, group = &quot;üêõ Corrections de bugs&quot; }, { message = &quot;^doc&quot;, group = &quot;üìö Documentation&quot; }, { message = &quot;^perf&quot;, group = &quot;‚ö° Performance&quot; }, { message = &quot;^refactor&quot;, group = &quot;‚ôªÔ∏è Refactoring&quot; }, { message = &quot;^test&quot;, group = &quot;‚úÖ Tests&quot; }, { message = &quot;^chore\\\\(release\\\\)&quot;, skip = true }, { message = &quot;^chore&quot;, group = &quot;üîß Maintenance&quot; }, ] # Liens vers GitLab commit_preprocessors = [ { pattern = '\\(#([0-9]+)\\)', replace = &quot;([#${1}](https://gitlab.com/votre-org/votre-repo/-/issues/${1}))&quot; }, { pattern = '\\(!([0-9]+)\\)', replace = &quot;([!${1}](https://gitlab.com/votre-org/votre-repo/-/merge_requests/${1}))&quot; }, ] sort_commits = &quot;oldest&quot;     ","version":"Next","tagName":"h2"},{"title":"Utilisation quotidienne‚Äã","type":1,"pageTitle":"G√©n√©ration automatique de Changelog avec git-cliff","url":"/docs/development/devops/tips/cliff#utilisation-quotidienne","content":" ","version":"Next","tagName":"h2"},{"title":"Commandes essentielles‚Äã","type":1,"pageTitle":"G√©n√©ration automatique de Changelog avec git-cliff","url":"/docs/development/devops/tips/cliff#commandes-essentielles","content":" # Voir les changements non publi√©s git-cliff --unreleased # G√©n√©rer le changelog complet git-cliff -o CHANGELOG.md # G√©n√©rer pour une nouvelle version git-cliff --tag v1.2.0 -o CHANGELOG.md # Pr√©visualiser avec une future version git-cliff --unreleased --tag v1.2.0     ","version":"Next","tagName":"h3"},{"title":"Int√©gration GitLab CI‚Äã","type":1,"pageTitle":"G√©n√©ration automatique de Changelog avec git-cliff","url":"/docs/development/devops/tips/cliff#int√©gration-gitlab-ci","content":" Cr√©ez .gitlab-ci.yml :  stages: - release variables: GIT_DEPTH: 0 # Important pour l'historique complet generate-changelog: stage: release image: rust:alpine only: - tags - /^v\\d+\\.\\d+\\.\\d+$/ before_script: - apk add --no-cache git curl - | curl -L https://github.com/orhun/git-cliff/releases/latest/download/git-cliff-x86_64-unknown-linux-musl.tar.gz | tar xz mv git-cliff /usr/local/bin/ chmod +x /usr/local/bin/git-cliff script: - echo &quot;üöÄ G√©n√©ration du changelog pour $CI_COMMIT_TAG&quot; - git-cliff --latest --output CHANGELOG.md - | # Commit et push du changelog git config user.name &quot;GitLab CI&quot; git config user.email &quot;ci@gitlab.com&quot; git add CHANGELOG.md git commit -m &quot;docs: update CHANGELOG.md for $CI_COMMIT_TAG [skip ci]&quot; || true git remote set-url origin https://oauth2:${CI_JOB_TOKEN}@${CI_SERVER_HOST}/${CI_PROJECT_PATH}.git git push origin HEAD:main -o ci.skip || true artifacts: paths: - CHANGELOG.md expire_in: 1 month create-release: stage: release image: registry.gitlab.com/gitlab-org/release-cli:latest needs: - generate-changelog only: - tags - /^v\\d+\\.\\d+\\.\\d+$/ script: - echo &quot;üì¶ Cr√©ation de la release $CI_COMMIT_TAG&quot; release: name: 'Release $CI_COMMIT_TAG' description: './CHANGELOG.md' tag_name: '$CI_COMMIT_TAG' ref: '$CI_COMMIT_SHA'     ","version":"Next","tagName":"h2"},{"title":"Script de release‚Äã","type":1,"pageTitle":"G√©n√©ration automatique de Changelog avec git-cliff","url":"/docs/development/devops/tips/cliff#script-de-release","content":" Cr√©ez scripts/release.sh :  #!/bin/bash set -e # Couleurs GREEN='\\033[0;32m' RED='\\033[0;31m' NC='\\033[0m' info() { echo -e &quot;${GREEN}[INFO]${NC} $1&quot;; } error() { echo -e &quot;${RED}[ERROR]${NC} $1&quot;; exit 1; } # V√©rifications command -v git-cliff &amp;&gt; /dev/null || error &quot;git-cliff n'est pas install√©&quot; [[ -n $(git status -s) ]] &amp;&amp; error &quot;Vous avez des changements non commit√©s&quot; # R√©cup√©rer la version actuelle current_version=$(git describe --tags --abbrev=0 2&gt;/dev/null || echo &quot;v0.0.0&quot;) current_version=${current_version#v} info &quot;Version actuelle: $current_version&quot; # Demander le type de release echo &quot;&quot; echo &quot;Type de release:&quot; echo &quot;1) major (x.0.0)&quot; echo &quot;2) minor (0.x.0)&quot; echo &quot;3) patch (0.0.x)&quot; read -p &quot;Choisissez (1-3): &quot; release_type IFS='.' read -r major minor patch &lt;&lt;&lt; &quot;$current_version&quot; case $release_type in 1) new_version=&quot;$((major + 1)).0.0&quot; ;; 2) new_version=&quot;$major.$((minor + 1)).0&quot; ;; 3) new_version=&quot;$major.$minor.$((patch + 1))&quot; ;; *) error &quot;Choix invalide&quot; ;; esac info &quot;Nouvelle version: v$new_version&quot; # Confirmation read -p &quot;Continuer? (y/n) &quot; -n 1 -r echo [[ ! $REPLY =~ ^[Yy]$ ]] &amp;&amp; error &quot;Annul√©&quot; # G√©n√©rer le changelog info &quot;G√©n√©ration du changelog...&quot; git-cliff --tag &quot;v$new_version&quot; --output CHANGELOG.md # Aper√ßu echo &quot;&quot; info &quot;Aper√ßu:&quot; git-cliff --tag &quot;v$new_version&quot; --unreleased echo &quot;&quot; read -p &quot;Le changelog vous convient? (y/n) &quot; -n 1 -r echo [[ ! $REPLY =~ ^[Yy]$ ]] &amp;&amp; error &quot;Annul√©&quot; # Commit et tag info &quot;Commit du changelog...&quot; git add CHANGELOG.md git commit -m &quot;docs: update CHANGELOG.md for v$new_version&quot; info &quot;Cr√©ation du tag...&quot; git tag -a &quot;v$new_version&quot; -m &quot;Release v$new_version&quot; info &quot;Push...&quot; git push origin main git push origin &quot;v$new_version&quot; info &quot;‚úÖ Release v$new_version cr√©√©e!&quot;   chmod +x scripts/release.sh ./scripts/release.sh     ","version":"Next","tagName":"h2"},{"title":"Configuration avanc√©e (optionnelle)‚Äã","type":1,"pageTitle":"G√©n√©ration automatique de Changelog avec git-cliff","url":"/docs/development/devops/tips/cliff#configuration-avanc√©e-optionnelle","content":" ","version":"Next","tagName":"h2"},{"title":"Pour un monorepo‚Äã","type":1,"pageTitle":"G√©n√©ration automatique de Changelog avec git-cliff","url":"/docs/development/devops/tips/cliff#pour-un-monorepo","content":" # cliff-backend.toml [git] commit_parsers = [ { message = &quot;^feat\\\\(backend\\\\)&quot;, group = &quot;‚ú® Nouvelles fonctionnalit√©s&quot; }, { message = &quot;^fix\\\\(backend\\\\)&quot;, group = &quot;üêõ Corrections&quot; }, ] tag_pattern = &quot;backend-v[0-9]*&quot;   # G√©n√©rer le changelog backend uniquement git-cliff --config cliff-backend.toml --include-path &quot;backend/*&quot; -o backend/CHANGELOG.md   ","version":"Next","tagName":"h3"},{"title":"Avec int√©gration Jira‚Äã","type":1,"pageTitle":"G√©n√©ration automatique de Changelog avec git-cliff","url":"/docs/development/devops/tips/cliff#avec-int√©gration-jira","content":" commit_preprocessors = [ # Lier les tickets Jira { pattern = '([A-Z]+-\\d+)', replace = &quot;([${1}](https://votre-jira.atlassian.net/browse/${1}))&quot; }, # Lier les issues GitLab { pattern = '#(\\d+)', replace = &quot;([#${1}](https://gitlab.com/votre-org/votre-repo/-/issues/${1}))&quot; }, ]     ","version":"Next","tagName":"h3"},{"title":"Git Hook pour validation des commits‚Äã","type":1,"pageTitle":"G√©n√©ration automatique de Changelog avec git-cliff","url":"/docs/development/devops/tips/cliff#git-hook-pour-validation-des-commits","content":" Cr√©ez .git/hooks/commit-msg :  #!/bin/bash commit_msg=$(cat &quot;$1&quot;) conventional_regex='^(feat|fix|docs|style|refactor|perf|test|build|ci|chore|revert)(\\(.+\\))?: .{1,}' if ! echo &quot;$commit_msg&quot; | grep -qE &quot;$conventional_regex&quot;; then echo &quot;‚ùå Message de commit invalide!&quot; echo &quot;Format: &lt;type&gt;(&lt;scope&gt;): &lt;description&gt;&quot; echo &quot;&quot; echo &quot;Exemples:&quot; echo &quot; feat(auth): ajout OAuth2&quot; echo &quot; fix(api): correction pagination&quot; exit 1 fi   chmod +x .git/hooks/commit-msg     ","version":"Next","tagName":"h2"},{"title":"Exemples de messages de commit‚Äã","type":1,"pageTitle":"G√©n√©ration automatique de Changelog avec git-cliff","url":"/docs/development/devops/tips/cliff#exemples-de-messages-de-commit","content":" # Nouvelles fonctionnalit√©s feat: ajout de l'export PDF feat(auth): int√©gration Keycloak # Corrections de bugs fix: correction du bug de pagination fix(api): gestion correcte des timeouts # Breaking changes feat!: suppression de l'API v1 BREAKING CHANGE: l'API v1 n'est plus support√©e # Autres types docs: mise √† jour du README chore(deps): mise √† jour des d√©pendances refactor: refactoring du service d'auth perf: optimisation des requ√™tes SQL test: ajout de tests unitaires     ","version":"Next","tagName":"h2"},{"title":"Troubleshooting‚Äã","type":1,"pageTitle":"G√©n√©ration automatique de Changelog avec git-cliff","url":"/docs/development/devops/tips/cliff#troubleshooting","content":" ","version":"Next","tagName":"h2"},{"title":"\"No tags found\"‚Äã","type":1,"pageTitle":"G√©n√©ration automatique de Changelog avec git-cliff","url":"/docs/development/devops/tips/cliff#no-tags-found","content":" # Cr√©er un tag initial git tag v0.1.0 git push origin v0.1.0   ","version":"Next","tagName":"h3"},{"title":"Commits non d√©tect√©s dans GitLab CI‚Äã","type":1,"pageTitle":"G√©n√©ration automatique de Changelog avec git-cliff","url":"/docs/development/devops/tips/cliff#commits-non-d√©tect√©s-dans-gitlab-ci","content":" # Assurez-vous d'avoir dans .gitlab-ci.yml variables: GIT_DEPTH: 0   ","version":"Next","tagName":"h3"},{"title":"Tester la configuration‚Äã","type":1,"pageTitle":"G√©n√©ration automatique de Changelog avec git-cliff","url":"/docs/development/devops/tips/cliff#tester-la-configuration","content":" # Voir les commits qui seront inclus git-cliff --unreleased --context | jq '.commits' # Mode dry-run git-cliff --unreleased --dry-run     ","version":"Next","tagName":"h3"},{"title":"Checklist d'int√©gration‚Äã","type":1,"pageTitle":"G√©n√©ration automatique de Changelog avec git-cliff","url":"/docs/development/devops/tips/cliff#checklist-dint√©gration","content":"  Installer git-cliff : cargo install git-cliff Cr√©er cliff.toml √† la racine du projet Adapter les liens GitLab dans la configuration Ajouter le job dans .gitlab-ci.yml Cr√©er le script scripts/release.sh Ajouter le hook de validation des commits Tester avec git-cliff --unreleased Former l'√©quipe aux Conventional Commits Cr√©er votre premi√®re release : ./scripts/release.sh    ","version":"Next","tagName":"h2"},{"title":"Ressources‚Äã","type":1,"pageTitle":"G√©n√©ration automatique de Changelog avec git-cliff","url":"/docs/development/devops/tips/cliff#ressources","content":" Documentation officielleConventional CommitsKeep a Changelog ","version":"Next","tagName":"h2"},{"title":"Best Practices guide","type":0,"sectionRef":"#","url":"/docs/development/java/best-practices","content":"Best Practices guide","keywords":"","version":"Next"},{"title":"Couche m√©tier","type":0,"sectionRef":"#","url":"/docs/development/java/business-layer","content":"Couche m√©tier","keywords":"","version":"Next"},{"title":"Couche donn√©es","type":0,"sectionRef":"#","url":"/docs/development/java/data-layer","content":"Couche donn√©es","keywords":"","version":"Next"},{"title":"TODO","type":0,"sectionRef":"#","url":"/docs/development/java/business-layer/explanation","content":"TODO","keywords":"","version":"Next"},{"title":"Installation et utilisation de Keycloak","type":0,"sectionRef":"#","url":"/docs/development/devops/tips/keycloak","content":"","keywords":"","version":"Next"},{"title":"Introduction‚Äã","type":1,"pageTitle":"Installation et utilisation de Keycloak","url":"/docs/development/devops/tips/keycloak#introduction","content":" Keycloak est une solution open-source de gestion d'identit√© et d'acc√®s (IAM) qui permet d'ajouter l'authentification et l'autorisation √† vos applications.  Ce guide couvre l'installation locale de Keycloak avec Docker Compose et la configuration des principaux flows OAuth2/OpenID Connect.    ","version":"Next","tagName":"h2"},{"title":"Pr√©requis‚Äã","type":1,"pageTitle":"Installation et utilisation de Keycloak","url":"/docs/development/devops/tips/keycloak#pr√©requis","content":" Docker et Docker Compose install√©sWSL2 (si vous √™tes sur Windows)Un navigateur webcurl ou Postman pour tester les APIs    ","version":"Next","tagName":"h2"},{"title":"Installation avec Docker Compose‚Äã","type":1,"pageTitle":"Installation et utilisation de Keycloak","url":"/docs/development/devops/tips/keycloak#installation-avec-docker-compose","content":" ","version":"Next","tagName":"h2"},{"title":"1. Cr√©er le fichier docker-compose.yml‚Äã","type":1,"pageTitle":"Installation et utilisation de Keycloak","url":"/docs/development/devops/tips/keycloak#1-cr√©er-le-fichier-docker-composeyml","content":" Cr√©ez un fichier docker-compose.yml dans votre r√©pertoire de projet :  version: '3.8' services: keycloak: image: quay.io/keycloak/keycloak:23.0 container_name: keycloak-local environment: KEYCLOAK_ADMIN: admin KEYCLOAK_ADMIN_PASSWORD: admin KC_DB: postgres KC_DB_URL: jdbc:postgresql://postgres:5432/keycloak KC_DB_USERNAME: keycloak KC_DB_PASSWORD: keycloak KC_HOSTNAME: localhost KC_HOSTNAME_PORT: 8080 KC_HOSTNAME_STRICT: false KC_HTTP_ENABLED: true KC_HEALTH_ENABLED: true command: - start-dev ports: - &quot;8080:8080&quot; depends_on: - postgres networks: - keycloak-network postgres: image: postgres:15 container_name: postgres-keycloak environment: POSTGRES_DB: keycloak POSTGRES_USER: keycloak POSTGRES_PASSWORD: keycloak volumes: - postgres-data:/var/lib/postgresql/data networks: - keycloak-network volumes: postgres-data: networks: keycloak-network: driver: bridge   ","version":"Next","tagName":"h3"},{"title":"2. D√©marrer Keycloak‚Äã","type":1,"pageTitle":"Installation et utilisation de Keycloak","url":"/docs/development/devops/tips/keycloak#2-d√©marrer-keycloak","content":" docker-compose up -d   ","version":"Next","tagName":"h3"},{"title":"3. V√©rifier le d√©marrage‚Äã","type":1,"pageTitle":"Installation et utilisation de Keycloak","url":"/docs/development/devops/tips/keycloak#3-v√©rifier-le-d√©marrage","content":" # V√©rifier les logs docker-compose logs -f keycloak # V√©rifier que les conteneurs sont actifs docker-compose ps   ","version":"Next","tagName":"h3"},{"title":"4. Acc√©der √† la console d'administration‚Äã","type":1,"pageTitle":"Installation et utilisation de Keycloak","url":"/docs/development/devops/tips/keycloak#4-acc√©der-√†-la-console-dadministration","content":" Ouvrez votre navigateur et acc√©dez √† :  http://localhost:8080   Identifiants par d√©faut :  Username : adminPassword : admin    ","version":"Next","tagName":"h3"},{"title":"Configuration initiale‚Äã","type":1,"pageTitle":"Installation et utilisation de Keycloak","url":"/docs/development/devops/tips/keycloak#configuration-initiale","content":" ","version":"Next","tagName":"h2"},{"title":"1. Cr√©er un Realm‚Äã","type":1,"pageTitle":"Installation et utilisation de Keycloak","url":"/docs/development/devops/tips/keycloak#1-cr√©er-un-realm","content":" Un Realm est un espace isol√© pour g√©rer vos utilisateurs, applications et configurations.  Connectez-vous √† la console d'administrationSurvolez Master en haut √† gaucheCliquez sur Create RealmEntrez le nom : dev-realmCliquez sur Create  ","version":"Next","tagName":"h3"},{"title":"2. Cr√©er un utilisateur de test‚Äã","type":1,"pageTitle":"Installation et utilisation de Keycloak","url":"/docs/development/devops/tips/keycloak#2-cr√©er-un-utilisateur-de-test","content":" Dans le menu de gauche, cliquez sur UsersCliquez sur Add userRemplissez les informations : Username : testuserEmail : testuser@example.comFirst name : TestLast name : UserEmail verified : ON Cliquez sur CreateAllez dans l'onglet CredentialsCliquez sur Set passwordEntrez : password123D√©sactivez TemporaryCliquez sur Save    ","version":"Next","tagName":"h3"},{"title":"Configuration des Clients OAuth2‚Äã","type":1,"pageTitle":"Installation et utilisation de Keycloak","url":"/docs/development/devops/tips/keycloak#configuration-des-clients-oauth2","content":" ","version":"Next","tagName":"h2"},{"title":"Client 1 : Authorization Code Flow (Application Web)‚Äã","type":1,"pageTitle":"Installation et utilisation de Keycloak","url":"/docs/development/devops/tips/keycloak#client-1--authorization-code-flow-application-web","content":" Le flow Authorization Code est utilis√© pour les applications web avec backend.  Cr√©ation du client‚Äã  Allez dans Clients ‚Üí Create clientConfiguration : Client type : OpenID ConnectClient ID : web-app Cliquez sur NextConfiguration des capacit√©s : Client authentication : ONAuthorization : ONStandard flow : ON (Authorization Code)Direct access grants : OFF Cliquez sur NextConfiguration des URLs : Root URL : http://localhost:3000Valid redirect URIs : http://localhost:3000/callbackValid post logout redirect URIs : http://localhost:3000Web origins : http://localhost:3000 Cliquez sur Save  R√©cup√©rer le Client Secret‚Äã  Allez dans l'onglet CredentialsCopiez le Client secret  Test avec curl‚Äã  # √âtape 1 : Obtenir le code d'autorisation # Ouvrez cette URL dans votre navigateur http://localhost:8080/realms/dev-realm/protocol/openid-connect/auth?client_id=web-app&amp;redirect_uri=http://localhost:3000/callback&amp;response_type=code&amp;scope=openid # Apr√®s connexion, vous serez redirig√© vers : # http://localhost:3000/callback?code=AUTHORIZATION_CODE # √âtape 2 : √âchanger le code contre un token curl -X POST http://localhost:8080/realms/dev-realm/protocol/openid-connect/token \\ -H &quot;Content-Type: application/x-www-form-urlencoded&quot; \\ -d &quot;grant_type=authorization_code&quot; \\ -d &quot;client_id=web-app&quot; \\ -d &quot;client_secret=VOTRE_CLIENT_SECRET&quot; \\ -d &quot;code=AUTHORIZATION_CODE&quot; \\ -d &quot;redirect_uri=http://localhost:3000/callback&quot;     ","version":"Next","tagName":"h3"},{"title":"Client 2 : Resource Owner Password Credentials (Password Grant)‚Äã","type":1,"pageTitle":"Installation et utilisation de Keycloak","url":"/docs/development/devops/tips/keycloak#client-2--resource-owner-password-credentials-password-grant","content":" Le Password Grant est utilis√© pour les applications de confiance (√† √©viter en production).  Cr√©ation du client‚Äã  Allez dans Clients ‚Üí Create clientConfiguration : Client type : OpenID ConnectClient ID : mobile-app Cliquez sur NextConfiguration des capacit√©s : Client authentication : ONAuthorization : OFFStandard flow : OFFDirect access grants : ON (Resource Owner Password) Cliquez sur NextCliquez sur Save  Test avec curl‚Äã  curl -X POST http://localhost:8080/realms/dev-realm/protocol/openid-connect/token \\ -H &quot;Content-Type: application/x-www-form-urlencoded&quot; \\ -d &quot;grant_type=password&quot; \\ -d &quot;client_id=mobile-app&quot; \\ -d &quot;client_secret=VOTRE_CLIENT_SECRET&quot; \\ -d &quot;username=testuser&quot; \\ -d &quot;password=password123&quot; \\ -d &quot;scope=openid&quot;   R√©ponse attendue :  { &quot;access_token&quot;: &quot;eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9...&quot;, &quot;expires_in&quot;: 300, &quot;refresh_expires_in&quot;: 1800, &quot;refresh_token&quot;: &quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...&quot;, &quot;token_type&quot;: &quot;Bearer&quot;, &quot;id_token&quot;: &quot;eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9...&quot;, &quot;not-before-policy&quot;: 0, &quot;session_state&quot;: &quot;d1c8e0e5-...&quot;, &quot;scope&quot;: &quot;openid profile email&quot; }     ","version":"Next","tagName":"h3"},{"title":"Client 3 : Client Credentials (Machine-to-Machine)‚Äã","type":1,"pageTitle":"Installation et utilisation de Keycloak","url":"/docs/development/devops/tips/keycloak#client-3--client-credentials-machine-to-machine","content":" Le Client Credentials flow est utilis√© pour l'authentification service-to-service.  Cr√©ation du client‚Äã  Allez dans Clients ‚Üí Create clientConfiguration : Client type : OpenID ConnectClient ID : backend-service Cliquez sur NextConfiguration des capacit√©s : Client authentication : ONAuthorization : OFFStandard flow : OFFDirect access grants : OFFService accounts roles : ON Cliquez sur NextCliquez sur Save  Configuration des r√¥les (optionnel)‚Äã  Allez dans l'onglet Service account rolesCliquez sur Assign roleS√©lectionnez les r√¥les n√©cessaires  Test avec curl‚Äã  curl -X POST http://localhost:8080/realms/dev-realm/protocol/openid-connect/token \\ -H &quot;Content-Type: application/x-www-form-urlencoded&quot; \\ -d &quot;grant_type=client_credentials&quot; \\ -d &quot;client_id=backend-service&quot; \\ -d &quot;client_secret=VOTRE_CLIENT_SECRET&quot;   R√©ponse attendue :  { &quot;access_token&quot;: &quot;eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9...&quot;, &quot;expires_in&quot;: 300, &quot;refresh_expires_in&quot;: 0, &quot;token_type&quot;: &quot;Bearer&quot;, &quot;not-before-policy&quot;: 0, &quot;scope&quot;: &quot;profile email&quot; }     ","version":"Next","tagName":"h3"},{"title":"Utilisation des Tokens‚Äã","type":1,"pageTitle":"Installation et utilisation de Keycloak","url":"/docs/development/devops/tips/keycloak#utilisation-des-tokens","content":" ","version":"Next","tagName":"h2"},{"title":"V√©rifier un Access Token‚Äã","type":1,"pageTitle":"Installation et utilisation de Keycloak","url":"/docs/development/devops/tips/keycloak#v√©rifier-un-access-token","content":" curl -X POST http://localhost:8080/realms/dev-realm/protocol/openid-connect/token/introspect \\ -H &quot;Content-Type: application/x-www-form-urlencoded&quot; \\ -d &quot;token=VOTRE_ACCESS_TOKEN&quot; \\ -d &quot;client_id=web-app&quot; \\ -d &quot;client_secret=VOTRE_CLIENT_SECRET&quot;   ","version":"Next","tagName":"h3"},{"title":"Rafra√Æchir un Access Token‚Äã","type":1,"pageTitle":"Installation et utilisation de Keycloak","url":"/docs/development/devops/tips/keycloak#rafra√Æchir-un-access-token","content":" curl -X POST http://localhost:8080/realms/dev-realm/protocol/openid-connect/token \\ -H &quot;Content-Type: application/x-www-form-urlencoded&quot; \\ -d &quot;grant_type=refresh_token&quot; \\ -d &quot;client_id=web-app&quot; \\ -d &quot;client_secret=VOTRE_CLIENT_SECRET&quot; \\ -d &quot;refresh_token=VOTRE_REFRESH_TOKEN&quot;   ","version":"Next","tagName":"h3"},{"title":"D√©connecter un utilisateur‚Äã","type":1,"pageTitle":"Installation et utilisation de Keycloak","url":"/docs/development/devops/tips/keycloak#d√©connecter-un-utilisateur","content":" curl -X POST http://localhost:8080/realms/dev-realm/protocol/openid-connect/logout \\ -H &quot;Content-Type: application/x-www-form-urlencoded&quot; \\ -d &quot;client_id=web-app&quot; \\ -d &quot;client_secret=VOTRE_CLIENT_SECRET&quot; \\ -d &quot;refresh_token=VOTRE_REFRESH_TOKEN&quot;   ","version":"Next","tagName":"h3"},{"title":"Utiliser un Access Token dans vos requ√™tes API‚Äã","type":1,"pageTitle":"Installation et utilisation de Keycloak","url":"/docs/development/devops/tips/keycloak#utiliser-un-access-token-dans-vos-requ√™tes-api","content":" curl -X GET http://localhost:8081/api/protected-resource \\ -H &quot;Authorization: Bearer VOTRE_ACCESS_TOKEN&quot;     ","version":"Next","tagName":"h3"},{"title":"D√©coder un JWT Token‚Äã","type":1,"pageTitle":"Installation et utilisation de Keycloak","url":"/docs/development/devops/tips/keycloak#d√©coder-un-jwt-token","content":" Vous pouvez d√©coder vos tokens JWT sur jwt.io pour inspecter leur contenu.  Exemple de payload d'un Access Token :  { &quot;exp&quot;: 1703001234, &quot;iat&quot;: 1703000934, &quot;jti&quot;: &quot;a1b2c3d4-...&quot;, &quot;iss&quot;: &quot;http://localhost:8080/realms/dev-realm&quot;, &quot;aud&quot;: &quot;account&quot;, &quot;sub&quot;: &quot;f47ac10b-...&quot;, &quot;typ&quot;: &quot;Bearer&quot;, &quot;azp&quot;: &quot;web-app&quot;, &quot;session_state&quot;: &quot;d1c8e0e5-...&quot;, &quot;preferred_username&quot;: &quot;testuser&quot;, &quot;email&quot;: &quot;testuser@example.com&quot;, &quot;email_verified&quot;: true, &quot;name&quot;: &quot;Test User&quot;, &quot;given_name&quot;: &quot;Test&quot;, &quot;family_name&quot;: &quot;User&quot;, &quot;scope&quot;: &quot;openid profile email&quot;, &quot;realm_access&quot;: { &quot;roles&quot;: [&quot;default-roles-dev-realm&quot;, &quot;offline_access&quot;] } }     ","version":"Next","tagName":"h2"},{"title":"Configuration avanc√©e‚Äã","type":1,"pageTitle":"Installation et utilisation de Keycloak","url":"/docs/development/devops/tips/keycloak#configuration-avanc√©e","content":" ","version":"Next","tagName":"h2"},{"title":"Augmenter la dur√©e de vie des tokens‚Äã","type":1,"pageTitle":"Installation et utilisation de Keycloak","url":"/docs/development/devops/tips/keycloak#augmenter-la-dur√©e-de-vie-des-tokens","content":" Allez dans Realm settings ‚Üí TokensModifiez les valeurs : Access Token Lifespan : 5 minutes (par d√©faut) ‚Üí 30 minutesRefresh Token Max Lifespan : 30 minutes ‚Üí 8 heures  ","version":"Next","tagName":"h3"},{"title":"Ajouter des claims personnalis√©s‚Äã","type":1,"pageTitle":"Installation et utilisation de Keycloak","url":"/docs/development/devops/tips/keycloak#ajouter-des-claims-personnalis√©s","content":" Allez dans Client scopes ‚Üí Create client scopeNom : custom-claimsAllez dans l'onglet Mappers ‚Üí Add mapper ‚Üí By configuration ‚Üí User AttributeConfiguration : Name : departmentUser Attribute : departmentToken Claim Name : departmentClaim JSON Type : StringAdd to ID token : ONAdd to access token : ON Associez ce scope √† vos clients  ","version":"Next","tagName":"h3"},{"title":"Configurer CORS‚Äã","type":1,"pageTitle":"Installation et utilisation de Keycloak","url":"/docs/development/devops/tips/keycloak#configurer-cors","content":" Allez dans votre client (ex: web-app)Dans Web origins, ajoutez : * (pour le d√©veloppement uniquement)En production, sp√©cifiez les domaines exacts    ","version":"Next","tagName":"h3"},{"title":"R√©sum√© des flows‚Äã","type":1,"pageTitle":"Installation et utilisation de Keycloak","url":"/docs/development/devops/tips/keycloak#r√©sum√©-des-flows","content":" Flow\tUsage\tS√©curit√©\tClient AuthenticationAuthorization Code\tApplications web avec backend\t‚úÖ Haute\tOui (avec secret) Password Grant\tApplications de confiance\t‚ö†Ô∏è Moyenne\tOui Client Credentials\tService-to-service (M2M)\t‚úÖ Haute\tOui    ","version":"Next","tagName":"h2"},{"title":"Commandes utiles Docker‚Äã","type":1,"pageTitle":"Installation et utilisation de Keycloak","url":"/docs/development/devops/tips/keycloak#commandes-utiles-docker","content":" # D√©marrer Keycloak docker-compose up -d # Arr√™ter Keycloak docker-compose down # Voir les logs docker-compose logs -f keycloak # Red√©marrer Keycloak docker-compose restart keycloak # Supprimer tout (y compris les donn√©es) docker-compose down -v # Exporter la configuration du realm docker exec -it keycloak-local /opt/keycloak/bin/kc.sh export --dir /tmp/export --realm dev-realm docker cp keycloak-local:/tmp/export ./keycloak-export     ","version":"Next","tagName":"h2"},{"title":"Troubleshooting‚Äã","type":1,"pageTitle":"Installation et utilisation de Keycloak","url":"/docs/development/devops/tips/keycloak#troubleshooting","content":" ","version":"Next","tagName":"h2"},{"title":"Keycloak ne d√©marre pas‚Äã","type":1,"pageTitle":"Installation et utilisation de Keycloak","url":"/docs/development/devops/tips/keycloak#keycloak-ne-d√©marre-pas","content":" # V√©rifier les logs docker-compose logs keycloak # V√©rifier que PostgreSQL est bien d√©marr√© docker-compose ps   ","version":"Next","tagName":"h3"},{"title":"Erreur de connexion √† la base de donn√©es‚Äã","type":1,"pageTitle":"Installation et utilisation de Keycloak","url":"/docs/development/devops/tips/keycloak#erreur-de-connexion-√†-la-base-de-donn√©es","content":" # Recr√©er les conteneurs docker-compose down -v docker-compose up -d   ","version":"Next","tagName":"h3"},{"title":"Token invalide‚Äã","type":1,"pageTitle":"Installation et utilisation de Keycloak","url":"/docs/development/devops/tips/keycloak#token-invalide","content":" V√©rifiez que le client_id et client_secret sont correctsV√©rifiez que l'utilisateur existe et a un mot de passeV√©rifiez les redirect_uris configur√©s  ","version":"Next","tagName":"h3"},{"title":"CORS errors‚Äã","type":1,"pageTitle":"Installation et utilisation de Keycloak","url":"/docs/development/devops/tips/keycloak#cors-errors","content":" Ajoutez vos domaines dans Web origins du clientEn d√©veloppement, vous pouvez utiliser *    ","version":"Next","tagName":"h3"},{"title":"Ressources‚Äã","type":1,"pageTitle":"Installation et utilisation de Keycloak","url":"/docs/development/devops/tips/keycloak#ressources","content":" Documentation officielle KeycloakOAuth 2.0 SpecificationOpenID Connect SpecificationJWT.io - Decoder de tokens    ","version":"Next","tagName":"h2"},{"title":"Prochaines √©tapes‚Äã","type":1,"pageTitle":"Installation et utilisation de Keycloak","url":"/docs/development/devops/tips/keycloak#prochaines-√©tapes","content":" Int√©grer Keycloak dans votre application (Spring Boot, Node.js, React, etc.)Configurer des r√¥les et permissionsMettre en place la f√©d√©ration d'identit√© (LDAP, Active Directory)Configurer le SSO (Single Sign-On)Migrer vers une configuration de production ","version":"Next","tagName":"h2"},{"title":"Couche web","type":0,"sectionRef":"#","url":"/docs/development/java/web-layer","content":"Couche web","keywords":"","version":"Next"},{"title":"Multi-Tenancy (Multi-Locataire)","type":0,"sectionRef":"#","url":"/docs/development/java/data-layer/mutli-tenancy","content":"","keywords":"","version":"Next"},{"title":"Cas d'usage‚Äã","type":1,"pageTitle":"Multi-Tenancy (Multi-Locataire)","url":"/docs/development/java/data-layer/mutli-tenancy#cas-dusage","content":" Vous d√©veloppez une application SaaS que vous souhaitez proposer √† plusieurs entreprises clientes. Chaque entreprise doit :  Acc√©der √† ses propres donn√©es de mani√®re isol√©eNe jamais voir les donn√©es des autres clientsB√©n√©ficier d'une exp√©rience personnalis√©e  ","version":"Next","tagName":"h2"},{"title":"Strat√©gies de Multi-Tenancy‚Äã","type":1,"pageTitle":"Multi-Tenancy (Multi-Locataire)","url":"/docs/development/java/data-layer/mutli-tenancy#strat√©gies-de-multi-tenancy","content":" ","version":"Next","tagName":"h2"},{"title":"1. Base de donn√©es par tenant (Database-per-tenant)‚Äã","type":1,"pageTitle":"Multi-Tenancy (Multi-Locataire)","url":"/docs/development/java/data-layer/mutli-tenancy#1-base-de-donn√©es-par-tenant-database-per-tenant","content":" Chaque tenant poss√®de sa propre base de donn√©es d√©di√©e.  Isolation : ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê Maximale  Fonctionnement :  Tenant A ‚Üí Database A Tenant B ‚Üí Database B Tenant C ‚Üí Database C   Avantages :  Isolation compl√®te des donn√©es (s√©curit√© maximale)Facilit√© de sauvegarde/restauration par tenantMigration simple d'un tenant vers une autre infrastructurePerformance pr√©visible par tenantPersonnalisation possible par client (versions de sch√©ma diff√©rentes)  Inconv√©nients :  Co√ªt de maintenance √©lev√© (multiplication des bases)Complexit√© de gestion avec un grand nombre de tenantsGestion des connexions complexeMigrations de sch√©ma √† r√©p√©ter sur toutes les basesCo√ªt d'infrastructure plus √©lev√©  Quand l'utiliser :  Petit nombre de tenants (&lt; 100)Clients n√©cessitant une isolation stricte (banques, sant√©)Besoins de personnalisation forte par client    ","version":"Next","tagName":"h3"},{"title":"2. Sch√©ma par tenant (Schema-per-tenant)‚Äã","type":1,"pageTitle":"Multi-Tenancy (Multi-Locataire)","url":"/docs/development/java/data-layer/mutli-tenancy#2-sch√©ma-par-tenant-schema-per-tenant","content":" Une base de donn√©es unique avec un sch√©ma distinct par tenant.  Isolation : ‚≠ê‚≠ê‚≠ê‚≠ê √âlev√©e  Fonctionnement :  Database unique ‚îú‚îÄ‚îÄ Schema tenant_a (tables users, orders...) ‚îú‚îÄ‚îÄ Schema tenant_b (tables users, orders...) ‚îî‚îÄ‚îÄ Schema tenant_c (tables users, orders...)   Avantages :  Bon compromis isolation/performanceGestion simplifi√©e par rapport au database-per-tenantUne seule connexion √† la base de donn√©esBackup centralis√© possibleMeilleure utilisation des ressources  Inconv√©nients :  Complexit√© croissante avec le nombre de sch√©masMigrations de sch√©ma √† g√©rer pour chaque tenantRisque d'erreur de contexte (mauvais sch√©ma)Limite du nombre de sch√©mas selon le SGBD  Quand l'utiliser :  Nombre moyen de tenants (100-1000)Besoin d'isolation sans co√ªt d'infrastructure trop √©lev√©PostgreSQL ou bases supportant bien les sch√©mas multiples    ","version":"Next","tagName":"h3"},{"title":"3. Colonne discriminante (Shared Database with Discriminator)‚Äã","type":1,"pageTitle":"Multi-Tenancy (Multi-Locataire)","url":"/docs/development/java/data-layer/mutli-tenancy#3-colonne-discriminante-shared-database-with-discriminator","content":" Tous les tenants partagent les m√™mes tables avec une colonne tenant_id.  Isolation : ‚≠ê‚≠ê Logique uniquement  Fonctionnement :  Table users: | id | name | email | tenant_id | |----|---------|----------------|-----------| | 1 | Alice | a@tenant-a.com | tenant_a | | 2 | Bob | b@tenant-b.com | tenant_b | | 3 | Charlie | c@tenant-a.com | tenant_a |   Avantages :  Simplicit√© de mise en ≈ìuvreExcellente scalabilit√© (milliers de tenants)Une seule base et un seul sch√©maMigrations simplesCo√ªt d'infrastructure minimalRequ√™tes cross-tenant possibles (analytics)  Inconv√©nients :  Isolation faible (risque de fuite de donn√©es)Performance d√©grad√©e avec gros volume de donn√©esIndex et requ√™tes plus complexesN√©cessite une rigueur extr√™me dans le codeBackup/restauration par tenant impossiblePersonnalisation par tenant limit√©e  Impl√©mentation critique :  // ‚ùå DANGER : Requ√™te sans filtre tenant @Query(&quot;SELECT u FROM User u&quot;) List&lt;User&gt; findAll(); // ‚úÖ OBLIGATOIRE : Toujours filtrer par tenant @Query(&quot;SELECT u FROM User u WHERE u.tenantId = :tenantId&quot;) List&lt;User&gt; findAllByTenant(@Param(&quot;tenantId&quot;) String tenantId);   Quand l'utiliser :  Grand nombre de tenants (&gt; 1000)Donn√©es similaires entre tenantsPriorit√© √† la scalabilit√© et au co√ªtApplication avec mesures de s√©curit√© strictes au niveau code    ","version":"Next","tagName":"h3"},{"title":"Tableau comparatif‚Äã","type":1,"pageTitle":"Multi-Tenancy (Multi-Locataire)","url":"/docs/development/java/data-layer/mutli-tenancy#tableau-comparatif","content":" Crit√®re\tDatabase-per-tenant\tSchema-per-tenant\tDiscriminatorIsolation\t‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê\t‚≠ê‚≠ê‚≠ê‚≠ê\t‚≠ê‚≠ê Scalabilit√©\t‚≠ê‚≠ê\t‚≠ê‚≠ê‚≠ê\t‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê Co√ªt\t√âlev√©\tMoyen\tFaible Complexit√©\t√âlev√©e\tMoyenne\tFaible Nb tenants max\t&lt; 100\t100-1000\t&gt; 1000 Performance\tExcellente\tBonne\tVariable  ","version":"Next","tagName":"h2"},{"title":"Recommandations‚Äã","type":1,"pageTitle":"Multi-Tenancy (Multi-Locataire)","url":"/docs/development/java/data-layer/mutli-tenancy#recommandations","content":" Choisissez Database-per-tenant si :  Vous avez &lt; 50 clients avec gros volumes de donn√©esCompliance stricte requise (RGPD, HIPAA)Budget infrastructure disponible  Choisissez Schema-per-tenant si :  Vous avez 100-1000 clientsBon compromis isolation/co√ªt recherch√©Vous utilisez PostgreSQL  Choisissez Discriminator si :  Vous avez &gt; 1000 clientsStartups/MVP avec croissance rapideCo√ªt d'infrastructure prioritaire√âquipe mature en d√©veloppement s√©curis√©  ","version":"Next","tagName":"h2"},{"title":"Bonnes pratiques communes‚Äã","type":1,"pageTitle":"Multi-Tenancy (Multi-Locataire)","url":"/docs/development/java/data-layer/mutli-tenancy#bonnes-pratiques-communes","content":" Identifiez le tenant d√®s l'authentification et stockez-le dans le contexte de s√©curit√©Utilisez des intercepteurs pour injecter automatiquement le tenant dans les requ√™tesTestez l'isolation avec des tests automatis√©s multi-tenantsAuditez les acc√®s pour d√©tecter les fuites de donn√©es potentiellesDocumentez clairement la strat√©gie choisie pour toute l'√©quipe ","version":"Next","tagName":"h2"},{"title":"Audit des entit√©s","type":0,"sectionRef":"#","url":"/docs/development/java/data-layer/logging","content":"","keywords":"","version":"Next"},{"title":"Pourquoi auditer ?‚Äã","type":1,"pageTitle":"Audit des entit√©s","url":"/docs/development/java/data-layer/logging#pourquoi-auditer-","content":" Tra√ßabilit√© : Savoir qui a fait quoi et quandConformit√© : R√©pondre aux exigences r√©glementaires (RGPD, SOX, etc.)D√©bogage : Comprendre l'historique des modificationsS√©curit√© : D√©tecter des modifications suspectesGestion des conflits : √âviter les √©crasements de donn√©es  ","version":"Next","tagName":"h2"},{"title":"Entit√© de base avec audit‚Äã","type":1,"pageTitle":"Audit des entit√©s","url":"/docs/development/java/data-layer/logging#entit√©-de-base-avec-audit","content":" La classe BaseEntity int√®gre tous les champs d'audit n√©cessaires :  @Setter @Getter @SuperBuilder @NoArgsConstructor @MappedSuperclass @EntityListeners(AuditingEntityListener.class) public class BaseEntity { @Version private Long version; @CreationTimestamp @Column(updatable = false) private Timestamp createdDate; @UpdateTimestamp private Timestamp lastModifiedDate; @CreatedBy @Column(updatable = false) private String creator; @LastModifiedBy private String modifier; }   Usage : Faites h√©riter vos entit√©s de BaseEntity pour b√©n√©ficier automatiquement de l'audit.  @Entity @Table(name = &quot;users&quot;) public class User extends BaseEntity { private String name; private String email; // Les champs d'audit sont h√©rit√©s automatiquement }     ","version":"Next","tagName":"h2"},{"title":"Annotations d'audit expliqu√©es‚Äã","type":1,"pageTitle":"Audit des entit√©s","url":"/docs/development/java/data-layer/logging#annotations-daudit-expliqu√©es","content":" ","version":"Next","tagName":"h2"},{"title":"@Version - Verrouillage optimiste‚Äã","type":1,"pageTitle":"Audit des entit√©s","url":"/docs/development/java/data-layer/logging#version---verrouillage-optimiste","content":" R√¥le : Pr√©vient les conflits lors de modifications concurrentes.  Fonctionnement :  @Version private Long version; // Incr√©ment√©e automatiquement √† chaque update   Sc√©nario d'utilisation :  1. User A lit l'entit√© (version = 1) 2. User B lit l'entit√© (version = 1) 3. User A modifie et sauvegarde ‚Üí version = 2 ‚úÖ 4. User B tente de sauvegarder (version = 1) ‚Üí OptimisticLockException ‚ùå   Gestion de l'exception :  try { userRepository.save(user); } catch (OptimisticLockException e) { // Informer l'utilisateur que les donn√©es ont √©t√© modifi√©es // Proposer de rafra√Æchir ou fusionner les changements throw new ConflictException(&quot;Les donn√©es ont √©t√© modifi√©es par un autre utilisateur&quot;); }   Quand l'utiliser :  Modifications concurrentes possiblesDonn√©es critiques (commandes, paiements, stocks)Interface web avec plusieurs utilisateurs simultan√©s    ","version":"Next","tagName":"h3"},{"title":"@CreationTimestamp - Date de cr√©ation‚Äã","type":1,"pageTitle":"Audit des entit√©s","url":"/docs/development/java/data-layer/logging#creationtimestamp---date-de-cr√©ation","content":" R√¥le : Enregistre automatiquement la date de cr√©ation de l'entit√©.  @CreationTimestamp @Column(updatable = false) // Important : emp√™che les modifications private Timestamp createdDate;   Comportement :  Remplie automatiquement par Hibernate lors du INSERTNe change jamais, m√™me lors des UPDATEUtilise le fuseau horaire du serveur  Alternatives :  // Avec Java 8 Time API @CreationTimestamp private Instant createdDate; // Avec LocalDateTime @CreationTimestamp private LocalDateTime createdDate;     ","version":"Next","tagName":"h3"},{"title":"@UpdateTimestamp - Date de modification‚Äã","type":1,"pageTitle":"Audit des entit√©s","url":"/docs/development/java/data-layer/logging#updatetimestamp---date-de-modification","content":" R√¥le : Met √† jour automatiquement la date √† chaque modification.  @UpdateTimestamp private Timestamp lastModifiedDate;   Comportement :  Remplie lors du INSERTMise √† jour automatiquement √† chaque UPDATEUtile pour les m√©canismes de cache et synchronisation  Cas d'usage :  // R√©cup√©rer les entit√©s modifi√©es depuis une date @Query(&quot;SELECT e FROM Entity e WHERE e.lastModifiedDate &gt; :since&quot;) List&lt;Entity&gt; findModifiedSince(@Param(&quot;since&quot;) Timestamp since);     ","version":"Next","tagName":"h3"},{"title":"@CreatedBy - Cr√©ateur‚Äã","type":1,"pageTitle":"Audit des entit√©s","url":"/docs/development/java/data-layer/logging#createdby---cr√©ateur","content":" R√¥le : Identifie automatiquement l'utilisateur qui a cr√©√© l'entit√©.  @CreatedBy @Column(updatable = false) private String creator; // UUID, username, ou email   Comportement :  Remplie automatiquement via AuditorAwareNe change jamais apr√®s la cr√©ationN√©cessite une impl√©mentation personnalis√©e (voir configuration)    ","version":"Next","tagName":"h3"},{"title":"@LastModifiedBy - Modificateur‚Äã","type":1,"pageTitle":"Audit des entit√©s","url":"/docs/development/java/data-layer/logging#lastmodifiedby---modificateur","content":" R√¥le : Identifie le dernier utilisateur ayant modifi√© l'entit√©.  @LastModifiedBy private String modifier; // UUID, username, ou email   Comportement :  Remplie lors de la cr√©ation (= creator)Mise √† jour √† chaque modificationN√©cessite une impl√©mentation personnalis√©e (voir configuration)    ","version":"Next","tagName":"h3"},{"title":"Configuration de l'audit‚Äã","type":1,"pageTitle":"Audit des entit√©s","url":"/docs/development/java/data-layer/logging#configuration-de-laudit","content":" ","version":"Next","tagName":"h2"},{"title":"1. Impl√©menter AuditorAware‚Äã","type":1,"pageTitle":"Audit des entit√©s","url":"/docs/development/java/data-layer/logging#1-impl√©menter-auditoraware","content":" Cette interface fournit l'identit√© de l'utilisateur courant :  @Component public class AuditorAwareImpl implements AuditorAware&lt;String&gt; { @Override public Optional&lt;String&gt; getCurrentAuditor() { // R√©cup√©rer l'utilisateur depuis le contexte de s√©curit√© Authentication authentication = SecurityContextHolder .getContext() .getAuthentication(); if (authentication == null || !authentication.isAuthenticated()) { return Optional.of(&quot;SYSTEM&quot;); // Valeur par d√©faut } // Adapter selon votre mod√®le User return Optional.of(authentication.getName()); } }   Avec Spring Security personnalis√© :  @Component public class AuditorAwareImpl implements AuditorAware&lt;String&gt; { @Override public Optional&lt;String&gt; getCurrentAuditor() { return Optional.ofNullable( SecurityUtils.getCurrentUserAccount() .map(UserAccount::getUuid) .orElse(&quot;SYSTEM&quot;) ); } }   ","version":"Next","tagName":"h3"},{"title":"2. D√©clarer le Bean‚Äã","type":1,"pageTitle":"Audit des entit√©s","url":"/docs/development/java/data-layer/logging#2-d√©clarer-le-bean","content":" @Configuration public class AuditConfig { @Bean public AuditorAware&lt;String&gt; auditorAware() { return new AuditorAwareImpl(); } }   ","version":"Next","tagName":"h3"},{"title":"3. Activer l'audit JPA‚Äã","type":1,"pageTitle":"Audit des entit√©s","url":"/docs/development/java/data-layer/logging#3-activer-laudit-jpa","content":" Dans votre classe principale :  @SpringBootApplication @EnableJpaAuditing(auditorAwareRef = &quot;auditorAware&quot;) public class Application { public static void main(String[] args) { SpringApplication.run(Application.class, args); } }   Options avanc√©es :  @EnableJpaAuditing( auditorAwareRef = &quot;auditorAware&quot;, dateTimeProviderRef = &quot;dateTimeProvider&quot;, // Provider de date personnalis√© modifyOnCreate = true // Active @LastModifiedBy √† la cr√©ation )     ","version":"Next","tagName":"h3"},{"title":"Cas d'usage avanc√©s‚Äã","type":1,"pageTitle":"Audit des entit√©s","url":"/docs/development/java/data-layer/logging#cas-dusage-avanc√©s","content":" ","version":"Next","tagName":"h2"},{"title":"Audit avec diff√©rents types d'identifiants‚Äã","type":1,"pageTitle":"Audit des entit√©s","url":"/docs/development/java/data-layer/logging#audit-avec-diff√©rents-types-didentifiants","content":" // Avec UUID public class AuditorAwareImpl implements AuditorAware&lt;UUID&gt; { @Override public Optional&lt;UUID&gt; getCurrentAuditor() { return Optional.of(getCurrentUser().getId()); } } // Avec objet User complet public class AuditorAwareImpl implements AuditorAware&lt;User&gt; { @Override public Optional&lt;User&gt; getCurrentAuditor() { return Optional.of(getCurrentUser()); } }   ","version":"Next","tagName":"h3"},{"title":"Audit avec fuseau horaire sp√©cifique‚Äã","type":1,"pageTitle":"Audit des entit√©s","url":"/docs/development/java/data-layer/logging#audit-avec-fuseau-horaire-sp√©cifique","content":" @Component public class CustomDateTimeProvider implements DateTimeProvider { @Override public Optional&lt;TemporalAccessor&gt; getNow() { return Optional.of( ZonedDateTime.now(ZoneId.of(&quot;Europe/Paris&quot;)) ); } }   ","version":"Next","tagName":"h3"},{"title":"D√©sactiver l'audit pour certaines op√©rations‚Äã","type":1,"pageTitle":"Audit des entit√©s","url":"/docs/development/java/data-layer/logging#d√©sactiver-laudit-pour-certaines-op√©rations","content":" @Service public class UserService { @Autowired private EntityManager entityManager; public void updateWithoutAudit(User user) { // D√©sactiver temporairement les listeners entityManager.detach(user); // Faire les modifications user.setEmail(&quot;new@email.com&quot;); // Persister sans d√©clencher l'audit entityManager.createQuery(&quot;UPDATE User u SET u.email = :email WHERE u.id = :id&quot;) .setParameter(&quot;email&quot;, user.getEmail()) .setParameter(&quot;id&quot;, user.getId()) .executeUpdate(); } }     ","version":"Next","tagName":"h3"},{"title":"Bonnes pratiques‚Äã","type":1,"pageTitle":"Audit des entit√©s","url":"/docs/development/java/data-layer/logging#bonnes-pratiques","content":" Toujours utiliser @Column(updatable = false) sur les champs de cr√©ation pour √©viter les modifications accidentelles Choisir le bon type pour les identifiants : UUID pour la s√©curit√©, String pour la flexibilit√©, Long pour la performance G√©rer les valeurs par d√©faut : Pr√©voir &quot;SYSTEM&quot; ou &quot;ANONYMOUS&quot; pour les op√©rations sans utilisateur authentifi√© Indexer les champs de date si vous faites des requ√™tes temporelles fr√©quentes  CREATE INDEX idx_last_modified ON users(last_modified_date);   Tester l'audit dans vos tests unitaires :  @Test void testAuditFields() { User user = new User(&quot;John Doe&quot;); userRepository.save(user); assertNotNull(user.getCreatedDate()); assertNotNull(user.getCreator()); assertEquals(user.getCreator(), user.getModifier()); assertEquals(1L, user.getVersion()); }   Logger les OptimisticLockException pour d√©tecter les patterns de conflits Ne jamais exposer les champs d'audit en modification dans vos APIs REST    ","version":"Next","tagName":"h2"},{"title":"D√©pannage‚Äã","type":1,"pageTitle":"Audit des entit√©s","url":"/docs/development/java/data-layer/logging#d√©pannage","content":" Probl√®me : Les champs @CreatedBy/@LastModifiedBy restent null  Solutions :  V√©rifier que @EnableJpaAuditing est pr√©sentV√©rifier que AuditorAware retourne bien une valeurS'assurer que @EntityListeners(AuditingEntityListener.class) est sur l'entit√©  Probl√®me : OptimisticLockException fr√©quentes  Solutions :  R√©viser la logique m√©tier pour r√©duire les acc√®s concurrentsUtiliser des verrous pessimistes pour les sections critiquesImpl√©menter une strat√©gie de retry avec backoff exponentiel  Probl√®me : Dates incorrectes (fuseau horaire)  Solutions :  Utiliser Instant au lieu de TimestampConfigurer le fuseau horaire de la JVM : -Duser.timezone=UTCStocker en UTC et convertir c√¥t√© client ","version":"Next","tagName":"h2"},{"title":"S√©curit√©","type":0,"sectionRef":"#","url":"/docs/development/java/web-layer/security","content":"S√©curit√©","keywords":"","version":"Next"},{"title":"Liquibase avec Spring Boot","type":0,"sectionRef":"#","url":"/docs/development/java/data-layer/liquibase","content":"","keywords":"","version":"Next"},{"title":"Qu'est-ce que Liquibase ?‚Äã","type":1,"pageTitle":"Liquibase avec Spring Boot","url":"/docs/development/java/data-layer/liquibase#quest-ce-que-liquibase-","content":" Liquibase est un outil open-source de gestion de versions pour bases de donn√©es. Il s'int√®gre nativement avec Spring Boot pour automatiser les migrations de sch√©ma au d√©marrage de l'application.  ","version":"Next","tagName":"h2"},{"title":"Installation‚Äã","type":1,"pageTitle":"Liquibase avec Spring Boot","url":"/docs/development/java/data-layer/liquibase#installation","content":" ","version":"Next","tagName":"h2"},{"title":"Maven‚Äã","type":1,"pageTitle":"Liquibase avec Spring Boot","url":"/docs/development/java/data-layer/liquibase#maven","content":" &lt;dependency&gt; &lt;groupId&gt;org.liquibase&lt;/groupId&gt; &lt;artifactId&gt;liquibase-core&lt;/artifactId&gt; &lt;/dependency&gt;   ","version":"Next","tagName":"h3"},{"title":"Gradle‚Äã","type":1,"pageTitle":"Liquibase avec Spring Boot","url":"/docs/development/java/data-layer/liquibase#gradle","content":" implementation 'org.liquibase:liquibase-core'   Spring Boot g√®re automatiquement la version de Liquibase compatible.  ","version":"Next","tagName":"h3"},{"title":"Configuration application.yml‚Äã","type":1,"pageTitle":"Liquibase avec Spring Boot","url":"/docs/development/java/data-layer/liquibase#configuration-applicationyml","content":" spring: datasource: url: jdbc:postgresql://localhost:5432/mydb username: user password: pass liquibase: enabled: true change-log: classpath:db/changelog/db.changelog-master.xml contexts: dev default-schema: public liquibase-schema: public drop-first: false   ","version":"Next","tagName":"h2"},{"title":"Options principales‚Äã","type":1,"pageTitle":"Liquibase avec Spring Boot","url":"/docs/development/java/data-layer/liquibase#options-principales","content":" enabled: Active/d√©sactive Liquibase (true par d√©faut)change-log: Chemin vers le changelog mastercontexts: Contextes √† ex√©cuter (dev, test, prod)default-schema: Sch√©ma par d√©faut pour les changementsdrop-first: Supprime le sch√©ma avant migration (dev uniquement)user/password: Credentials sp√©cifiques (optionnel)  ","version":"Next","tagName":"h3"},{"title":"Structure d'un Changelog‚Äã","type":1,"pageTitle":"Liquibase avec Spring Boot","url":"/docs/development/java/data-layer/liquibase#structure-dun-changelog","content":" ","version":"Next","tagName":"h2"},{"title":"Fichier master (XML)‚Äã","type":1,"pageTitle":"Liquibase avec Spring Boot","url":"/docs/development/java/data-layer/liquibase#fichier-master-xml","content":" &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt; &lt;databaseChangeLog xmlns=&quot;http://www.liquibase.org/xml/ns/dbchangelog&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.24.xsd&quot;&gt; &lt;include file=&quot;db/changelog/changes/001-create-user-table.xml&quot;/&gt; &lt;include file=&quot;db/changelog/changes/002-add-email-column.xml&quot;/&gt; &lt;/databaseChangeLog&gt;   ","version":"Next","tagName":"h3"},{"title":"Exemple de changeset‚Äã","type":1,"pageTitle":"Liquibase avec Spring Boot","url":"/docs/development/java/data-layer/liquibase#exemple-de-changeset","content":" &lt;databaseChangeLog&gt; &lt;changeSet id=&quot;001&quot; author=&quot;dev&quot;&gt; &lt;createTable tableName=&quot;user&quot;&gt; &lt;column name=&quot;id&quot; type=&quot;bigint&quot; autoIncrement=&quot;true&quot;&gt; &lt;constraints primaryKey=&quot;true&quot;/&gt; &lt;/column&gt; &lt;column name=&quot;username&quot; type=&quot;varchar(50)&quot;&gt; &lt;constraints nullable=&quot;false&quot; unique=&quot;true&quot;/&gt; &lt;/column&gt; &lt;column name=&quot;created_at&quot; type=&quot;timestamp&quot; defaultValueComputed=&quot;CURRENT_TIMESTAMP&quot;/&gt; &lt;/createTable&gt; &lt;/changeSet&gt; &lt;/databaseChangeLog&gt;   ","version":"Next","tagName":"h3"},{"title":"Int√©gration Spring Boot‚Äã","type":1,"pageTitle":"Liquibase avec Spring Boot","url":"/docs/development/java/data-layer/liquibase#int√©gration-spring-boot","content":" ","version":"Next","tagName":"h2"},{"title":"Ex√©cution automatique‚Äã","type":1,"pageTitle":"Liquibase avec Spring Boot","url":"/docs/development/java/data-layer/liquibase#ex√©cution-automatique","content":" Spring Boot ex√©cute automatiquement Liquibase au d√©marrage de l'application. Aucune configuration suppl√©mentaire n'est n√©cessaire.  ","version":"Next","tagName":"h3"},{"title":"Configuration programmatique‚Äã","type":1,"pageTitle":"Liquibase avec Spring Boot","url":"/docs/development/java/data-layer/liquibase#configuration-programmatique","content":" @Configuration public class LiquibaseConfig { @Bean public SpringLiquibase liquibase(DataSource dataSource) { SpringLiquibase liquibase = new SpringLiquibase(); liquibase.setDataSource(dataSource); liquibase.setChangeLog(&quot;classpath:db/changelog/db.changelog-master.xml&quot;); liquibase.setContexts(&quot;dev&quot;); liquibase.setShouldRun(true); return liquibase; } }   ","version":"Next","tagName":"h3"},{"title":"D√©sactiver pour les tests‚Äã","type":1,"pageTitle":"Liquibase avec Spring Boot","url":"/docs/development/java/data-layer/liquibase#d√©sactiver-pour-les-tests","content":" @SpringBootTest @TestPropertySource(properties = { &quot;spring.liquibase.enabled=false&quot; }) class MyServiceTest { // Tests sans ex√©cution de Liquibase }   ","version":"Next","tagName":"h3"},{"title":"Utilisation de profils‚Äã","type":1,"pageTitle":"Liquibase avec Spring Boot","url":"/docs/development/java/data-layer/liquibase#utilisation-de-profils","content":" spring: config: activate: on-profile: dev liquibase: contexts: dev drop-first: true --- spring: config: activate: on-profile: prod liquibase: contexts: prod drop-first: false   ","version":"Next","tagName":"h3"},{"title":"Formats support√©s‚Äã","type":1,"pageTitle":"Liquibase avec Spring Boot","url":"/docs/development/java/data-layer/liquibase#formats-support√©s","content":" XML : Format le plus completYAML : Plus lisibleJSON : Pour l'int√©gration avec d'autres outilsSQL : SQL natif avec m√©tadonn√©es Liquibase  Exemple YAML :  databaseChangeLog: - changeSet: id: 001 author: dev changes: - createTable: tableName: user columns: - column: name: id type: bigint autoIncrement: true constraints: primaryKey: true   ","version":"Next","tagName":"h2"},{"title":"Commandes Maven/Gradle‚Äã","type":1,"pageTitle":"Liquibase avec Spring Boot","url":"/docs/development/java/data-layer/liquibase#commandes-mavengradle","content":" ","version":"Next","tagName":"h2"},{"title":"Maven‚Äã","type":1,"pageTitle":"Liquibase avec Spring Boot","url":"/docs/development/java/data-layer/liquibase#maven-1","content":" # Mettre √† jour la base de donn√©es mvn liquibase:update # Voir le statut mvn liquibase:status # Rollback mvn liquibase:rollback -Dliquibase.rollbackCount=1 # G√©n√©rer un changelog depuis une DB existante mvn liquibase:generateChangeLog   Configuration dans pom.xml :  &lt;plugin&gt; &lt;groupId&gt;org.liquibase&lt;/groupId&gt; &lt;artifactId&gt;liquibase-maven-plugin&lt;/artifactId&gt; &lt;configuration&gt; &lt;propertyFile&gt;src/main/resources/liquibase.properties&lt;/propertyFile&gt; &lt;/configuration&gt; &lt;/plugin&gt;   ","version":"Next","tagName":"h3"},{"title":"Gradle‚Äã","type":1,"pageTitle":"Liquibase avec Spring Boot","url":"/docs/development/java/data-layer/liquibase#gradle-1","content":" # Mettre √† jour la base de donn√©es ./gradlew update # Voir le statut ./gradlew status   Configuration dans build.gradle :  plugins { id 'org.liquibase.gradle' version '2.2.0' } liquibase { activities { main { changelogFile 'src/main/resources/db/changelog/db.changelog-master.xml' url 'jdbc:postgresql://localhost:5432/mydb' username 'user' password 'pass' } } }   ","version":"Next","tagName":"h3"},{"title":"Bonnes pratiques‚Äã","type":1,"pageTitle":"Liquibase avec Spring Boot","url":"/docs/development/java/data-layer/liquibase#bonnes-pratiques","content":" Un changeset = une modification atomique : Facilite les rollbacksID uniques : Utiliser des pr√©fixes (ex: 001-, 002-)Ne jamais modifier un changeset d√©ploy√© : Cr√©er un nouveau changesetUtiliser des contextes : Diff√©rencier dev/test/prodInclure des rollback : Pour les changesets complexesStructure de dossiers : Organiser par version ou fonctionnalit√©  src/main/resources/ ‚îî‚îÄ‚îÄ db/ ‚îî‚îÄ‚îÄ changelog/ ‚îú‚îÄ‚îÄ db.changelog-master.xml ‚îî‚îÄ‚îÄ changes/ ‚îú‚îÄ‚îÄ v1.0/ ‚îÇ ‚îú‚îÄ‚îÄ 001-create-user-table.xml ‚îÇ ‚îî‚îÄ‚îÄ 002-create-order-table.xml ‚îî‚îÄ‚îÄ v1.1/ ‚îî‚îÄ‚îÄ 003-add-user-email.xml   ","version":"Next","tagName":"h2"},{"title":"Exemple avec rollback‚Äã","type":1,"pageTitle":"Liquibase avec Spring Boot","url":"/docs/development/java/data-layer/liquibase#exemple-avec-rollback","content":" &lt;changeSet id=&quot;003&quot; author=&quot;dev&quot;&gt; &lt;addColumn tableName=&quot;user&quot;&gt; &lt;column name=&quot;phone&quot; type=&quot;varchar(20)&quot;/&gt; &lt;/addColumn&gt; &lt;rollback&gt; &lt;dropColumn tableName=&quot;user&quot; columnName=&quot;phone&quot;/&gt; &lt;/rollback&gt; &lt;/changeSet&gt;   ","version":"Next","tagName":"h3"},{"title":"Utilisation des contextes‚Äã","type":1,"pageTitle":"Liquibase avec Spring Boot","url":"/docs/development/java/data-layer/liquibase#utilisation-des-contextes","content":" Les contextes permettent d'ex√©cuter des changesets sp√©cifiques selon l'environnement :  &lt;changeSet id=&quot;004&quot; author=&quot;dev&quot; context=&quot;dev&quot;&gt; &lt;insert tableName=&quot;user&quot;&gt; &lt;column name=&quot;username&quot; value=&quot;test_user&quot;/&gt; &lt;/insert&gt; &lt;/changeSet&gt; &lt;changeSet id=&quot;005&quot; author=&quot;dev&quot; context=&quot;prod&quot;&gt; &lt;sql&gt;GRANT SELECT ON user TO readonly_user;&lt;/sql&gt; &lt;/changeSet&gt;   Configuration par profil :  spring: profiles: active: dev liquibase: contexts: ${spring.profiles.active}   ","version":"Next","tagName":"h2"},{"title":"Tables techniques‚Äã","type":1,"pageTitle":"Liquibase avec Spring Boot","url":"/docs/development/java/data-layer/liquibase#tables-techniques","content":" Liquibase cr√©e deux tables automatiquement :  DATABASECHANGELOG : Historique des changesets ex√©cut√©sDATABASECHANGELOGLOCK : Gestion des verrous concurrents  ","version":"Next","tagName":"h2"},{"title":"Int√©gration CI/CD avec Spring Boot‚Äã","type":1,"pageTitle":"Liquibase avec Spring Boot","url":"/docs/development/java/data-layer/liquibase#int√©gration-cicd-avec-spring-boot","content":" ","version":"Next","tagName":"h2"},{"title":"Validation avant d√©ploiement‚Äã","type":1,"pageTitle":"Liquibase avec Spring Boot","url":"/docs/development/java/data-layer/liquibase#validation-avant-d√©ploiement","content":" @Component public class LiquibaseValidator implements ApplicationRunner { @Autowired private SpringLiquibase liquibase; @Override public void run(ApplicationArguments args) throws Exception { // Validation au d√©marrage liquibase.afterPropertiesSet(); } }   ","version":"Next","tagName":"h3"},{"title":"Ex√©cution conditionnelle‚Äã","type":1,"pageTitle":"Liquibase avec Spring Boot","url":"/docs/development/java/data-layer/liquibase#ex√©cution-conditionnelle","content":" @Configuration public class LiquibaseConfig { @Value(&quot;${app.liquibase.enabled:true}&quot;) private boolean liquibaseEnabled; @Bean @ConditionalOnProperty(name = &quot;app.liquibase.enabled&quot;, havingValue = &quot;true&quot;) public SpringLiquibase liquibase(DataSource dataSource) { SpringLiquibase liquibase = new SpringLiquibase(); liquibase.setDataSource(dataSource); liquibase.setChangeLog(&quot;classpath:db/changelog/db.changelog-master.xml&quot;); return liquibase; } }   ","version":"Next","tagName":"h3"},{"title":"Docker avec Spring Boot‚Äã","type":1,"pageTitle":"Liquibase avec Spring Boot","url":"/docs/development/java/data-layer/liquibase#docker-avec-spring-boot","content":" FROM eclipse-temurin:17-jre-alpine COPY target/myapp.jar app.jar # Liquibase s'ex√©cute au d√©marrage de l'application ENTRYPOINT [&quot;java&quot;, &quot;-jar&quot;, &quot;/app.jar&quot;]   ","version":"Next","tagName":"h3"},{"title":"GitLab CI‚Äã","type":1,"pageTitle":"Liquibase avec Spring Boot","url":"/docs/development/java/data-layer/liquibase#gitlab-ci","content":" stages: - build - migrate - deploy variables: MAVEN_OPTS: &quot;-Dmaven.repo.local=$CI_PROJECT_DIR/.m2/repository&quot; cache: paths: - .m2/repository - target/ build: stage: build image: maven:3.9-eclipse-temurin-17 script: - mvn clean package -DskipTests artifacts: paths: - target/*.jar expire_in: 1 hour migrate: stage: migrate image: maven:3.9-eclipse-temurin-17 only: - main - develop script: - mvn liquibase:update environment: name: $CI_COMMIT_REF_NAME variables: SPRING_DATASOURCE_URL: $DB_URL SPRING_DATASOURCE_USERNAME: $DB_USER SPRING_DATASOURCE_PASSWORD: $DB_PASSWORD deploy: stage: deploy image: docker:latest services: - docker:dind only: - main script: - docker build -t myapp:latest . - docker push myapp:latest   Configuration des variables dans GitLab : Settings &gt; CI/CD &gt; Variables  DB_URLDB_USERDB_PASSWORD (masqu√©)  ","version":"Next","tagName":"h3"},{"title":"D√©pannage‚Äã","type":1,"pageTitle":"Liquibase avec Spring Boot","url":"/docs/development/java/data-layer/liquibase#d√©pannage","content":" ","version":"Next","tagName":"h2"},{"title":"Liquibase ne s'ex√©cute pas‚Äã","type":1,"pageTitle":"Liquibase avec Spring Boot","url":"/docs/development/java/data-layer/liquibase#liquibase-ne-sex√©cute-pas","content":" V√©rifier que la d√©pendance est pr√©sente et que spring.liquibase.enabled=true.  ","version":"Next","tagName":"h3"},{"title":"Erreur de checksum‚Äã","type":1,"pageTitle":"Liquibase avec Spring Boot","url":"/docs/development/java/data-layer/liquibase#erreur-de-checksum","content":" Un changeset a √©t√© modifi√© apr√®s d√©ploiement. Options :  Ajouter &lt;validCheckSum&gt;ANY&lt;/validCheckSum&gt; (d√©conseill√©)Utiliser mvn liquibase:clearCheckSums en dev  ","version":"Next","tagName":"h3"},{"title":"Conflits de lock‚Äã","type":1,"pageTitle":"Liquibase avec Spring Boot","url":"/docs/development/java/data-layer/liquibase#conflits-de-lock","content":" -- Lib√©rer le verrou manuellement DELETE FROM DATABASECHANGELOGLOCK WHERE ID = 1;   Liquibase avec Spring Boot offre une solution compl√®te et automatis√©e pour g√©rer l'√©volution des sch√©mas de base de donn√©es dans vos applications Java. ","version":"Next","tagName":"h3"},{"title":"Devops","type":0,"sectionRef":"#","url":"/docs/devops","content":"Devops","keywords":"","version":"Next"},{"title":"CI/CD","type":0,"sectionRef":"#","url":"/docs/devops/cicd","content":"","keywords":"","version":"Next"},{"title":"Templates disponibles‚Äã","type":1,"pageTitle":"CI/CD","url":"/docs/devops/cicd#templates-disponibles","content":" Template\tDescriptionmaven\tMaven build template npm\tNPM build template docker\tDocker build template helm\tHelm build template gitops\tGitops deployment template sonar\tSonarQube analysis template task\tTaskfile template awx\tAnsible AWX template tag\tTagging template vars\tVariables template python\tPython build template renovate\tRenovate template sbom\tSoftware Bill of Materials operations template  ","version":"Next","tagName":"h2"},{"title":"Utilisation‚Äã","type":1,"pageTitle":"CI/CD","url":"/docs/devops/cicd#utilisation","content":" Pour utiliser un template dans votre pipeline GitLab CI, ajoutez l'include dans votre .gitlab-ci.yml :  include: - project: 'karimFSL/gitlabci-templates' file: '/templates/nom-du-template.yml'   ","version":"Next","tagName":"h2"},{"title":"Support‚Äã","type":1,"pageTitle":"CI/CD","url":"/docs/devops/cicd#support","content":" Pour toute question ou demande d'acc√®s, contactez l'√©quipe DevOps. ","version":"Next","tagName":"h2"},{"title":"G√©n√©ration API & DTO avec OpenAPI en Java","type":0,"sectionRef":"#","url":"/docs/development/java/web-layer/open-api","content":"","keywords":"","version":"Next"},{"title":"Introduction‚Äã","type":1,"pageTitle":"G√©n√©ration API & DTO avec OpenAPI en Java","url":"/docs/development/java/web-layer/open-api#introduction","content":" OpenAPI permet de g√©n√©rer automatiquement du code Java (APIs et DTOs) √† partir d'une sp√©cification OpenAPI, garantissant la coh√©rence entre documentation et impl√©mentation.  ","version":"Next","tagName":"h2"},{"title":"Outils principaux‚Äã","type":1,"pageTitle":"G√©n√©ration API & DTO avec OpenAPI en Java","url":"/docs/development/java/web-layer/open-api#outils-principaux","content":" OpenAPI Generator : outil de g√©n√©ration de code multi-langageSwagger Codegen : alternative pour la g√©n√©ration de code  ","version":"Next","tagName":"h2"},{"title":"Configuration Maven‚Äã","type":1,"pageTitle":"G√©n√©ration API & DTO avec OpenAPI en Java","url":"/docs/development/java/web-layer/open-api#configuration-maven","content":" &lt;plugin&gt; &lt;groupId&gt;org.openapitools&lt;/groupId&gt; &lt;artifactId&gt;openapi-generator-maven-plugin&lt;/artifactId&gt; &lt;version&gt;7.0.1&lt;/version&gt; &lt;executions&gt; &lt;execution&gt; &lt;goals&gt; &lt;goal&gt;generate&lt;/goal&gt; &lt;/goals&gt; &lt;configuration&gt; &lt;inputSpec&gt;${project.basedir}/src/main/resources/openapi.yaml&lt;/inputSpec&gt; &lt;generatorName&gt;spring&lt;/generatorName&gt; &lt;apiPackage&gt;com.example.api&lt;/apiPackage&gt; &lt;modelPackage&gt;com.example.dto&lt;/modelPackage&gt; &lt;configOptions&gt; &lt;interfaceOnly&gt;true&lt;/interfaceOnly&gt; &lt;useSpringBoot3&gt;true&lt;/useSpringBoot3&gt; &lt;/configOptions&gt; &lt;/configuration&gt; &lt;/execution&gt; &lt;/executions&gt; &lt;/plugin&gt;   ","version":"Next","tagName":"h2"},{"title":"Configuration Gradle‚Äã","type":1,"pageTitle":"G√©n√©ration API & DTO avec OpenAPI en Java","url":"/docs/development/java/web-layer/open-api#configuration-gradle","content":" plugins { id &quot;org.openapi.generator&quot; version &quot;7.0.1&quot; } openApiGenerate { generatorName = &quot;spring&quot; inputSpec = &quot;$rootDir/src/main/resources/openapi.yaml&quot; outputDir = &quot;$buildDir/generated&quot; apiPackage = &quot;com.example.api&quot; modelPackage = &quot;com.example.dto&quot; configOptions = [ interfaceOnly: &quot;true&quot;, useSpringBoot3: &quot;true&quot; ] }   ","version":"Next","tagName":"h2"},{"title":"Exemple de sp√©cification OpenAPI‚Äã","type":1,"pageTitle":"G√©n√©ration API & DTO avec OpenAPI en Java","url":"/docs/development/java/web-layer/open-api#exemple-de-sp√©cification-openapi","content":" openapi: 3.0.0 info: title: User API version: 1.0.0 paths: /users/{id}: get: tags: - user operationId: getUser parameters: - name: id in: path required: true schema: type: integer format: int64 responses: '200': description: User found content: application/json: schema: $ref: '#/components/schemas/User' components: schemas: User: type: object required: - id - name properties: id: type: integer format: int64 name: type: string maxLength: 100 email: type: string format: email   ","version":"Next","tagName":"h2"},{"title":"Code g√©n√©r√© - Interface API‚Äã","type":1,"pageTitle":"G√©n√©ration API & DTO avec OpenAPI en Java","url":"/docs/development/java/web-layer/open-api#code-g√©n√©r√©---interface-api","content":" @Generated(value = &quot;org.openapitools.codegen.languages.SpringCodegen&quot;) @Validated @Tag(name = &quot;user&quot;, description = &quot;the user API&quot;) public interface UserApi { @Operation( operationId = &quot;getUser&quot;, summary = &quot;&quot;, tags = { &quot;user&quot; }, responses = { @ApiResponse(responseCode = &quot;200&quot;, description = &quot;User found&quot;, content = @Content(schema = @Schema(implementation = User.class))) } ) @RequestMapping( method = RequestMethod.GET, value = &quot;/users/{id}&quot;, produces = { &quot;application/json&quot; } ) ResponseEntity&lt;User&gt; getUser( @Parameter(name = &quot;id&quot;, required = true) @PathVariable(&quot;id&quot;) Long id ); }   ","version":"Next","tagName":"h2"},{"title":"Code g√©n√©r√© - DTO‚Äã","type":1,"pageTitle":"G√©n√©ration API & DTO avec OpenAPI en Java","url":"/docs/development/java/web-layer/open-api#code-g√©n√©r√©---dto","content":" @Generated(value = &quot;org.openapitools.codegen.languages.SpringCodegen&quot;) @Schema(name = &quot;User&quot;, description = &quot;&quot;) public class User { @NotNull private Long id; @NotNull @Size(max = 100) private String name; @Email private String email; // Getters et Setters public Long getId() { return id; } public void setId(Long id) { this.id = id; } // ... autres getters/setters }   ","version":"Next","tagName":"h2"},{"title":"Impl√©mentation dans votre contr√¥leur‚Äã","type":1,"pageTitle":"G√©n√©ration API & DTO avec OpenAPI en Java","url":"/docs/development/java/web-layer/open-api#impl√©mentation-dans-votre-contr√¥leur","content":" @RestController public class UserController implements UserApi { @Override public ResponseEntity&lt;User&gt; getUser(Long id) { // Votre logique m√©tier return ResponseEntity.ok(userService.findById(id)); } }   ","version":"Next","tagName":"h2"},{"title":"Annotations principales g√©n√©r√©es‚Äã","type":1,"pageTitle":"G√©n√©ration API & DTO avec OpenAPI en Java","url":"/docs/development/java/web-layer/open-api#annotations-principales-g√©n√©r√©es","content":" Les annotations Swagger/OpenAPI g√©n√©r√©es incluent :  @Generated : Indique que le code est g√©n√©r√© automatiquement@Schema : Documentation du mod√®le pour Swagger UI@Operation : Documentation de l'op√©ration API@ApiResponse : Documentation des r√©ponses possibles@Parameter : Documentation des param√®tres@Tag : Regroupement des endpoints  Ces annotations permettent la g√©n√©ration automatique de la documentation Swagger UI.  ","version":"Next","tagName":"h2"},{"title":"Options de configuration utiles‚Äã","type":1,"pageTitle":"G√©n√©ration API & DTO avec OpenAPI en Java","url":"/docs/development/java/web-layer/open-api#options-de-configuration-utiles","content":" Option\tDescriptioninterfaceOnly\tG√©n√®re uniquement les interfaces API useTags\tGroupe les APIs par tags OpenAPI dateLibrary\tBiblioth√®que pour les dates (java8, legacy) serializationLibrary\tJackson, Gson, etc.  ","version":"Next","tagName":"h2"},{"title":"Commandes‚Äã","type":1,"pageTitle":"G√©n√©ration API & DTO avec OpenAPI en Java","url":"/docs/development/java/web-layer/open-api#commandes","content":" Maven : mvn clean generate-sources  Gradle : ./gradlew openApiGenerate  ","version":"Next","tagName":"h2"},{"title":"Bonnes pratiques‚Äã","type":1,"pageTitle":"G√©n√©ration API & DTO avec OpenAPI en Java","url":"/docs/development/java/web-layer/open-api#bonnes-pratiques","content":" Versionnez votre fichier OpenAPI dans le projetIgnorez le code g√©n√©r√© dans .gitignoreN'√©ditez jamais le code g√©n√©r√© directementR√©g√©n√©rez √† chaque modification du contrat OpenAPIUtilisez interfaceOnly=true pour s√©parer contrat et impl√©mentation  ","version":"Next","tagName":"h2"},{"title":"Structure du projet‚Äã","type":1,"pageTitle":"G√©n√©ration API & DTO avec OpenAPI en Java","url":"/docs/development/java/web-layer/open-api#structure-du-projet","content":" src/ ‚îú‚îÄ‚îÄ main/ ‚îÇ ‚îú‚îÄ‚îÄ resources/ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ openapi.yaml # Sp√©cification OpenAPI ‚îÇ ‚îî‚îÄ‚îÄ java/ ‚îÇ ‚îî‚îÄ‚îÄ com/example/ ‚îÇ ‚îú‚îÄ‚îÄ controller/ # Impl√©mentations ‚îÇ ‚îî‚îÄ‚îÄ service/ # Logique m√©tier ‚îî‚îÄ‚îÄ target/generated-sources/ # Code g√©n√©r√© (ignor√© par Git) ‚îî‚îÄ‚îÄ openapi/ ‚îú‚îÄ‚îÄ api/ # Interfaces API ‚îî‚îÄ‚îÄ model/ # DTOs   ","version":"Next","tagName":"h2"},{"title":"Ressources‚Äã","type":1,"pageTitle":"G√©n√©ration API & DTO avec OpenAPI en Java","url":"/docs/development/java/web-layer/open-api#ressources","content":" OpenAPI Generator DocumentationOpenAPI Specification ","version":"Next","tagName":"h2"},{"title":"K9S","type":0,"sectionRef":"#","url":"/docs/devops/observability/k9s","content":"K9S","keywords":"","version":"Next"},{"title":"Loki","type":0,"sectionRef":"#","url":"/docs/devops/observability/loki","content":"Loki","keywords":"","version":"Next"},{"title":"MapStruct - Guide pratique","type":0,"sectionRef":"#","url":"/docs/development/java/web-layer/map-struct","content":"","keywords":"","version":"Next"},{"title":"Introduction‚Äã","type":1,"pageTitle":"MapStruct - Guide pratique","url":"/docs/development/java/web-layer/map-struct#introduction","content":" MapStruct est un g√©n√©rateur de code qui simplifie la conversion entre objets Java (Entit√©s ‚Üî DTOs). Il g√©n√®re le code de mapping au moment de la compilation, ce qui le rend performant et type-safe.  Pourquoi MapStruct ?  ‚úÖ G√©n√©ration de code √† la compilation (pas de r√©flexion)‚úÖ Performance optimale‚úÖ Type-safe (erreurs d√©tect√©es √† la compilation)‚úÖ Code lisible et debuggable‚úÖ Moins de code boilerplate    ","version":"Next","tagName":"h2"},{"title":"Installation‚Äã","type":1,"pageTitle":"MapStruct - Guide pratique","url":"/docs/development/java/web-layer/map-struct#installation","content":" ","version":"Next","tagName":"h2"},{"title":"D√©pendances Maven‚Äã","type":1,"pageTitle":"MapStruct - Guide pratique","url":"/docs/development/java/web-layer/map-struct#d√©pendances-maven","content":" &lt;properties&gt; &lt;mapstruct.version&gt;1.5.5.Final&lt;/mapstruct.version&gt; &lt;lombok.version&gt;1.18.30&lt;/lombok.version&gt; &lt;/properties&gt; &lt;dependencies&gt; &lt;!-- MapStruct --&gt; &lt;dependency&gt; &lt;groupId&gt;org.mapstruct&lt;/groupId&gt; &lt;artifactId&gt;mapstruct&lt;/artifactId&gt; &lt;version&gt;${mapstruct.version}&lt;/version&gt; &lt;/dependency&gt; &lt;/dependencies&gt; &lt;build&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt; &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt; &lt;version&gt;3.11.0&lt;/version&gt; &lt;configuration&gt; &lt;source&gt;17&lt;/source&gt; &lt;target&gt;17&lt;/target&gt; &lt;annotationProcessorPaths&gt; &lt;!-- MapStruct processor --&gt; &lt;path&gt; &lt;groupId&gt;org.mapstruct&lt;/groupId&gt; &lt;artifactId&gt;mapstruct-processor&lt;/artifactId&gt; &lt;version&gt;${mapstruct.version}&lt;/version&gt; &lt;/path&gt; &lt;!-- Lombok (si utilis√©) --&gt; &lt;path&gt; &lt;groupId&gt;org.projectlombok&lt;/groupId&gt; &lt;artifactId&gt;lombok&lt;/artifactId&gt; &lt;version&gt;${lombok.version}&lt;/version&gt; &lt;/path&gt; &lt;!-- Binding Lombok + MapStruct --&gt; &lt;path&gt; &lt;groupId&gt;org.projectlombok&lt;/groupId&gt; &lt;artifactId&gt;lombok-mapstruct-binding&lt;/artifactId&gt; &lt;version&gt;0.2.0&lt;/version&gt; &lt;/path&gt; &lt;/annotationProcessorPaths&gt; &lt;/configuration&gt; &lt;/plugin&gt; &lt;/plugins&gt; &lt;/build&gt;     ","version":"Next","tagName":"h3"},{"title":"Utilisation de base‚Äã","type":1,"pageTitle":"MapStruct - Guide pratique","url":"/docs/development/java/web-layer/map-struct#utilisation-de-base","content":" ","version":"Next","tagName":"h2"},{"title":"1. Mapper simple‚Äã","type":1,"pageTitle":"MapStruct - Guide pratique","url":"/docs/development/java/web-layer/map-struct#1-mapper-simple","content":" package com.company.project.model.mapper; import com.company.project.model.dto.UserDTO; import com.company.project.model.entity.User; import org.mapstruct.Mapper; import org.mapstruct.MappingConstants; @Mapper(componentModel = MappingConstants.ComponentModel.SPRING) public interface UserMapper { // Entit√© ‚Üí DTO UserDTO toDTO(User entity); // DTO ‚Üí Entit√© User toEntity(UserDTO dto); // Liste d'entit√©s ‚Üí Liste de DTOs List&lt;UserDTO&gt; toDTOList(List&lt;User&gt; entities); }   Utilisation dans un service :  @Service @RequiredArgsConstructor public class UserService { private final UserRepository userRepository; private final UserMapper userMapper; public UserDTO findById(UUID id) { User user = userRepository.findById(id) .orElseThrow(() -&gt; new ResourceNotFoundException(&quot;User not found&quot;)); return userMapper.toDTO(user); } @Transactional public UserDTO create(UserDTO dto) { User entity = userMapper.toEntity(dto); User saved = userRepository.save(entity); return userMapper.toDTO(saved); } }     ","version":"Next","tagName":"h3"},{"title":"Mappings personnalis√©s‚Äã","type":1,"pageTitle":"MapStruct - Guide pratique","url":"/docs/development/java/web-layer/map-struct#mappings-personnalis√©s","content":" ","version":"Next","tagName":"h2"},{"title":"1. Champs avec noms diff√©rents‚Äã","type":1,"pageTitle":"MapStruct - Guide pratique","url":"/docs/development/java/web-layer/map-struct#1-champs-avec-noms-diff√©rents","content":" @Mapper(componentModel = &quot;spring&quot;) public interface ProductMapper { @Mapping(source = &quot;productName&quot;, target = &quot;name&quot;) @Mapping(source = &quot;productPrice&quot;, target = &quot;price&quot;) ProductDTO toDTO(Product entity); }   ","version":"Next","tagName":"h3"},{"title":"2. Ignorer certains champs‚Äã","type":1,"pageTitle":"MapStruct - Guide pratique","url":"/docs/development/java/web-layer/map-struct#2-ignorer-certains-champs","content":" @Mapper(componentModel = &quot;spring&quot;) public interface UserMapper { @Mapping(target = &quot;password&quot;, ignore = true) @Mapping(target = &quot;createdAt&quot;, ignore = true) @Mapping(target = &quot;updatedAt&quot;, ignore = true) User toEntity(UserDTO dto); }   ","version":"Next","tagName":"h3"},{"title":"3. Valeurs par d√©faut‚Äã","type":1,"pageTitle":"MapStruct - Guide pratique","url":"/docs/development/java/web-layer/map-struct#3-valeurs-par-d√©faut","content":" @Mapper(componentModel = &quot;spring&quot;) public interface OrderMapper { @Mapping(target = &quot;status&quot;, constant = &quot;PENDING&quot;) @Mapping(target = &quot;active&quot;, defaultValue = &quot;true&quot;) Order toEntity(OrderDTO dto); }   ","version":"Next","tagName":"h3"},{"title":"4. Expressions personnalis√©es‚Äã","type":1,"pageTitle":"MapStruct - Guide pratique","url":"/docs/development/java/web-layer/map-struct#4-expressions-personnalis√©es","content":" @Mapper(componentModel = &quot;spring&quot;, imports = {UUID.class, LocalDateTime.class}) public interface UserMapper { @Mapping(target = &quot;id&quot;, expression = &quot;java(UUID.randomUUID())&quot;) @Mapping(target = &quot;createdAt&quot;, expression = &quot;java(LocalDateTime.now())&quot;) User toEntity(UserDTO dto); }     ","version":"Next","tagName":"h3"},{"title":"Mappings de collections‚Äã","type":1,"pageTitle":"MapStruct - Guide pratique","url":"/docs/development/java/web-layer/map-struct#mappings-de-collections","content":" ","version":"Next","tagName":"h2"},{"title":"1. Mapper des relations simples‚Äã","type":1,"pageTitle":"MapStruct - Guide pratique","url":"/docs/development/java/web-layer/map-struct#1-mapper-des-relations-simples","content":" @Mapper(componentModel = &quot;spring&quot;) public interface UserMapper { // MapStruct map automatiquement les collections @Mapping(target = &quot;roleNames&quot;, source = &quot;roles&quot;) UserDTO toDTO(User entity); // M√©thode personnalis√©e pour mapper Role ‚Üí String default String mapRole(Role role) { return role != null ? role.getName() : null; } }   ","version":"Next","tagName":"h3"},{"title":"2. Utiliser d'autres mappers‚Äã","type":1,"pageTitle":"MapStruct - Guide pratique","url":"/docs/development/java/web-layer/map-struct#2-utiliser-dautres-mappers","content":" @Mapper(componentModel = &quot;spring&quot;, uses = {AddressMapper.class, RoleMapper.class}) public interface UserMapper { // MapStruct utilise automatiquement AddressMapper et RoleMapper UserDTO toDTO(User entity); }     ","version":"Next","tagName":"h3"},{"title":"Mise √† jour d'entit√©s existantes‚Äã","type":1,"pageTitle":"MapStruct - Guide pratique","url":"/docs/development/java/web-layer/map-struct#mise-√†-jour-dentit√©s-existantes","content":" ","version":"Next","tagName":"h2"},{"title":"@MappingTarget pour update‚Äã","type":1,"pageTitle":"MapStruct - Guide pratique","url":"/docs/development/java/web-layer/map-struct#mappingtarget-pour-update","content":" @Mapper(componentModel = &quot;spring&quot;) public interface UserMapper { UserDTO toDTO(User entity); User toEntity(UserDTO dto); // Mise √† jour d'une entit√© existante @Mapping(target = &quot;id&quot;, ignore = true) @Mapping(target = &quot;createdAt&quot;, ignore = true) @Mapping(target = &quot;password&quot;, ignore = true) void updateEntityFromDTO(UserDTO dto, @MappingTarget User entity); }   Utilisation :  @Service @RequiredArgsConstructor public class UserService { private final UserRepository userRepository; private final UserMapper userMapper; @Transactional public UserDTO update(UUID id, UserDTO dto) { User entity = userRepository.findById(id) .orElseThrow(() -&gt; new ResourceNotFoundException(&quot;User not found&quot;)); // Met √† jour l'entit√© existante userMapper.updateEntityFromDTO(dto, entity); User updated = userRepository.save(entity); return userMapper.toDTO(updated); } }     ","version":"Next","tagName":"h3"},{"title":"M√©thodes personnalis√©es‚Äã","type":1,"pageTitle":"MapStruct - Guide pratique","url":"/docs/development/java/web-layer/map-struct#m√©thodes-personnalis√©es","content":" ","version":"Next","tagName":"h2"},{"title":"@Named pour r√©utiliser des m√©thodes‚Äã","type":1,"pageTitle":"MapStruct - Guide pratique","url":"/docs/development/java/web-layer/map-struct#named-pour-r√©utiliser-des-m√©thodes","content":" @Mapper(componentModel = &quot;spring&quot;) public interface UserMapper { @Mapping(target = &quot;roles&quot;, source = &quot;roles&quot;, qualifiedByName = &quot;mapRolesToStrings&quot;) UserDTO toDTO(User entity); @Named(&quot;mapRolesToStrings&quot;) default Set&lt;String&gt; mapRolesToStrings(Set&lt;Role&gt; roles) { if (roles == null) { return Collections.emptySet(); } return roles.stream() .map(Role::getName) .collect(Collectors.toSet()); } @Named(&quot;mapStringsToRoles&quot;) default Set&lt;Role&gt; mapStringsToRoles(Set&lt;String&gt; roleNames) { // Logique personnalis√©e return roleNames.stream() .map(name -&gt; Role.builder().name(name).build()) .collect(Collectors.toSet()); } }     ","version":"Next","tagName":"h3"},{"title":"Mappings bidirectionnels‚Äã","type":1,"pageTitle":"MapStruct - Guide pratique","url":"/docs/development/java/web-layer/map-struct#mappings-bidirectionnels","content":" ","version":"Next","tagName":"h2"},{"title":"G√©rer les relations parent-enfant‚Äã","type":1,"pageTitle":"MapStruct - Guide pratique","url":"/docs/development/java/web-layer/map-struct#g√©rer-les-relations-parent-enfant","content":" @Mapper(componentModel = &quot;spring&quot;) public interface OrderMapper { @Mapping(target = &quot;items&quot;, source = &quot;items&quot;) OrderDTO toDTO(Order entity); @Mapping(target = &quot;order&quot;, ignore = true) // √âvite la boucle infinie OrderItemDTO itemToDTO(OrderItem item); }     ","version":"Next","tagName":"h3"},{"title":"Configuration avanc√©e‚Äã","type":1,"pageTitle":"MapStruct - Guide pratique","url":"/docs/development/java/web-layer/map-struct#configuration-avanc√©e","content":" ","version":"Next","tagName":"h2"},{"title":"Strat√©gies de null‚Äã","type":1,"pageTitle":"MapStruct - Guide pratique","url":"/docs/development/java/web-layer/map-struct#strat√©gies-de-null","content":" @Mapper( componentModel = &quot;spring&quot;, nullValuePropertyMappingStrategy = NullValuePropertyMappingStrategy.IGNORE, nullValueCheckStrategy = NullValueCheckStrategy.ALWAYS ) public interface UserMapper { // Si un champ du DTO est null, il n'est pas mapp√© (garde la valeur existante) void updateEntityFromDTO(UserDTO dto, @MappingTarget User entity); }   ","version":"Next","tagName":"h3"},{"title":"Politique de mapping non d√©fini‚Äã","type":1,"pageTitle":"MapStruct - Guide pratique","url":"/docs/development/java/web-layer/map-struct#politique-de-mapping-non-d√©fini","content":" @Mapper( componentModel = &quot;spring&quot;, unmappedTargetPolicy = ReportingPolicy.IGNORE // IGNORE, WARN, ou ERROR ) public interface UserMapper { UserDTO toDTO(User entity); }     ","version":"Next","tagName":"h3"},{"title":"Exemples pratiques‚Äã","type":1,"pageTitle":"MapStruct - Guide pratique","url":"/docs/development/java/web-layer/map-struct#exemples-pratiques","content":" ","version":"Next","tagName":"h2"},{"title":"Mapper avec transformations‚Äã","type":1,"pageTitle":"MapStruct - Guide pratique","url":"/docs/development/java/web-layer/map-struct#mapper-avec-transformations","content":" @Mapper(componentModel = &quot;spring&quot;) public interface ProductMapper { @Mapping(target = &quot;price&quot;, source = &quot;priceInCents&quot;, qualifiedByName = &quot;centsToEuros&quot;) @Mapping(target = &quot;fullName&quot;, expression = &quot;java(entity.getName() + \\&quot; - \\&quot; + entity.getCategory())&quot;) ProductDTO toDTO(Product entity); @Named(&quot;centsToEuros&quot;) default BigDecimal centsToEuros(Long cents) { return cents != null ? BigDecimal.valueOf(cents).divide(BigDecimal.valueOf(100)) : null; } }   ","version":"Next","tagName":"h3"},{"title":"Mapper avec dates‚Äã","type":1,"pageTitle":"MapStruct - Guide pratique","url":"/docs/development/java/web-layer/map-struct#mapper-avec-dates","content":" @Mapper(componentModel = &quot;spring&quot;) public interface EventMapper { @Mapping(target = &quot;eventDate&quot;, source = &quot;date&quot;, dateFormat = &quot;yyyy-MM-dd HH:mm:ss&quot;) EventDTO toDTO(Event entity); @Mapping(target = &quot;date&quot;, source = &quot;eventDate&quot;, dateFormat = &quot;yyyy-MM-dd HH:mm:ss&quot;) Event toEntity(EventDTO dto); }     ","version":"Next","tagName":"h3"},{"title":"G√©n√©ration et compilation‚Äã","type":1,"pageTitle":"MapStruct - Guide pratique","url":"/docs/development/java/web-layer/map-struct#g√©n√©ration-et-compilation","content":" ","version":"Next","tagName":"h2"},{"title":"Voir le code g√©n√©r√©‚Äã","type":1,"pageTitle":"MapStruct - Guide pratique","url":"/docs/development/java/web-layer/map-struct#voir-le-code-g√©n√©r√©","content":" Apr√®s compilation (mvn compile), les impl√©mentations g√©n√©r√©es se trouvent dans :  target/generated-sources/annotations/com/company/project/model/mapper/UserMapperImpl.java   Exemple de code g√©n√©r√© :  @Component public class UserMapperImpl implements UserMapper { @Override public UserDTO toDTO(User entity) { if (entity == null) { return null; } UserDTO.UserDTOBuilder userDTO = UserDTO.builder(); userDTO.id(entity.getId()); userDTO.email(entity.getEmail()); userDTO.firstName(entity.getFirstName()); userDTO.lastName(entity.getLastName()); // ... autres champs return userDTO.build(); } // ... autres m√©thodes }     ","version":"Next","tagName":"h3"},{"title":"Troubleshooting‚Äã","type":1,"pageTitle":"MapStruct - Guide pratique","url":"/docs/development/java/web-layer/map-struct#troubleshooting","content":" ","version":"Next","tagName":"h2"},{"title":"Probl√®me : Mapper non inject√©‚Äã","type":1,"pageTitle":"MapStruct - Guide pratique","url":"/docs/development/java/web-layer/map-struct#probl√®me--mapper-non-inject√©","content":" Erreur : No qualifying bean of type 'UserMapper'  Solution : V√©rifier que :  componentModel = &quot;spring&quot; est pr√©sent dans @MapperLe projet est bien compil√© (mvn clean compile)Les annotation processors sont configur√©s dans le pom.xml  ","version":"Next","tagName":"h3"},{"title":"Probl√®me : Lombok + MapStruct‚Äã","type":1,"pageTitle":"MapStruct - Guide pratique","url":"/docs/development/java/web-layer/map-struct#probl√®me--lombok--mapstruct","content":" Solution : Ajouter le binding :  &lt;path&gt; &lt;groupId&gt;org.projectlombok&lt;/groupId&gt; &lt;artifactId&gt;lombok-mapstruct-binding&lt;/artifactId&gt; &lt;version&gt;0.2.0&lt;/version&gt; &lt;/path&gt;   ","version":"Next","tagName":"h3"},{"title":"Probl√®me : IntelliJ ne reconna√Æt pas le mapper‚Äã","type":1,"pageTitle":"MapStruct - Guide pratique","url":"/docs/development/java/web-layer/map-struct#probl√®me--intellij-ne-reconna√Æt-pas-le-mapper","content":" Solution :  File ‚Üí Settings ‚Üí Build, Execution, Deployment ‚Üí Compiler ‚Üí Annotation ProcessorsCocher &quot;Enable annotation processing&quot;Rebuild le projet    ","version":"Next","tagName":"h3"},{"title":"Bonnes pratiques‚Äã","type":1,"pageTitle":"MapStruct - Guide pratique","url":"/docs/development/java/web-layer/map-struct#bonnes-pratiques","content":" ","version":"Next","tagName":"h2"},{"title":"‚úÖ √Ä faire‚Äã","type":1,"pageTitle":"MapStruct - Guide pratique","url":"/docs/development/java/web-layer/map-struct#-√†-faire","content":" // Utiliser componentModel spring @Mapper(componentModel = &quot;spring&quot;) // Cr√©er des mappers d√©di√©s par entit√© UserMapper, ProductMapper, OrderMapper // Ignorer les champs sensibles @Mapping(target = &quot;password&quot;, ignore = true) // Utiliser @MappingTarget pour les updates void updateEntityFromDTO(DTO dto, @MappingTarget Entity entity); // Documenter les mappings complexes @Mapping(target = &quot;fullPrice&quot;, source = &quot;price&quot;) // Price includes VAT   ","version":"Next","tagName":"h3"},{"title":"‚ùå √Ä √©viter‚Äã","type":1,"pageTitle":"MapStruct - Guide pratique","url":"/docs/development/java/web-layer/map-struct#-√†-√©viter","content":" // Ne pas mapper directement dans les services // ‚ùå MAUVAIS public UserDTO findById(UUID id) { User user = repository.findById(id).orElseThrow(); UserDTO dto = new UserDTO(); dto.setId(user.getId()); dto.setEmail(user.getEmail()); // ... laborieux et source d'erreurs return dto; } // ‚úÖ BON public UserDTO findById(UUID id) { User user = repository.findById(id).orElseThrow(); return userMapper.toDTO(user); } // Ne pas mapper des entit√©s JPA avec des relations LAZY non initialis√©es // Utiliser JOIN FETCH dans les requ√™tes ou g√©rer les mappings sp√©cifiquement     ","version":"Next","tagName":"h3"},{"title":"Checklist‚Äã","type":1,"pageTitle":"MapStruct - Guide pratique","url":"/docs/development/java/web-layer/map-struct#checklist","content":"  D√©pendances MapStruct ajout√©es Annotation processors configur√©s Mapper cr√©√© avec @Mapper(componentModel = &quot;spring&quot;) Mapper inject√© dans les services avec @RequiredArgsConstructor Champs sensibles ignor√©s (password, etc.) Projet compil√© : mvn clean compile Code g√©n√©r√© v√©rifi√© dans target/generated-sources    ","version":"Next","tagName":"h2"},{"title":"Ressources‚Äã","type":1,"pageTitle":"MapStruct - Guide pratique","url":"/docs/development/java/web-layer/map-struct#ressources","content":" Documentation officielle MapStructMapStruct ExamplesBaeldung - MapStruct Guide ","version":"Next","tagName":"h2"},{"title":"ZIPKIN","type":0,"sectionRef":"#","url":"/docs/devops/observability/zipkin","content":"ZIPKIN","keywords":"","version":"Next"},{"title":"Ecosystem","type":0,"sectionRef":"#","url":"/docs/ecosystem","content":"Ecosystem","keywords":"","version":"Next"},{"title":"Infrastructure","type":0,"sectionRef":"#","url":"/docs/infrastructure","content":"Infrastructure","keywords":"","version":"Next"},{"title":"Artifactory","type":0,"sectionRef":"#","url":"/docs/infrastructure/docker-registry/artifactory","content":"Artifactory","keywords":"","version":"Next"},{"title":"Docker hub","type":0,"sectionRef":"#","url":"/docs/infrastructure/docker-registry/docker-hub","content":"Docker hub","keywords":"","version":"Next"},{"title":"üî∑ Pipeline Drupal - GitLab CI","type":0,"sectionRef":"#","url":"/docs/devops/cicd/pipelines-drupal","content":"","keywords":"","version":"Next"},{"title":"üéØ Architecture du Pipeline GitLab CI Drupal‚Äã","type":1,"pageTitle":"üî∑ Pipeline Drupal - GitLab CI","url":"/docs/devops/cicd/pipelines-drupal#-architecture-du-pipeline-gitlab-ci-drupal","content":"   ","version":"Next","tagName":"h2"},{"title":"üìã Pipeline GitLab CI Complet‚Äã","type":1,"pageTitle":"üî∑ Pipeline Drupal - GitLab CI","url":"/docs/devops/cicd/pipelines-drupal#-pipeline-gitlab-ci-complet","content":" .gitlab-ci.yml # GitLab CI Pipeline pour Drupal 10 # Version: 1.0 # Description: Pipeline DevSecOps complet pour Drupal variables: # PHP PHP_VERSION: &quot;8.2&quot; # Composer COMPOSER_CACHE_DIR: &quot;${CI_PROJECT_DIR}/.composer-cache&quot; COMPOSER_ALLOW_SUPERUSER: &quot;1&quot; COMPOSER_MEMORY_LIMIT: &quot;-1&quot; # Docker DOCKER_DRIVER: overlay2 DOCKER_TLS_CERTDIR: &quot;/certs&quot; REGISTRY: $CI_REGISTRY IMAGE_NAME: $CI_REGISTRY_IMAGE # Application APP_NAME: &quot;my-drupal-site&quot; DRUPAL_ROOT: &quot;/var/www/html/web&quot; # Database MYSQL_ROOT_PASSWORD: &quot;root&quot; MYSQL_DATABASE: &quot;drupal&quot; MYSQL_USER: &quot;drupal&quot; MYSQL_PASSWORD: &quot;drupal&quot; # Kubernetes KUBE_NAMESPACE_DEV: &quot;dev&quot; KUBE_NAMESPACE_STAGING: &quot;staging&quot; KUBE_NAMESPACE_PROD: &quot;production&quot; # Cache Composer cache: key: ${CI_COMMIT_REF_SLUG} paths: - .composer-cache/ - vendor/ - web/core/ - web/modules/contrib/ - web/themes/contrib/ # Stages stages: - build - quality - test - security - package - deploy-dev - deploy-staging - deploy-prod # Templates .php_template: &amp;php_template image: php:${PHP_VERSION}-cli before_script: - apt-get update -qq - apt-get install -y -qq git unzip libzip-dev libpng-dev libpq-dev libicu-dev - docker-php-ext-install zip gd pdo pdo_mysql intl - curl -sS https://getcomposer.org/installer | php -- --install-dir=/usr/local/bin --filename=composer - composer --version - php --version .docker_template: &amp;docker_template image: docker:24-dind services: - docker:24-dind before_script: - docker info - echo &quot;$CI_REGISTRY_PASSWORD&quot; | docker login -u &quot;$CI_REGISTRY_USER&quot; --password-stdin $CI_REGISTRY # ============================================ # Stage 1: BUILD # ============================================ build:composer: &lt;&lt;: *php_template stage: build script: - echo &quot;üì¶ Installing dependencies with Composer...&quot; - composer validate --no-check-all --strict - composer install --prefer-dist --no-progress --no-interaction --optimize-autoloader - echo &quot;‚úÖ Dependencies installed&quot; - ls -la vendor/ artifacts: paths: - vendor/ - web/core/ - web/modules/contrib/ - web/themes/contrib/ - composer.lock expire_in: 1 hour only: - branches - merge_requests # ============================================ # Stage 2: QUALITY # ============================================ quality:phpcs: &lt;&lt;: *php_template stage: quality dependencies: - build:composer script: - echo &quot;üìã Running PHP Code Sniffer...&quot; - ./vendor/bin/phpcs --standard=Drupal --extensions=php,module,inc,install,test,profile,theme,css,info,txt,md,yml --report=full --report-file=phpcs-report.txt web/modules/custom/ web/themes/custom/ || true - ./vendor/bin/phpcs --standard=DrupalPractice --extensions=php,module,inc,install,test,profile,theme --report=full --report-file=phpcs-practice-report.txt web/modules/custom/ web/themes/custom/ || true - cat phpcs-report.txt - cat phpcs-practice-report.txt artifacts: when: always paths: - phpcs-report.txt - phpcs-practice-report.txt expire_in: 1 week allow_failure: true only: - branches - merge_requests quality:phpstan: &lt;&lt;: *php_template stage: quality dependencies: - build:composer script: - echo &quot;üîç Running PHPStan static analysis...&quot; - ./vendor/bin/phpstan analyse web/modules/custom/ web/themes/custom/ --level=6 --error-format=table --no-progress --memory-limit=1G || true artifacts: when: always paths: - phpstan-report.txt expire_in: 1 week allow_failure: true only: - branches - merge_requests quality:phpmd: &lt;&lt;: *php_template stage: quality dependencies: - build:composer script: - echo &quot;üìä Running PHP Mess Detector...&quot; - ./vendor/bin/phpmd web/modules/custom/,web/themes/custom/ text cleancode,codesize,controversial,design,naming,unusedcode || true allow_failure: true only: - branches - merge_requests quality:phpcpd: &lt;&lt;: *php_template stage: quality dependencies: - build:composer script: - echo &quot;üîç Running PHP Copy/Paste Detector...&quot; - ./vendor/bin/phpcpd web/modules/custom/ web/themes/custom/ || true allow_failure: true only: - branches - merge_requests quality:sonarqube: image: sonarsource/sonar-scanner-cli:latest stage: quality dependencies: - build:composer - test:phpunit variables: SONAR_USER_HOME: &quot;${CI_PROJECT_DIR}/.sonar&quot; GIT_DEPTH: &quot;0&quot; cache: key: &quot;${CI_JOB_NAME}&quot; paths: - .sonar/cache script: - echo &quot;üìä Running SonarQube analysis...&quot; - sonar-scanner -Dsonar.projectKey=$CI_PROJECT_PATH_SLUG -Dsonar.projectName=&quot;$CI_PROJECT_NAME&quot; -Dsonar.sources=web/modules/custom,web/themes/custom -Dsonar.host.url=$SONAR_HOST_URL -Dsonar.login=$SONAR_TOKEN -Dsonar.php.coverage.reportPaths=coverage/clover.xml -Dsonar.qualitygate.wait=true allow_failure: true only: - branches - merge_requests # ============================================ # Stage 3: TEST # ============================================ test:phpunit: &lt;&lt;: *php_template stage: test services: - name: mysql:8.0 alias: mysql command: [&quot;--default-authentication-plugin=mysql_native_password&quot;] dependencies: - build:composer variables: SIMPLETEST_BASE_URL: &quot;http://localhost:8080&quot; SIMPLETEST_DB: &quot;mysql://drupal:drupal@mysql:3306/drupal&quot; MINK_DRIVER_ARGS_WEBDRIVER: '[&quot;chrome&quot;, {&quot;browserName&quot;:&quot;chrome&quot;,&quot;chromeOptions&quot;:{&quot;args&quot;:[&quot;--disable-gpu&quot;,&quot;--headless&quot;]}}, &quot;http://localhost:4444&quot;]' script: - echo &quot;üß™ Running PHPUnit tests...&quot; - | # Start PHP built-in server php -S localhost:8080 -t web &amp; PHP_PID=$! - sleep 5 - | # Run PHPUnit tests ./vendor/bin/phpunit --configuration=web/core/phpunit.xml.dist --testsuite=unit --coverage-clover=coverage/clover.xml --coverage-html=coverage/html --log-junit=junit.xml web/modules/custom/ || true - kill $PHP_PID || true artifacts: when: always reports: junit: junit.xml coverage_report: coverage_format: cobertura path: coverage/clover.xml paths: - coverage/ - junit.xml expire_in: 1 week coverage: '/^\\s*Lines:\\s*\\d+\\.\\d+\\%/' only: - branches - merge_requests test:behat: &lt;&lt;: *php_template stage: test services: - name: mysql:8.0 alias: mysql command: [&quot;--default-authentication-plugin=mysql_native_password&quot;] - name: selenium/standalone-chrome:latest alias: selenium dependencies: - build:composer variables: BEHAT_PARAMS: '{&quot;extensions&quot;:{&quot;Behat\\\\MinkExtension&quot;:{&quot;base_url&quot;:&quot;http://localhost:8080&quot;},&quot;Drupal\\\\DrupalExtension&quot;:{&quot;drupal&quot;:{&quot;drupal_root&quot;:&quot;web&quot;},&quot;drush&quot;:{&quot;root&quot;:&quot;web&quot;}}}}' script: - echo &quot;üéØ Running Behat tests...&quot; - | # Install Drupal for testing cd web ../vendor/bin/drush site:install standard --db-url=mysql://drupal:drupal@mysql:3306/drupal --site-name=&quot;Test Site&quot; --account-name=admin --account-pass=admin --yes cd .. - | # Start PHP server php -S localhost:8080 -t web &amp; PHP_PID=$! - sleep 10 - | # Run Behat ./vendor/bin/behat --format=pretty --out=std --format=junit --out=behat-results || true - kill $PHP_PID || true artifacts: when: always paths: - behat-results/ expire_in: 1 week allow_failure: true only: - branches - merge_requests # ============================================ # Stage 4: SECURITY # ============================================ security:drupal-check: &lt;&lt;: *php_template stage: security dependencies: - build:composer script: - echo &quot;üîê Checking Drupal security advisories...&quot; - | cd web ../vendor/bin/drush pm:security --format=json &gt; ../security-report.json || true cat ../security-report.json - | # Check if there are any security issues SECURITY_COUNT=$(cat ../security-report.json | grep -c &quot;\\&quot;is_security\\&quot;:true&quot; || echo &quot;0&quot;) if [ &quot;$SECURITY_COUNT&quot; -gt &quot;0&quot; ]; then echo &quot;‚ùå Found $SECURITY_COUNT security advisories!&quot; cat ../security-report.json exit 1 else echo &quot;‚úÖ No security advisories found&quot; fi artifacts: when: always paths: - security-report.json expire_in: 1 week allow_failure: false only: - branches - merge_requests security:composer-audit: &lt;&lt;: *php_template stage: security dependencies: - build:composer script: - echo &quot;üîç Running Composer audit...&quot; - composer audit --format=json &gt; composer-audit.json || true - composer audit --format=table || true artifacts: when: always paths: - composer-audit.json expire_in: 1 week allow_failure: false only: - branches - merge_requests security:trivy-fs: image: aquasec/trivy:latest stage: security script: - echo &quot;üîç Scanning filesystem with Trivy...&quot; - trivy fs --security-checks vuln,secret,config --severity CRITICAL,HIGH --format json --output trivy-fs-report.json . - trivy fs --security-checks vuln,secret,config --severity CRITICAL,HIGH --format template --template &quot;@/contrib/html.tpl&quot; --output trivy-fs-report.html . artifacts: when: always paths: - trivy-fs-report.json - trivy-fs-report.html reports: container_scanning: trivy-fs-report.json expire_in: 1 week allow_failure: false only: - branches - merge_requests security:gitleaks: image: zricethezav/gitleaks:latest stage: security script: - echo &quot;üîê Scanning for secrets with Gitleaks...&quot; - gitleaks detect --source . --report-format json --report-path gitleaks-report.json --verbose artifacts: when: always paths: - gitleaks-report.json expire_in: 1 week allow_failure: false only: - branches - merge_requests security:sbom-generate: &lt;&lt;: *php_template stage: security dependencies: - build:composer script: - echo &quot;üìã Generating SBOM with CycloneDX...&quot; - ./vendor/bin/cyclonedx-php composer --output-format=json --output-file=sbom-cyclonedx.json - ./vendor/bin/cyclonedx-php composer --output-format=xml --output-file=sbom-cyclonedx.xml - echo &quot;üìã Generating SBOM with Syft...&quot; - curl -sSfL https://raw.githubusercontent.com/anchore/syft/main/install.sh | sh -s -- -b /usr/local/bin - syft packages dir:. -o cyclonedx-json=sbom-syft.json - syft packages dir:. -o spdx-json=sbom-spdx.json artifacts: paths: - sbom-cyclonedx.json - sbom-cyclonedx.xml - sbom-syft.json - sbom-spdx.json expire_in: 1 month only: - branches - merge_requests security:sbom-scan: image: anchore/grype:latest stage: security dependencies: - security:sbom-generate script: - echo &quot;üîç Scanning SBOM with Grype...&quot; - grype sbom:sbom-syft.json -o json --file grype-report.json - grype sbom:sbom-syft.json -o table - | CRITICAL=$(cat grype-report.json | jq '[.matches[] | select(.vulnerability.severity==&quot;Critical&quot;)] | length') HIGH=$(cat grype-report.json | jq '[.matches[] | select(.vulnerability.severity==&quot;High&quot;)] | length') echo &quot;Critical: $CRITICAL, High: $HIGH&quot; if [ &quot;$CRITICAL&quot; -gt &quot;0&quot; ]; then echo &quot;‚ùå Critical vulnerabilities found!&quot; exit 1 fi artifacts: when: always paths: - grype-report.json expire_in: 1 week allow_failure: false only: - branches - merge_requests # ============================================ # Stage 5: PACKAGE # ============================================ package:docker: &lt;&lt;: *docker_template stage: package dependencies: - build:composer script: - echo &quot;üê≥ Building Docker image...&quot; - | if [ &quot;$CI_COMMIT_TAG&quot; != &quot;&quot; ]; then TAG=&quot;$CI_COMMIT_TAG&quot; else TAG=&quot;$CI_COMMIT_SHORT_SHA&quot; fi - echo &quot;Tag: $TAG&quot; - docker build -t $IMAGE_NAME:$TAG -t $IMAGE_NAME:latest . - echo &quot;üîç Scanning image with Trivy...&quot; - docker run --rm -v /var/run/docker.sock:/var/run/docker.sock aquasec/trivy:latest image --severity CRITICAL,HIGH --exit-code 1 --no-progress $IMAGE_NAME:$TAG - echo &quot;‚úçÔ∏è Signing image with Cosign...&quot; - apk add --no-cache cosign - echo &quot;$COSIGN_PRIVATE_KEY&quot; &gt; cosign.key - cosign sign --key cosign.key --yes $IMAGE_NAME:$TAG - rm cosign.key - echo &quot;üì§ Pushing image...&quot; - docker push $IMAGE_NAME:$TAG - docker push $IMAGE_NAME:latest - echo &quot;‚úÖ Docker image pushed: $IMAGE_NAME:$TAG&quot; only: - branches - merge_requests - tags # ============================================ # Stage 6: DEPLOY DEV # ============================================ deploy:dev: image: bitnami/kubectl:latest stage: deploy-dev environment: name: development url: https://dev.example.com on_stop: stop:dev script: - echo &quot;üöÄ Deploying to Development...&quot; - kubectl config use-context $KUBE_CONTEXT_DEV - | if [ &quot;$CI_COMMIT_TAG&quot; != &quot;&quot; ]; then TAG=&quot;$CI_COMMIT_TAG&quot; else TAG=&quot;$CI_COMMIT_SHORT_SHA&quot; fi - kubectl set image deployment/$APP_NAME $APP_NAME=$IMAGE_NAME:$TAG -n $KUBE_NAMESPACE_DEV - kubectl rollout status deployment/$APP_NAME -n $KUBE_NAMESPACE_DEV --timeout=5m - echo &quot;üîß Running Drush commands...&quot; - kubectl exec deployment/$APP_NAME -n $KUBE_NAMESPACE_DEV -- drush updatedb --yes - kubectl exec deployment/$APP_NAME -n $KUBE_NAMESPACE_DEV -- drush config:import --yes - kubectl exec deployment/$APP_NAME -n $KUBE_NAMESPACE_DEV -- drush cache:rebuild - echo &quot;‚úÖ Deployment to Dev successful&quot; only: - branches - merge_requests except: - tags stop:dev: image: bitnami/kubectl:latest stage: deploy-dev environment: name: development action: stop script: - echo &quot;üõë Stopping Development environment...&quot; - kubectl scale deployment/$APP_NAME --replicas=0 -n $KUBE_NAMESPACE_DEV when: manual only: - branches # ============================================ # Stage 7: DEPLOY STAGING # ============================================ deploy:staging: image: bitnami/kubectl:latest stage: deploy-staging environment: name: staging url: https://staging.example.com script: - echo &quot;üöÄ Deploying to Staging...&quot; - kubectl config use-context $KUBE_CONTEXT_STAGING - TAG=&quot;$CI_COMMIT_SHORT_SHA&quot; - kubectl set image deployment/$APP_NAME $APP_NAME=$IMAGE_NAME:$TAG -n $KUBE_NAMESPACE_STAGING - kubectl rollout status deployment/$APP_NAME -n $KUBE_NAMESPACE_STAGING --timeout=5m - echo &quot;üîß Running Drush commands...&quot; - kubectl exec deployment/$APP_NAME -n $KUBE_NAMESPACE_STAGING -- drush updatedb --yes - kubectl exec deployment/$APP_NAME -n $KUBE_NAMESPACE_STAGING -- drush config:import --yes - kubectl exec deployment/$APP_NAME -n $KUBE_NAMESPACE_STAGING -- drush cache:rebuild - echo &quot;‚úÖ Deployment to Staging successful&quot; only: - main - develop when: manual # ============================================ # Stage 8: DEPLOY PRODUCTION # ============================================ deploy:production: image: bitnami/kubectl:latest stage: deploy-prod environment: name: production url: https://www.example.com script: - echo &quot;üöÄ Deploying to Production...&quot; - kubectl config use-context $KUBE_CONTEXT_PROD - | if [ &quot;$CI_COMMIT_TAG&quot; != &quot;&quot; ]; then TAG=&quot;$CI_COMMIT_TAG&quot; else echo &quot;‚ùå Production deployment requires a tag&quot; exit 1 fi - echo &quot;Deploying version: $TAG&quot; - echo &quot;üîÑ Enabling maintenance mode...&quot; - kubectl exec deployment/$APP_NAME -n $KUBE_NAMESPACE_PROD -- drush state:set system.maintenance_mode 1 --yes || true - kubectl set image deployment/$APP_NAME $APP_NAME=$IMAGE_NAME:$TAG -n $KUBE_NAMESPACE_PROD - kubectl rollout status deployment/$APP_NAME -n $KUBE_NAMESPACE_PROD --timeout=10m - echo &quot;üîß Running Drush commands...&quot; - kubectl exec deployment/$APP_NAME -n $KUBE_NAMESPACE_PROD -- drush updatedb --yes - kubectl exec deployment/$APP_NAME -n $KUBE_NAMESPACE_PROD -- drush config:import --yes - kubectl exec deployment/$APP_NAME -n $KUBE_NAMESPACE_PROD -- drush cache:rebuild - echo &quot;üîÑ Disabling maintenance mode...&quot; - kubectl exec deployment/$APP_NAME -n $KUBE_NAMESPACE_PROD -- drush state:set system.maintenance_mode 0 --yes - echo &quot;‚úÖ Deployment to Production successful&quot; - echo &quot;üß™ Running smoke tests...&quot; - sleep 30 - kubectl run curl-test --rm -i --restart=Never --image=curlimages/curl:latest -n $KUBE_NAMESPACE_PROD -- curl -f https://www.example.com || exit 1 only: - tags when: manual # ============================================ # Scheduled Jobs # ============================================ security:scheduled-scan: &lt;&lt;: *php_template stage: security dependencies: - build:composer script: - echo &quot;üîç Running scheduled security scan...&quot; - cd web - ../vendor/bin/drush pm:security --format=json &gt; ../scheduled-security.json - cat ../scheduled-security.json artifacts: when: always paths: - scheduled-security.json expire_in: 1 month only: - schedules  ","version":"Next","tagName":"h2"},{"title":"üê≥ Harbor - Enterprise Container Registry","type":0,"sectionRef":"#","url":"/docs/infrastructure/docker-registry/harbor","content":"","keywords":"","version":"Next"},{"title":"üéØ Architecture Harbor‚Äã","type":1,"pageTitle":"üê≥ Harbor - Enterprise Container Registry","url":"/docs/infrastructure/docker-registry/harbor#-architecture-harbor","content":"   ","version":"Next","tagName":"h2"},{"title":"üöÄ Installation Harbor‚Äã","type":1,"pageTitle":"üê≥ Harbor - Enterprise Container Registry","url":"/docs/infrastructure/docker-registry/harbor#-installation-harbor","content":" ","version":"Next","tagName":"h2"},{"title":"Docker Compose (Dev/Test)‚Äã","type":1,"pageTitle":"üê≥ Harbor - Enterprise Container Registry","url":"/docs/infrastructure/docker-registry/harbor#docker-compose-devtest","content":" docker-compose-harbor.yml version: '3.8' services: # Harbor Registry registry: image: goharbor/registry-photon:v2.9.0 container_name: registry restart: always volumes: - ./harbor/data:/storage networks: - harbor environment: - REGISTRY_HTTP_SECRET=changeme # Harbor Portal (UI) portal: image: goharbor/harbor-portal:v2.9.0 container_name: harbor-portal restart: always depends_on: - core networks: - harbor # Harbor Core core: image: goharbor/harbor-core:v2.9.0 container_name: harbor-core restart: always depends_on: - registry - redis - postgresql networks: - harbor environment: - CORE_SECRET=changeme - JOBSERVICE_SECRET=changeme - DATABASE_TYPE=postgresql - POSTGRESQL_HOST=postgresql - POSTGRESQL_PORT=5432 - POSTGRESQL_USERNAME=postgres - POSTGRESQL_PASSWORD=changeme - POSTGRESQL_DATABASE=registry - REGISTRY_CONTROLLER_URL=http://registry:5000 volumes: - ./harbor/config:/etc/core - ./harbor/ca:/etc/core/ca # Job Service jobservice: image: goharbor/harbor-jobservice:v2.9.0 container_name: harbor-jobservice restart: always depends_on: - core networks: - harbor environment: - CORE_SECRET=changeme - JOBSERVICE_SECRET=changeme - CORE_URL=http://core:8080 # Redis redis: image: goharbor/redis-photon:v2.9.0 container_name: harbor-redis restart: always networks: - harbor # PostgreSQL postgresql: image: goharbor/harbor-db:v2.9.0 container_name: harbor-db restart: always networks: - harbor environment: - POSTGRES_PASSWORD=changeme volumes: - ./harbor/database:/var/lib/postgresql/data # Trivy Adapter (Scanning) trivy-adapter: image: goharbor/trivy-adapter-photon:v2.9.0 container_name: trivy-adapter restart: always depends_on: - redis networks: - harbor environment: - SCANNER_REDIS_URL=redis://redis:6379 - SCANNER_TRIVY_CACHE_DIR=/home/scanner/.cache/trivy # Nginx (Reverse Proxy) nginx: image: goharbor/nginx-photon:v2.9.0 container_name: harbor-nginx restart: always depends_on: - core - portal ports: - &quot;80:8080&quot; - &quot;443:8443&quot; networks: - harbor volumes: - ./harbor/nginx:/etc/nginx:ro networks: harbor: external: false volumes: harbor-data: harbor-database:   ","version":"Next","tagName":"h3"},{"title":"Installation avec Helm (Production)‚Äã","type":1,"pageTitle":"üê≥ Harbor - Enterprise Container Registry","url":"/docs/infrastructure/docker-registry/harbor#installation-avec-helm-production","content":" # Ajouter le repo Harbor helm repo add harbor https://helm.goharbor.io helm repo update # Cr√©er le namespace kubectl create namespace harbor   harbor-values.yaml # Harbor Helm Values pour Production expose: type: ingress tls: enabled: true certSource: secret secret: secretName: harbor-tls notarySecretName: notary-tls ingress: hosts: core: harbor.example.com notary: notary.example.com className: nginx annotations: cert-manager.io/cluster-issuer: &quot;letsencrypt-prod&quot; nginx.ingress.kubernetes.io/ssl-redirect: &quot;true&quot; nginx.ingress.kubernetes.io/proxy-body-size: &quot;0&quot; externalURL: https://harbor.example.com # Persistence persistence: enabled: true resourcePolicy: &quot;keep&quot; persistentVolumeClaim: registry: storageClass: &quot;gp3&quot; size: 500Gi jobservice: storageClass: &quot;gp3&quot; size: 10Gi database: storageClass: &quot;gp3&quot; size: 100Gi redis: storageClass: &quot;gp3&quot; size: 10Gi trivy: storageClass: &quot;gp3&quot; size: 20Gi # Image pull secret imagePullPolicy: IfNotPresent # Admin credentials harborAdminPassword: &quot;ChangeMe123!&quot; # S3 Storage (recommand√© pour production) imageChartStorage: type: s3 s3: region: eu-west-1 bucket: harbor-registry-prod accesskey: AWS_ACCESS_KEY secretkey: AWS_SECRET_KEY regionendpoint: https://s3.eu-west-1.amazonaws.com encrypt: true secure: true # Database (externe recommand√©) database: type: external external: host: postgresql.example.com port: 5432 username: harbor password: &quot;HarborPassword123!&quot; coreDatabase: registry notaryServerDatabase: notary_server notarySignerDatabase: notary_signer sslmode: require # Redis (externe recommand√©) redis: type: external external: addr: redis.example.com:6379 password: &quot;RedisPassword123!&quot; sentinelMasterSet: &quot;&quot; coreDatabaseIndex: &quot;0&quot; jobserviceDatabaseIndex: &quot;1&quot; registryDatabaseIndex: &quot;2&quot; trivyAdapterIndex: &quot;5&quot; # Trivy scanner trivy: enabled: true resources: requests: cpu: 200m memory: 512Mi limits: cpu: 1 memory: 1Gi # Notary (Image signing) notary: enabled: true # Metrics metrics: enabled: true core: path: /metrics port: 8001 registry: path: /metrics port: 5001 exporter: path: /metrics port: 8001 # Cache cache: enabled: true expireHours: 24   Installation :  helm install harbor harbor/harbor \\ --namespace harbor \\ --values harbor-values.yaml \\ --version 1.13.0   ","version":"Next","tagName":"h3"},{"title":"üîê Configuration S√©curit√©‚Äã","type":1,"pageTitle":"üê≥ Harbor - Enterprise Container Registry","url":"/docs/infrastructure/docker-registry/harbor#-configuration-s√©curit√©","content":" ","version":"Next","tagName":"h2"},{"title":"1. Configuration Projets‚Äã","type":1,"pageTitle":"üê≥ Harbor - Enterprise Container Registry","url":"/docs/infrastructure/docker-registry/harbor#1-configuration-projets","content":" # Cr√©er un projet Java curl -X POST &quot;https://harbor.example.com/api/v2.0/projects&quot; \\ -H &quot;Authorization: Basic $(echo -n 'admin:password' | base64)&quot; \\ -H &quot;Content-Type: application/json&quot; \\ -d '{ &quot;project_name&quot;: &quot;java-apps&quot;, &quot;public&quot;: false, &quot;metadata&quot;: { &quot;auto_scan&quot;: &quot;true&quot;, &quot;prevent_vul&quot;: &quot;true&quot;, &quot;severity&quot;: &quot;critical&quot;, &quot;reuse_sys_cve_whitelist&quot;: &quot;true&quot; } }' # Cr√©er un projet Drupal curl -X POST &quot;https://harbor.example.com/api/v2.0/projects&quot; \\ -H &quot;Authorization: Basic $(echo -n 'admin:password' | base64)&quot; \\ -H &quot;Content-Type: application/json&quot; \\ -d '{ &quot;project_name&quot;: &quot;drupal-apps&quot;, &quot;public&quot;: false, &quot;metadata&quot;: { &quot;auto_scan&quot;: &quot;true&quot;, &quot;prevent_vul&quot;: &quot;true&quot;, &quot;severity&quot;: &quot;high&quot; } }' # Cr√©er un projet Angular curl -X POST &quot;https://harbor.example.com/api/v2.0/projects&quot; \\ -H &quot;Authorization: Basic $(echo -n 'admin:password' | base64)&quot; \\ -H &quot;Content-Type: application/json&quot; \\ -d '{ &quot;project_name&quot;: &quot;angular-apps&quot;, &quot;public&quot;: false, &quot;metadata&quot;: { &quot;auto_scan&quot;: &quot;true&quot;, &quot;prevent_vul&quot;: &quot;true&quot; } }'   ","version":"Next","tagName":"h3"},{"title":"2. Security Policies‚Äã","type":1,"pageTitle":"üê≥ Harbor - Enterprise Container Registry","url":"/docs/infrastructure/docker-registry/harbor#2-security-policies","content":" harbor-security-policy.yaml # Policy pour emp√™cher le pull d'images vuln√©rables apiVersion: v1 kind: ConfigMap metadata: name: harbor-security-policy namespace: harbor data: policy.json: | { &quot;version&quot;: &quot;v1&quot;, &quot;policies&quot;: [ { &quot;name&quot;: &quot;prevent-critical-vulnerabilities&quot;, &quot;description&quot;: &quot;Block images with critical vulnerabilities&quot;, &quot;action&quot;: &quot;deny&quot;, &quot;conditions&quot;: [ { &quot;type&quot;: &quot;vulnerability&quot;, &quot;severity&quot;: &quot;critical&quot;, &quot;operator&quot;: &quot;&gt;=&quot;, &quot;value&quot;: 1 } ] }, { &quot;name&quot;: &quot;require-signature&quot;, &quot;description&quot;: &quot;Require signed images for production&quot;, &quot;action&quot;: &quot;deny&quot;, &quot;conditions&quot;: [ { &quot;type&quot;: &quot;signature&quot;, &quot;required&quot;: true, &quot;signers&quot;: [&quot;cosign&quot;] } ] }, { &quot;name&quot;: &quot;enforce-scan&quot;, &quot;description&quot;: &quot;Ensure all images are scanned&quot;, &quot;action&quot;: &quot;deny&quot;, &quot;conditions&quot;: [ { &quot;type&quot;: &quot;scan_status&quot;, &quot;value&quot;: &quot;not_scanned&quot; } ] } ] }   ","version":"Next","tagName":"h3"},{"title":"3. Robot Accounts‚Äã","type":1,"pageTitle":"üê≥ Harbor - Enterprise Container Registry","url":"/docs/infrastructure/docker-registry/harbor#3-robot-accounts","content":" # Cr√©er un robot account pour CI/CD curl -X POST &quot;https://harbor.example.com/api/v2.0/projects/java-apps/robots&quot; \\ -H &quot;Authorization: Basic $(echo -n 'admin:password' | base64)&quot; \\ -H &quot;Content-Type: application/json&quot; \\ -d '{ &quot;name&quot;: &quot;github-actions-bot&quot;, &quot;description&quot;: &quot;Robot for GitHub Actions CI/CD&quot;, &quot;duration&quot;: -1, &quot;level&quot;: &quot;project&quot;, &quot;permissions&quot;: [ { &quot;kind&quot;: &quot;project&quot;, &quot;namespace&quot;: &quot;java-apps&quot;, &quot;access&quot;: [ {&quot;resource&quot;: &quot;repository&quot;, &quot;action&quot;: &quot;push&quot;}, {&quot;resource&quot;: &quot;repository&quot;, &quot;action&quot;: &quot;pull&quot;}, {&quot;resource&quot;: &quot;artifact&quot;, &quot;action&quot;: &quot;read&quot;}, {&quot;resource&quot;: &quot;scan&quot;, &quot;action&quot;: &quot;create&quot;} ] } ] }'   ","version":"Next","tagName":"h3"},{"title":"üîÑ Int√©gration CI/CD‚Äã","type":1,"pageTitle":"üê≥ Harbor - Enterprise Container Registry","url":"/docs/infrastructure/docker-registry/harbor#-int√©gration-cicd","content":" ","version":"Next","tagName":"h2"},{"title":"GitHub Actions‚Äã","type":1,"pageTitle":"üê≥ Harbor - Enterprise Container Registry","url":"/docs/infrastructure/docker-registry/harbor#github-actions","content":" .github/workflows/harbor-push.yml name: Build and Push to Harbor on: push: branches: [main] env: HARBOR_URL: harbor.example.com HARBOR_PROJECT: java-apps IMAGE_NAME: my-spring-app jobs: build-and-push: runs-on: ubuntu-latest steps: - name: Checkout uses: actions/checkout@v4 - name: Set up Docker Buildx uses: docker/setup-buildx-action@v3 - name: Log in to Harbor uses: docker/login-action@v3 with: registry: ${{ env.HARBOR_URL }} username: ${{ secrets.HARBOR_USERNAME }} password: ${{ secrets.HARBOR_PASSWORD }} - name: Extract metadata id: meta uses: docker/metadata-action@v5 with: images: ${{ env.HARBOR_URL }}/${{ env.HARBOR_PROJECT }}/${{ env.IMAGE_NAME }} tags: | type=sha,prefix={{branch}}- type=ref,event=branch type=semver,pattern={{version}} - name: Build and push uses: docker/build-push-action@v5 with: context: . push: true tags: ${{ steps.meta.outputs.tags }} labels: ${{ steps.meta.outputs.labels }} cache-from: type=gha cache-to: type=gha,mode=max - name: Sign image with Cosign run: | IMAGE_DIGEST=$(docker inspect --format='{{.RepoDigests}}' \\ ${{ env.HARBOR_URL }}/${{ env.HARBOR_PROJECT }}/${{ env.IMAGE_NAME }}:${{ github.sha }} \\ | cut -d'[' -f2 | cut -d']' -f1) cosign sign --yes \\ --key env://COSIGN_PRIVATE_KEY \\ ${IMAGE_DIGEST} env: COSIGN_PRIVATE_KEY: ${{ secrets.COSIGN_PRIVATE_KEY }} COSIGN_PASSWORD: ${{ secrets.COSIGN_PASSWORD }} - name: Trigger Harbor Scan run: | curl -X POST \\ &quot;https://${{ env.HARBOR_URL }}/api/v2.0/projects/${{ env.HARBOR_PROJECT }}/repositories/${{ env.IMAGE_NAME }}/artifacts/${{ github.sha }}/scan&quot; \\ -H &quot;Authorization: Basic $(echo -n '${{ secrets.HARBOR_USERNAME }}:${{ secrets.HARBOR_PASSWORD }}' | base64)&quot; - name: Check Scan Results run: | sleep 30 # Wait for scan to complete SCAN_RESULT=$(curl -s \\ &quot;https://${{ env.HARBOR_URL }}/api/v2.0/projects/${{ env.HARBOR_PROJECT }}/repositories/${{ env.IMAGE_NAME }}/artifacts/${{ github.sha }}&quot; \\ -H &quot;Authorization: Basic $(echo -n '${{ secrets.HARBOR_USERNAME }}:${{ secrets.HARBOR_PASSWORD }}' | base64)&quot; \\ | jq -r '.scan_overview.&quot;application/vnd.security.vulnerability.report; version=1.1&quot;.severity') if [ &quot;$SCAN_RESULT&quot; == &quot;Critical&quot; ]; then echo &quot;‚ùå Critical vulnerabilities found!&quot; exit 1 fi echo &quot;‚úÖ No critical vulnerabilities&quot;   ","version":"Next","tagName":"h3"},{"title":"üìä Replication‚Äã","type":1,"pageTitle":"üê≥ Harbor - Enterprise Container Registry","url":"/docs/infrastructure/docker-registry/harbor#-replication","content":" ","version":"Next","tagName":"h2"},{"title":"Configuration Multi-site‚Äã","type":1,"pageTitle":"üê≥ Harbor - Enterprise Container Registry","url":"/docs/infrastructure/docker-registry/harbor#configuration-multi-site","content":" harbor-replication.yaml # Replication vers DR site apiVersion: v1 kind: ConfigMap metadata: name: harbor-replication-dr data: replication-policy.json: | { &quot;name&quot;: &quot;replicate-to-dr&quot;, &quot;description&quot;: &quot;Replicate all images to DR site&quot;, &quot;src_registry&quot;: { &quot;id&quot;: 0 }, &quot;dest_registry&quot;: { &quot;id&quot;: 1, &quot;name&quot;: &quot;harbor-dr&quot;, &quot;url&quot;: &quot;https://harbor-dr.example.com&quot;, &quot;credential&quot;: { &quot;access_key&quot;: &quot;robot$replication&quot;, &quot;access_secret&quot;: &quot;password&quot; } }, &quot;trigger&quot;: { &quot;type&quot;: &quot;event_based&quot; }, &quot;filters&quot;: [ { &quot;type&quot;: &quot;name&quot;, &quot;value&quot;: &quot;**&quot; } ], &quot;enabled&quot;: true, &quot;deletion&quot;: false, &quot;override&quot;: true, &quot;speed&quot;: 0 } --- # Replication vers Edge sites apiVersion: v1 kind: ConfigMap metadata: name: harbor-replication-edge data: replication-policy.json: | { &quot;name&quot;: &quot;replicate-to-edge&quot;, &quot;description&quot;: &quot;Replicate production images to edge sites&quot;, &quot;filters&quot;: [ { &quot;type&quot;: &quot;name&quot;, &quot;value&quot;: &quot;**/prod-**&quot; }, { &quot;type&quot;: &quot;tag&quot;, &quot;value&quot;: &quot;v*&quot; } ], &quot;dest_registry&quot;: { &quot;url&quot;: &quot;https://harbor-edge.example.com&quot; }, &quot;trigger&quot;: { &quot;type&quot;: &quot;manual&quot; } }   ","version":"Next","tagName":"h3"},{"title":"üìà Monitoring Harbor‚Äã","type":1,"pageTitle":"üê≥ Harbor - Enterprise Container Registry","url":"/docs/infrastructure/docker-registry/harbor#-monitoring-harbor","content":" ","version":"Next","tagName":"h2"},{"title":"Prometheus Metrics‚Äã","type":1,"pageTitle":"üê≥ Harbor - Enterprise Container Registry","url":"/docs/infrastructure/docker-registry/harbor#prometheus-metrics","content":" harbor-servicemonitor.yaml apiVersion: monitoring.coreos.com/v1 kind: ServiceMonitor metadata: name: harbor namespace: harbor spec: selector: matchLabels: app: harbor endpoints: - port: metrics path: /metrics interval: 30s   ","version":"Next","tagName":"h3"},{"title":"Grafana Dashboard‚Äã","type":1,"pageTitle":"üê≥ Harbor - Enterprise Container Registry","url":"/docs/infrastructure/docker-registry/harbor#grafana-dashboard","content":" { &quot;dashboard&quot;: { &quot;title&quot;: &quot;Harbor Registry Monitoring&quot;, &quot;panels&quot;: [ { &quot;title&quot;: &quot;Registry Storage Usage&quot;, &quot;targets&quot;: [{ &quot;expr&quot;: &quot;harbor_project_quota_usage_byte&quot; }] }, { &quot;title&quot;: &quot;Push/Pull Rate&quot;, &quot;targets&quot;: [ {&quot;expr&quot;: &quot;rate(harbor_core_http_request_total{operation=\\&quot;push\\&quot;}[5m])&quot;}, {&quot;expr&quot;: &quot;rate(harbor_core_http_request_total{operation=\\&quot;pull\\&quot;}[5m])&quot;} ] }, { &quot;title&quot;: &quot;Vulnerabilities by Severity&quot;, &quot;targets&quot;: [{ &quot;expr&quot;: &quot;sum by(severity) (harbor_artifact_vulnerabilities)&quot; }] }, { &quot;title&quot;: &quot;Scan Duration&quot;, &quot;targets&quot;: [{ &quot;expr&quot;: &quot;harbor_scan_duration_seconds&quot; }] } ] } }   ","version":"Next","tagName":"h3"},{"title":"üîß Administration‚Äã","type":1,"pageTitle":"üê≥ Harbor - Enterprise Container Registry","url":"/docs/infrastructure/docker-registry/harbor#-administration","content":" ","version":"Next","tagName":"h2"},{"title":"Garbage Collection‚Äã","type":1,"pageTitle":"üê≥ Harbor - Enterprise Container Registry","url":"/docs/infrastructure/docker-registry/harbor#garbage-collection","content":" # Lancer le garbage collection curl -X POST &quot;https://harbor.example.com/api/v2.0/system/gc/schedule&quot; \\ -H &quot;Authorization: Basic $(echo -n 'admin:password' | base64)&quot; \\ -H &quot;Content-Type: application/json&quot; \\ -d '{ &quot;schedule&quot;: { &quot;type&quot;: &quot;Daily&quot;, &quot;cron&quot;: &quot;0 2 * * *&quot; }, &quot;delete_untagged&quot;: true, &quot;dry_run&quot;: false }'   ","version":"Next","tagName":"h3"},{"title":"Backup‚Äã","type":1,"pageTitle":"üê≥ Harbor - Enterprise Container Registry","url":"/docs/infrastructure/docker-registry/harbor#backup","content":" #!/bin/bash # harbor-backup.sh BACKUP_DIR=&quot;/backup/harbor-$(date +%Y%m%d)&quot; mkdir -p $BACKUP_DIR # Backup database kubectl exec -n harbor harbor-db-0 -- \\ pg_dump -U postgres registry &gt; $BACKUP_DIR/database.sql # Backup Harbor config kubectl get cm -n harbor -o yaml &gt; $BACKUP_DIR/config.yaml # Backup secrets kubectl get secret -n harbor -o yaml &gt; $BACKUP_DIR/secrets.yaml # Tar and encrypt tar -czf - $BACKUP_DIR | \\ openssl enc -aes-256-cbc -salt -out $BACKUP_DIR.tar.gz.enc # Upload to S3 aws s3 cp $BACKUP_DIR.tar.gz.enc s3://backup-bucket/harbor/   ","version":"Next","tagName":"h3"},{"title":"üéØ Best Practices‚Äã","type":1,"pageTitle":"üê≥ Harbor - Enterprise Container Registry","url":"/docs/infrastructure/docker-registry/harbor#-best-practices","content":" Utiliser S3 pour le storage : Plus fiable et scalableActiver le scan automatique : Toutes les images scann√©esMettre en place des quotas : Limiter l'usage par projetRobot accounts pour CI/CD : Pas de credentials utilisateurR√©plication g√©ographique : DR et performanceGarbage collection r√©gulier : Lib√©rer l'espaceMonitoring actif : Alertes sur les vuln√©rabilit√©sBackup automatis√© : Daily backup vers S3  ","version":"Next","tagName":"h2"},{"title":"üìö Ressources‚Äã","type":1,"pageTitle":"üê≥ Harbor - Enterprise Container Registry","url":"/docs/infrastructure/docker-registry/harbor#-ressources","content":" Harbor DocumentationHarbor APITrivy Scanner    Harbor : Registry enterprise-grade pour vos containers ! üê≥üîí ","version":"Next","tagName":"h2"},{"title":"‚öôÔ∏è Ansible - Configuration Multi-Cloud","type":0,"sectionRef":"#","url":"/docs/infrastructure/iac/ansible/ansible-multicloud","content":"","keywords":"","version":"Next"},{"title":"üéØ Ansible dans l'√©cosyst√®me DevSecOps‚Äã","type":1,"pageTitle":"‚öôÔ∏è Ansible - Configuration Multi-Cloud","url":"/docs/infrastructure/iac/ansible/ansible-multicloud#-ansible-dans-l√©cosyst√®me-devsecops","content":"   ","version":"Next","tagName":"h2"},{"title":"üí° Concept : S√©paration des responsabilit√©s‚Äã","type":1,"pageTitle":"‚öôÔ∏è Ansible - Configuration Multi-Cloud","url":"/docs/infrastructure/iac/ansible/ansible-multicloud#-concept--s√©paration-des-responsabilit√©s","content":" ","version":"Next","tagName":"h2"},{"title":"üîß Terraform ‚Üí Provisionner‚Äã","type":1,"pageTitle":"‚öôÔ∏è Ansible - Configuration Multi-Cloud","url":"/docs/infrastructure/iac/ansible/ansible-multicloud#-terraform--provisionner","content":" R√¥le : Cr√©er l'infrastructure cloud  VPC, subnets, security groupsInstances EC2, VMs Azure, Compute Engine GCPLoad balancers, databases manag√©esStockage S3, Azure Blob, GCS  Sortie Terraform ‚Üí Inventory Ansible  # Terraform g√©n√®re automatiquement l'inventory Ansible output &quot;ansible_inventory&quot; { value = { webservers = aws_instance.web[*].public_ip databases = aws_instance.db[*].private_ip cache = aws_instance.redis[*].private_ip } }   ","version":"Next","tagName":"h3"},{"title":"‚öôÔ∏è Ansible ‚Üí Configurer‚Äã","type":1,"pageTitle":"‚öôÔ∏è Ansible - Configuration Multi-Cloud","url":"/docs/infrastructure/iac/ansible/ansible-multicloud#Ô∏è-ansible--configurer","content":" R√¥le : Configurer les serveurs provisionn√©s  Installation packages (Nginx, PostgreSQL, Redis)Configuration syst√®me (firewall, users, SSH)Hardening s√©curit√© (fail2ban, SELinux)Monitoring agents (Prometheus exporters)  Ex√©cution : Juste apr√®s Terraform  # 1. Terraform cr√©e les serveurs terraform apply # 2. Ansible les configure ansible-playbook -i inventory/production playbooks/site.yml # 3. CI/CD d√©ploie les applications   ","version":"Next","tagName":"h3"},{"title":"üöÄ CI/CD ‚Üí D√©ployer‚Äã","type":1,"pageTitle":"‚öôÔ∏è Ansible - Configuration Multi-Cloud","url":"/docs/infrastructure/iac/ansible/ansible-multicloud#-cicd--d√©ployer","content":" R√¥le : D√©ployer les applications m√©tier  Build des artefacts (JAR, images Docker)D√©ploiement sur KubernetesRolling updatesHealth checks  ","version":"Next","tagName":"h3"},{"title":"üìÅ Structure projet int√©gr√©e‚Äã","type":1,"pageTitle":"‚öôÔ∏è Ansible - Configuration Multi-Cloud","url":"/docs/infrastructure/iac/ansible/ansible-multicloud#-structure-projet-int√©gr√©e","content":" infrastructure/ ‚îú‚îÄ‚îÄ terraform/ # Phase 1: Provisionnement ‚îÇ ‚îú‚îÄ‚îÄ aws/ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ main.tf ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ outputs.tf # ‚Üí G√©n√®re inventory Ansible ‚îÇ ‚îú‚îÄ‚îÄ azure/ ‚îÇ ‚îî‚îÄ‚îÄ gcp/ ‚îÇ ‚îú‚îÄ‚îÄ ansible/ # Phase 2: Configuration ‚îÇ ‚îú‚îÄ‚îÄ inventory/ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ production.yml # ‚Üê G√©n√©r√© par Terraform ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ group_vars/ ‚îÇ ‚îú‚îÄ‚îÄ playbooks/ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ site.yml # Configure tout ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ bootstrap.yml # Premier d√©marrage ‚îÇ ‚îî‚îÄ‚îÄ roles/ ‚îÇ ‚îú‚îÄ‚îÄ common/ # Packages de base ‚îÇ ‚îú‚îÄ‚îÄ nginx/ # Web servers ‚îÇ ‚îú‚îÄ‚îÄ postgresql/ # Databases ‚îÇ ‚îî‚îÄ‚îÄ monitoring/ # Prometheus exporters ‚îÇ ‚îî‚îÄ‚îÄ applications/ # Phase 3: Applications ‚îú‚îÄ‚îÄ java-app/ ‚îÇ ‚îî‚îÄ‚îÄ .gitlab-ci.yml # Pipeline CI/CD ‚îú‚îÄ‚îÄ drupal-site/ ‚îÇ ‚îî‚îÄ‚îÄ .gitlab-ci.yml ‚îî‚îÄ‚îÄ angular-app/ ‚îî‚îÄ‚îÄ .gitlab-ci.yml   ","version":"Next","tagName":"h2"},{"title":"üåç Multi-Cloud avec Ansible‚Äã","type":1,"pageTitle":"‚öôÔ∏è Ansible - Configuration Multi-Cloud","url":"/docs/infrastructure/iac/ansible/ansible-multicloud#-multi-cloud-avec-ansible","content":" ","version":"Next","tagName":"h2"},{"title":"Approche : Inventories par cloud provider‚Äã","type":1,"pageTitle":"‚öôÔ∏è Ansible - Configuration Multi-Cloud","url":"/docs/infrastructure/iac/ansible/ansible-multicloud#approche--inventories-par-cloud-provider","content":" inventory/aws-production.yml all: children: aws_webservers: hosts: web01-aws: {ansible_host: 10.0.1.10} web02-aws: {ansible_host: 10.0.1.11} vars: cloud_provider: aws region: eu-west-1 aws_databases: hosts: db01-aws: {ansible_host: 10.0.2.10}   inventory/azure-production.yml all: children: azure_webservers: hosts: web01-azure: {ansible_host: 10.1.1.10} web02-azure: {ansible_host: 10.1.1.11} vars: cloud_provider: azure region: westeurope   inventory/secnumcloud-production.yml all: children: secnum_webservers: hosts: web01-secnum: {ansible_host: 10.2.1.10} vars: cloud_provider: secnumcloud compliance: qualifi√©   ","version":"Next","tagName":"h3"},{"title":"Playbooks cloud-agnostic‚Äã","type":1,"pageTitle":"‚öôÔ∏è Ansible - Configuration Multi-Cloud","url":"/docs/infrastructure/iac/ansible/ansible-multicloud#playbooks-cloud-agnostic","content":" playbooks/site.yml --- # Configure TOUS les serveurs (AWS + Azure + GCP + SecNumCloud) - name: Configure all servers hosts: all roles: - common # Installation de base (identique partout) - security # Hardening (identique partout) - monitoring # Exporters Prometheus - name: Configure web servers hosts: &quot;*_webservers&quot; # Toutes les VMs web de tous les clouds roles: - nginx - name: Configure databases hosts: &quot;*_databases&quot; roles: - postgresql   Avantage : Le m√™me playbook fonctionne sur tous les clouds ! üéØ  ","version":"Next","tagName":"h3"},{"title":"üîÑ Int√©gration avec CI/CD GitLab‚Äã","type":1,"pageTitle":"‚öôÔ∏è Ansible - Configuration Multi-Cloud","url":"/docs/infrastructure/iac/ansible/ansible-multicloud#-int√©gration-avec-cicd-gitlab","content":" ","version":"Next","tagName":"h2"},{"title":"Pipeline GitLab CI complet‚Äã","type":1,"pageTitle":"‚öôÔ∏è Ansible - Configuration Multi-Cloud","url":"/docs/infrastructure/iac/ansible/ansible-multicloud#pipeline-gitlab-ci-complet","content":" .gitlab-ci.yml stages: - provision # Terraform - configure # Ansible - deploy # Application # Stage 1: Terraform provisionne provision:infrastructure: stage: provision image: hashicorp/terraform:latest script: - cd terraform/aws - terraform init - terraform apply -auto-approve - terraform output -json &gt; ../../ansible-inventory.json artifacts: paths: - ansible-inventory.json # Stage 2: Ansible configure configure:servers: stage: configure image: cytopia/ansible:latest dependencies: - provision:infrastructure script: - cd ansible - ansible-playbook -i ../ansible-inventory.json playbooks/site.yml only: - main # Stage 3: D√©ploiement application deploy:java: stage: deploy image: bitnami/kubectl:latest script: - kubectl set image deployment/my-app app=registry.com/my-app:$CI_COMMIT_SHA only: - main   ","version":"Next","tagName":"h3"},{"title":"Workflow complet‚Äã","type":1,"pageTitle":"‚öôÔ∏è Ansible - Configuration Multi-Cloud","url":"/docs/infrastructure/iac/ansible/ansible-multicloud#workflow-complet","content":"   ","version":"Next","tagName":"h3"},{"title":"üé≠ Cas d'usage : D√©ploiement multi-r√©gion‚Äã","type":1,"pageTitle":"‚öôÔ∏è Ansible - Configuration Multi-Cloud","url":"/docs/infrastructure/iac/ansible/ansible-multicloud#-cas-dusage--d√©ploiement-multi-r√©gion","content":" ","version":"Next","tagName":"h2"},{"title":"Sc√©nario‚Äã","type":1,"pageTitle":"‚öôÔ∏è Ansible - Configuration Multi-Cloud","url":"/docs/infrastructure/iac/ansible/ansible-multicloud#sc√©nario","content":" D√©ployer la m√™me stack Java sur 3 clouds simultan√©ment :  AWS eu-west-1 : Production EuropeAzure westeurope : Backup EuropeGCP us-central1 : Production US  ","version":"Next","tagName":"h3"},{"title":"Solution avec Ansible‚Äã","type":1,"pageTitle":"‚öôÔ∏è Ansible - Configuration Multi-Cloud","url":"/docs/infrastructure/iac/ansible/ansible-multicloud#solution-avec-ansible","content":" playbooks/deploy-multicloud.yml --- - name: Deploy on ALL clouds hosts: all serial: &quot;30%&quot; # 30% des serveurs √† la fois max_fail_percentage: 10 # Stop si &gt;10% d'√©checs pre_tasks: - name: Health check avant d√©ploiement uri: url: http://localhost:8080/health register: health roles: - java-deployment post_tasks: - name: Smoke test apr√®s d√©ploiement uri: url: http://localhost:8080/actuator/health status_code: 200   Commande :  # D√©ploie sur les 3 clouds en parall√®le ansible-playbook playbooks/deploy-multicloud.yml \\ -i inventory/aws-production.yml \\ -i inventory/azure-production.yml \\ -i inventory/gcp-production.yml   ","version":"Next","tagName":"h3"},{"title":"üîí S√©curit√© et Secrets‚Äã","type":1,"pageTitle":"‚öôÔ∏è Ansible - Configuration Multi-Cloud","url":"/docs/infrastructure/iac/ansible/ansible-multicloud#-s√©curit√©-et-secrets","content":" ","version":"Next","tagName":"h2"},{"title":"Ansible Vault pour les secrets‚Äã","type":1,"pageTitle":"‚öôÔ∏è Ansible - Configuration Multi-Cloud","url":"/docs/infrastructure/iac/ansible/ansible-multicloud#ansible-vault-pour-les-secrets","content":" group_vars/all/vault.yml # Fichier chiffr√© avec ansible-vault --- vault_db_password: &quot;SuperSecret123&quot; vault_api_key: &quot;sk-1234567890abcdef&quot; vault_ssh_private_key: | -----BEGIN RSA PRIVATE KEY----- ... -----END RSA PRIVATE KEY-----   # Chiffrer le fichier ansible-vault encrypt group_vars/all/vault.yml # Utiliser dans les playbooks ansible-playbook site.yml --ask-vault-pass # Ou avec un fichier de mot de passe echo &quot;my-vault-password&quot; &gt; .vault_pass ansible-playbook site.yml --vault-password-file .vault_pass   ","version":"Next","tagName":"h3"},{"title":"Int√©gration HashiCorp Vault‚Äã","type":1,"pageTitle":"‚öôÔ∏è Ansible - Configuration Multi-Cloud","url":"/docs/infrastructure/iac/ansible/ansible-multicloud#int√©gration-hashicorp-vault","content":" - name: Get secrets from Vault set_fact: db_password: &quot;{{ lookup('hashi_vault', 'secret=secret/db/password') }}&quot; api_key: &quot;{{ lookup('hashi_vault', 'secret=secret/api/key') }}&quot;   ","version":"Next","tagName":"h3"},{"title":"üìä Monitoring de l'ex√©cution Ansible‚Äã","type":1,"pageTitle":"‚öôÔ∏è Ansible - Configuration Multi-Cloud","url":"/docs/infrastructure/iac/ansible/ansible-multicloud#-monitoring-de-lex√©cution-ansible","content":" ","version":"Next","tagName":"h2"},{"title":"Callbacks pour logs structur√©s‚Äã","type":1,"pageTitle":"‚öôÔ∏è Ansible - Configuration Multi-Cloud","url":"/docs/infrastructure/iac/ansible/ansible-multicloud#callbacks-pour-logs-structur√©s","content":" ansible.cfg [defaults] # Logs JSON pour parsing stdout_callback = json # Profiling des t√¢ches lentes callback_whitelist = profile_tasks, timer # Log vers fichier log_path = /var/log/ansible/ansible.log   ","version":"Next","tagName":"h3"},{"title":"Int√©gration avec GitLab CI‚Äã","type":1,"pageTitle":"‚öôÔ∏è Ansible - Configuration Multi-Cloud","url":"/docs/infrastructure/iac/ansible/ansible-multicloud#int√©gration-avec-gitlab-ci","content":" configure:servers: script: - ansible-playbook site.yml --diff | tee ansible-output.log - cat ansible-output.log artifacts: when: always paths: - ansible-output.log reports: junit: ansible-junit.xml   ","version":"Next","tagName":"h3"},{"title":"üéØ Bonnes pratiques‚Äã","type":1,"pageTitle":"‚öôÔ∏è Ansible - Configuration Multi-Cloud","url":"/docs/infrastructure/iac/ansible/ansible-multicloud#-bonnes-pratiques","content":" ","version":"Next","tagName":"h2"},{"title":"‚úÖ √Ä faire‚Äã","type":1,"pageTitle":"‚öôÔ∏è Ansible - Configuration Multi-Cloud","url":"/docs/infrastructure/iac/ansible/ansible-multicloud#-√†-faire","content":" Pratique\tPourquoiIdempotence\tRejouer le playbook n'a pas d'effet de bord Variables par environnement\tgroup_vars/production/, group_vars/staging/ Roles r√©utilisables\tUn r√¥le = une responsabilit√© Tags\t--tags &quot;nginx,security&quot; pour ex√©cutions partielles Dry-run\t--check --diff avant la vraie ex√©cution Version des r√¥les\trequirements.yml pour les d√©pendances  ","version":"Next","tagName":"h3"},{"title":"‚ùå √Ä √©viter‚Äã","type":1,"pageTitle":"‚öôÔ∏è Ansible - Configuration Multi-Cloud","url":"/docs/infrastructure/iac/ansible/ansible-multicloud#-√†-√©viter","content":" Anti-pattern\tProbl√®meCommandes shell partout\tPas idempotent, difficile √† maintenir Secrets en clair\tToujours utiliser Ansible Vault Playbooks monolithiques\tDifficile √† tester et r√©utiliser Pas de rollback\tPr√©voir un playbook de rollback  ","version":"Next","tagName":"h3"},{"title":"üöÄ Exemple complet : Bootstrap infrastructure‚Äã","type":1,"pageTitle":"‚öôÔ∏è Ansible - Configuration Multi-Cloud","url":"/docs/infrastructure/iac/ansible/ansible-multicloud#-exemple-complet--bootstrap-infrastructure","content":" playbooks/bootstrap.yml --- # Ce playbook est lanc√© APR√àS Terraform et AVANT les apps - name: Bootstrap all new servers hosts: all become: yes tasks: # 1. Packages de base - name: Update system apt: update_cache: yes upgrade: dist - name: Install base packages apt: name: - vim - curl - git - htop - fail2ban state: present # 2. Utilisateurs et SSH - name: Create deployment user user: name: deploy shell: /bin/bash groups: sudo - name: Disable password authentication lineinfile: path: /etc/ssh/sshd_config regexp: '^PasswordAuthentication' line: 'PasswordAuthentication no' notify: restart sshd # 3. Monitoring - name: Install node_exporter include_role: name: prometheus.prometheus.node_exporter handlers: - name: restart sshd service: name: sshd state: restarted   ","version":"Next","tagName":"h2"},{"title":"üìà R√©sum√© de la cha√Æne compl√®te‚Äã","type":1,"pageTitle":"‚öôÔ∏è Ansible - Configuration Multi-Cloud","url":"/docs/infrastructure/iac/ansible/ansible-multicloud#-r√©sum√©-de-la-cha√Æne-compl√®te","content":" √âtape\tOutil\tResponsabilit√©\tR√©sultat1Ô∏è‚É£\tTerraform\tProvisionner VMs\tServeurs vides avec OS 2Ô∏è‚É£\tAnsible\tConfigurer serveurs\tServeurs pr√™ts pour apps 3Ô∏è‚É£\tGitLab CI\tD√©ployer applications\tApps running en production 4Ô∏è‚É£\tPrometheus\tMonitorer\tDashboards et alertes    Ansible est le pont entre l'infrastructure (Terraform) et les applications (CI/CD) ! üåâ ","version":"Next","tagName":"h2"},{"title":"‚òï Pipeline Java/Maven - GitLab CI","type":0,"sectionRef":"#","url":"/docs/devops/cicd/pipelines-java","content":"","keywords":"","version":"Next"},{"title":"üéØ Architecture du Pipeline GitLab CI‚Äã","type":1,"pageTitle":"‚òï Pipeline Java/Maven - GitLab CI","url":"/docs/devops/cicd/pipelines-java#-architecture-du-pipeline-gitlab-ci","content":"   ","version":"Next","tagName":"h2"},{"title":"üìã Pipeline GitLab CI Complet‚Äã","type":1,"pageTitle":"‚òï Pipeline Java/Maven - GitLab CI","url":"/docs/devops/cicd/pipelines-java#-pipeline-gitlab-ci-complet","content":" .gitlab-ci.yml # GitLab CI Pipeline pour Java/Maven # Version: 1.0 # Description: Pipeline DevSecOps complet variables: # Maven MAVEN_OPTS: &quot;-Dmaven.repo.local=$CI_PROJECT_DIR/.m2/repository&quot; MAVEN_CLI_OPTS: &quot;--batch-mode --errors --fail-at-end --show-version&quot; # Docker DOCKER_DRIVER: overlay2 DOCKER_TLS_CERTDIR: &quot;/certs&quot; REGISTRY: $CI_REGISTRY IMAGE_NAME: $CI_REGISTRY_IMAGE # Application APP_NAME: &quot;my-spring-app&quot; # Kubernetes KUBE_NAMESPACE_DEV: &quot;dev&quot; KUBE_NAMESPACE_STAGING: &quot;staging&quot; KUBE_NAMESPACE_PROD: &quot;production&quot; # Cache Maven dependencies cache: key: ${CI_COMMIT_REF_SLUG} paths: - .m2/repository/ - target/ # Stages stages: - build - test - quality - security - package - deploy-dev - deploy-staging - deploy-prod # Templates .maven_template: &amp;maven_template image: maven:3.9-eclipse-temurin-21 before_script: - echo &quot;Maven version:&quot; - mvn --version .docker_template: &amp;docker_template image: docker:24-dind services: - docker:24-dind before_script: - docker info - echo &quot;$CI_REGISTRY_PASSWORD&quot; | docker login -u &quot;$CI_REGISTRY_USER&quot; --password-stdin $CI_REGISTRY .kubectl_template: &amp;kubectl_template image: bitnami/kubectl:latest before_script: - kubectl version --client - kubectl config get-contexts # ============================================ # Stage 1: BUILD # ============================================ build:maven: &lt;&lt;: *maven_template stage: build script: - echo &quot;üî® Building with Maven...&quot; - mvn $MAVEN_CLI_OPTS clean compile - echo &quot;‚úÖ Build successful&quot; artifacts: paths: - target/ expire_in: 1 hour only: - branches - merge_requests # ============================================ # Stage 2: TEST # ============================================ test:unit: &lt;&lt;: *maven_template stage: test script: - echo &quot;üß™ Running unit tests...&quot; - mvn $MAVEN_CLI_OPTS test - echo &quot;üìä Generating coverage report...&quot; - mvn jacoco:report artifacts: when: always reports: junit: - target/surefire-reports/TEST-*.xml coverage_report: coverage_format: cobertura path: target/site/jacoco/jacoco.xml paths: - target/surefire-reports/ - target/site/jacoco/ expire_in: 1 week coverage: '/Total.*?([0-9]{1,3})%/' only: - branches - merge_requests test:integration: &lt;&lt;: *maven_template stage: test services: - name: postgres:15-alpine alias: postgres - name: redis:7-alpine alias: redis variables: POSTGRES_DB: testdb POSTGRES_USER: testuser POSTGRES_PASSWORD: testpass SPRING_DATASOURCE_URL: &quot;jdbc:postgresql://postgres:5432/testdb&quot; SPRING_DATASOURCE_USERNAME: testuser SPRING_DATASOURCE_PASSWORD: testpass SPRING_REDIS_HOST: redis script: - echo &quot;üß™ Running integration tests...&quot; - mvn $MAVEN_CLI_OPTS verify -DskipUnitTests artifacts: when: always reports: junit: - target/failsafe-reports/TEST-*.xml paths: - target/failsafe-reports/ expire_in: 1 week only: - branches - merge_requests # ============================================ # Stage 3: QUALITY # ============================================ quality:checkstyle: &lt;&lt;: *maven_template stage: quality script: - echo &quot;üìã Running Checkstyle...&quot; - mvn $MAVEN_CLI_OPTS checkstyle:check artifacts: when: always paths: - target/checkstyle-result.xml expire_in: 1 week allow_failure: false only: - branches - merge_requests quality:spotbugs: &lt;&lt;: *maven_template stage: quality script: - echo &quot;üêõ Running SpotBugs...&quot; - mvn $MAVEN_CLI_OPTS spotbugs:check artifacts: when: always paths: - target/spotbugsXml.xml expire_in: 1 week allow_failure: true only: - branches - merge_requests quality:pmd: &lt;&lt;: *maven_template stage: quality script: - echo &quot;üìä Running PMD...&quot; - mvn $MAVEN_CLI_OPTS pmd:check artifacts: when: always paths: - target/pmd.xml expire_in: 1 week allow_failure: true only: - branches - merge_requests quality:sonarqube: &lt;&lt;: *maven_template stage: quality script: - echo &quot;üìä Running SonarQube analysis...&quot; - mvn $MAVEN_CLI_OPTS sonar:sonar -Dsonar.projectKey=$CI_PROJECT_PATH_SLUG -Dsonar.projectName=&quot;$CI_PROJECT_NAME&quot; -Dsonar.host.url=$SONAR_HOST_URL -Dsonar.login=$SONAR_TOKEN -Dsonar.qualitygate.wait=true -Dsonar.coverage.jacoco.xmlReportPaths=target/site/jacoco/jacoco.xml dependencies: - test:unit allow_failure: false only: - branches - merge_requests except: - tags # ============================================ # Stage 4: SECURITY # ============================================ security:dependency-check: &lt;&lt;: *maven_template stage: security script: - echo &quot;üîç Running OWASP Dependency Check...&quot; - mvn $MAVEN_CLI_OPTS org.owasp:dependency-check-maven:check -DfailBuildOnCVSS=7 -DsuppressionFiles=dependency-check-suppression.xml artifacts: when: always paths: - target/dependency-check-report.html - target/dependency-check-report.json reports: dependency_scanning: target/dependency-check-report.json expire_in: 1 week allow_failure: false only: - branches - merge_requests security:trivy-fs: image: aquasec/trivy:latest stage: security script: - echo &quot;üîç Scanning filesystem with Trivy...&quot; - trivy fs --security-checks vuln,secret,config --severity CRITICAL,HIGH --format json --output trivy-fs-report.json . - trivy fs --security-checks vuln,secret,config --severity CRITICAL,HIGH --format template --template &quot;@/contrib/html.tpl&quot; --output trivy-fs-report.html . - echo &quot;üìä Trivy filesystem scan complete&quot; artifacts: when: always paths: - trivy-fs-report.json - trivy-fs-report.html reports: container_scanning: trivy-fs-report.json expire_in: 1 week allow_failure: false only: - branches - merge_requests security:gitleaks: image: zricethezav/gitleaks:latest stage: security script: - echo &quot;üîê Scanning for secrets with Gitleaks...&quot; - gitleaks detect --source . --report-format json --report-path gitleaks-report.json --verbose artifacts: when: always paths: - gitleaks-report.json expire_in: 1 week allow_failure: false only: - branches - merge_requests security:sbom-generate: &lt;&lt;: *maven_template stage: security script: - echo &quot;üìã Generating SBOM with CycloneDX...&quot; - mvn $MAVEN_CLI_OPTS cyclonedx:makeAggregateBom - echo &quot;üìã Generating SBOM with Syft...&quot; - curl -sSfL https://raw.githubusercontent.com/anchore/syft/main/install.sh | sh -s -- -b /usr/local/bin - syft packages dir:. -o cyclonedx-json=sbom-syft.json - syft packages dir:. -o spdx-json=sbom-spdx.json artifacts: paths: - target/bom.json - target/bom.xml - sbom-syft.json - sbom-spdx.json expire_in: 1 month only: - branches - merge_requests security:sbom-scan: image: anchore/grype:latest stage: security dependencies: - security:sbom-generate script: - echo &quot;üîç Scanning SBOM with Grype...&quot; - grype sbom:sbom-syft.json -o json --file grype-report.json - grype sbom:sbom-syft.json -o table - | CRITICAL=$(cat grype-report.json | jq '[.matches[] | select(.vulnerability.severity==&quot;Critical&quot;)] | length') HIGH=$(cat grype-report.json | jq '[.matches[] | select(.vulnerability.severity==&quot;High&quot;)] | length') echo &quot;Critical: $CRITICAL, High: $HIGH&quot; if [ &quot;$CRITICAL&quot; -gt &quot;0&quot; ]; then echo &quot;‚ùå Critical vulnerabilities found!&quot; exit 1 fi artifacts: when: always paths: - grype-report.json expire_in: 1 week allow_failure: false only: - branches - merge_requests # ============================================ # Stage 5: PACKAGE # ============================================ package:jar: &lt;&lt;: *maven_template stage: package script: - echo &quot;üì¶ Building JAR...&quot; - mvn $MAVEN_CLI_OPTS package -DskipTests - echo &quot;JAR file:&quot; - ls -lh target/*.jar artifacts: paths: - target/*.jar expire_in: 1 month only: - branches - merge_requests - tags package:docker: &lt;&lt;: *docker_template stage: package dependencies: - package:jar script: - echo &quot;üê≥ Building Docker image...&quot; - | if [ &quot;$CI_COMMIT_TAG&quot; != &quot;&quot; ]; then TAG=&quot;$CI_COMMIT_TAG&quot; else TAG=&quot;$CI_COMMIT_SHORT_SHA&quot; fi - echo &quot;Tag: $TAG&quot; - docker build -t $IMAGE_NAME:$TAG -t $IMAGE_NAME:latest . - echo &quot;üîç Scanning image with Trivy...&quot; - docker run --rm -v /var/run/docker.sock:/var/run/docker.sock aquasec/trivy:latest image --severity CRITICAL,HIGH --exit-code 1 --no-progress $IMAGE_NAME:$TAG - echo &quot;‚úçÔ∏è Signing image with Cosign...&quot; - apk add --no-cache cosign - echo &quot;$COSIGN_PRIVATE_KEY&quot; &gt; cosign.key - cosign sign --key cosign.key --yes $IMAGE_NAME:$TAG - rm cosign.key - echo &quot;üì§ Pushing image...&quot; - docker push $IMAGE_NAME:$TAG - docker push $IMAGE_NAME:latest - echo &quot;‚úÖ Docker image pushed: $IMAGE_NAME:$TAG&quot; only: - branches - merge_requests - tags # ============================================ # Stage 6: DEPLOY DEV # ============================================ deploy:dev: &lt;&lt;: *kubectl_template stage: deploy-dev environment: name: development url: https://dev.example.com on_stop: stop:dev script: - echo &quot;üöÄ Deploying to Development...&quot; - kubectl config use-context $KUBE_CONTEXT_DEV - | if [ &quot;$CI_COMMIT_TAG&quot; != &quot;&quot; ]; then TAG=&quot;$CI_COMMIT_TAG&quot; else TAG=&quot;$CI_COMMIT_SHORT_SHA&quot; fi - kubectl set image deployment/$APP_NAME $APP_NAME=$IMAGE_NAME:$TAG -n $KUBE_NAMESPACE_DEV - kubectl rollout status deployment/$APP_NAME -n $KUBE_NAMESPACE_DEV --timeout=5m - echo &quot;‚úÖ Deployment to Dev successful&quot; - echo &quot;üß™ Running smoke tests...&quot; - sleep 10 - kubectl run curl-test --rm -i --restart=Never --image=curlimages/curl:latest -n $KUBE_NAMESPACE_DEV -- curl -f http://$APP_NAME:8080/actuator/health || exit 1 only: - branches - merge_requests except: - tags stop:dev: &lt;&lt;: *kubectl_template stage: deploy-dev environment: name: development action: stop script: - echo &quot;üõë Stopping Development environment...&quot; - kubectl scale deployment/$APP_NAME --replicas=0 -n $KUBE_NAMESPACE_DEV when: manual only: - branches # ============================================ # Stage 7: DEPLOY STAGING # ============================================ deploy:staging: &lt;&lt;: *kubectl_template stage: deploy-staging environment: name: staging url: https://staging.example.com script: - echo &quot;üöÄ Deploying to Staging...&quot; - kubectl config use-context $KUBE_CONTEXT_STAGING - TAG=&quot;$CI_COMMIT_SHORT_SHA&quot; - kubectl set image deployment/$APP_NAME $APP_NAME=$IMAGE_NAME:$TAG -n $KUBE_NAMESPACE_STAGING - kubectl rollout status deployment/$APP_NAME -n $KUBE_NAMESPACE_STAGING --timeout=5m - echo &quot;‚úÖ Deployment to Staging successful&quot; - echo &quot;üß™ Running E2E tests...&quot; - sleep 20 # Ici, lancer vos tests E2E (Newman, Selenium, etc.) only: - main - develop when: manual # ============================================ # Stage 8: DEPLOY PRODUCTION # ============================================ deploy:production: &lt;&lt;: *kubectl_template stage: deploy-prod environment: name: production url: https://app.example.com script: - echo &quot;üöÄ Deploying to Production...&quot; - kubectl config use-context $KUBE_CONTEXT_PROD - | if [ &quot;$CI_COMMIT_TAG&quot; != &quot;&quot; ]; then TAG=&quot;$CI_COMMIT_TAG&quot; else echo &quot;‚ùå Production deployment requires a tag&quot; exit 1 fi - echo &quot;Deploying version: $TAG&quot; - kubectl set image deployment/$APP_NAME $APP_NAME=$IMAGE_NAME:$TAG -n $KUBE_NAMESPACE_PROD - kubectl rollout status deployment/$APP_NAME -n $KUBE_NAMESPACE_PROD --timeout=10m - echo &quot;‚úÖ Deployment to Production successful&quot; - echo &quot;üß™ Running smoke tests...&quot; - sleep 30 - kubectl run curl-test --rm -i --restart=Never --image=curlimages/curl:latest -n $KUBE_NAMESPACE_PROD -- curl -f http://$APP_NAME:8080/actuator/health || exit 1 - echo &quot;üìä Creating GitLab release...&quot; - | curl --request POST --header &quot;PRIVATE-TOKEN: $CI_JOB_TOKEN&quot; &quot;$CI_API_V4_URL/projects/$CI_PROJECT_ID/releases&quot; --form &quot;name=Release $TAG&quot; --form &quot;tag_name=$TAG&quot; --form &quot;description=Production release $TAG&quot; only: - tags when: manual # ============================================ # Scheduled Jobs # ============================================ security:scheduled-scan: &lt;&lt;: *maven_template stage: security script: - echo &quot;üîç Running scheduled security scan...&quot; - mvn $MAVEN_CLI_OPTS org.owasp:dependency-check-maven:check artifacts: when: always paths: - target/dependency-check-report.html expire_in: 1 month only: - schedules   ","version":"Next","tagName":"h2"},{"title":"üì¶ Configuration Maven (pom.xml)‚Äã","type":1,"pageTitle":"‚òï Pipeline Java/Maven - GitLab CI","url":"/docs/devops/cicd/pipelines-java#-configuration-maven-pomxml","content":" pom.xml &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt; &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;parent&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt; &lt;version&gt;3.2.0&lt;/version&gt; &lt;relativePath/&gt; &lt;/parent&gt; &lt;groupId&gt;com.example&lt;/groupId&gt; &lt;artifactId&gt;my-spring-app&lt;/artifactId&gt; &lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt; &lt;name&gt;My Spring Boot Application&lt;/name&gt; &lt;description&gt;Application Java avec pipeline GitLab CI&lt;/description&gt; &lt;properties&gt; &lt;java.version&gt;21&lt;/java.version&gt; &lt;maven.compiler.source&gt;21&lt;/maven.compiler.source&gt; &lt;maven.compiler.target&gt;21&lt;/maven.compiler.target&gt; &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt; &lt;!-- Versions --&gt; &lt;spring-boot.version&gt;3.2.0&lt;/spring-boot.version&gt; &lt;jacoco.version&gt;0.8.11&lt;/jacoco.version&gt; &lt;checkstyle.version&gt;10.12.5&lt;/checkstyle.version&gt; &lt;spotbugs.version&gt;4.8.1&lt;/spotbugs.version&gt; &lt;pmd.version&gt;6.55.0&lt;/pmd.version&gt; &lt;sonar.version&gt;3.10.0.2594&lt;/sonar.version&gt; &lt;dependency-check.version&gt;9.0.7&lt;/dependency-check.version&gt; &lt;cyclonedx.version&gt;2.7.11&lt;/cyclonedx.version&gt; &lt;!-- SonarQube --&gt; &lt;sonar.java.coveragePlugin&gt;jacoco&lt;/sonar.java.coveragePlugin&gt; &lt;sonar.dynamicAnalysis&gt;reuseReports&lt;/sonar.dynamicAnalysis&gt; &lt;sonar.coverage.jacoco.xmlReportPaths&gt; ${project.build.directory}/site/jacoco/jacoco.xml &lt;/sonar.coverage.jacoco.xmlReportPaths&gt; &lt;!-- Quality Gates --&gt; &lt;jacoco.minimum.coverage&gt;0.80&lt;/jacoco.minimum.coverage&gt; &lt;/properties&gt; &lt;dependencies&gt; &lt;!-- Spring Boot Starters --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!-- Database --&gt; &lt;dependency&gt; &lt;groupId&gt;org.postgresql&lt;/groupId&gt; &lt;artifactId&gt;postgresql&lt;/artifactId&gt; &lt;scope&gt;runtime&lt;/scope&gt; &lt;/dependency&gt; &lt;!-- Cache --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!-- Monitoring --&gt; &lt;dependency&gt; &lt;groupId&gt;io.micrometer&lt;/groupId&gt; &lt;artifactId&gt;micrometer-registry-prometheus&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!-- Test --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.security&lt;/groupId&gt; &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;/dependencies&gt; &lt;build&gt; &lt;plugins&gt; &lt;!-- Spring Boot Plugin --&gt; &lt;plugin&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt; &lt;/plugin&gt; &lt;!-- JaCoCo Coverage --&gt; &lt;plugin&gt; &lt;groupId&gt;org.jacoco&lt;/groupId&gt; &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt; &lt;version&gt;${jacoco.version}&lt;/version&gt; &lt;executions&gt; &lt;execution&gt; &lt;id&gt;prepare-agent&lt;/id&gt; &lt;goals&gt; &lt;goal&gt;prepare-agent&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;execution&gt; &lt;id&gt;report&lt;/id&gt; &lt;phase&gt;test&lt;/phase&gt; &lt;goals&gt; &lt;goal&gt;report&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;execution&gt; &lt;id&gt;check&lt;/id&gt; &lt;goals&gt; &lt;goal&gt;check&lt;/goal&gt; &lt;/goals&gt; &lt;configuration&gt; &lt;rules&gt; &lt;rule&gt; &lt;element&gt;BUNDLE&lt;/element&gt; &lt;limits&gt; &lt;limit&gt; &lt;counter&gt;INSTRUCTION&lt;/counter&gt; &lt;value&gt;COVEREDRATIO&lt;/value&gt; &lt;minimum&gt;${jacoco.minimum.coverage}&lt;/minimum&gt; &lt;/limit&gt; &lt;limit&gt; &lt;counter&gt;BRANCH&lt;/counter&gt; &lt;value&gt;COVEREDRATIO&lt;/value&gt; &lt;minimum&gt;${jacoco.minimum.coverage}&lt;/minimum&gt; &lt;/limit&gt; &lt;/limits&gt; &lt;/rule&gt; &lt;/rules&gt; &lt;/configuration&gt; &lt;/execution&gt; &lt;/executions&gt; &lt;/plugin&gt; &lt;!-- Checkstyle --&gt; &lt;plugin&gt; &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt; &lt;artifactId&gt;maven-checkstyle-plugin&lt;/artifactId&gt; &lt;version&gt;3.3.1&lt;/version&gt; &lt;configuration&gt; &lt;configLocation&gt;google_checks.xml&lt;/configLocation&gt; &lt;consoleOutput&gt;true&lt;/consoleOutput&gt; &lt;failsOnError&gt;true&lt;/failsOnError&gt; &lt;violationSeverity&gt;warning&lt;/violationSeverity&gt; &lt;/configuration&gt; &lt;executions&gt; &lt;execution&gt; &lt;id&gt;validate&lt;/id&gt; &lt;phase&gt;validate&lt;/phase&gt; &lt;goals&gt; &lt;goal&gt;check&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;/executions&gt; &lt;/plugin&gt; &lt;!-- SpotBugs --&gt; &lt;plugin&gt; &lt;groupId&gt;com.github.spotbugs&lt;/groupId&gt; &lt;artifactId&gt;spotbugs-maven-plugin&lt;/artifactId&gt; &lt;version&gt;4.8.1.0&lt;/version&gt; &lt;configuration&gt; &lt;effort&gt;Max&lt;/effort&gt; &lt;threshold&gt;Low&lt;/threshold&gt; &lt;xmlOutput&gt;true&lt;/xmlOutput&gt; &lt;/configuration&gt; &lt;executions&gt; &lt;execution&gt; &lt;id&gt;analyze&lt;/id&gt; &lt;phase&gt;verify&lt;/phase&gt; &lt;goals&gt; &lt;goal&gt;check&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;/executions&gt; &lt;/plugin&gt; &lt;!-- PMD --&gt; &lt;plugin&gt; &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt; &lt;artifactId&gt;maven-pmd-plugin&lt;/artifactId&gt; &lt;version&gt;3.21.2&lt;/version&gt; &lt;configuration&gt; &lt;rulesets&gt; &lt;ruleset&gt;/rulesets/java/quickstart.xml&lt;/ruleset&gt; &lt;/rulesets&gt; &lt;printFailingErrors&gt;true&lt;/printFailingErrors&gt; &lt;/configuration&gt; &lt;executions&gt; &lt;execution&gt; &lt;id&gt;analyze&lt;/id&gt; &lt;phase&gt;verify&lt;/phase&gt; &lt;goals&gt; &lt;goal&gt;check&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;/executions&gt; &lt;/plugin&gt; &lt;!-- SonarQube --&gt; &lt;plugin&gt; &lt;groupId&gt;org.sonarsource.scanner.maven&lt;/groupId&gt; &lt;artifactId&gt;sonar-maven-plugin&lt;/artifactId&gt; &lt;version&gt;${sonar.version}&lt;/version&gt; &lt;/plugin&gt; &lt;!-- OWASP Dependency Check --&gt; &lt;plugin&gt; &lt;groupId&gt;org.owasp&lt;/groupId&gt; &lt;artifactId&gt;dependency-check-maven&lt;/artifactId&gt; &lt;version&gt;${dependency-check.version}&lt;/version&gt; &lt;configuration&gt; &lt;format&gt;ALL&lt;/format&gt; &lt;failBuildOnCVSS&gt;7&lt;/failBuildOnCVSS&gt; &lt;suppressionFiles&gt; &lt;suppressionFile&gt;dependency-check-suppression.xml&lt;/suppressionFile&gt; &lt;/suppressionFiles&gt; &lt;/configuration&gt; &lt;executions&gt; &lt;execution&gt; &lt;goals&gt; &lt;goal&gt;check&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;/executions&gt; &lt;/plugin&gt; &lt;!-- CycloneDX SBOM --&gt; &lt;plugin&gt; &lt;groupId&gt;org.cyclonedx&lt;/groupId&gt; &lt;artifactId&gt;cyclonedx-maven-plugin&lt;/artifactId&gt; &lt;version&gt;${cyclonedx.version}&lt;/version&gt; &lt;executions&gt; &lt;execution&gt; &lt;phase&gt;package&lt;/phase&gt; &lt;goals&gt; &lt;goal&gt;makeAggregateBom&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;/executions&gt; &lt;configuration&gt; &lt;projectType&gt;application&lt;/projectType&gt; &lt;schemaVersion&gt;1.5&lt;/schemaVersion&gt; &lt;includeBomSerialNumber&gt;true&lt;/includeBomSerialNumber&gt; &lt;includeCompileScope&gt;true&lt;/includeCompileScope&gt; &lt;includeProvidedScope&gt;true&lt;/includeProvidedScope&gt; &lt;includeRuntimeScope&gt;true&lt;/includeRuntimeScope&gt; &lt;includeSystemScope&gt;true&lt;/includeSystemScope&gt; &lt;includeTestScope&gt;false&lt;/includeTestScope&gt; &lt;includeLicenseText&gt;false&lt;/includeLicenseText&gt; &lt;outputFormat&gt;all&lt;/outputFormat&gt; &lt;/configuration&gt; &lt;/plugin&gt; &lt;!-- Failsafe for integration tests --&gt; &lt;plugin&gt; &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt; &lt;artifactId&gt;maven-failsafe-plugin&lt;/artifactId&gt; &lt;executions&gt; &lt;execution&gt; &lt;goals&gt; &lt;goal&gt;integration-test&lt;/goal&gt; &lt;goal&gt;verify&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;/executions&gt; &lt;/plugin&gt; &lt;/plugins&gt; &lt;/build&gt; &lt;/project&gt;  ","version":"Next","tagName":"h2"},{"title":"üéÆ AWX - Orchestration Ansible","type":0,"sectionRef":"#","url":"/docs/infrastructure/iac/ansible/awx-orchestration","content":"","keywords":"","version":"Next"},{"title":"üéØ AWX dans l'√©cosyst√®me‚Äã","type":1,"pageTitle":"üéÆ AWX - Orchestration Ansible","url":"/docs/infrastructure/iac/ansible/awx-orchestration#-awx-dans-l√©cosyst√®me","content":"   ","version":"Next","tagName":"h2"},{"title":"üí° Pourquoi AWX ?‚Äã","type":1,"pageTitle":"üéÆ AWX - Orchestration Ansible","url":"/docs/infrastructure/iac/ansible/awx-orchestration#-pourquoi-awx-","content":" ","version":"Next","tagName":"h2"},{"title":"Sans AWX (Ansible CLI uniquement)‚Äã","type":1,"pageTitle":"üéÆ AWX - Orchestration Ansible","url":"/docs/infrastructure/iac/ansible/awx-orchestration#sans-awx-ansible-cli-uniquement","content":" # Probl√®mes : ‚ùå Pas d'historique centralis√© des ex√©cutions ‚ùå Pas de contr√¥le d'acc√®s (qui peut d√©ployer o√π ?) ‚ùå Secrets en fichiers locaux (risque de fuite) ‚ùå Pas d'interface pour les non-techniciens ‚ùå Difficile d'int√©grer avec CI/CD ‚ùå Logs dispers√©s sur chaque serveur   ","version":"Next","tagName":"h3"},{"title":"Avec AWX‚Äã","type":1,"pageTitle":"üéÆ AWX - Orchestration Ansible","url":"/docs/infrastructure/iac/ansible/awx-orchestration#avec-awx","content":" # Avantages : ‚úÖ Interface web intuitive ‚úÖ RBAC granulaire (organisations, √©quipes, permissions) ‚úÖ Gestion s√©curis√©e des credentials ‚úÖ Historique complet de tous les jobs ‚úÖ Workflows complexes avec conditions ‚úÖ API REST pour automatisation ‚úÖ Notifications Slack/Email/Webhooks ‚úÖ Scheduling de jobs (cron int√©gr√©) ‚úÖ Surveys (formulaires) pour param√©trer les jobs   ","version":"Next","tagName":"h3"},{"title":"üöÄ Installation rapide‚Äã","type":1,"pageTitle":"üéÆ AWX - Orchestration Ansible","url":"/docs/infrastructure/iac/ansible/awx-orchestration#-installation-rapide","content":" ","version":"Next","tagName":"h2"},{"title":"Option 1 : Docker Compose (Dev/Demo)‚Äã","type":1,"pageTitle":"üéÆ AWX - Orchestration Ansible","url":"/docs/infrastructure/iac/ansible/awx-orchestration#option-1--docker-compose-devdemo","content":" # T√©l√©charger git clone https://github.com/ansible/awx.git cd awx/tools/docker-compose # G√©n√©rer le secret openssl rand -base64 30 &gt; credentials/secret_key # Lancer AWX docker-compose up -d # Attendre que tout d√©marre (~2 minutes) docker-compose ps # Acc√©der √† l'interface # URL: http://localhost:80 # User: admin # Password: password (voir .env)   ","version":"Next","tagName":"h3"},{"title":"Option 2 : Kubernetes avec Operator (Production)‚Äã","type":1,"pageTitle":"üéÆ AWX - Orchestration Ansible","url":"/docs/infrastructure/iac/ansible/awx-orchestration#option-2--kubernetes-avec-operator-production","content":" # Installer l'operator kubectl apply -f https://raw.githubusercontent.com/ansible/awx-operator/devel/deploy/awx-operator.yaml # Cr√©er une instance AWX cat &lt;&lt;EOF | kubectl apply -f - apiVersion: awx.ansible.com/v1beta1 kind: AWX metadata: name: awx-prod namespace: awx spec: service_type: ClusterIP ingress_type: ingress ingress_hosts: - hostname: awx.example.com tls_secret: awx-tls EOF # Suivre le d√©ploiement kubectl get awx -n awx -w   ","version":"Next","tagName":"h3"},{"title":"üìã Concepts cl√©s‚Äã","type":1,"pageTitle":"üéÆ AWX - Orchestration Ansible","url":"/docs/infrastructure/iac/ansible/awx-orchestration#-concepts-cl√©s","content":" ","version":"Next","tagName":"h2"},{"title":"1. Organizations (Organisations)‚Äã","type":1,"pageTitle":"üéÆ AWX - Orchestration Ansible","url":"/docs/infrastructure/iac/ansible/awx-orchestration#1-organizations-organisations","content":" R√¥le : Isolation multi-tenant  Organization: Production ‚îú‚îÄ‚îÄ Teams: DevOps, Developers, Ops ‚îú‚îÄ‚îÄ Projects: Infrastructure, Applications ‚îú‚îÄ‚îÄ Inventories: AWS, Azure, GCP ‚îî‚îÄ‚îÄ Credentials: SSH keys, API tokens   ","version":"Next","tagName":"h3"},{"title":"2. Projects (Projets)‚Äã","type":1,"pageTitle":"üéÆ AWX - Orchestration Ansible","url":"/docs/infrastructure/iac/ansible/awx-orchestration#2-projects-projets","content":" R√¥le : Lien avec Git o√π sont les playbooks  Name: Infrastructure Automation SCM Type: Git SCM URL: https://gitlab.com/company/ansible-infra.git SCM Branch: main Update on Launch: Yes # Pull automatique avant chaque job   ","version":"Next","tagName":"h3"},{"title":"3. Inventories (Inventaires)‚Äã","type":1,"pageTitle":"üéÆ AWX - Orchestration Ansible","url":"/docs/infrastructure/iac/ansible/awx-orchestration#3-inventories-inventaires","content":" R√¥le : Liste des serveurs √† g√©rer  Static Inventory :  Production: ‚îú‚îÄ‚îÄ Web Servers ‚îÇ ‚îú‚îÄ‚îÄ web01.aws (10.0.1.10) ‚îÇ ‚îú‚îÄ‚îÄ web02.aws (10.0.1.11) ‚îÇ ‚îî‚îÄ‚îÄ web03.azure (10.1.1.10) ‚îî‚îÄ‚îÄ Databases ‚îú‚îÄ‚îÄ db01.aws (10.0.2.10) ‚îî‚îÄ‚îÄ db02.gcp (10.2.2.10)   Dynamic Inventory : Synchronisation automatique avec AWS/Azure/GCP  Source: Amazon EC2 Credential: AWS Production Regions: eu-west-1, us-east-1 Filters: tag:Environment=production Update on Launch: Yes   ","version":"Next","tagName":"h3"},{"title":"4. Credentials (Identifiants)‚Äã","type":1,"pageTitle":"üéÆ AWX - Orchestration Ansible","url":"/docs/infrastructure/iac/ansible/awx-orchestration#4-credentials-identifiants","content":" R√¥le : Gestion s√©curis√©e des secrets  Type\tUsageMachine\tSSH vers serveurs Source Control\tGit SSH key Vault\tAnsible Vault password Cloud\tAWS/Azure/GCP API keys HashiCorp Vault\tIntegration avec Vault externe  ","version":"Next","tagName":"h3"},{"title":"5. Job Templates (Mod√®les de job)‚Äã","type":1,"pageTitle":"üéÆ AWX - Orchestration Ansible","url":"/docs/infrastructure/iac/ansible/awx-orchestration#5-job-templates-mod√®les-de-job","content":" R√¥le : Configuration r√©utilisable pour lancer un playbook  Name: Deploy Java Application Inventory: Production Project: Applications Playbook: playbooks/deploy-java.yml Credentials: - Production SSH - Ansible Vault Variables: app_version: latest environment: production Ask Variables on Launch: Yes # Permet de modifier les variables   ","version":"Next","tagName":"h3"},{"title":"6. Workflows (Workflows)‚Äã","type":1,"pageTitle":"üéÆ AWX - Orchestration Ansible","url":"/docs/infrastructure/iac/ansible/awx-orchestration#6-workflows-workflows","content":" R√¥le : Orchestration de plusieurs jobs avec conditions    ","version":"Next","tagName":"h3"},{"title":"üîÑ Int√©gration avec CI/CD‚Äã","type":1,"pageTitle":"üéÆ AWX - Orchestration Ansible","url":"/docs/infrastructure/iac/ansible/awx-orchestration#-int√©gration-avec-cicd","content":" ","version":"Next","tagName":"h2"},{"title":"Cas d'usage : D√©ploiement automatique‚Äã","type":1,"pageTitle":"üéÆ AWX - Orchestration Ansible","url":"/docs/infrastructure/iac/ansible/awx-orchestration#cas-dusage--d√©ploiement-automatique","content":" .gitlab-ci.yml stages: - build - trigger-awx build:app: stage: build script: - mvn package - docker build -t registry.com/my-app:$CI_COMMIT_SHA . - docker push registry.com/my-app:$CI_COMMIT_SHA # D√©clencher AWX pour d√©ployer deploy:staging: stage: trigger-awx script: - | curl -X POST https://awx.example.com/api/v2/job_templates/5/launch/ \\ -H &quot;Authorization: Bearer $AWX_TOKEN&quot; \\ -H &quot;Content-Type: application/json&quot; \\ -d '{ &quot;extra_vars&quot;: { &quot;app_version&quot;: &quot;'$CI_COMMIT_SHA'&quot;, &quot;environment&quot;: &quot;staging&quot; } }' environment: name: staging only: - main deploy:production: stage: trigger-awx script: - | curl -X POST https://awx.example.com/api/v2/job_templates/5/launch/ \\ -H &quot;Authorization: Bearer $AWX_TOKEN&quot; \\ -d '{ &quot;extra_vars&quot;: { &quot;app_version&quot;: &quot;'$CI_COMMIT_TAG'&quot;, &quot;environment&quot;: &quot;production&quot; } }' environment: name: production when: manual only: - tags   ","version":"Next","tagName":"h3"},{"title":"R√©sultat dans AWX‚Äã","type":1,"pageTitle":"üéÆ AWX - Orchestration Ansible","url":"/docs/infrastructure/iac/ansible/awx-orchestration#r√©sultat-dans-awx","content":" Job #247 - Deploy Java Application ‚îú‚îÄ‚îÄ Launched by: GitLab CI (via API) ‚îú‚îÄ‚îÄ Variables: ‚îÇ ‚îî‚îÄ‚îÄ app_version: a1b2c3d ‚îÇ ‚îî‚îÄ‚îÄ environment: staging ‚îú‚îÄ‚îÄ Status: ‚úÖ Successful ‚îú‚îÄ‚îÄ Duration: 2m 34s ‚îî‚îÄ‚îÄ Output: [Voir logs d√©taill√©s]   ","version":"Next","tagName":"h3"},{"title":"üé≠ Workflows avanc√©s‚Äã","type":1,"pageTitle":"üéÆ AWX - Orchestration Ansible","url":"/docs/infrastructure/iac/ansible/awx-orchestration#-workflows-avanc√©s","content":" ","version":"Next","tagName":"h2"},{"title":"Exemple : D√©ploiement multi-cloud progressif‚Äã","type":1,"pageTitle":"üéÆ AWX - Orchestration Ansible","url":"/docs/infrastructure/iac/ansible/awx-orchestration#exemple--d√©ploiement-multi-cloud-progressif","content":" Workflow: Progressive Multi-Cloud Deployment Nodes: 1. Backup Databases (All clouds) ‚Üì Success 2. Deploy to AWS eu-west-1 ‚îú‚îÄ Success ‚Üí 3 ‚îî‚îÄ Failure ‚Üí Rollback &amp; Stop 3. Smoke Tests AWS ‚îú‚îÄ Success ‚Üí 4 ‚îî‚îÄ Failure ‚Üí Rollback AWS &amp; Stop 4. Deploy to Azure westeurope ‚îú‚îÄ Success ‚Üí 5 ‚îî‚îÄ Failure ‚Üí Rollback AWS &amp; Azure &amp; Stop 5. Smoke Tests Azure ‚îú‚îÄ Success ‚Üí 6 ‚îî‚îÄ Failure ‚Üí Rollback All &amp; Stop 6. Deploy to GCP us-central1 ‚îú‚îÄ Success ‚Üí 7 ‚îî‚îÄ Failure ‚Üí Rollback All &amp; Stop 7. Final Health Check (All) ‚îú‚îÄ Success ‚Üí Notify Slack Success ‚îî‚îÄ Failure ‚Üí Notify Slack Warning   Avantage : Si un d√©ploiement √©choue, AWX rollback automatiquement les d√©ploiements pr√©c√©dents ! üõ°Ô∏è  ","version":"Next","tagName":"h3"},{"title":"üîê RBAC (Role-Based Access Control)‚Äã","type":1,"pageTitle":"üéÆ AWX - Orchestration Ansible","url":"/docs/infrastructure/iac/ansible/awx-orchestration#-rbac-role-based-access-control","content":" ","version":"Next","tagName":"h2"},{"title":"Structure des permissions‚Äã","type":1,"pageTitle":"üéÆ AWX - Orchestration Ansible","url":"/docs/infrastructure/iac/ansible/awx-orchestration#structure-des-permissions","content":" Organization: Production ‚îú‚îÄ‚îÄ Team: DevOps ‚îÇ ‚îî‚îÄ‚îÄ Permissions: ‚îÇ ‚îú‚îÄ‚îÄ Execute: All Job Templates ‚úÖ ‚îÇ ‚îú‚îÄ‚îÄ Admin: All Inventories ‚úÖ ‚îÇ ‚îî‚îÄ‚îÄ Admin: All Credentials ‚úÖ ‚îÇ ‚îú‚îÄ‚îÄ Team: Developers ‚îÇ ‚îî‚îÄ‚îÄ Permissions: ‚îÇ ‚îú‚îÄ‚îÄ Execute: Deploy Applications ‚úÖ ‚îÇ ‚îú‚îÄ‚îÄ Read: Inventories (Dev, Staging) ‚úÖ ‚îÇ ‚îî‚îÄ‚îÄ Read: Credentials ‚ùå (secrets cach√©s) ‚îÇ ‚îî‚îÄ‚îÄ Team: Auditors ‚îî‚îÄ‚îÄ Permissions: ‚îú‚îÄ‚îÄ Read: All Jobs History ‚úÖ ‚îú‚îÄ‚îÄ Execute: Nothing ‚ùå ‚îî‚îÄ‚îÄ Read: Credentials ‚ùå   ","version":"Next","tagName":"h3"},{"title":"Exemple : D√©veloppeur lance un d√©ploiement‚Äã","type":1,"pageTitle":"üéÆ AWX - Orchestration Ansible","url":"/docs/infrastructure/iac/ansible/awx-orchestration#exemple--d√©veloppeur-lance-un-d√©ploiement","content":" üë®‚Äçüíª D√©veloppeur se connecte √† AWX ‚Üì üîç Voit uniquement ses Job Templates autoris√©s ‚Üì üéØ Clique sur &quot;Deploy Java Application&quot; ‚Üì üìã Remplit le Survey: - Environment: staging ‚úÖ (autoris√©) - Environment: production ‚ùå (bloqu√© par RBAC) ‚Üì üöÄ Lance le job ‚Üì üìä Voit les logs en temps r√©el ‚Üì ‚úÖ Re√ßoit notification Slack   ","version":"Next","tagName":"h3"},{"title":"üìä Monitoring et Notifications‚Äã","type":1,"pageTitle":"üéÆ AWX - Orchestration Ansible","url":"/docs/infrastructure/iac/ansible/awx-orchestration#-monitoring-et-notifications","content":" ","version":"Next","tagName":"h2"},{"title":"Notifications int√©gr√©es‚Äã","type":1,"pageTitle":"üéÆ AWX - Orchestration Ansible","url":"/docs/infrastructure/iac/ansible/awx-orchestration#notifications-int√©gr√©es","content":" Job Template: Deploy Production Notifications: On Start: - Slack: #deployments Message: &quot;üöÄ D√©ploiement production d√©marr√© par @{username}&quot; On Success: - Slack: #deployments Message: &quot;‚úÖ D√©ploiement r√©ussi en {duration}&quot; - Email: ops-team@example.com - Webhook: https://monitoring.example.com/deployment-success On Failure: - Slack: #alerts Message: &quot;‚ùå D√âPLOIEMENT √âCHOU√â ! @channel&quot; - PagerDuty: Incident cr√©ation - Email: ops-team@example.com (urgent)   ","version":"Next","tagName":"h3"},{"title":"M√©triques Prometheus‚Äã","type":1,"pageTitle":"üéÆ AWX - Orchestration Ansible","url":"/docs/infrastructure/iac/ansible/awx-orchestration#m√©triques-prometheus","content":" AWX expose des m√©triques :  # Nombre de jobs ex√©cut√©s awx_jobs_total{status=&quot;successful&quot;} 1247 awx_jobs_total{status=&quot;failed&quot;} 23 # Dur√©e moyenne des jobs awx_job_duration_seconds{template=&quot;deploy-java&quot;} 156.3 # Jobs en cours awx_jobs_running 3   ","version":"Next","tagName":"h3"},{"title":"üéØ Cas d'usage r√©els‚Äã","type":1,"pageTitle":"üéÆ AWX - Orchestration Ansible","url":"/docs/infrastructure/iac/ansible/awx-orchestration#-cas-dusage-r√©els","content":" ","version":"Next","tagName":"h2"},{"title":"1. Onboarding nouveau serveur‚Äã","type":1,"pageTitle":"üéÆ AWX - Orchestration Ansible","url":"/docs/infrastructure/iac/ansible/awx-orchestration#1-onboarding-nouveau-serveur","content":" Sans AWX :  # Process manuel 1. Se connecter en SSH 2. Installer packages 3. Configurer firewall 4. Installer monitoring 5. Configurer logs 6. Ajouter √† l'inventaire ‚Üí ~2 heures par serveur   Avec AWX :  # Job Template: &quot;Bootstrap New Server&quot; 1. Ajouter IP dans inventory dynamique 2. Lancer job &quot;Bootstrap New Server&quot; 3. AWX fait tout automatiquement ‚Üí ~5 minutes, reproductible   ","version":"Next","tagName":"h3"},{"title":"2. Patch Tuesday (mises √† jour mensuelles)‚Äã","type":1,"pageTitle":"üéÆ AWX - Orchestration Ansible","url":"/docs/infrastructure/iac/ansible/awx-orchestration#2-patch-tuesday-mises-√†-jour-mensuelles","content":" Workflow AWX :  Patch Management Workflow: 1. Take snapshot of all VMs (AWS/Azure/GCP) 2. Update packages on 10% of servers (canary) 3. Wait 1 hour + monitoring 4. If OK ‚Üí Update remaining 90% by batches of 30% 5. If KO ‚Üí Rollback snapshots + Alert   ","version":"Next","tagName":"h3"},{"title":"3. DR (Disaster Recovery) Test‚Äã","type":1,"pageTitle":"üéÆ AWX - Orchestration Ansible","url":"/docs/infrastructure/iac/ansible/awx-orchestration#3-dr-disaster-recovery-test","content":" Job Template schedul√© (1er dimanche du mois) :  Name: DR Test - Failover to Azure Schedule: 0 2 * * 0 # 2h du matin, tous les dimanches Steps: 1. Backup production (AWS) 2. Deploy to DR site (Azure) 3. Smoke tests 4. Generate DR report 5. Destroy DR environment 6. Slack notification avec rapport   ","version":"Next","tagName":"h3"},{"title":"üìà Avantages pour l'√©quipe‚Äã","type":1,"pageTitle":"üéÆ AWX - Orchestration Ansible","url":"/docs/infrastructure/iac/ansible/awx-orchestration#-avantages-pour-l√©quipe","content":" Persona\tB√©n√©fice AWXDevOps\tAPI pour automatisation, historique complet, workflows D√©veloppeurs\tSelf-service pour d√©ployer (avec garde-fous RBAC) Ops\tVue centralis√©e, notifications, rollback facile Managers\tDashboard, m√©triques, audit trail Security\tCredentials s√©curis√©s, audit complet, RBAC  ","version":"Next","tagName":"h2"},{"title":"üöÄ Pour aller plus loin‚Äã","type":1,"pageTitle":"üéÆ AWX - Orchestration Ansible","url":"/docs/infrastructure/iac/ansible/awx-orchestration#-pour-aller-plus-loin","content":" ","version":"Next","tagName":"h2"},{"title":"Int√©grations avanc√©es‚Äã","type":1,"pageTitle":"üéÆ AWX - Orchestration Ansible","url":"/docs/infrastructure/iac/ansible/awx-orchestration#int√©grations-avanc√©es","content":" ServiceNow : Cr√©ation automatique de Change RequestsJira : Mise √† jour des tickets apr√®s d√©ploiementHashiCorp Vault : Rotation automatique des secretsGit : Approval process avec Merge RequestsTerraform Cloud : AWX lance Terraform pour provisionner puis configure  ","version":"Next","tagName":"h3"},{"title":"Ansible Collections dans AWX‚Äã","type":1,"pageTitle":"üéÆ AWX - Orchestration Ansible","url":"/docs/infrastructure/iac/ansible/awx-orchestration#ansible-collections-dans-awx","content":" # requirements.yml dans le Project Git collections: - name: community.general - name: ansible.posix - name: amazon.aws - name: azure.azcollection - name: google.cloud   AWX installe automatiquement ces collections avant l'ex√©cution ! üì¶    AWX transforme Ansible en plateforme d'automatisation d'entreprise ! üéÆ  Id√©al pour orchestrer l'infrastructure multi-cloud √† grande √©chelle ! üåç ","version":"Next","tagName":"h3"},{"title":"Microservices","type":0,"sectionRef":"#","url":"/docs/microservices","content":"Microservices","keywords":"","version":"Next"},{"title":"üìà Prometheus & Grafana - Monitoring Complet","type":0,"sectionRef":"#","url":"/docs/devops/observability/prometheus-grafana","content":"","keywords":"","version":"Next"},{"title":"üéØ Architecture de monitoring‚Äã","type":1,"pageTitle":"üìà Prometheus & Grafana - Monitoring Complet","url":"/docs/devops/observability/prometheus-grafana#-architecture-de-monitoring","content":"   ","version":"Next","tagName":"h2"},{"title":"üöÄ Installation Stack compl√®te‚Äã","type":1,"pageTitle":"üìà Prometheus & Grafana - Monitoring Complet","url":"/docs/devops/observability/prometheus-grafana#-installation-stack-compl√®te","content":" ","version":"Next","tagName":"h2"},{"title":"Docker Compose - Stack de monitoring‚Äã","type":1,"pageTitle":"üìà Prometheus & Grafana - Monitoring Complet","url":"/docs/devops/observability/prometheus-grafana#docker-compose---stack-de-monitoring","content":" docker-compose-monitoring.yml version: '3.8' networks: monitoring: driver: bridge volumes: prometheus_data: grafana_data: loki_data: tempo_data: services: # Prometheus - M√©triques prometheus: image: prom/prometheus:latest container_name: prometheus command: - '--config.file=/etc/prometheus/prometheus.yml' - '--storage.tsdb.path=/prometheus' - '--storage.tsdb.retention.time=30d' - '--web.console.libraries=/etc/prometheus/console_libraries' - '--web.console.templates=/etc/prometheus/consoles' - '--web.enable-lifecycle' - '--web.enable-admin-api' ports: - &quot;9090:9090&quot; volumes: - ./prometheus/prometheus.yml:/etc/prometheus/prometheus.yml - ./prometheus/alerts:/etc/prometheus/alerts - prometheus_data:/prometheus networks: - monitoring restart: unless-stopped # Grafana - Visualisation grafana: image: grafana/grafana:latest container_name: grafana ports: - &quot;3000:3000&quot; environment: - GF_SECURITY_ADMIN_USER=admin - GF_SECURITY_ADMIN_PASSWORD=admin123 - GF_INSTALL_PLUGINS=redis-datasource,grafana-piechart-panel - GF_AUTH_ANONYMOUS_ENABLED=false - GF_DASHBOARDS_DEFAULT_HOME_DASHBOARD_PATH=/etc/grafana/provisioning/dashboards/home.json volumes: - grafana_data:/var/lib/grafana - ./grafana/provisioning:/etc/grafana/provisioning - ./grafana/dashboards:/etc/grafana/dashboards networks: - monitoring restart: unless-stopped depends_on: - prometheus # Loki - Logs loki: image: grafana/loki:latest container_name: loki ports: - &quot;3100:3100&quot; command: -config.file=/etc/loki/local-config.yaml volumes: - ./loki/loki-config.yml:/etc/loki/local-config.yaml - loki_data:/loki networks: - monitoring restart: unless-stopped # Promtail - Collecteur de logs promtail: image: grafana/promtail:latest container_name: promtail volumes: - /var/log:/var/log - /var/lib/docker/containers:/var/lib/docker/containers - ./promtail/promtail-config.yml:/etc/promtail/config.yml command: -config.file=/etc/promtail/config.yml networks: - monitoring restart: unless-stopped # Tempo - Traces tempo: image: grafana/tempo:latest container_name: tempo command: [ &quot;-config.file=/etc/tempo.yaml&quot; ] volumes: - ./tempo/tempo.yml:/etc/tempo.yaml - tempo_data:/tmp/tempo ports: - &quot;3200:3200&quot; # tempo - &quot;4317:4317&quot; # otlp grpc - &quot;4318:4318&quot; # otlp http networks: - monitoring restart: unless-stopped # Alertmanager - Gestion des alertes alertmanager: image: prom/alertmanager:latest container_name: alertmanager ports: - &quot;9093:9093&quot; volumes: - ./alertmanager/alertmanager.yml:/etc/alertmanager/alertmanager.yml command: - '--config.file=/etc/alertmanager/alertmanager.yml' - '--storage.path=/alertmanager' networks: - monitoring restart: unless-stopped # Node Exporter - M√©triques syst√®me node-exporter: image: prom/node-exporter:latest container_name: node-exporter command: - '--path.procfs=/host/proc' - '--path.rootfs=/rootfs' - '--path.sysfs=/host/sys' - '--collector.filesystem.mount-points-exclude=^/(sys|proc|dev|host|etc)($$|/)' ports: - &quot;9100:9100&quot; volumes: - /proc:/host/proc:ro - /sys:/host/sys:ro - /:/rootfs:ro networks: - monitoring restart: unless-stopped # cAdvisor - M√©triques containers cadvisor: image: gcr.io/cadvisor/cadvisor:latest container_name: cadvisor ports: - &quot;8080:8080&quot; volumes: - /:/rootfs:ro - /var/run:/var/run:ro - /sys:/sys:ro - /var/lib/docker:/var/lib/docker:ro - /dev/disk:/dev/disk:ro privileged: true devices: - /dev/kmsg networks: - monitoring restart: unless-stopped # Redis Exporter redis-exporter: image: oliver006/redis_exporter:latest container_name: redis-exporter ports: - &quot;9121:9121&quot; environment: - REDIS_ADDR=redis:6379 networks: - monitoring restart: unless-stopped # Postgres Exporter postgres-exporter: image: prometheuscommunity/postgres-exporter:latest container_name: postgres-exporter ports: - &quot;9187:9187&quot; environment: - DATA_SOURCE_NAME=postgresql://user:password@postgres:5432/dbname?sslmode=disable networks: - monitoring restart: unless-stopped # Nginx Exporter nginx-exporter: image: nginx/nginx-prometheus-exporter:latest container_name: nginx-exporter ports: - &quot;9113:9113&quot; command: - -nginx.scrape-uri=http://nginx:8080/stub_status networks: - monitoring restart: unless-stopped   ","version":"Next","tagName":"h3"},{"title":"‚öôÔ∏è Configuration Prometheus‚Äã","type":1,"pageTitle":"üìà Prometheus & Grafana - Monitoring Complet","url":"/docs/devops/observability/prometheus-grafana#Ô∏è-configuration-prometheus","content":" prometheus/prometheus.yml global: scrape_interval: 15s evaluation_interval: 15s external_labels: cluster: 'production' region: 'eu-west-1' # R√®gles d'alerting rule_files: - '/etc/prometheus/alerts/*.yml' # Configuration Alertmanager alerting: alertmanagers: - static_configs: - targets: - 'alertmanager:9093' # Scrape configs scrape_configs: # Prometheus lui-m√™me - job_name: 'prometheus' static_configs: - targets: ['localhost:9090'] # Applications Java (Spring Boot Actuator) - job_name: 'spring-boot-apps' metrics_path: '/actuator/prometheus' static_configs: - targets: - 'java-app-1:8080' - 'java-app-2:8080' relabel_configs: - source_labels: [__address__] target_label: instance regex: '([^:]+).*' replacement: '${1}' # Drupal (PHP-FPM Exporter) - job_name: 'drupal-apps' static_configs: - targets: - 'phpfpm-exporter:9253' # Angular (via Nginx) - job_name: 'angular-apps' static_configs: - targets: - 'nginx-exporter:9113' # Infrastructure - job_name: 'node-exporter' static_configs: - targets: - 'node-exporter:9100' - job_name: 'cadvisor' static_configs: - targets: - 'cadvisor:8080' # Bases de donn√©es - job_name: 'postgres' static_configs: - targets: - 'postgres-exporter:9187' - job_name: 'redis' static_configs: - targets: - 'redis-exporter:9121' # Kubernetes (si applicable) - job_name: 'kubernetes-apiservers' kubernetes_sd_configs: - role: endpoints scheme: https tls_config: ca_file: /var/run/secrets/kubernetes.io/serviceaccount/ca.crt bearer_token_file: /var/run/secrets/kubernetes.io/serviceaccount/token relabel_configs: - source_labels: [__meta_kubernetes_namespace, __meta_kubernetes_service_name, __meta_kubernetes_endpoint_port_name] action: keep regex: default;kubernetes;https - job_name: 'kubernetes-pods' kubernetes_sd_configs: - role: pod relabel_configs: - source_labels: [__meta_kubernetes_pod_annotation_prometheus_io_scrape] action: keep regex: true - source_labels: [__meta_kubernetes_pod_annotation_prometheus_io_path] action: replace target_label: __metrics_path__ regex: (.+) - source_labels: [__address__, __meta_kubernetes_pod_annotation_prometheus_io_port] action: replace regex: ([^:]+)(?::\\d+)?;(\\d+) replacement: $1:$2 target_label: __address__ # Remote write (optionnel - pour Thanos ou Cortex) remote_write: - url: 'http://thanos-receive:19291/api/v1/receive' queue_config: capacity: 10000 max_shards: 50 min_shards: 1   ","version":"Next","tagName":"h2"},{"title":"üö® Alerting Rules‚Äã","type":1,"pageTitle":"üìà Prometheus & Grafana - Monitoring Complet","url":"/docs/devops/observability/prometheus-grafana#-alerting-rules","content":" prometheus/alerts/application-alerts.yml groups: - name: application_alerts interval: 30s rules: # Java Application - High Error Rate - alert: JavaHighErrorRate expr: | rate(http_server_requests_seconds_count{status=~&quot;5..&quot;}[5m]) / rate(http_server_requests_seconds_count[5m]) &gt; 0.05 for: 5m labels: severity: critical team: backend annotations: summary: &quot;High error rate on {{ $labels.instance }}&quot; description: &quot;Error rate is {{ $value | humanizePercentage }} (threshold: 5%)&quot; # Java Application - High Latency - alert: JavaHighLatency expr: | histogram_quantile(0.95, rate(http_server_requests_seconds_bucket[5m]) ) &gt; 1 for: 5m labels: severity: warning team: backend annotations: summary: &quot;High latency on {{ $labels.instance }}&quot; description: &quot;95th percentile latency is {{ $value }}s&quot; # Java Application - Memory Usage - alert: JavaHighMemoryUsage expr: | (jvm_memory_used_bytes{area=&quot;heap&quot;} / jvm_memory_max_bytes{area=&quot;heap&quot;}) &gt; 0.90 for: 5m labels: severity: warning team: backend annotations: summary: &quot;High memory usage on {{ $labels.instance }}&quot; description: &quot;Heap memory usage is {{ $value | humanizePercentage }}&quot; # Java Application - High GC Time - alert: JavaHighGCTime expr: | rate(jvm_gc_pause_seconds_sum[5m]) / rate(jvm_gc_pause_seconds_count[5m]) &gt; 0.1 for: 5m labels: severity: warning team: backend annotations: summary: &quot;High GC time on {{ $labels.instance }}&quot; description: &quot;Average GC pause is {{ $value }}s&quot; # Drupal - PHP-FPM High Pool Usage - alert: PHPFPMHighPoolUsage expr: | (phpfpm_active_processes / phpfpm_max_children) &gt; 0.80 for: 5m labels: severity: warning team: drupal annotations: summary: &quot;High PHP-FPM pool usage&quot; description: &quot;Pool usage is {{ $value | humanizePercentage }}&quot; # Drupal - Database Slow Queries - alert: DrupalSlowQueries expr: | rate(mysql_global_status_slow_queries[5m]) &gt; 10 for: 5m labels: severity: warning team: drupal annotations: summary: &quot;High number of slow queries&quot; description: &quot;{{ $value }} slow queries per second&quot; # Angular - High Client Errors - alert: AngularHighClientErrors expr: | rate(nginx_http_requests_total{status=~&quot;4..&quot;}[5m]) &gt; 100 for: 5m labels: severity: warning team: frontend annotations: summary: &quot;High client error rate&quot; description: &quot;{{ $value }} 4xx errors per second&quot;   prometheus/alerts/infrastructure-alerts.yml groups: - name: infrastructure_alerts interval: 30s rules: # Node - High CPU - alert: HostHighCPU expr: | 100 - (avg by(instance) (rate(node_cpu_seconds_total{mode=&quot;idle&quot;}[5m])) * 100) &gt; 80 for: 5m labels: severity: warning team: devops annotations: summary: &quot;High CPU usage on {{ $labels.instance }}&quot; description: &quot;CPU usage is {{ $value }}%&quot; # Node - High Memory - alert: HostHighMemory expr: | (1 - (node_memory_MemAvailable_bytes / node_memory_MemTotal_bytes)) * 100 &gt; 90 for: 5m labels: severity: critical team: devops annotations: summary: &quot;High memory usage on {{ $labels.instance }}&quot; description: &quot;Memory usage is {{ $value }}%&quot; # Node - Disk Space - alert: HostLowDiskSpace expr: | (node_filesystem_avail_bytes{mountpoint=&quot;/&quot;} / node_filesystem_size_bytes{mountpoint=&quot;/&quot;}) * 100 &lt; 10 for: 5m labels: severity: critical team: devops annotations: summary: &quot;Low disk space on {{ $labels.instance }}&quot; description: &quot;Only {{ $value }}% disk space remaining&quot; # Container - High CPU - alert: ContainerHighCPU expr: | rate(container_cpu_usage_seconds_total{container!=&quot;&quot;}[5m]) * 100 &gt; 80 for: 5m labels: severity: warning team: devops annotations: summary: &quot;High CPU on container {{ $labels.container }}&quot; description: &quot;CPU usage is {{ $value }}%&quot; # Container - OOM Killed - alert: ContainerOOMKilled expr: | increase(container_oom_events_total[5m]) &gt; 0 labels: severity: critical team: devops annotations: summary: &quot;Container {{ $labels.container }} OOM killed&quot; description: &quot;Container was killed due to out of memory&quot; # Database - High Connections - alert: PostgresHighConnections expr: | (pg_stat_database_numbackends / pg_settings_max_connections) &gt; 0.80 for: 5m labels: severity: warning team: database annotations: summary: &quot;High Postgres connections&quot; description: &quot;{{ $value | humanizePercentage }} of max connections used&quot; # Redis - High Memory - alert: RedisHighMemory expr: | (redis_memory_used_bytes / redis_memory_max_bytes) &gt; 0.90 for: 5m labels: severity: warning team: cache annotations: summary: &quot;High Redis memory usage&quot; description: &quot;Memory usage is {{ $value | humanizePercentage }}&quot;   ","version":"Next","tagName":"h2"},{"title":"üìß Configuration Alertmanager‚Äã","type":1,"pageTitle":"üìà Prometheus & Grafana - Monitoring Complet","url":"/docs/devops/observability/prometheus-grafana#-configuration-alertmanager","content":" alertmanager/alertmanager.yml global: resolve_timeout: 5m slack_api_url: 'https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK' # Templates templates: - '/etc/alertmanager/templates/*.tmpl' # Routes route: group_by: ['alertname', 'cluster', 'service'] group_wait: 10s group_interval: 10s repeat_interval: 12h receiver: 'default' routes: # Critical alerts -&gt; PagerDuty - match: severity: critical receiver: 'pagerduty' continue: true # Critical alerts -&gt; Slack - match: severity: critical receiver: 'slack-critical' # Warning alerts -&gt; Slack - match: severity: warning receiver: 'slack-warning' # Team-specific routes - match: team: backend receiver: 'slack-backend' - match: team: frontend receiver: 'slack-frontend' - match: team: drupal receiver: 'slack-drupal' # Inhibition rules inhibit_rules: - source_match: severity: 'critical' target_match: severity: 'warning' equal: ['alertname', 'instance'] # Receivers receivers: - name: 'default' email_configs: - to: 'devops@example.com' send_resolved: true - name: 'pagerduty' pagerduty_configs: - service_key: 'YOUR_PAGERDUTY_SERVICE_KEY' description: '{{ .GroupLabels.alertname }}' - name: 'slack-critical' slack_configs: - channel: '#alerts-critical' title: 'üö® CRITICAL ALERT' text: &gt;- {{ range .Alerts }} *Alert:* {{ .Labels.alertname }} *Summary:* {{ .Annotations.summary }} *Description:* {{ .Annotations.description }} *Severity:* {{ .Labels.severity }} {{ end }} send_resolved: true - name: 'slack-warning' slack_configs: - channel: '#alerts-warning' title: '‚ö†Ô∏è WARNING ALERT' text: &gt;- {{ range .Alerts }} *Alert:* {{ .Labels.alertname }} *Summary:* {{ .Annotations.summary }} {{ end }} - name: 'slack-backend' slack_configs: - channel: '#team-backend' title: '‚òï Backend Alert' - name: 'slack-frontend' slack_configs: - channel: '#team-frontend' title: 'üÖ∞Ô∏è Frontend Alert' - name: 'slack-drupal' slack_configs: - channel: '#team-drupal' title: 'üî∑ Drupal Alert'   ","version":"Next","tagName":"h2"},{"title":"üìä Dashboards Grafana‚Äã","type":1,"pageTitle":"üìà Prometheus & Grafana - Monitoring Complet","url":"/docs/devops/observability/prometheus-grafana#-dashboards-grafana","content":" ","version":"Next","tagName":"h2"},{"title":"Dashboard Java/Spring Boot‚Äã","type":1,"pageTitle":"üìà Prometheus & Grafana - Monitoring Complet","url":"/docs/devops/observability/prometheus-grafana#dashboard-javaspring-boot","content":" grafana/dashboards/java-spring-boot.json { &quot;dashboard&quot;: { &quot;title&quot;: &quot;Java Spring Boot Monitoring&quot;, &quot;panels&quot;: [ { &quot;title&quot;: &quot;Request Rate&quot;, &quot;targets&quot;: [ { &quot;expr&quot;: &quot;rate(http_server_requests_seconds_count[5m])&quot; } ] }, { &quot;title&quot;: &quot;Error Rate&quot;, &quot;targets&quot;: [ { &quot;expr&quot;: &quot;rate(http_server_requests_seconds_count{status=~\\&quot;5..\\&quot;}[5m])&quot; } ] }, { &quot;title&quot;: &quot;Response Time (p95)&quot;, &quot;targets&quot;: [ { &quot;expr&quot;: &quot;histogram_quantile(0.95, rate(http_server_requests_seconds_bucket[5m]))&quot; } ] }, { &quot;title&quot;: &quot;JVM Memory&quot;, &quot;targets&quot;: [ { &quot;expr&quot;: &quot;jvm_memory_used_bytes{area=\\&quot;heap\\&quot;}&quot; }, { &quot;expr&quot;: &quot;jvm_memory_max_bytes{area=\\&quot;heap\\&quot;}&quot; } ] }, { &quot;title&quot;: &quot;GC Activity&quot;, &quot;targets&quot;: [ { &quot;expr&quot;: &quot;rate(jvm_gc_pause_seconds_count[5m])&quot; } ] }, { &quot;title&quot;: &quot;Thread Count&quot;, &quot;targets&quot;: [ { &quot;expr&quot;: &quot;jvm_threads_live_threads&quot; } ] }, { &quot;title&quot;: &quot;Database Connections&quot;, &quot;targets&quot;: [ { &quot;expr&quot;: &quot;hikaricp_connections_active&quot; }, { &quot;expr&quot;: &quot;hikaricp_connections&quot; } ] }, { &quot;title&quot;: &quot;Top Slow Endpoints&quot;, &quot;targets&quot;: [ { &quot;expr&quot;: &quot;topk(10, histogram_quantile(0.95, rate(http_server_requests_seconds_bucket[5m])))&quot; } ] } ] } }   ","version":"Next","tagName":"h3"},{"title":"Dashboard Drupal‚Äã","type":1,"pageTitle":"üìà Prometheus & Grafana - Monitoring Complet","url":"/docs/devops/observability/prometheus-grafana#dashboard-drupal","content":" grafana/dashboards/drupal-php.json { &quot;dashboard&quot;: { &quot;title&quot;: &quot;Drupal &amp; PHP-FPM Monitoring&quot;, &quot;panels&quot;: [ { &quot;title&quot;: &quot;PHP-FPM Active Processes&quot;, &quot;targets&quot;: [ { &quot;expr&quot;: &quot;phpfpm_active_processes&quot; } ] }, { &quot;title&quot;: &quot;PHP-FPM Pool Usage&quot;, &quot;targets&quot;: [ { &quot;expr&quot;: &quot;(phpfpm_active_processes / phpfpm_max_children) * 100&quot; } ] }, { &quot;title&quot;: &quot;PHP Memory Usage&quot;, &quot;targets&quot;: [ { &quot;expr&quot;: &quot;phpfpm_process_last_request_memory&quot; } ] }, { &quot;title&quot;: &quot;Nginx Request Rate&quot;, &quot;targets&quot;: [ { &quot;expr&quot;: &quot;rate(nginx_http_requests_total[5m])&quot; } ] }, { &quot;title&quot;: &quot;Database Query Time&quot;, &quot;targets&quot;: [ { &quot;expr&quot;: &quot;rate(mysql_global_status_queries[5m])&quot; } ] }, { &quot;title&quot;: &quot;Cache Hit Rate&quot;, &quot;targets&quot;: [ { &quot;expr&quot;: &quot;rate(redis_keyspace_hits_total[5m]) / (rate(redis_keyspace_hits_total[5m]) + rate(redis_keyspace_misses_total[5m]))&quot; } ] }, { &quot;title&quot;: &quot;Slow Queries&quot;, &quot;targets&quot;: [ { &quot;expr&quot;: &quot;rate(mysql_global_status_slow_queries[5m])&quot; } ] } ] } }   ","version":"Next","tagName":"h3"},{"title":"Dashboard Angular‚Äã","type":1,"pageTitle":"üìà Prometheus & Grafana - Monitoring Complet","url":"/docs/devops/observability/prometheus-grafana#dashboard-angular","content":" grafana/dashboards/angular-frontend.json { &quot;dashboard&quot;: { &quot;title&quot;: &quot;Angular Frontend Monitoring&quot;, &quot;panels&quot;: [ { &quot;title&quot;: &quot;Page Load Time&quot;, &quot;targets&quot;: [ { &quot;expr&quot;: &quot;histogram_quantile(0.95, rate(http_request_duration_seconds_bucket{path=\\&quot;/\\&quot;}[5m]))&quot; } ] }, { &quot;title&quot;: &quot;API Response Times&quot;, &quot;targets&quot;: [ { &quot;expr&quot;: &quot;histogram_quantile(0.95, rate(http_request_duration_seconds_bucket{path=~\\&quot;/api/.*\\&quot;}[5m]))&quot; } ] }, { &quot;title&quot;: &quot;Error Rate by Status&quot;, &quot;targets&quot;: [ { &quot;expr&quot;: &quot;sum by(status) (rate(nginx_http_requests_total{status=~\\&quot;4..|5..\\&quot;}[5m]))&quot; } ] }, { &quot;title&quot;: &quot;Bandwidth Usage&quot;, &quot;targets&quot;: [ { &quot;expr&quot;: &quot;rate(nginx_http_response_size_bytes_sum[5m])&quot; } ] }, { &quot;title&quot;: &quot;Active Connections&quot;, &quot;targets&quot;: [ { &quot;expr&quot;: &quot;nginx_connections_active&quot; } ] }, { &quot;title&quot;: &quot;Request by Country&quot;, &quot;targets&quot;: [ { &quot;expr&quot;: &quot;sum by(country) (rate(nginx_http_requests_total[5m]))&quot; } ] } ] } }   Suite dans le prochain fichier... (Dashboard Infrastructure + Int√©gration applications) ","version":"Next","tagName":"h3"},{"title":"Communication","type":0,"sectionRef":"#","url":"/docs/microservices/communication","content":"Communication","keywords":"","version":"Next"},{"title":"üöÄ Plateforme DevSecOps - Introduction","type":0,"sectionRef":"#","url":"/docs/intro","content":"","keywords":"","version":"Next"},{"title":"üéØ Objectif‚Äã","type":1,"pageTitle":"üöÄ Plateforme DevSecOps - Introduction","url":"/docs/intro#-objectif","content":" Standardiser et industrialiser le d√©veloppement et le d√©ploiement de nos applications Java/Spring Boot et Drupal/PHP sur des environnements h√©t√©rog√®nes :  ‚òÅÔ∏è Cloud Public (AWS, Azure, GCP)üîí Cloud Priv√©üõ°Ô∏è SecNumCloud (qualification ANSSI)üñ•Ô∏è IaaS (Infrastructure as a Service)‚öôÔ∏è KaaS (Kubernetes as a Service)üè¢ On-Premise  ","version":"Next","tagName":"h2"},{"title":"‚ú® Caract√©ristiques de la plateforme‚Äã","type":1,"pageTitle":"üöÄ Plateforme DevSecOps - Introduction","url":"/docs/intro#-caract√©ristiques-de-la-plateforme","content":" ","version":"Next","tagName":"h2"},{"title":"üîÑ CI/CD Automatis√©e‚Äã","type":1,"pageTitle":"üöÄ Plateforme DevSecOps - Introduction","url":"/docs/intro#-cicd-automatis√©e","content":" GitHub Actions / GitLab CI / JenkinsPipelines standardis√©s pour Java et DrupalD√©ploiements multi-environnementsRollback automatique  ","version":"Next","tagName":"h3"},{"title":"üîí S√©curit√© (DevSecOps)‚Äã","type":1,"pageTitle":"üöÄ Plateforme DevSecOps - Introduction","url":"/docs/intro#-s√©curit√©-devsecops","content":" Trivy : Scan de vuln√©rabilit√©s conteneursSBOM : Software Bill of MaterialsSecrets Management : Vault, SOPSCompliance : Policies as Code  ","version":"Next","tagName":"h3"},{"title":"üìä Qualit√© de Code‚Äã","type":1,"pageTitle":"üöÄ Plateforme DevSecOps - Introduction","url":"/docs/intro#-qualit√©-de-code","content":" SonarQube : Analyse statiqueQuality Gates : Seuils de qualit√©Code Coverage : &gt;80%Tests automatis√©s : Unitaires, int√©gration, e2e  ","version":"Next","tagName":"h3"},{"title":"üì¶ Gestion des Artefacts‚Äã","type":1,"pageTitle":"üöÄ Plateforme DevSecOps - Introduction","url":"/docs/intro#-gestion-des-artefacts","content":" Nexus Repository : Maven, npm, DockerJFrog Artifactory : Alternative enterpriseContainer Registry : Images Docker s√©curis√©es  ","version":"Next","tagName":"h3"},{"title":"üèóÔ∏è Infrastructure as Code‚Äã","type":1,"pageTitle":"üöÄ Plateforme DevSecOps - Introduction","url":"/docs/intro#Ô∏è-infrastructure-as-code","content":" Terraform : Provisioning multi-cloudAnsible : Configuration managementModules r√©utilisables : Standards d'infrastructure  ","version":"Next","tagName":"h3"},{"title":"üîß Automatisation‚Äã","type":1,"pageTitle":"üöÄ Plateforme DevSecOps - Introduction","url":"/docs/intro#-automatisation","content":" Renovate : Mises √† jour automatiques des d√©pendancesDependabot : Alternative GitHubSemantic Versioning : Versioning automatique  ","version":"Next","tagName":"h3"},{"title":"üìà Observabilit√©‚Äã","type":1,"pageTitle":"üöÄ Plateforme DevSecOps - Introduction","url":"/docs/intro#-observabilit√©","content":" Prometheus : M√©triquesGrafana : VisualisationELK Stack : Logs centralis√©sAPM : Application Performance Monitoring  ","version":"Next","tagName":"h3"},{"title":"üèóÔ∏è Architecture Globale‚Äã","type":1,"pageTitle":"üöÄ Plateforme DevSecOps - Introduction","url":"/docs/intro#Ô∏è-architecture-globale","content":"   ","version":"Next","tagName":"h2"},{"title":"üìã Pr√©requis‚Äã","type":1,"pageTitle":"üöÄ Plateforme DevSecOps - Introduction","url":"/docs/intro#-pr√©requis","content":" ","version":"Next","tagName":"h2"},{"title":"Pour les d√©veloppeurs‚Äã","type":1,"pageTitle":"üöÄ Plateforme DevSecOps - Introduction","url":"/docs/intro#pour-les-d√©veloppeurs","content":" GitDocker DesktopIDE (IntelliJ IDEA / VS Code / PHPStorm)Compte GitHub/GitLabAcc√®s VPN (si n√©cessaire)  ","version":"Next","tagName":"h3"},{"title":"Pour les DevOps‚Äã","type":1,"pageTitle":"üöÄ Plateforme DevSecOps - Introduction","url":"/docs/intro#pour-les-devops","content":" Terraform &gt;= 1.5Ansible &gt;= 2.15kubectl &gt;= 1.28helm &gt;= 3.12AWS/Azure/GCP CLIAcc√®s aux clouds cibles  ","version":"Next","tagName":"h3"},{"title":"üöÄ D√©marrage rapide‚Äã","type":1,"pageTitle":"üöÄ Plateforme DevSecOps - Introduction","url":"/docs/intro#-d√©marrage-rapide","content":" ","version":"Next","tagName":"h2"},{"title":"Stack Java‚Äã","type":1,"pageTitle":"üöÄ Plateforme DevSecOps - Introduction","url":"/docs/intro#stack-java","content":" # Cloner le template git clone https://github.com/votre-org/java-template.git # Construire l'application ./mvnw clean install # Lancer en local ./mvnw spring-boot:run   ","version":"Next","tagName":"h3"},{"title":"Stack Drupal‚Äã","type":1,"pageTitle":"üöÄ Plateforme DevSecOps - Introduction","url":"/docs/intro#stack-drupal","content":" # Cloner le template git clone https://github.com/votre-org/drupal-template.git # Installer les d√©pendances composer install # Lancer avec Docker docker-compose up -d   ","version":"Next","tagName":"h3"},{"title":"üìö Structure de la documentation‚Äã","type":1,"pageTitle":"üöÄ Plateforme DevSecOps - Introduction","url":"/docs/intro#-structure-de-la-documentation","content":" Vue d'ensemble : Architecture et standardsStack Java : Guides sp√©cifiques Java/Spring BootStack Drupal : Guides sp√©cifiques Drupal/PHPCI/CD : Pipelines et automatisationS√©curit√© : DevSecOps et complianceQualit√© : SonarQube et quality gatesArtefacts : Nexus et ArtifactoryInfrastructure : Terraform et AnsibleEnvironnements : Configuration multi-environnementsOutils : Renovate, Git workflow  ","version":"Next","tagName":"h2"},{"title":"üéì Parcours recommand√©s‚Äã","type":1,"pageTitle":"üöÄ Plateforme DevSecOps - Introduction","url":"/docs/intro#-parcours-recommand√©s","content":" ","version":"Next","tagName":"h2"},{"title":"üìû Support et contribution‚Äã","type":1,"pageTitle":"üöÄ Plateforme DevSecOps - Introduction","url":"/docs/intro#-support-et-contribution","content":" Issues : GitHub IssuesDiscussions : GitHub DiscussionsEmail : devops@votre-org.comSlack : #devops-support  ","version":"Next","tagName":"h2"},{"title":"üîÑ Mises √† jour‚Äã","type":1,"pageTitle":"üöÄ Plateforme DevSecOps - Introduction","url":"/docs/intro#-mises-√†-jour","content":" Cette documentation est mise √† jour r√©guli√®rement. Consultez le CHANGELOG pour les derni√®res modifications.   ","version":"Next","tagName":"h2"},{"title":"Data Management","type":0,"sectionRef":"#","url":"/docs/microservices/data-management","content":"","keywords":"","version":"Next"},{"title":"Introduction‚Äã","type":1,"pageTitle":"Data Management","url":"/docs/microservices/data-management#introduction","content":" La gestion des donn√©es dans une architecture microservices est un d√©fi majeur. Contrairement aux monolithes avec une seule base de donn√©es, les microservices n√©cessitent des strat√©gies sp√©cifiques pour maintenir la coh√©rence tout en pr√©servant l'autonomie des services.  ","version":"Next","tagName":"h2"},{"title":"üéØ Principe fondamental‚Äã","type":1,"pageTitle":"Data Management","url":"/docs/microservices/data-management#-principe-fondamental","content":" Database per Service Chaque microservice poss√®de sa propre base de donn√©es et ne doit jamais acc√©der directement √† celle d'un autre service.  ","version":"Next","tagName":"h2"},{"title":"üîó Pourquoi s√©parer les bases de donn√©es ?‚Äã","type":1,"pageTitle":"Data Management","url":"/docs/microservices/data-management#-pourquoi-s√©parer-les-bases-de-donn√©es-","content":" ","version":"Next","tagName":"h2"},{"title":"1. D√©couplage‚Äã","type":1,"pageTitle":"Data Management","url":"/docs/microservices/data-management#1-d√©couplage","content":" Sch√©ma ind√©pendant : modifications sans coordination entre √©quipesD√©ploiements autonomes : pas de migration BDD bloquante√âvolution technologique : chaque service choisit sa stack  ","version":"Next","tagName":"h3"},{"title":"2. Scalabilit√©‚Äã","type":1,"pageTitle":"Data Management","url":"/docs/microservices/data-management#2-scalabilit√©","content":" Performance cibl√©e : optimisation par serviceCharge distribu√©e : pas de goulot d'√©tranglement uniqueScaling ind√©pendant : dimensionnement adapt√© aux besoins  ","version":"Next","tagName":"h3"},{"title":"3. R√©silience‚Äã","type":1,"pageTitle":"Data Management","url":"/docs/microservices/data-management#3-r√©silience","content":" Isolation des pannes : une BDD en panne n'affecte qu'un serviceBlast radius limit√© : corruption de donn√©es localis√©e  ","version":"Next","tagName":"h3"},{"title":"üóÑÔ∏è Strat√©gies de s√©paration‚Äã","type":1,"pageTitle":"Data Management","url":"/docs/microservices/data-management#Ô∏è-strat√©gies-de-s√©paration","content":" Niveau\tDescription\tAvantages\tInconv√©nientsSch√©ma d√©di√©\tSch√©mas diff√©rents, m√™me serveur BDD\tSimple, co√ªt r√©duit\tAcc√®s non contr√¥l√©s possibles Base par service\tBases s√©par√©es, serveur partag√©\tS√©paration logique claire\tCouplage physique Serveur par service\tBase + serveur d√©di√©s\tIsolation maximale\tCo√ªt et complexit√© √©lev√©s  ","version":"Next","tagName":"h2"},{"title":"üß© Polyglot Persistence‚Äã","type":1,"pageTitle":"Data Management","url":"/docs/microservices/data-management#-polyglot-persistence","content":" Chaque service peut choisir la technologie de base de donn√©es la plus adapt√©e √† son besoin.  ","version":"Next","tagName":"h2"},{"title":"Exemples‚Äã","type":1,"pageTitle":"Data Management","url":"/docs/microservices/data-management#exemples","content":" Service\tType de donn√©es\tTechnologie recommand√©eCatalogue produits\tDocuments structur√©s\tMongoDB, PostgreSQL (JSONB) Panier\tCache temporaire, TTL\tRedis, Memcached Recommandations\tGraphe de relations\tNeo4j, Amazon Neptune Transactions\tACID strict\tPostgreSQL, MySQL Logs/Metrics\tTime-series\tInfluxDB, TimescaleDB Search\tFull-text search\tElasticsearch, OpenSearch  ","version":"Next","tagName":"h3"},{"title":"‚ö†Ô∏è D√©fis et solutions‚Äã","type":1,"pageTitle":"Data Management","url":"/docs/microservices/data-management#Ô∏è-d√©fis-et-solutions","content":" ","version":"Next","tagName":"h2"},{"title":"1. Transactions distribu√©es‚Äã","type":1,"pageTitle":"Data Management","url":"/docs/microservices/data-management#1-transactions-distribu√©es","content":" Probl√®me : Pas de transaction ACID globale entre services  Solutions :  [Saga Pattern] - Compensation en cas d'√©chec[Event Sourcing] - Source de v√©rit√© uniqueEventual Consistency - Accepter la coh√©rence diff√©r√©e  ","version":"Next","tagName":"h3"},{"title":"2. Requ√™tes multi-services‚Äã","type":1,"pageTitle":"Data Management","url":"/docs/microservices/data-management#2-requ√™tes-multi-services","content":" Probl√®me : Impossible de faire un JOIN entre bases  Solutions :  API Composition‚Äã  Le service agr√©gateur interroge plusieurs services  def get_order_details(order_id): order = order_service.get(order_id) user = user_service.get(order.user_id) products = product_service.get_many(order.product_ids) return aggregate(order, user, products)   CQRS (Command Query Responsibility Segregation)‚Äã  Vues mat√©rialis√©es en lecture  Base d'√©criture normalis√©e par serviceBase de lecture d√©normalis√©e pour requ√™tes complexes  Data Duplication‚Äã  Dupliquer les donn√©es essentielles  { &quot;order_id&quot;: &quot;123&quot;, &quot;user_id&quot;: &quot;456&quot;, &quot;user_name&quot;: &quot;John Doe&quot;, // Dupliqu√© du user service &quot;user_email&quot;: &quot;john@example.com&quot; // Dupliqu√© }   ","version":"Next","tagName":"h3"},{"title":"3. Coh√©rence des donn√©es‚Äã","type":1,"pageTitle":"Data Management","url":"/docs/microservices/data-management#3-coh√©rence-des-donn√©es","content":" Probl√®me : Donn√©es synchronis√©es entre services  Solutions :  Event-Driven Updates‚Äã  // User Service publie un √©v√©nement eventBus.publish('user.updated', { user_id: '456', name: 'Jane Doe', email: 'jane@example.com' }); // Order Service √©coute et met √† jour sa copie eventBus.subscribe('user.updated', (event) =&gt; { updateUserInfoInOrders(event.user_id, event); });   Change Data Capture (CDC)‚Äã  Debezium capture les changements dans la BDDPublie automatiquement les √©v√©nementsServices consommateurs se synchronisent  ","version":"Next","tagName":"h3"},{"title":"üîÑ Patterns de coh√©rence‚Äã","type":1,"pageTitle":"Data Management","url":"/docs/microservices/data-management#-patterns-de-coh√©rence","content":" ","version":"Next","tagName":"h2"},{"title":"Eventual Consistency‚Äã","type":1,"pageTitle":"Data Management","url":"/docs/microservices/data-management#eventual-consistency","content":" Accepter que les donn√©es soient temporairement incoh√©rentes  Avantages :  Haute disponibilit√©Meilleure performanceScalabilit√©  Inconv√©nients :  Complexit√© m√©tierUI doit g√©rer l'√©tat transitoire  Exemple : Syst√®me bancaire  1. D√©bit compte A ‚Üí succ√®s 2. Cr√©dit compte B ‚Üí succ√®s (avec d√©lai) 3. √âtat transitoire visible pendant quelques secondes   ","version":"Next","tagName":"h3"},{"title":"Strong Consistency‚Äã","type":1,"pageTitle":"Data Management","url":"/docs/microservices/data-management#strong-consistency","content":" Coh√©rence imm√©diate (2PC, Saga synchrone)  Usage : Transactions critiques uniquement (paiements, stocks)  ","version":"Next","tagName":"h3"},{"title":"üìä Monitoring et observabilit√©‚Äã","type":1,"pageTitle":"Data Management","url":"/docs/microservices/data-management#-monitoring-et-observabilit√©","content":" ","version":"Next","tagName":"h2"},{"title":"M√©triques importantes‚Äã","type":1,"pageTitle":"Data Management","url":"/docs/microservices/data-management#m√©triques-importantes","content":" Replication lag : d√©lai de synchronisationConsistency violations : incoh√©rences d√©tect√©esQuery performance : temps de r√©ponse inter-servicesDatabase connection pool : saturation  ","version":"Next","tagName":"h3"},{"title":"Outils‚Äã","type":1,"pageTitle":"Data Management","url":"/docs/microservices/data-management#outils","content":" Distributed Tracing : Jaeger, ZipkinLogs centralis√©s : ELK Stack, SplunkM√©triques : Prometheus, Grafana  ","version":"Next","tagName":"h3"},{"title":"‚úÖ Bonnes pratiques‚Äã","type":1,"pageTitle":"Data Management","url":"/docs/microservices/data-management#-bonnes-pratiques","content":" Commencer simple : une base partag√©e initialement, puis s√©parer progressivementD√©finir les boundaries : aligner les services avec les domaines m√©tier (DDD)Accepter la duplication : pr√©f√©rer la duplication au couplageEventual consistency by default : coh√©rence forte seulement si n√©cessaireVersionner les sch√©mas : migrations sans downtimeAudit trail : tra√ßabilit√© des changements critiques  ","version":"Next","tagName":"h2"},{"title":"Ressources‚Äã","type":1,"pageTitle":"Data Management","url":"/docs/microservices/data-management#ressources","content":" Pattern: Database per serviceMartin Fowler - Polyglot PersistenceEvent-Driven Architecture ","version":"Next","tagName":"h2"},{"title":"Infrastructure","type":0,"sectionRef":"#","url":"/docs/microservices/infrastructure","content":"Infrastructure","keywords":"","version":"Next"},{"title":"Types de communication","type":0,"sectionRef":"#","url":"/docs/microservices/communication/types","content":"","keywords":"","version":"Next"},{"title":"Vue d'ensemble‚Äã","type":1,"pageTitle":"Types de communication","url":"/docs/microservices/communication/types#vue-densemble","content":" Dans une architecture microservices, les services doivent communiquer entre eux. Le choix du type de communication impacte directement la r√©silience, la performance et la complexit√© du syst√®me.  ","version":"Next","tagName":"h2"},{"title":"üß≠ Deux dimensions‚Äã","type":1,"pageTitle":"Types de communication","url":"/docs/microservices/communication/types#-deux-dimensions","content":" ","version":"Next","tagName":"h2"},{"title":"1. Relation‚Äã","type":1,"pageTitle":"Types de communication","url":"/docs/microservices/communication/types#1-relation","content":" Type\tDescription\tCas d'usageUn-√†-un\tUne requ√™te ‚Üí un service\tConsultation de donn√©es, op√©rations CRUD Un-√†-plusieurs\tUne requ√™te ‚Üí plusieurs services\tNotification d'√©v√©nements, broadcasting  ","version":"Next","tagName":"h3"},{"title":"2. Synchronicit√©‚Äã","type":1,"pageTitle":"Types de communication","url":"/docs/microservices/communication/types#2-synchronicit√©","content":" Type\tDescription\tCaract√©ristiquesSynchrone\tLe client attend la r√©ponse\tCouplage temporel fort, plus simple Asynchrone\tLe client n'attend pas\tD√©couplage temporel, plus r√©silient  ","version":"Next","tagName":"h3"},{"title":"üì° Communication synchrone‚Äã","type":1,"pageTitle":"Types de communication","url":"/docs/microservices/communication/types#-communication-synchrone","content":" ","version":"Next","tagName":"h2"},{"title":"REST (HTTP/JSON)‚Äã","type":1,"pageTitle":"Types de communication","url":"/docs/microservices/communication/types#rest-httpjson","content":" Avantages :  Standard universel, facile √† d√©buggerLarge √©cosyst√®me d'outilsLisibilit√© des donn√©es (JSON)  Inconv√©nients :  Verbeux (overhead r√©seau)Typ√© faiblementPerformance moindre que gRPC  Quand l'utiliser :  APIs publiques ou externesInt√©gration avec des syst√®mes tiersPrototypage rapide  GET /api/users/123 HTTP/1.1 Host: user-service.internal Accept: application/json   ","version":"Next","tagName":"h3"},{"title":"gRPC (HTTP/2 + Protobuf)‚Äã","type":1,"pageTitle":"Types de communication","url":"/docs/microservices/communication/types#grpc-http2--protobuf","content":" Avantages :  Tr√®s performant (s√©rialisation binaire)Typage fort avec ProtobufStreaming bidirectionnel natifG√©n√©ration automatique de clients  Inconv√©nients :  Moins lisible (binaire)N√©cessite compilation de sch√©masDebugging plus complexe  Quand l'utiliser :  Communication interne entre microservicesBesoins de performance √©lev√©sStreaming de donn√©es  service UserService { rpc GetUser (GetUserRequest) returns (User); rpc StreamUsers (stream UserRequest) returns (stream User); }   ","version":"Next","tagName":"h3"},{"title":"GraphQL‚Äã","type":1,"pageTitle":"Types de communication","url":"/docs/microservices/communication/types#graphql","content":" Avantages :  Le client demande uniquement les donn√©es n√©cessairesPas de sur-fetching ou under-fetchingIntrospection du sch√©ma  Inconv√©nients :  Complexit√© c√¥t√© serveurCaching plus difficileCourbe d'apprentissage  Quand l'utiliser :  APIs BFF (Backend for Frontend)Clients avec besoins vari√©sAgr√©gation de plusieurs sources  ","version":"Next","tagName":"h3"},{"title":"üì® Communication asynchrone‚Äã","type":1,"pageTitle":"Types de communication","url":"/docs/microservices/communication/types#-communication-asynchrone","content":" ","version":"Next","tagName":"h2"},{"title":"Message Queue (RabbitMQ, AWS SQS)‚Äã","type":1,"pageTitle":"Types de communication","url":"/docs/microservices/communication/types#message-queue-rabbitmq-aws-sqs","content":" Concept : File d'attente avec garantie de livraison  Avantages :  D√©couplage temporel completRetry automatiqueGestion de la charge (buffering)  Inconv√©nients :  Latence plus √©lev√©eComplexit√© op√©rationnelleOrdre de traitement √† g√©rer  Quand l'utiliser :  T√¢ches asynchrones (emails, notifications)Lissage de chargeGarantie de traitement  # Producer channel.basic_publish( exchange='', routing_key='user.created', body=json.dumps({'user_id': 123}) )   ","version":"Next","tagName":"h3"},{"title":"Event Streaming (Kafka, AWS Kinesis)‚Äã","type":1,"pageTitle":"Types de communication","url":"/docs/microservices/communication/types#event-streaming-kafka-aws-kinesis","content":" Concept : Log distribu√© d'√©v√©nements  Avantages :  Replay possible des √©v√©nementsTr√®s haut d√©bitPersistance des √©v√©nementsPartitionnement pour scalabilit√©  Inconv√©nients :  Complexit√© op√©rationnelle √©lev√©eOverhead pour petits volumesRequiert expertise  Quand l'utiliser :  Event SourcingAnalytics en temps r√©elInt√©gration de donn√©es (CDC)Volumes importants  ProducerRecord&lt;String, String&gt; record = new ProducerRecord&lt;&gt;(&quot;user-events&quot;, &quot;user.created&quot;, payload); producer.send(record);   ","version":"Next","tagName":"h3"},{"title":"Pub/Sub (Redis Pub/Sub, Google Pub/Sub)‚Äã","type":1,"pageTitle":"Types de communication","url":"/docs/microservices/communication/types#pubsub-redis-pubsub-google-pubsub","content":" Concept : Diffusion √† plusieurs abonn√©s  Avantages :  Broadcast simpleFaible latencePas de persistance (l√©ger)  Inconv√©nients :  Pas de garantie de livraison (Redis)Pas de replay  Quand l'utiliser :  Notifications temps r√©elInvalidation de cacheBroadcasting d'√©v√©nements non critiques  ","version":"Next","tagName":"h3"},{"title":"üéØ Patterns de communication‚Äã","type":1,"pageTitle":"Types de communication","url":"/docs/microservices/communication/types#-patterns-de-communication","content":" ","version":"Next","tagName":"h2"},{"title":"Request/Response‚Äã","type":1,"pageTitle":"Types de communication","url":"/docs/microservices/communication/types#requestresponse","content":" Le client envoie une requ√™te et attend une r√©ponse    Usage : Lecture de donn√©es, op√©rations CRUD  ","version":"Next","tagName":"h3"},{"title":"Fire and Forget‚Äã","type":1,"pageTitle":"Types de communication","url":"/docs/microservices/communication/types#fire-and-forget","content":" Envoi sans attendre de r√©ponse    Usage : Logs, analytics, notifications  ","version":"Next","tagName":"h3"},{"title":"Publish/Subscribe‚Äã","type":1,"pageTitle":"Types de communication","url":"/docs/microservices/communication/types#publishsubscribe","content":" Un √©metteur, plusieurs r√©cepteurs    Usage : Event-driven architecture, CQRS  ","version":"Next","tagName":"h3"},{"title":"üìä Tableau de comparaison‚Äã","type":1,"pageTitle":"Types de communication","url":"/docs/microservices/communication/types#-tableau-de-comparaison","content":" Crit√®re\tREST\tgRPC\tMessage Queue\tKafkaPerformance\t‚≠ê‚≠ê‚≠ê\t‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê\t‚≠ê‚≠ê‚≠ê\t‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê Simplicit√©\t‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê\t‚≠ê‚≠ê‚≠ê\t‚≠ê‚≠ê‚≠ê\t‚≠ê‚≠ê D√©couplage\t‚≠ê‚≠ê\t‚≠ê‚≠ê\t‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê\t‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê Debugging\t‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê\t‚≠ê‚≠ê‚≠ê\t‚≠ê‚≠ê\t‚≠ê‚≠ê Streaming\t‚≠ê‚≠ê\t‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê\t‚≠ê‚≠ê\t‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê  ","version":"Next","tagName":"h2"},{"title":"üé® Recommandations‚Äã","type":1,"pageTitle":"Types de communication","url":"/docs/microservices/communication/types#-recommandations","content":" APIs externes ‚Üí REST avec OpenAPICommunication interne haute performance ‚Üí gRPC√âv√©nements m√©tier ‚Üí Kafka ou Event BusT√¢ches asynchrones ‚Üí Message Queue (RabbitMQ, SQS)Frontend flexible ‚Üí GraphQL (BFF)  ","version":"Next","tagName":"h2"},{"title":"Ressources‚Äã","type":1,"pageTitle":"Types de communication","url":"/docs/microservices/communication/types#ressources","content":" gRPC vs RESTKafka DocumentationUnderstanding Message Queues ","version":"Next","tagName":"h2"},{"title":"üèóÔ∏è Terraform - Infrastructure Multi-Cloud","type":0,"sectionRef":"#","url":"/docs/infrastructure/iac/terraform/terraform-aws","content":"","keywords":"","version":"Next"},{"title":"üéØ Architecture Terraform‚Äã","type":1,"pageTitle":"üèóÔ∏è Terraform - Infrastructure Multi-Cloud","url":"/docs/infrastructure/iac/terraform/terraform-aws#-architecture-terraform","content":"   ","version":"Next","tagName":"h2"},{"title":"üìÅ Structure du projet‚Äã","type":1,"pageTitle":"üèóÔ∏è Terraform - Infrastructure Multi-Cloud","url":"/docs/infrastructure/iac/terraform/terraform-aws#-structure-du-projet","content":" terraform/ ‚îú‚îÄ‚îÄ modules/ # Modules r√©utilisables ‚îÇ ‚îú‚îÄ‚îÄ vpc/ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ main.tf ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ variables.tf ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ outputs.tf ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ README.md ‚îÇ ‚îú‚îÄ‚îÄ eks/ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ main.tf ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ variables.tf ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ outputs.tf ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ README.md ‚îÇ ‚îú‚îÄ‚îÄ rds/ ‚îÇ ‚îú‚îÄ‚îÄ s3/ ‚îÇ ‚îú‚îÄ‚îÄ ecr/ ‚îÇ ‚îú‚îÄ‚îÄ alb/ ‚îÇ ‚îî‚îÄ‚îÄ security-groups/ ‚îú‚îÄ‚îÄ environments/ ‚îÇ ‚îú‚îÄ‚îÄ dev/ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ main.tf ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ terraform.tfvars ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ backend.tf ‚îÇ ‚îú‚îÄ‚îÄ staging/ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ main.tf ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ terraform.tfvars ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ backend.tf ‚îÇ ‚îî‚îÄ‚îÄ prod/ ‚îÇ ‚îú‚îÄ‚îÄ main.tf ‚îÇ ‚îú‚îÄ‚îÄ terraform.tfvars ‚îÇ ‚îî‚îÄ‚îÄ backend.tf ‚îú‚îÄ‚îÄ global/ ‚îÇ ‚îú‚îÄ‚îÄ s3/ # Backend S3 ‚îÇ ‚îú‚îÄ‚îÄ iam/ # IAM roles/policies ‚îÇ ‚îî‚îÄ‚îÄ route53/ # DNS zones ‚îî‚îÄ‚îÄ scripts/ ‚îú‚îÄ‚îÄ init-backend.sh ‚îú‚îÄ‚îÄ plan-all.sh ‚îî‚îÄ‚îÄ apply-all.sh   ","version":"Next","tagName":"h2"},{"title":"üåê Module VPC Multi-Cloud‚Äã","type":1,"pageTitle":"üèóÔ∏è Terraform - Infrastructure Multi-Cloud","url":"/docs/infrastructure/iac/terraform/terraform-aws#-module-vpc-multi-cloud","content":" ","version":"Next","tagName":"h2"},{"title":"AWS VPC Module‚Äã","type":1,"pageTitle":"üèóÔ∏è Terraform - Infrastructure Multi-Cloud","url":"/docs/infrastructure/iac/terraform/terraform-aws#aws-vpc-module","content":" modules/vpc-aws/main.tf terraform { required_version = &quot;&gt;= 1.5&quot; required_providers { aws = { source = &quot;hashicorp/aws&quot; version = &quot;~&gt; 5.0&quot; } } } variable &quot;environment&quot; { description = &quot;Environment name&quot; type = string } variable &quot;vpc_cidr&quot; { description = &quot;CIDR block for VPC&quot; type = string default = &quot;10.0.0.0/16&quot; } variable &quot;availability_zones&quot; { description = &quot;List of AZs&quot; type = list(string) default = [&quot;eu-west-1a&quot;, &quot;eu-west-1b&quot;, &quot;eu-west-1c&quot;] } variable &quot;enable_nat_gateway&quot; { description = &quot;Enable NAT Gateway&quot; type = bool default = true } variable &quot;single_nat_gateway&quot; { description = &quot;Use single NAT Gateway (dev)&quot; type = bool default = false } variable &quot;tags&quot; { description = &quot;Additional tags&quot; type = map(string) default = {} } # VPC resource &quot;aws_vpc&quot; &quot;main&quot; { cidr_block = var.vpc_cidr enable_dns_hostnames = true enable_dns_support = true tags = merge( { Name = &quot;${var.environment}-vpc&quot; Environment = var.environment ManagedBy = &quot;Terraform&quot; }, var.tags ) } # Internet Gateway resource &quot;aws_internet_gateway&quot; &quot;main&quot; { vpc_id = aws_vpc.main.id tags = { Name = &quot;${var.environment}-igw&quot; Environment = var.environment } } # Public Subnets resource &quot;aws_subnet&quot; &quot;public&quot; { count = length(var.availability_zones) vpc_id = aws_vpc.main.id cidr_block = cidrsubnet(var.vpc_cidr, 4, count.index) availability_zone = var.availability_zones[count.index] map_public_ip_on_launch = true tags = { Name = &quot;${var.environment}-public-${count.index + 1}&quot; Environment = var.environment Tier = &quot;public&quot; &quot;kubernetes.io/role/elb&quot; = &quot;1&quot; } } # Private Subnets (Application) resource &quot;aws_subnet&quot; &quot;private_app&quot; { count = length(var.availability_zones) vpc_id = aws_vpc.main.id cidr_block = cidrsubnet(var.vpc_cidr, 4, count.index + 3) availability_zone = var.availability_zones[count.index] tags = { Name = &quot;${var.environment}-private-app-${count.index + 1}&quot; Environment = var.environment Tier = &quot;private-app&quot; &quot;kubernetes.io/role/internal-elb&quot; = &quot;1&quot; } } # Private Subnets (Database) resource &quot;aws_subnet&quot; &quot;private_db&quot; { count = length(var.availability_zones) vpc_id = aws_vpc.main.id cidr_block = cidrsubnet(var.vpc_cidr, 4, count.index + 6) availability_zone = var.availability_zones[count.index] tags = { Name = &quot;${var.environment}-private-db-${count.index + 1}&quot; Environment = var.environment Tier = &quot;private-db&quot; } } # Elastic IPs for NAT Gateways resource &quot;aws_eip&quot; &quot;nat&quot; { count = var.enable_nat_gateway ? (var.single_nat_gateway ? 1 : length(var.availability_zones)) : 0 domain = &quot;vpc&quot; tags = { Name = &quot;${var.environment}-nat-eip-${count.index + 1}&quot; Environment = var.environment } depends_on = [aws_internet_gateway.main] } # NAT Gateways resource &quot;aws_nat_gateway&quot; &quot;main&quot; { count = var.enable_nat_gateway ? (var.single_nat_gateway ? 1 : length(var.availability_zones)) : 0 allocation_id = aws_eip.nat[count.index].id subnet_id = aws_subnet.public[count.index].id tags = { Name = &quot;${var.environment}-nat-${count.index + 1}&quot; Environment = var.environment } depends_on = [aws_internet_gateway.main] } # Route Table - Public resource &quot;aws_route_table&quot; &quot;public&quot; { vpc_id = aws_vpc.main.id route { cidr_block = &quot;0.0.0.0/0&quot; gateway_id = aws_internet_gateway.main.id } tags = { Name = &quot;${var.environment}-public-rt&quot; Environment = var.environment } } # Route Table Association - Public resource &quot;aws_route_table_association&quot; &quot;public&quot; { count = length(aws_subnet.public) subnet_id = aws_subnet.public[count.index].id route_table_id = aws_route_table.public.id } # Route Tables - Private resource &quot;aws_route_table&quot; &quot;private&quot; { count = var.enable_nat_gateway ? (var.single_nat_gateway ? 1 : length(var.availability_zones)) : 0 vpc_id = aws_vpc.main.id route { cidr_block = &quot;0.0.0.0/0&quot; nat_gateway_id = aws_nat_gateway.main[count.index].id } tags = { Name = &quot;${var.environment}-private-rt-${count.index + 1}&quot; Environment = var.environment } } # Route Table Association - Private App resource &quot;aws_route_table_association&quot; &quot;private_app&quot; { count = length(aws_subnet.private_app) subnet_id = aws_subnet.private_app[count.index].id route_table_id = var.single_nat_gateway ? aws_route_table.private[0].id : aws_route_table.private[count.index].id } # Route Table Association - Private DB resource &quot;aws_route_table_association&quot; &quot;private_db&quot; { count = length(aws_subnet.private_db) subnet_id = aws_subnet.private_db[count.index].id route_table_id = var.single_nat_gateway ? aws_route_table.private[0].id : aws_route_table.private[count.index].id } # VPC Flow Logs resource &quot;aws_flow_log&quot; &quot;main&quot; { iam_role_arn = aws_iam_role.flow_log.arn log_destination = aws_cloudwatch_log_group.flow_log.arn traffic_type = &quot;ALL&quot; vpc_id = aws_vpc.main.id tags = { Name = &quot;${var.environment}-vpc-flow-log&quot; Environment = var.environment } } resource &quot;aws_cloudwatch_log_group&quot; &quot;flow_log&quot; { name = &quot;/aws/vpc/${var.environment}&quot; retention_in_days = 30 tags = { Environment = var.environment } } resource &quot;aws_iam_role&quot; &quot;flow_log&quot; { name = &quot;${var.environment}-vpc-flow-log-role&quot; assume_role_policy = jsonencode({ Version = &quot;2012-10-17&quot; Statement = [ { Action = &quot;sts:AssumeRole&quot; Effect = &quot;Allow&quot; Principal = { Service = &quot;vpc-flow-logs.amazonaws.com&quot; } } ] }) } resource &quot;aws_iam_role_policy&quot; &quot;flow_log&quot; { name = &quot;${var.environment}-vpc-flow-log-policy&quot; role = aws_iam_role.flow_log.id policy = jsonencode({ Version = &quot;2012-10-17&quot; Statement = [ { Action = [ &quot;logs:CreateLogGroup&quot;, &quot;logs:CreateLogStream&quot;, &quot;logs:PutLogEvents&quot;, &quot;logs:DescribeLogGroups&quot;, &quot;logs:DescribeLogStreams&quot; ] Effect = &quot;Allow&quot; Resource = &quot;*&quot; } ] }) } # Outputs output &quot;vpc_id&quot; { description = &quot;VPC ID&quot; value = aws_vpc.main.id } output &quot;vpc_cidr&quot; { description = &quot;VPC CIDR&quot; value = aws_vpc.main.cidr_block } output &quot;public_subnet_ids&quot; { description = &quot;List of public subnet IDs&quot; value = aws_subnet.public[*].id } output &quot;private_app_subnet_ids&quot; { description = &quot;List of private application subnet IDs&quot; value = aws_subnet.private_app[*].id } output &quot;private_db_subnet_ids&quot; { description = &quot;List of private database subnet IDs&quot; value = aws_subnet.private_db[*].id } output &quot;nat_gateway_ips&quot; { description = &quot;NAT Gateway public IPs&quot; value = aws_eip.nat[*].public_ip }   ","version":"Next","tagName":"h3"},{"title":"‚ò∏Ô∏è Module EKS‚Äã","type":1,"pageTitle":"üèóÔ∏è Terraform - Infrastructure Multi-Cloud","url":"/docs/infrastructure/iac/terraform/terraform-aws#Ô∏è-module-eks","content":" modules/eks/main.tf terraform { required_providers { aws = { source = &quot;hashicorp/aws&quot; version = &quot;~&gt; 5.0&quot; } kubernetes = { source = &quot;hashicorp/kubernetes&quot; version = &quot;~&gt; 2.23&quot; } } } variable &quot;environment&quot; { description = &quot;Environment name&quot; type = string } variable &quot;vpc_id&quot; { description = &quot;VPC ID&quot; type = string } variable &quot;subnet_ids&quot; { description = &quot;Subnet IDs for EKS&quot; type = list(string) } variable &quot;cluster_version&quot; { description = &quot;Kubernetes version&quot; type = string default = &quot;1.28&quot; } variable &quot;node_groups&quot; { description = &quot;Node group configurations&quot; type = map(object({ desired_size = number min_size = number max_size = number instance_types = list(string) })) default = { general = { desired_size = 2 min_size = 1 max_size = 4 instance_types = [&quot;t3.medium&quot;] } } } # EKS Cluster resource &quot;aws_eks_cluster&quot; &quot;main&quot; { name = &quot;${var.environment}-eks-cluster&quot; role_arn = aws_iam_role.cluster.arn version = var.cluster_version vpc_config { subnet_ids = var.subnet_ids endpoint_private_access = true endpoint_public_access = true public_access_cidrs = [&quot;0.0.0.0/0&quot;] security_group_ids = [aws_security_group.cluster.id] } encryption_config { provider { key_arn = aws_kms_key.eks.arn } resources = [&quot;secrets&quot;] } enabled_cluster_log_types = [ &quot;api&quot;, &quot;audit&quot;, &quot;authenticator&quot;, &quot;controllerManager&quot;, &quot;scheduler&quot; ] depends_on = [ aws_iam_role_policy_attachment.cluster_AmazonEKSClusterPolicy, aws_iam_role_policy_attachment.cluster_AmazonEKSVPCResourceController, aws_cloudwatch_log_group.cluster ] tags = { Name = &quot;${var.environment}-eks-cluster&quot; Environment = var.environment } } # KMS Key for EKS encryption resource &quot;aws_kms_key&quot; &quot;eks&quot; { description = &quot;EKS Secret Encryption Key&quot; deletion_window_in_days = 10 enable_key_rotation = true tags = { Name = &quot;${var.environment}-eks-key&quot; Environment = var.environment } } resource &quot;aws_kms_alias&quot; &quot;eks&quot; { name = &quot;alias/${var.environment}-eks&quot; target_key_id = aws_kms_key.eks.key_id } # CloudWatch Log Group resource &quot;aws_cloudwatch_log_group&quot; &quot;cluster&quot; { name = &quot;/aws/eks/${var.environment}-cluster/cluster&quot; retention_in_days = 30 tags = { Environment = var.environment } } # IAM Role for EKS Cluster resource &quot;aws_iam_role&quot; &quot;cluster&quot; { name = &quot;${var.environment}-eks-cluster-role&quot; assume_role_policy = jsonencode({ Version = &quot;2012-10-17&quot; Statement = [{ Action = &quot;sts:AssumeRole&quot; Effect = &quot;Allow&quot; Principal = { Service = &quot;eks.amazonaws.com&quot; } }] }) } resource &quot;aws_iam_role_policy_attachment&quot; &quot;cluster_AmazonEKSClusterPolicy&quot; { policy_arn = &quot;arn:aws:iam::aws:policy/AmazonEKSClusterPolicy&quot; role = aws_iam_role.cluster.name } resource &quot;aws_iam_role_policy_attachment&quot; &quot;cluster_AmazonEKSVPCResourceController&quot; { policy_arn = &quot;arn:aws:iam::aws:policy/AmazonEKSVPCResourceController&quot; role = aws_iam_role.cluster.name } # Security Group for EKS Cluster resource &quot;aws_security_group&quot; &quot;cluster&quot; { name = &quot;${var.environment}-eks-cluster-sg&quot; description = &quot;Security group for EKS cluster&quot; vpc_id = var.vpc_id egress { from_port = 0 to_port = 0 protocol = &quot;-1&quot; cidr_blocks = [&quot;0.0.0.0/0&quot;] } tags = { Name = &quot;${var.environment}-eks-cluster-sg&quot; Environment = var.environment } } # Node Groups resource &quot;aws_eks_node_group&quot; &quot;main&quot; { for_each = var.node_groups cluster_name = aws_eks_cluster.main.name node_group_name = &quot;${var.environment}-${each.key}&quot; node_role_arn = aws_iam_role.node_group.arn subnet_ids = var.subnet_ids scaling_config { desired_size = each.value.desired_size max_size = each.value.max_size min_size = each.value.min_size } instance_types = each.value.instance_types update_config { max_unavailable = 1 } launch_template { id = aws_launch_template.node_group[each.key].id version = aws_launch_template.node_group[each.key].latest_version } depends_on = [ aws_iam_role_policy_attachment.node_group_AmazonEKSWorkerNodePolicy, aws_iam_role_policy_attachment.node_group_AmazonEKS_CNI_Policy, aws_iam_role_policy_attachment.node_group_AmazonEC2ContainerRegistryReadOnly, ] tags = { Name = &quot;${var.environment}-${each.key}-node-group&quot; Environment = var.environment } } # Launch Template for Node Groups resource &quot;aws_launch_template&quot; &quot;node_group&quot; { for_each = var.node_groups name_prefix = &quot;${var.environment}-${each.key}-&quot; block_device_mappings { device_name = &quot;/dev/xvda&quot; ebs { volume_size = 50 volume_type = &quot;gp3&quot; iops = 3000 throughput = 125 encrypted = true delete_on_termination = true } } metadata_options { http_endpoint = &quot;enabled&quot; http_tokens = &quot;required&quot; http_put_response_hop_limit = 1 } tag_specifications { resource_type = &quot;instance&quot; tags = { Name = &quot;${var.environment}-${each.key}-node&quot; Environment = var.environment } } } # IAM Role for Node Group resource &quot;aws_iam_role&quot; &quot;node_group&quot; { name = &quot;${var.environment}-eks-node-group-role&quot; assume_role_policy = jsonencode({ Version = &quot;2012-10-17&quot; Statement = [{ Action = &quot;sts:AssumeRole&quot; Effect = &quot;Allow&quot; Principal = { Service = &quot;ec2.amazonaws.com&quot; } }] }) } resource &quot;aws_iam_role_policy_attachment&quot; &quot;node_group_AmazonEKSWorkerNodePolicy&quot; { policy_arn = &quot;arn:aws:iam::aws:policy/AmazonEKSWorkerNodePolicy&quot; role = aws_iam_role.node_group.name } resource &quot;aws_iam_role_policy_attachment&quot; &quot;node_group_AmazonEKS_CNI_Policy&quot; { policy_arn = &quot;arn:aws:iam::aws:policy/AmazonEKS_CNI_Policy&quot; role = aws_iam_role.node_group.name } resource &quot;aws_iam_role_policy_attachment&quot; &quot;node_group_AmazonEC2ContainerRegistryReadOnly&quot; { policy_arn = &quot;arn:aws:iam::aws:policy/AmazonEC2ContainerRegistryReadOnly&quot; role = aws_iam_role.node_group.name } # OIDC Provider for IRSA data &quot;tls_certificate&quot; &quot;cluster&quot; { url = aws_eks_cluster.main.identity[0].oidc[0].issuer } resource &quot;aws_iam_openid_connect_provider&quot; &quot;cluster&quot; { client_id_list = [&quot;sts.amazonaws.com&quot;] thumbprint_list = [data.tls_certificate.cluster.certificates[0].sha1_fingerprint] url = aws_eks_cluster.main.identity[0].oidc[0].issuer tags = { Name = &quot;${var.environment}-eks-oidc&quot; Environment = var.environment } } # Outputs output &quot;cluster_id&quot; { description = &quot;EKS cluster ID&quot; value = aws_eks_cluster.main.id } output &quot;cluster_endpoint&quot; { description = &quot;EKS cluster endpoint&quot; value = aws_eks_cluster.main.endpoint } output &quot;cluster_security_group_id&quot; { description = &quot;Security group ID attached to the EKS cluster&quot; value = aws_security_group.cluster.id } output &quot;cluster_oidc_issuer_url&quot; { description = &quot;The URL on the EKS cluster OIDC Issuer&quot; value = try(aws_eks_cluster.main.identity[0].oidc[0].issuer, &quot;&quot;) } output &quot;oidc_provider_arn&quot; { description = &quot;ARN of the OIDC Provider for EKS&quot; value = aws_iam_openid_connect_provider.cluster.arn }   Suite avec les environnements et Azure/GCP dans le prochain message... ","version":"Next","tagName":"h2"},{"title":"API Gateway","type":0,"sectionRef":"#","url":"/docs/microservices/infrastructure/api-gateway","content":"","keywords":"","version":"Next"},{"title":"Concept‚Äã","type":1,"pageTitle":"API Gateway","url":"/docs/microservices/infrastructure/api-gateway#concept","content":" L'API Gateway est un point d'entr√©e unique qui route les requ√™tes vers les microservices appropri√©s. Il agit comme un reverse proxy avec des fonctionnalit√©s suppl√©mentaires.  Analogie Comme un r√©ceptionniste d'h√¥tel qui dirige les visiteurs vers les bonnes chambres.  ","version":"Next","tagName":"h2"},{"title":"üéØ Probl√®me r√©solu‚Äã","type":1,"pageTitle":"API Gateway","url":"/docs/microservices/infrastructure/api-gateway#-probl√®me-r√©solu","content":" ","version":"Next","tagName":"h2"},{"title":"Sans API Gateway‚Äã","type":1,"pageTitle":"API Gateway","url":"/docs/microservices/infrastructure/api-gateway#sans-api-gateway","content":"   Probl√®mes :  Client doit conna√Ætre tous les endpointsCORS sur chaque serviceAuthentification dupliqu√©eGestion des certificats par service  ","version":"Next","tagName":"h3"},{"title":"Avec API Gateway‚Äã","type":1,"pageTitle":"API Gateway","url":"/docs/microservices/infrastructure/api-gateway#avec-api-gateway","content":"   Avantages :  Point d'entr√©e uniqueLogique transverse centralis√©eD√©couplage client/services  ","version":"Next","tagName":"h3"},{"title":"üîß Fonctionnalit√©s‚Äã","type":1,"pageTitle":"API Gateway","url":"/docs/microservices/infrastructure/api-gateway#-fonctionnalit√©s","content":" ","version":"Next","tagName":"h2"},{"title":"1. Routage‚Äã","type":1,"pageTitle":"API Gateway","url":"/docs/microservices/infrastructure/api-gateway#1-routage","content":" # Kong configuration routes: - name: user-route paths: - /api/users service: user-service - name: order-route paths: - /api/orders service: order-service   ","version":"Next","tagName":"h3"},{"title":"2. Authentification & Autorisation‚Äã","type":1,"pageTitle":"API Gateway","url":"/docs/microservices/infrastructure/api-gateway#2-authentification--autorisation","content":" // Validation JWT centralis√©e app.use(async (req, res, next) =&gt; { const token = req.headers.authorization; try { const user = await verifyJWT(token); req.user = user; next(); } catch { res.status(401).json({ error: 'Unauthorized' }); } });   ","version":"Next","tagName":"h3"},{"title":"3. Rate Limiting‚Äã","type":1,"pageTitle":"API Gateway","url":"/docs/microservices/infrastructure/api-gateway#3-rate-limiting","content":" # Limiter √† 100 req/min par IP plugins: - name: rate-limiting config: minute: 100 policy: local   ","version":"Next","tagName":"h3"},{"title":"4. Transformation de requ√™tes‚Äã","type":1,"pageTitle":"API Gateway","url":"/docs/microservices/infrastructure/api-gateway#4-transformation-de-requ√™tes","content":" // Ajouter headers communs app.use((req, res, next) =&gt; { req.headers['X-Request-Id'] = uuid(); req.headers['X-Forwarded-For'] = req.ip; next(); });   ","version":"Next","tagName":"h3"},{"title":"5. Agr√©gation de r√©ponses‚Äã","type":1,"pageTitle":"API Gateway","url":"/docs/microservices/infrastructure/api-gateway#5-agr√©gation-de-r√©ponses","content":" // Combiner plusieurs services app.get('/api/dashboard', async (req, res) =&gt; { const [user, orders, notifications] = await Promise.all([ fetch('http://user-service/users/me'), fetch('http://order-service/orders'), fetch('http://notification-service/notifications') ]); res.json({ user: await user.json(), orders: await orders.json(), notifications: await notifications.json() }); });   ","version":"Next","tagName":"h3"},{"title":"6. Caching‚Äã","type":1,"pageTitle":"API Gateway","url":"/docs/microservices/infrastructure/api-gateway#6-caching","content":" // Cache Redis const cache = require('redis').createClient(); app.get('/api/products/:id', async (req, res) =&gt; { const cached = await cache.get(`product:${req.params.id}`); if (cached) { return res.json(JSON.parse(cached)); } const product = await fetch(`http://product-service/products/${req.params.id}`); const data = await product.json(); await cache.setex(`product:${req.params.id}`, 300, JSON.stringify(data)); res.json(data); });   ","version":"Next","tagName":"h3"},{"title":"üõ†Ô∏è Solutions populaires‚Äã","type":1,"pageTitle":"API Gateway","url":"/docs/microservices/infrastructure/api-gateway#Ô∏è-solutions-populaires","content":" ","version":"Next","tagName":"h2"},{"title":"Kong‚Äã","type":1,"pageTitle":"API Gateway","url":"/docs/microservices/infrastructure/api-gateway#kong","content":" Open-source, tr√®s performant  # Ajouter un service curl -X POST http://localhost:8001/services \\ --data name=user-service \\ --data url=http://user-service:3000 # Ajouter une route curl -X POST http://localhost:8001/services/user-service/routes \\ --data paths[]=/api/users # Activer rate limiting curl -X POST http://localhost:8001/services/user-service/plugins \\ --data name=rate-limiting \\ --data config.minute=100   ","version":"Next","tagName":"h3"},{"title":"AWS API Gateway‚Äã","type":1,"pageTitle":"API Gateway","url":"/docs/microservices/infrastructure/api-gateway#aws-api-gateway","content":" Service manag√© AWS  # Serverless Framework functions: api: handler: handler.proxy events: - http: path: /{proxy+} method: ANY authorizer: name: authorizer type: token   ","version":"Next","tagName":"h3"},{"title":"Nginx‚Äã","type":1,"pageTitle":"API Gateway","url":"/docs/microservices/infrastructure/api-gateway#nginx","content":" L√©ger et rapide  upstream user_service { server user-service:3000; } upstream order_service { server order-service:3000; } server { location /api/users { proxy_pass http://user_service; } location /api/orders { proxy_pass http://order_service; } }   ","version":"Next","tagName":"h3"},{"title":"Spring Cloud Gateway‚Äã","type":1,"pageTitle":"API Gateway","url":"/docs/microservices/infrastructure/api-gateway#spring-cloud-gateway","content":" Pour √©cosyst√®me Java/Spring  @Bean public RouteLocator customRouteLocator(RouteLocatorBuilder builder) { return builder.routes() .route(&quot;user-route&quot;, r -&gt; r.path(&quot;/api/users/**&quot;) .filters(f -&gt; f.stripPrefix(1) .addRequestHeader(&quot;X-Gateway&quot;, &quot;Spring&quot;) .circuitBreaker(c -&gt; c.setName(&quot;userServiceCB&quot;))) .uri(&quot;lb://user-service&quot;)) .build(); }   ","version":"Next","tagName":"h3"},{"title":"üîê S√©curit√©‚Äã","type":1,"pageTitle":"API Gateway","url":"/docs/microservices/infrastructure/api-gateway#-s√©curit√©","content":" ","version":"Next","tagName":"h2"},{"title":"SSL Termination‚Äã","type":1,"pageTitle":"API Gateway","url":"/docs/microservices/infrastructure/api-gateway#ssl-termination","content":" server { listen 443 ssl; ssl_certificate /etc/nginx/ssl/cert.pem; ssl_certificate_key /etc/nginx/ssl/key.pem; location / { proxy_pass http://internal-service; # HTTP en interne } }   ","version":"Next","tagName":"h3"},{"title":"API Key validation‚Äã","type":1,"pageTitle":"API Gateway","url":"/docs/microservices/infrastructure/api-gateway#api-key-validation","content":" app.use((req, res, next) =&gt; { const apiKey = req.headers['x-api-key']; if (!isValidApiKey(apiKey)) { return res.status(403).json({ error: 'Invalid API key' }); } next(); });   ","version":"Next","tagName":"h3"},{"title":"CORS‚Äã","type":1,"pageTitle":"API Gateway","url":"/docs/microservices/infrastructure/api-gateway#cors","content":" app.use(cors({ origin: ['https://app.example.com'], credentials: true, allowedHeaders: ['Authorization', 'Content-Type'] }));   ","version":"Next","tagName":"h3"},{"title":"üìä Observabilit√©‚Äã","type":1,"pageTitle":"API Gateway","url":"/docs/microservices/infrastructure/api-gateway#-observabilit√©","content":" ","version":"Next","tagName":"h2"},{"title":"Logging‚Äã","type":1,"pageTitle":"API Gateway","url":"/docs/microservices/infrastructure/api-gateway#logging","content":" app.use((req, res, next) =&gt; { const start = Date.now(); res.on('finish', () =&gt; { logger.info({ method: req.method, path: req.path, status: res.statusCode, duration: Date.now() - start, userId: req.user?.id }); }); next(); });   ","version":"Next","tagName":"h3"},{"title":"M√©triques‚Äã","type":1,"pageTitle":"API Gateway","url":"/docs/microservices/infrastructure/api-gateway#m√©triques","content":" const prometheus = require('prom-client'); const httpRequestDuration = new prometheus.Histogram({ name: 'http_request_duration_ms', help: 'Duration of HTTP requests in ms', labelNames: ['method', 'route', 'status'] }); app.use((req, res, next) =&gt; { const end = httpRequestDuration.startTimer(); res.on('finish', () =&gt; { end({ method: req.method, route: req.route?.path, status: res.statusCode }); }); next(); });   ","version":"Next","tagName":"h3"},{"title":"Distributed Tracing‚Äã","type":1,"pageTitle":"API Gateway","url":"/docs/microservices/infrastructure/api-gateway#distributed-tracing","content":" const opentelemetry = require('@opentelemetry/api'); app.use((req, res, next) =&gt; { const tracer = opentelemetry.trace.getTracer('api-gateway'); const span = tracer.startSpan('http-request', { attributes: { 'http.method': req.method, 'http.url': req.url } }); req.span = span; res.on('finish', () =&gt; span.end()); next(); });   ","version":"Next","tagName":"h3"},{"title":"‚öñÔ∏è API Gateway vs Service Mesh‚Äã","type":1,"pageTitle":"API Gateway","url":"/docs/microservices/infrastructure/api-gateway#Ô∏è-api-gateway-vs-service-mesh","content":" Aspect\tAPI Gateway\tService MeshScope\tNorth-South (externe ‚Üí interne)\tEast-West (interne ‚Üî interne) Position\tEdge/P√©rim√®tre\tEntre tous les services Authentification\tClients externes\tmTLS entre services Use case\tPoint d'entr√©e unique\tCommunication inter-services  Utiliser les deux API Gateway pour trafic externe + Service Mesh pour trafic interne  ","version":"Next","tagName":"h2"},{"title":"‚ö†Ô∏è Pi√®ges √† √©viter‚Äã","type":1,"pageTitle":"API Gateway","url":"/docs/microservices/infrastructure/api-gateway#Ô∏è-pi√®ges-√†-√©viter","content":" ","version":"Next","tagName":"h2"},{"title":"1. API Gateway trop intelligent‚Äã","type":1,"pageTitle":"API Gateway","url":"/docs/microservices/infrastructure/api-gateway#1-api-gateway-trop-intelligent","content":" // ‚ùå Logique m√©tier dans gateway app.post('/api/orders', async (req, res) =&gt; { // Calcul complexe de prix const price = calculateComplexPrice(req.body); // Validation m√©tier if (!isValidOrder(req.body)) { ... } }); // ‚úÖ Gateway = routage uniquement app.post('/api/orders', proxy('http://order-service'));   ","version":"Next","tagName":"h3"},{"title":"2. Single Point of Failure‚Äã","type":1,"pageTitle":"API Gateway","url":"/docs/microservices/infrastructure/api-gateway#2-single-point-of-failure","content":" Solution : D√©ployer plusieurs instances  # Kubernetes deployment apiVersion: apps/v1 kind: Deployment metadata: name: api-gateway spec: replicas: 3 # Haute disponibilit√©   ","version":"Next","tagName":"h3"},{"title":"3. Goulot d'√©tranglement‚Äã","type":1,"pageTitle":"API Gateway","url":"/docs/microservices/infrastructure/api-gateway#3-goulot-d√©tranglement","content":" Solution : Scaler horizontalement + caching  autoscaling: enabled: true minReplicas: 3 maxReplicas: 10 targetCPUUtilizationPercentage: 70   ","version":"Next","tagName":"h3"},{"title":"‚úÖ Bonnes pratiques‚Äã","type":1,"pageTitle":"API Gateway","url":"/docs/microservices/infrastructure/api-gateway#-bonnes-pratiques","content":" Stateless : aucun √©tat local dans le gatewayTimeout : d√©finir des timeouts par routeCircuit breaker : isoler services d√©faillantsRetry : avec backoff exponentielCaching : agressif pour donn√©es publiquesMonitoring : m√©triques d√©taill√©es par routeVersioning API : /v1/, /v2/Rate limiting : par utilisateur/IPDocumentation : exposer OpenAPI/Swagger  ","version":"Next","tagName":"h2"},{"title":"üß™ Tests‚Äã","type":1,"pageTitle":"API Gateway","url":"/docs/microservices/infrastructure/api-gateway#-tests","content":" ","version":"Next","tagName":"h2"},{"title":"Test de routage‚Äã","type":1,"pageTitle":"API Gateway","url":"/docs/microservices/infrastructure/api-gateway#test-de-routage","content":" describe('API Gateway routing', () =&gt; { it('should route to user service', async () =&gt; { const response = await request(gateway) .get('/api/users/123') .expect(200); expect(userServiceMock).toHaveBeenCalledWith('/users/123'); }); });   ","version":"Next","tagName":"h3"},{"title":"Test d'authentification‚Äã","type":1,"pageTitle":"API Gateway","url":"/docs/microservices/infrastructure/api-gateway#test-dauthentification","content":" describe('Authentication', () =&gt; { it('should reject requests without token', async () =&gt; { await request(gateway) .get('/api/users') .expect(401); }); it('should accept valid token', async () =&gt; { await request(gateway) .get('/api/users') .set('Authorization', 'Bearer valid-token') .expect(200); }); });   ","version":"Next","tagName":"h3"},{"title":"Ressources‚Äã","type":1,"pageTitle":"API Gateway","url":"/docs/microservices/infrastructure/api-gateway#ressources","content":" Kong DocumentationAWS API GatewayPattern: API GatewayNginx as API Gateway ","version":"Next","tagName":"h2"},{"title":"Service Discovery","type":0,"sectionRef":"#","url":"/docs/microservices/infrastructure/service-discovery","content":"","keywords":"","version":"Next"},{"title":"Concept‚Äã","type":1,"pageTitle":"Service Discovery","url":"/docs/microservices/infrastructure/service-discovery#concept","content":" Le Service Discovery permet aux services de se trouver dynamiquement dans un r√©seau sans configuration manuelle des adresses IP et ports.  Principe Au lieu de coder en dur http://user-service:3000, les services interrogent un registre pour obtenir l'adresse actuelle.  ","version":"Next","tagName":"h2"},{"title":"üéØ Probl√®me r√©solu‚Äã","type":1,"pageTitle":"Service Discovery","url":"/docs/microservices/infrastructure/service-discovery#-probl√®me-r√©solu","content":" ","version":"Next","tagName":"h2"},{"title":"Sans Service Discovery‚Äã","type":1,"pageTitle":"Service Discovery","url":"/docs/microservices/infrastructure/service-discovery#sans-service-discovery","content":" // ‚ùå Adresses cod√©es en dur const USER_SERVICE_URL = 'http://192.168.1.10:3000'; const ORDER_SERVICE_URL = 'http://192.168.1.11:3000'; // Probl√®mes: // - IP change lors d'un red√©ploiement // - Scaling horizontal impossible // - Plusieurs instances non g√©r√©es   ","version":"Next","tagName":"h3"},{"title":"Avec Service Discovery‚Äã","type":1,"pageTitle":"Service Discovery","url":"/docs/microservices/infrastructure/service-discovery#avec-service-discovery","content":" // ‚úÖ R√©solution dynamique const userServiceUrl = await serviceRegistry.discover('user-service'); const response = await fetch(`${userServiceUrl}/users/123`); // Avantages: // - IP/port r√©solus dynamiquement // - Load balancing automatique // - Health checks int√©gr√©s   ","version":"Next","tagName":"h3"},{"title":"üèóÔ∏è Patterns‚Äã","type":1,"pageTitle":"Service Discovery","url":"/docs/microservices/infrastructure/service-discovery#Ô∏è-patterns","content":" ","version":"Next","tagName":"h2"},{"title":"Client-Side Discovery‚Äã","type":1,"pageTitle":"Service Discovery","url":"/docs/microservices/infrastructure/service-discovery#client-side-discovery","content":" Le client interroge le registre et choisit une instance    Avantages :  Pas de proxy (latence minimale)Client contr√¥le load balancing  Inconv√©nients :  Logique de d√©couverte dans chaque clientCouplage avec le registre  ","version":"Next","tagName":"h3"},{"title":"Server-Side Discovery‚Äã","type":1,"pageTitle":"Service Discovery","url":"/docs/microservices/infrastructure/service-discovery#server-side-discovery","content":" Un load balancer interroge le registre    Avantages :  Clients simplifi√©sLoad balancing centralis√©  Inconv√©nients :  Hop suppl√©mentaire (latence)Load balancer = SPOF potentiel  ","version":"Next","tagName":"h3"},{"title":"üõ†Ô∏è Solutions‚Äã","type":1,"pageTitle":"Service Discovery","url":"/docs/microservices/infrastructure/service-discovery#Ô∏è-solutions","content":" ","version":"Next","tagName":"h2"},{"title":"Consul (HashiCorp)‚Äã","type":1,"pageTitle":"Service Discovery","url":"/docs/microservices/infrastructure/service-discovery#consul-hashicorp","content":" Service registry + health checking + KV store  Enregistrement‚Äã  const consul = require('consul')(); // Service s'enregistre au d√©marrage await consul.agent.service.register({ name: 'user-service', id: `user-service-${process.pid}`, address: '192.168.1.10', port: 3000, check: { http: 'http://192.168.1.10:3000/health', interval: '10s', timeout: '5s' } }); // D√©senregistrer √† l'arr√™t process.on('SIGTERM', async () =&gt; { await consul.agent.service.deregister(`user-service-${process.pid}`); process.exit(0); });   D√©couverte‚Äã  // Trouver toutes les instances saines const services = await consul.health.service({ service: 'user-service', passing: true }); // Choisir une instance (round-robin, random, etc.) const instance = services[Math.floor(Math.random() * services.length)]; const url = `http://${instance.Service.Address}:${instance.Service.Port}`;   ","version":"Next","tagName":"h3"},{"title":"Eureka (Netflix)‚Äã","type":1,"pageTitle":"Service Discovery","url":"/docs/microservices/infrastructure/service-discovery#eureka-netflix","content":" Service registry pour Spring Cloud  // Service s'enregistre automatiquement @SpringBootApplication @EnableEurekaClient public class UserServiceApplication { public static void main(String[] args) { SpringApplication.run(UserServiceApplication.class, args); } } // application.yml eureka: client: serviceUrl: defaultZone: http://eureka-server:8761/eureka/ instance: preferIpAddress: true leaseRenewalIntervalInSeconds: 10   // D√©couverte avec RestTemplate @Autowired private RestTemplate restTemplate; // Appel avec nom de service (pas d'IP) User user = restTemplate.getForObject( &quot;http://user-service/users/123&quot;, User.class );   ","version":"Next","tagName":"h3"},{"title":"Kubernetes Service Discovery‚Äã","type":1,"pageTitle":"Service Discovery","url":"/docs/microservices/infrastructure/service-discovery#kubernetes-service-discovery","content":" Natif dans Kubernetes via DNS  # Service Kubernetes apiVersion: v1 kind: Service metadata: name: user-service spec: selector: app: user-service ports: - port: 80 targetPort: 3000   // R√©solution DNS automatique // user-service.default.svc.cluster.local ‚Üí IP du service const response = await fetch('http://user-service/users/123');   ","version":"Next","tagName":"h3"},{"title":"etcd‚Äã","type":1,"pageTitle":"Service Discovery","url":"/docs/microservices/infrastructure/service-discovery#etcd","content":" KV store distribu√© (utilis√© par Kubernetes)  const { Etcd3 } = require('etcd3'); const client = new Etcd3(); // Enregistrer service await client.put('/services/user-service/instance-1') .value(JSON.stringify({ host: '192.168.1.10', port: 3000 })) .lease(10); // TTL 10 secondes // D√©couvrir services const services = await client.getAll() .prefix('/services/user-service/') .json();   ","version":"Next","tagName":"h3"},{"title":"üè• Health Checks‚Äã","type":1,"pageTitle":"Service Discovery","url":"/docs/microservices/infrastructure/service-discovery#-health-checks","content":" ","version":"Next","tagName":"h2"},{"title":"Types‚Äã","type":1,"pageTitle":"Service Discovery","url":"/docs/microservices/infrastructure/service-discovery#types","content":" Liveness Probe‚Äã  Le service est-il vivant ?  app.get('/health/live', (req, res) =&gt; { res.status(200).json({ status: 'alive' }); });   Readiness Probe‚Äã  Le service est-il pr√™t √† recevoir du trafic ?  app.get('/health/ready', async (req, res) =&gt; { // V√©rifier connexion BDD const dbHealthy = await checkDatabaseConnection(); // V√©rifier d√©pendances const depsHealthy = await checkDependencies(); if (dbHealthy &amp;&amp; depsHealthy) { res.status(200).json({ status: 'ready' }); } else { res.status(503).json({ status: 'not ready' }); } });   ","version":"Next","tagName":"h3"},{"title":"Configuration Consul‚Äã","type":1,"pageTitle":"Service Discovery","url":"/docs/microservices/infrastructure/service-discovery#configuration-consul","content":" check: { http: 'http://localhost:3000/health', interval: '10s', // V√©rifier toutes les 10s timeout: '5s', // Timeout apr√®s 5s deregisterCriticalServiceAfter: '60s' // D√©senregistrer si KO 60s }   ","version":"Next","tagName":"h3"},{"title":"Configuration Kubernetes‚Äã","type":1,"pageTitle":"Service Discovery","url":"/docs/microservices/infrastructure/service-discovery#configuration-kubernetes","content":" apiVersion: v1 kind: Pod spec: containers: - name: user-service livenessProbe: httpGet: path: /health/live port: 3000 initialDelaySeconds: 30 periodSeconds: 10 readinessProbe: httpGet: path: /health/ready port: 3000 initialDelaySeconds: 10 periodSeconds: 5   ","version":"Next","tagName":"h3"},{"title":"üîÑ Load Balancing‚Äã","type":1,"pageTitle":"Service Discovery","url":"/docs/microservices/infrastructure/service-discovery#-load-balancing","content":" ","version":"Next","tagName":"h2"},{"title":"Algorithmes‚Äã","type":1,"pageTitle":"Service Discovery","url":"/docs/microservices/infrastructure/service-discovery#algorithmes","content":" Round Robin‚Äã  class RoundRobinBalancer { constructor() { this.index = 0; } choose(instances) { const instance = instances[this.index % instances.length]; this.index++; return instance; } }   Random‚Äã  function randomBalancer(instances) { return instances[Math.floor(Math.random() * instances.length)]; }   Least Connections‚Äã  class LeastConnectionsBalancer { constructor() { this.connections = new Map(); } choose(instances) { // Choisir instance avec moins de connexions actives return instances.reduce((least, instance) =&gt; { const connections = this.connections.get(instance.id) || 0; const leastConnections = this.connections.get(least.id) || 0; return connections &lt; leastConnections ? instance : least; }); } }   Weighted Round Robin‚Äã  function weightedRoundRobin(instances) { // Instances avec weight: 2 sont choisies 2x plus souvent const weighted = instances.flatMap(i =&gt; Array(i.weight || 1).fill(i) ); return weighted[index++ % weighted.length]; }   ","version":"Next","tagName":"h3"},{"title":"üìä Monitoring‚Äã","type":1,"pageTitle":"Service Discovery","url":"/docs/microservices/infrastructure/service-discovery#-monitoring","content":" ","version":"Next","tagName":"h2"},{"title":"M√©triques importantes‚Äã","type":1,"pageTitle":"Service Discovery","url":"/docs/microservices/infrastructure/service-discovery#m√©triques-importantes","content":" // Nombre de services enregistr√©s consul_service_instances{service=&quot;user-service&quot;} // Services en √©chec consul_health_service_status{status=&quot;critical&quot;} // Temps de r√©solution service_discovery_lookup_duration_seconds // Cache hits/misses service_discovery_cache_hit_ratio   ","version":"Next","tagName":"h3"},{"title":"Alertes‚Äã","type":1,"pageTitle":"Service Discovery","url":"/docs/microservices/infrastructure/service-discovery#alertes","content":" # Prometheus alert - alert: ServiceDiscoveryDown expr: up{job=&quot;consul&quot;} == 0 for: 5m annotations: summary: &quot;Service registry is down&quot; - alert: NoHealthyInstances expr: consul_service_instances{service=&quot;user-service&quot;} == 0 annotations: summary: &quot;No healthy instances of user-service&quot;   ","version":"Next","tagName":"h3"},{"title":"üöÄ Optimisations‚Äã","type":1,"pageTitle":"Service Discovery","url":"/docs/microservices/infrastructure/service-discovery#-optimisations","content":" ","version":"Next","tagName":"h2"},{"title":"Caching‚Äã","type":1,"pageTitle":"Service Discovery","url":"/docs/microservices/infrastructure/service-discovery#caching","content":" class CachedServiceDiscovery { constructor(registry, ttl = 30000) { this.registry = registry; this.cache = new Map(); this.ttl = ttl; } async discover(serviceName) { const cached = this.cache.get(serviceName); if (cached &amp;&amp; Date.now() - cached.timestamp &lt; this.ttl) { return cached.instances; } const instances = await this.registry.discover(serviceName); this.cache.set(serviceName, { instances, timestamp: Date.now() }); return instances; } }   ","version":"Next","tagName":"h3"},{"title":"Watch pour mises √† jour‚Äã","type":1,"pageTitle":"Service Discovery","url":"/docs/microservices/infrastructure/service-discovery#watch-pour-mises-√†-jour","content":" // Consul watch const watcher = consul.watch({ method: consul.health.service, options: { service: 'user-service', passing: true } }); watcher.on('change', (services) =&gt; { console.log('Services updated:', services); updateLocalCache(services); }); watcher.on('error', (err) =&gt; { console.error('Watch error:', err); });   ","version":"Next","tagName":"h3"},{"title":"‚ö†Ô∏è Consid√©rations‚Äã","type":1,"pageTitle":"Service Discovery","url":"/docs/microservices/infrastructure/service-discovery#Ô∏è-consid√©rations","content":" ","version":"Next","tagName":"h2"},{"title":"1. Split-brain‚Äã","type":1,"pageTitle":"Service Discovery","url":"/docs/microservices/infrastructure/service-discovery#1-split-brain","content":" Registre partitionn√© ‚Üí diff√©rentes vues du r√©seau  Solution : Utiliser consensus (Raft, Paxos)  ","version":"Next","tagName":"h3"},{"title":"2. Stale data‚Äã","type":1,"pageTitle":"Service Discovery","url":"/docs/microservices/infrastructure/service-discovery#2-stale-data","content":" Cache obsol√®te apr√®s scaling/crash  Solution : TTL court + health checks fr√©quents  ","version":"Next","tagName":"h3"},{"title":"3. Registre down‚Äã","type":1,"pageTitle":"Service Discovery","url":"/docs/microservices/infrastructure/service-discovery#3-registre-down","content":" SPOF si le registre est indisponible  Solution :  Registre en cluster (3-5 n≈ìuds)Cache local en fallback  async function discoverWithFallback(serviceName) { try { return await consul.discover(serviceName); } catch (error) { console.warn('Registry unavailable, using cached value'); return localCache.get(serviceName); } }   ","version":"Next","tagName":"h3"},{"title":"‚úÖ Bonnes pratiques‚Äã","type":1,"pageTitle":"Service Discovery","url":"/docs/microservices/infrastructure/service-discovery#-bonnes-pratiques","content":" Health checks : liveness + readinessGraceful shutdown : d√©senregistrement propreTimeouts : ne pas bloquer sur registryCache local : fallback si registry downMonitoring : alertes sur services critiquesTTL court : d√©tection rapide des crashsMetadata : version, zone, tags pour routing avanc√©  ","version":"Next","tagName":"h2"},{"title":"Ressources‚Äã","type":1,"pageTitle":"Service Discovery","url":"/docs/microservices/infrastructure/service-discovery#ressources","content":" Consul by HashiCorpEureka - Netflix OSSetcd DocumentationKubernetes Service Discovery ","version":"Next","tagName":"h2"},{"title":"Service Mesh","type":0,"sectionRef":"#","url":"/docs/microservices/infrastructure/service-mesh","content":"","keywords":"","version":"Next"},{"title":"Concept‚Äã","type":1,"pageTitle":"Service Mesh","url":"/docs/microservices/infrastructure/service-mesh#concept","content":" Un Service Mesh est une couche d'infrastructure d√©di√©e qui g√®re la communication entre microservices. Il d√©charge les services de la logique de r√©seau, s√©curit√© et observabilit√©.  Principe Ajouter un proxy l√©ger (sidecar) √† c√¥t√© de chaque instance de service pour intercepter et g√©rer tout le trafic r√©seau.  ","version":"Next","tagName":"h2"},{"title":"üéØ Probl√®me r√©solu‚Äã","type":1,"pageTitle":"Service Mesh","url":"/docs/microservices/infrastructure/service-mesh#-probl√®me-r√©solu","content":" ","version":"Next","tagName":"h2"},{"title":"Sans Service Mesh‚Äã","type":1,"pageTitle":"Service Mesh","url":"/docs/microservices/infrastructure/service-mesh#sans-service-mesh","content":" Chaque service doit impl√©menter :  ‚ùå Circuit breaker, retry, timeout‚ùå Load balancing‚ùå Service discovery‚ùå TLS mutuel‚ùå Distributed tracing‚ùå Metrics collection  ‚Üí Code dupliqu√©, complexit√©, risques d'incoh√©rence  ","version":"Next","tagName":"h3"},{"title":"Avec Service Mesh‚Äã","type":1,"pageTitle":"Service Mesh","url":"/docs/microservices/infrastructure/service-mesh#avec-service-mesh","content":" ‚úÖ Logique de r√©seau externalis√©e dans l'infrastructure ‚úÖ Configuration centralis√©e‚úÖ Observabilit√© unifi√©e  ","version":"Next","tagName":"h3"},{"title":"üèóÔ∏è Architecture‚Äã","type":1,"pageTitle":"Service Mesh","url":"/docs/microservices/infrastructure/service-mesh#Ô∏è-architecture","content":" ","version":"Next","tagName":"h2"},{"title":"Pattern Sidecar‚Äã","type":1,"pageTitle":"Service Mesh","url":"/docs/microservices/infrastructure/service-mesh#pattern-sidecar","content":"   Composants :  Data Plane : proxies sidecar (Envoy)Control Plane : configuration et orchestration  ","version":"Next","tagName":"h3"},{"title":"üîß Principales solutions‚Äã","type":1,"pageTitle":"Service Mesh","url":"/docs/microservices/infrastructure/service-mesh#-principales-solutions","content":" ","version":"Next","tagName":"h2"},{"title":"Istio‚Äã","type":1,"pageTitle":"Service Mesh","url":"/docs/microservices/infrastructure/service-mesh#istio","content":" Le plus complet et mature  Avantages :  Riche en fonctionnalit√©sSupport multi-cloudLarge communaut√©  Inconv√©nients :  Complexe √† op√©rerOverhead de ressources  # Exemple de configuration Istio apiVersion: networking.istio.io/v1beta1 kind: VirtualService metadata: name: reviews spec: hosts: - reviews http: - route: - destination: host: reviews subset: v1 weight: 80 - destination: host: reviews subset: v2 weight: 20   ","version":"Next","tagName":"h3"},{"title":"Linkerd‚Äã","type":1,"pageTitle":"Service Mesh","url":"/docs/microservices/infrastructure/service-mesh#linkerd","content":" L√©ger et simple  Avantages :  Performance excellenteFacilit√© d'utilisationFaible consommation ressources  Inconv√©nients :  Moins de fonctionnalit√©s qu'Istio√âcosyst√®me plus restreint  ","version":"Next","tagName":"h3"},{"title":"Consul Connect‚Äã","type":1,"pageTitle":"Service Mesh","url":"/docs/microservices/infrastructure/service-mesh#consul-connect","content":" Par HashiCorp  Avantages :  Int√©gration native avec ConsulMulti-datacenterSupport multi-plateforme (pas seulement K8s)  ","version":"Next","tagName":"h3"},{"title":"AWS App Mesh‚Äã","type":1,"pageTitle":"Service Mesh","url":"/docs/microservices/infrastructure/service-mesh#aws-app-mesh","content":" Service manag√© AWS  Avantages :  Z√©ro op√©rations (manag√©)Int√©gration AWS nativePay-as-you-go  Inconv√©nients :  Vendor lock-inUniquement AWS  ","version":"Next","tagName":"h3"},{"title":"üöÄ Fonctionnalit√©s‚Äã","type":1,"pageTitle":"Service Mesh","url":"/docs/microservices/infrastructure/service-mesh#-fonctionnalit√©s","content":" ","version":"Next","tagName":"h2"},{"title":"1. Traffic Management‚Äã","type":1,"pageTitle":"Service Mesh","url":"/docs/microservices/infrastructure/service-mesh#1-traffic-management","content":" Load Balancing avanc√©‚Äã  # Round-robin pond√©r√© - destination: host: api-service weight: 80 - destination: host: api-service-canary weight: 20   Canary Deployment‚Äã  # Trafic progressif vers nouvelle version http: - match: - headers: user-type: exact: beta route: - destination: host: service subset: v2 - route: - destination: host: service subset: v1   Circuit Breaking‚Äã  apiVersion: networking.istio.io/v1beta1 kind: DestinationRule metadata: name: api-service spec: host: api-service trafficPolicy: connectionPool: tcp: maxConnections: 100 http: http1MaxPendingRequests: 50 maxRequestsPerConnection: 2 outlierDetection: consecutiveErrors: 5 interval: 30s baseEjectionTime: 30s   ","version":"Next","tagName":"h3"},{"title":"2. Security‚Äã","type":1,"pageTitle":"Service Mesh","url":"/docs/microservices/infrastructure/service-mesh#2-security","content":" mTLS automatique‚Äã  # Activer mTLS pour tout le namespace apiVersion: security.istio.io/v1beta1 kind: PeerAuthentication metadata: name: default namespace: production spec: mtls: mode: STRICT   Avantages :  Chiffrement automatiqueGestion de certificats transparenteRotation automatique  Authorization policies‚Äã  apiVersion: security.istio.io/v1beta1 kind: AuthorizationPolicy metadata: name: allow-read spec: action: ALLOW rules: - from: - source: principals: [&quot;cluster.local/ns/default/sa/frontend&quot;] to: - operation: methods: [&quot;GET&quot;]   ","version":"Next","tagName":"h3"},{"title":"3. Observability‚Äã","type":1,"pageTitle":"Service Mesh","url":"/docs/microservices/infrastructure/service-mesh#3-observability","content":" Distributed Tracing‚Äã  Propagation automatique des headers de tracing (Jaeger, Zipkin)  # Aucune instrumentation n√©cessaire ! # Le sidecar injecte automatiquement les span   M√©triques‚Äã  Collecte automatique des m√©triques standard :  # Latence P99 histogram_quantile(0.99, rate(istio_request_duration_milliseconds_bucket[5m]) ) # Taux d'erreur rate(istio_requests_total{response_code=~&quot;5..&quot;}[5m]) # Trafic entrant sum(rate(istio_requests_total[5m])) by (destination_service)   Service Graph‚Äã  Visualisation automatique des d√©pendances  Frontend ‚Üí API Gateway ‚Üí User Service ‚Üí Product Service ‚Üí DB   ","version":"Next","tagName":"h3"},{"title":"4. Resiliency‚Äã","type":1,"pageTitle":"Service Mesh","url":"/docs/microservices/infrastructure/service-mesh#4-resiliency","content":" Retry automatique‚Äã  http: - route: - destination: host: api-service retries: attempts: 3 perTryTimeout: 2s retryOn: 5xx,reset,connect-failure   Timeout‚Äã  http: - route: - destination: host: slow-service timeout: 5s   Fault Injection (test de r√©silience)‚Äã  # Simuler 10% de latence pour tester http: - fault: delay: percentage: value: 10 fixedDelay: 5s route: - destination: host: service   ","version":"Next","tagName":"h3"},{"title":"üé® Cas d'usage‚Äã","type":1,"pageTitle":"Service Mesh","url":"/docs/microservices/infrastructure/service-mesh#-cas-dusage","content":" ","version":"Next","tagName":"h2"},{"title":"1. Migration progressive vers microservices‚Äã","type":1,"pageTitle":"Service Mesh","url":"/docs/microservices/infrastructure/service-mesh#1-migration-progressive-vers-microservices","content":" # Router 90% vers le monolithe, 10% vers microservice http: - route: - destination: host: monolith weight: 90 - destination: host: new-microservice weight: 10   ","version":"Next","tagName":"h3"},{"title":"2. Multi-cluster‚Äã","type":1,"pageTitle":"Service Mesh","url":"/docs/microservices/infrastructure/service-mesh#2-multi-cluster","content":" Distribuer le trafic entre plusieurs clusters Kubernetes  # Failover automatique http: - route: - destination: host: service.cluster-primary weight: 100 mirror: host: service.cluster-backup   ","version":"Next","tagName":"h3"},{"title":"3. A/B Testing‚Äã","type":1,"pageTitle":"Service Mesh","url":"/docs/microservices/infrastructure/service-mesh#3-ab-testing","content":" # Envoyer utilisateurs premium vers version am√©lior√©e http: - match: - headers: user-tier: exact: premium route: - destination: subset: premium-version - route: - destination: subset: standard-version   ","version":"Next","tagName":"h3"},{"title":"üìä Performance‚Äã","type":1,"pageTitle":"Service Mesh","url":"/docs/microservices/infrastructure/service-mesh#-performance","content":" ","version":"Next","tagName":"h2"},{"title":"Overhead typique‚Äã","type":1,"pageTitle":"Service Mesh","url":"/docs/microservices/infrastructure/service-mesh#overhead-typique","content":" M√©trique\tSans Service Mesh\tAvec Service MeshLatency\t~1ms\t~1-3ms (+1-2ms) CPU\tBaseline\t+10-20% Memory\tBaseline\t+50-100MB/pod  tip L'overhead est souvent n√©gligeable compar√© aux b√©n√©fices (s√©curit√©, observabilit√©)  ","version":"Next","tagName":"h3"},{"title":"‚ö†Ô∏è Consid√©rations‚Äã","type":1,"pageTitle":"Service Mesh","url":"/docs/microservices/infrastructure/service-mesh#Ô∏è-consid√©rations","content":" ","version":"Next","tagName":"h2"},{"title":"Quand utiliser un Service Mesh ?‚Äã","type":1,"pageTitle":"Service Mesh","url":"/docs/microservices/infrastructure/service-mesh#quand-utiliser-un-service-mesh-","content":" ‚úÖ Oui si :  10+ microservicesBesoin de mTLS universelObservabilit√© critiqueD√©ploiements canary fr√©quentsMulti-cluster/multi-cloud  ‚ùå Non si :  D√©but de projet (&lt; 5 services)√âquipe sans expertise KubernetesContraintes de latence extr√™mes (&lt; 5ms)Infrastructure simple  ","version":"Next","tagName":"h3"},{"title":"Complexit√© op√©rationnelle‚Äã","type":1,"pageTitle":"Service Mesh","url":"/docs/microservices/infrastructure/service-mesh#complexit√©-op√©rationnelle","content":" Comp√©tences requises :  Kubernetes avanc√©Networking (Envoy, iptables)Certificats TLS  Op√©rations :  Mise √† jour du control planeGestion des certificatsDebugging r√©seau complexe  ","version":"Next","tagName":"h3"},{"title":"‚úÖ Bonnes pratiques‚Äã","type":1,"pageTitle":"Service Mesh","url":"/docs/microservices/infrastructure/service-mesh#-bonnes-pratiques","content":" Commencer simple : activer progressivement les fonctionnalit√©sNamespace isolation : segmenter par environnementMonitoring du mesh : m√©triques du control plane et sidecarsLimites de ressources : d√©finir requests/limits pour sidecarsStrat√©gie mTLS : PERMISSIVE ‚Üí STRICT progressivementVersioning des configurations : GitOps pour les ressources meshPlan de rollback : pouvoir d√©sactiver rapidement  ","version":"Next","tagName":"h2"},{"title":"üß™ Migration progressive‚Äã","type":1,"pageTitle":"Service Mesh","url":"/docs/microservices/infrastructure/service-mesh#-migration-progressive","content":" ","version":"Next","tagName":"h2"},{"title":"Phase 1 : Observability‚Äã","type":1,"pageTitle":"Service Mesh","url":"/docs/microservices/infrastructure/service-mesh#phase-1--observability","content":" # Activer uniquement les m√©triques et traces annotations: sidecar.istio.io/inject: &quot;true&quot;   ","version":"Next","tagName":"h3"},{"title":"Phase 2 : Security‚Äã","type":1,"pageTitle":"Service Mesh","url":"/docs/microservices/infrastructure/service-mesh#phase-2--security","content":" # Activer mTLS en mode permissif mtls: mode: PERMISSIVE # Accepte TLS et plain   ","version":"Next","tagName":"h3"},{"title":"Phase 3 : Traffic Management‚Äã","type":1,"pageTitle":"Service Mesh","url":"/docs/microservices/infrastructure/service-mesh#phase-3--traffic-management","content":" # Activer circuit breaker, retry, etc. trafficPolicy: connectionPool: {...} outlierDetection: {...}   ","version":"Next","tagName":"h3"},{"title":"Phase 4 : Strict Mode‚Äã","type":1,"pageTitle":"Service Mesh","url":"/docs/microservices/infrastructure/service-mesh#phase-4--strict-mode","content":" # Forcer mTLS pour tout mtls: mode: STRICT   ","version":"Next","tagName":"h3"},{"title":"üìà M√©triques cl√©s‚Äã","type":1,"pageTitle":"Service Mesh","url":"/docs/microservices/infrastructure/service-mesh#-m√©triques-cl√©s","content":" # Sant√© du control plane up{job=&quot;istiod&quot;} # Latence ajout√©e par sidecar histogram_quantile(0.99, envoy_cluster_upstream_rq_time_bucket) # Taux de connexion TLS rate(istio_tcp_connections_opened_total{security_policy=&quot;mutual_tls&quot;}[5m]) # Memory sidecar container_memory_usage_bytes{container=&quot;istio-proxy&quot;}   ","version":"Next","tagName":"h2"},{"title":"Ressources‚Äã","type":1,"pageTitle":"Service Mesh","url":"/docs/microservices/infrastructure/service-mesh#ressources","content":" Istio DocumentationLinkerdThe Service Mesh: What Every Software Engineer Needs to Know (Book)CNCF Service Mesh Landscape ","version":"Next","tagName":"h2"},{"title":"Migration","type":0,"sectionRef":"#","url":"/docs/microservices/migration","content":"Migration","keywords":"","version":"Next"},{"title":"Concepts Microservices","type":0,"sectionRef":"#","url":"/docs/microservices/overview","content":"","keywords":"","version":"Next"},{"title":"üîÅ DRY (Don't Repeat Yourself)‚Äã","type":1,"pageTitle":"Concepts Microservices","url":"/docs/microservices/overview#-dry-dont-repeat-yourself","content":" Principe partag√© par l'Agilit√© et la programmation orient√©e objet.  Objectif : √©viter la duplication de code ‚Üí cr√©er des composants r√©utilisables.  Attention Trop de factorisation (ex : classes utilitaires globales) peut casser le d√©couplage entre modules. En microservices, la modularit√© et l'ind√©pendance priment sur la factorisation extr√™me.  ","version":"Next","tagName":"h2"},{"title":"üß© Principes des Microservices‚Äã","type":1,"pageTitle":"Concepts Microservices","url":"/docs/microservices/overview#-principes-des-microservices","content":" ","version":"Next","tagName":"h2"},{"title":"‚úÖ Principes fondamentaux‚Äã","type":1,"pageTitle":"Concepts Microservices","url":"/docs/microservices/overview#-principes-fondamentaux","content":" Minimal mais complet : Chaque microservice couvre une fonction m√©tier pr√©cise ou une pr√©occupation transverseAutonome &amp; ind√©pendant : D√©veloppement et d√©ploiement s√©par√©sScalable automatiquement : Mise √† l'√©chelle facilit√©eExposition d'une API simple : Communication claire entre microservicesR√©silient : Faible couplage ‚Äì une panne ne bloque pas l'ensemble du syst√®me  ","version":"Next","tagName":"h3"},{"title":"Organisation du d√©veloppement‚Äã","type":1,"pageTitle":"Concepts Microservices","url":"/docs/microservices/overview#organisation-du-d√©veloppement","content":" R√©partition par domaines fonctionnels : Un service = un processus m√©tier  √âquipes align√©es avec l'architecture :  D√©ploiements ind√©pendantsCycles courts de d√©veloppementIsolation des bugsTestabilit√© accrue  ","version":"Next","tagName":"h3"},{"title":"üì° Communication entre services‚Äã","type":1,"pageTitle":"Concepts Microservices","url":"/docs/microservices/overview#-communication-entre-services","content":" ","version":"Next","tagName":"h2"},{"title":"Types de communication‚Äã","type":1,"pageTitle":"Concepts Microservices","url":"/docs/microservices/overview#types-de-communication","content":" Synchrone : REST, gRPC, ThriftAsynchrone : AMQP, Kafka, STOMP  ","version":"Next","tagName":"h3"},{"title":"Formats de donn√©es‚Äã","type":1,"pageTitle":"Concepts Microservices","url":"/docs/microservices/overview#formats-de-donn√©es","content":" Texte : JSON/XML (lisibles, mais plus lourds)Binaire : Avro/Protobuf (compacts et performants)  ","version":"Next","tagName":"h3"},{"title":"üóÉ Gestion des Bases de Donn√©es‚Äã","type":1,"pageTitle":"Concepts Microservices","url":"/docs/microservices/overview#-gestion-des-bases-de-donn√©es","content":" ","version":"Next","tagName":"h2"},{"title":"‚úÖ Principe fondamental‚Äã","type":1,"pageTitle":"Concepts Microservices","url":"/docs/microservices/overview#-principe-fondamental","content":" R√®gle d'or Chaque microservice doit poss√©der sa propre base de donn√©es et ne jamais acc√©der directement √† celle d'un autre service.  ","version":"Next","tagName":"h3"},{"title":"üéØ Pourquoi une base par microservice ?‚Äã","type":1,"pageTitle":"Concepts Microservices","url":"/docs/microservices/overview#-pourquoi-une-base-par-microservice-","content":" üîó 1. D√©couplage fort‚Äã  Si deux microservices partagent une base, ils deviennent √©troitement li√©sUne modification de sch√©ma pour un service peut casser l'autre serviceR√©sultat : les d√©ploiements doivent √™tre coordonn√©s, ce qu'on veut √©viter en microservices  ‚öôÔ∏è 2. Polyglot Persistence‚Äã  Chaque service peut choisir le type de base de donn√©es adapt√© √† son besoin (SQL, NoSQL, Graph, etc.)Plus besoin de faire des compromis technologiques entre services  üöÄ 3. Performance &amp; scalabilit√©‚Äã  Chaque base peut √™tre h√©berg√©e et optimis√©e ind√©pendammentMeilleure r√©partition de charge et mont√©e en charge plus fine  ","version":"Next","tagName":"h3"},{"title":"üß± Niveaux de s√©paration possibles‚Äã","type":1,"pageTitle":"Concepts Microservices","url":"/docs/microservices/overview#-niveaux-de-s√©paration-possibles","content":" Architecture\tAvantages\tInconv√©nients1 base / microservice\tInd√©pendance, coh√©rence m√©tier\tComplexit√© de synchronisation, pas d'ACID global BDD partag√©e\tSimplicit√© d'acc√®s concurrent\tCouplage fort, goulot d'√©tranglement  Niveau de s√©paration\tDescription\tAvantages\tInconv√©nientsSch√©ma par service\tSch√©ma d√©di√© dans une m√™me BDD\tFacile √† mettre en place\tRisque d'acc√®s non contr√¥l√© entre sch√©mas BDD par service\tChaque service a sa propre base sur le m√™me serveur\tMeilleure s√©paration logique\tCouplage physique possible Serveur BDD par service\tBase + serveur d√©di√©s par service\tIsolation maximale, performance\tCo√ªt et complexit√© accrus  ","version":"Next","tagName":"h3"},{"title":"üõ† Patterns utiles‚Äã","type":1,"pageTitle":"Concepts Microservices","url":"/docs/microservices/overview#-patterns-utiles","content":" Saga PatternCQRS (Command Query Responsibility Segregation)Eventual Consistency  ","version":"Next","tagName":"h3"},{"title":"üöÄ Indicateurs DORA‚Äã","type":1,"pageTitle":"Concepts Microservices","url":"/docs/microservices/overview#-indicateurs-dora","content":" Les 4 m√©triques cl√©s pour mesurer la performance DevOps :  Fr√©quence de d√©ploiementLead Time for ChangesTaux d'√©chec des d√©ploiementsTemps de restauration de service  üîÑ Objectif : am√©liorer la rapidit√©, la stabilit√© et la r√©silience des livraisons logicielles.  ","version":"Next","tagName":"h2"},{"title":"üí° Conditions pour la performance d'√©quipe‚Äã","type":1,"pageTitle":"Concepts Microservices","url":"/docs/microservices/overview#-conditions-pour-la-performance-d√©quipe","content":" D√©veloppement, test et d√©ploiement ind√©pendants entre √©quipesBoucles de feedback rapides et pipelines de d√©ploiement efficacesAdoption facilit√©e de technologies vari√©es selon les sous-domainesPossibilit√© de faire √©voluer les stacks techniques par microservice  ","version":"Next","tagName":"h3"},{"title":"üß± Limites des monolithes‚Äã","type":1,"pageTitle":"Concepts Microservices","url":"/docs/microservices/overview#-limites-des-monolithes","content":" Complexit√© croissante ‚Üí difficile √† maintenir, d√©marrage lentD√©ploiements lourds ‚Üí pas de d√©ploiement partielManque de scalabilit√© fine ‚Üí Mauvais ajustement aux infrastructures sp√©cifiquesFaible fiabilit√© ‚Üí Un bug dans un module peut faire planter tout le syst√®meVerrou technologique ‚Üí migration difficile  ","version":"Next","tagName":"h2"},{"title":"üß© Avantages des microservices‚Äã","type":1,"pageTitle":"Concepts Microservices","url":"/docs/microservices/overview#-avantages-des-microservices","content":" ","version":"Next","tagName":"h2"},{"title":"üîπ Modularit√© & simplicit√©‚Äã","type":1,"pageTitle":"Concepts Microservices","url":"/docs/microservices/overview#-modularit√©--simplicit√©","content":" D√©veloppement par domaine m√©tierMaintenance cibl√©e et simplifi√©e  ","version":"Next","tagName":"h3"},{"title":"üîπ Ind√©pendance technologique‚Äã","type":1,"pageTitle":"Concepts Microservices","url":"/docs/microservices/overview#-ind√©pendance-technologique","content":" Chaque service choisit sa stack (polyglot persistence)  ","version":"Next","tagName":"h3"},{"title":"üîπ D√©ploiement ind√©pendant‚Äã","type":1,"pageTitle":"Concepts Microservices","url":"/docs/microservices/overview#-d√©ploiement-ind√©pendant","content":" Favorise l'int√©gration continue et l'A/B testing  ","version":"Next","tagName":"h3"},{"title":"üîπ Scalabilit√© sp√©cifique‚Äã","type":1,"pageTitle":"Concepts Microservices","url":"/docs/microservices/overview#-scalabilit√©-sp√©cifique","content":" Chaque service peut √™tre optimis√© mat√©riellement  ","version":"Next","tagName":"h3"},{"title":"‚ö†Ô∏è Inconv√©nients des microservices‚Äã","type":1,"pageTitle":"Concepts Microservices","url":"/docs/microservices/overview#Ô∏è-inconv√©nients-des-microservices","content":" ","version":"Next","tagName":"h2"},{"title":"üî∏ Complexit√© accrue‚Äã","type":1,"pageTitle":"Concepts Microservices","url":"/docs/microservices/overview#-complexit√©-accrue","content":" Tests plus complexesCoordination multi-services difficile (n√©cessite API Gateway, Service Discovery pour g√©rer dynamiquement les adresses r√©seau)  ","version":"Next","tagName":"h3"},{"title":"üî∏ Gestion des pannes‚Äã","type":1,"pageTitle":"Concepts Microservices","url":"/docs/microservices/overview#-gestion-des-pannes","content":" Services distants ‚Üí timeouts, d√©faillances partielles  Solutions :  Timeout, limites de requ√™tesCircuit breaker (ex: Hystrix, resilience4j)Fallbacks (cache, valeurs par d√©faut)  ","version":"Next","tagName":"h3"},{"title":"üîå Inter-Process Communication (IPC)‚Äã","type":1,"pageTitle":"Concepts Microservices","url":"/docs/microservices/overview#-inter-process-communication-ipc","content":" Dans un syst√®me distribu√©, chaque microservice est un processus ind√©pendant. Il faut donc choisir un m√©canisme de communication entre services (IPC).  ","version":"Next","tagName":"h2"},{"title":"üß≠ Deux dimensions‚Äã","type":1,"pageTitle":"Concepts Microservices","url":"/docs/microservices/overview#-deux-dimensions","content":" 1. Relation‚Äã  Un-√†-un : une requ√™te ‚Üí un serviceUn-√†-plusieurs : une requ√™te ‚Üí plusieurs services  2. Type‚Äã  Synchrone : le client attend la r√©ponseAsynchrone : le client n'attend pas, la r√©ponse peut arriver plus tard  ","version":"Next","tagName":"h3"},{"title":"üì¨ Types d'interactions‚Äã","type":1,"pageTitle":"Concepts Microservices","url":"/docs/microservices/overview#-types-dinteractions","content":" Type\tDescriptionRequest/Response\tLe client envoie une requ√™te et attend une r√©ponse Notification\tEnvoi sans r√©ponse attendue (fire and forget) Request/Async Response\tRequ√™te envoy√©e, r√©ponse re√ßue plus tard sans bloquer le client Publish/Subscribe\tDiffusion d'un message √† plusieurs services abonn√©s Publish/Async Response\tLe client attend des r√©ponses de plusieurs services pendant un temps donn√©  ","version":"Next","tagName":"h3"},{"title":"Exemple d'usage‚Äã","type":1,"pageTitle":"Concepts Microservices","url":"/docs/microservices/overview#exemple-dusage","content":" Un smartphone demande un trajet :  Il notifie le service de gestion des trajetsCelui-ci appelle (en request/response) le service passager pour v√©rifier le comptePuis il publie une demande de prise en charge ‚Üí notification aux services de dispatch  ","version":"Next","tagName":"h3"},{"title":"üß∞ Technologies IPC‚Äã","type":1,"pageTitle":"Concepts Microservices","url":"/docs/microservices/overview#-technologies-ipc","content":" Type\tExemples\tDescriptionSynchrone\tREST, gRPC, Thrift\tAppels imm√©diats, simples √† impl√©menter Asynchrone\tAMQP, Kafka, STOMP\tPour les √©v√©nements, meilleure r√©silience  ","version":"Next","tagName":"h3"},{"title":"üîÑ √âvolution des APIs‚Äã","type":1,"pageTitle":"Concepts Microservices","url":"/docs/microservices/overview#-√©volution-des-apis","content":" ","version":"Next","tagName":"h2"},{"title":"1. Complexit√© li√©e √† l'√©volution‚Äã","type":1,"pageTitle":"Concepts Microservices","url":"/docs/microservices/overview#1-complexit√©-li√©e-√†-l√©volution","content":" Monolithe : simple ‚Üí on met √† jour une seule base de codeMicroservices : complexe ‚Üí services versionn√©s, clients multiples, d√©ploiements progressifs  ","version":"Next","tagName":"h3"},{"title":"2. Compatibilit√© ascendante (Backward Compatibility)‚Äã","type":1,"pageTitle":"Concepts Microservices","url":"/docs/microservices/overview#2-compatibilit√©-ascendante-backward-compatibility","content":" ‚ûï Ajout d'attributs dans une requ√™te ou r√©ponse existante  R√®gles :  Les clients doivent ignorer les champs inconnusLes services doivent fournir des valeurs par d√©faut pour les champs manquants  Principe de robustesse (Postel's law) ¬´ Sois tol√©rant en r√©ception, strict en √©mission. ¬ª  ","version":"Next","tagName":"h3"},{"title":"3. Changements incompatibles‚Äã","type":1,"pageTitle":"Concepts Microservices","url":"/docs/microservices/overview#3-changements-incompatibles","content":" Exemple : suppression ou modification d'un champ obligatoire  üéØ Solution : versionnement de l'API  Ex : /v1/products, /v2/products  Un service peut :  G√©rer plusieurs versions en parall√®leOu d√©ployer plusieurs instances sp√©cialis√©es par version  ","version":"Next","tagName":"h3"},{"title":"‚ùå Gestion des d√©faillances partielles (Partial Failures)‚Äã","type":1,"pageTitle":"Concepts Microservices","url":"/docs/microservices/overview#-gestion-des-d√©faillances-partielles-partial-failures","content":" Un microservice peut ne pas r√©pondre. Sans pr√©caution, cela plante tout le syst√®me.  ","version":"Next","tagName":"h2"},{"title":"Strat√©gies de r√©silience‚Äã","type":1,"pageTitle":"Concepts Microservices","url":"/docs/microservices/overview#strat√©gies-de-r√©silience","content":" Strat√©gie\tDescription‚è≥ Timeouts\tNe jamais attendre ind√©finiment une r√©ponse üö´ Limites de requ√™tes\tBloquer de nouvelles requ√™tes si un service est satur√© üí• Circuit Breaker\tCouper automatiquement les appels vers un service en √©chec r√©p√©titif üß∞ Fallbacks\tUtiliser des donn√©es en cache ou des valeurs par d√©faut en cas d'√©chec  ","version":"Next","tagName":"h3"},{"title":"D√©tail des strat√©gies‚Äã","type":1,"pageTitle":"Concepts Microservices","url":"/docs/microservices/overview#d√©tail-des-strat√©gies","content":" 1. Timeout r√©seau‚Äã  ‚ùå Ne jamais bloquer ind√©finiment ‚úÖ Toujours d√©finir un timeout üßµ √âvite de saturer les threads d'ex√©cution  2. Limite de requ√™tes simultan√©es‚Äã  Mettre un quota de requ√™tes en vol par client ou serviceNe pas envoyer une requ√™te si on sait qu'elle va √©chouer (file pleine)  3. Circuit Breaker Pattern‚Äã  ‚õî Trop d'√©checs ‚Üí on coupe temporairement l'acc√®s au service üîÅ Apr√®s une dur√©e, on r√©essaye ‚úÖ Si succ√®s, on r√©ouvre le circuit  üì¶ Outils : Hystrix (JVM) ou √©quivalent dans d'autres stacks (ex: resilience4j, Polly, Istio...)  4. Fallbacks‚Äã  üîô Fournir une valeur de secours  Exemple : Si le service de recommandations est en panne :  Retourner une liste vide au lieu de bloquer toute la page produitUtiliser des donn√©es en cacheAfficher un message d'erreur simple  ","version":"Next","tagName":"h3"},{"title":"üóÑ Comparaison : Monolithe vs Microservices‚Äã","type":1,"pageTitle":"Concepts Microservices","url":"/docs/microservices/overview#-comparaison--monolithe-vs-microservices","content":" ","version":"Next","tagName":"h2"},{"title":"üè¢ Architecture Monolithe‚Äã","type":1,"pageTitle":"Concepts Microservices","url":"/docs/microservices/overview#-architecture-monolithe","content":" 1 seule BDD relationnelleAcc√®s ACID classique avec transactions : Atomicit√©Coh√©renceIsolationDurabilit√©  ","version":"Next","tagName":"h3"},{"title":"üß© Architecture Microservices‚Äã","type":1,"pageTitle":"Concepts Microservices","url":"/docs/microservices/overview#-architecture-microservices","content":" Chaque service a sa propre base priv√©e (pas d'acc√®s partag√©)  Avantages :  Faible couplageAutonomieMeilleure scalabilit√©  Inconv√©nients :  Transactions distribu√©es difficiles (pas de 2PC dans NoSQL)Requ√™tes inter-services complexes    ","version":"Next","tagName":"h3"},{"title":"Ressources compl√©mentaires‚Äã","type":1,"pageTitle":"Concepts Microservices","url":"/docs/microservices/overview#ressources-compl√©mentaires","content":" Pattern: Database per serviceCircuit Breaker PatternDORA Metrics ","version":"Next","tagName":"h2"},{"title":"Patterns","type":0,"sectionRef":"#","url":"/docs/microservices/patterns","content":"Patterns","keywords":"","version":"Next"},{"title":"Circuit Breaker Pattern","type":0,"sectionRef":"#","url":"/docs/microservices/patterns/circuit-breaker","content":"","keywords":"","version":"Next"},{"title":"Concept‚Äã","type":1,"pageTitle":"Circuit Breaker Pattern","url":"/docs/microservices/patterns/circuit-breaker#concept","content":" Le Circuit Breaker est un pattern de r√©silience qui emp√™che une application d'appeler continuellement un service qui risque d'√©chouer, prot√©geant ainsi le syst√®me contre les d√©faillances en cascade.  Analogie Comme un disjoncteur √©lectrique qui coupe le courant lors d'une surcharge pour prot√©ger l'installation.  ","version":"Next","tagName":"h2"},{"title":"üéØ Probl√®me r√©solu‚Äã","type":1,"pageTitle":"Circuit Breaker Pattern","url":"/docs/microservices/patterns/circuit-breaker#-probl√®me-r√©solu","content":" Sans Circuit Breaker, quand un service est d√©faillant :  Les threads s'accumulent en attente de timeout√âpuisement des ressources (connexions, m√©moire)Effet domino sur les autres servicesTemps de r√©ponse d√©grad√©s pour tous les utilisateurs  ","version":"Next","tagName":"h2"},{"title":"üîÑ √âtats du Circuit Breaker‚Äã","type":1,"pageTitle":"Circuit Breaker Pattern","url":"/docs/microservices/patterns/circuit-breaker#-√©tats-du-circuit-breaker","content":"   ","version":"Next","tagName":"h2"},{"title":"1. Closed (Ferm√©)‚Äã","type":1,"pageTitle":"Circuit Breaker Pattern","url":"/docs/microservices/patterns/circuit-breaker#1-closed-ferm√©","content":" Circuit normal, toutes les requ√™tes passentCompte les √©checsSi le seuil est atteint ‚Üí passage en Open  ","version":"Next","tagName":"h3"},{"title":"2. Open (Ouvert)‚Äã","type":1,"pageTitle":"Circuit Breaker Pattern","url":"/docs/microservices/patterns/circuit-breaker#2-open-ouvert","content":" Toutes les requ√™tes sont imm√©diatement rejet√©esPas d'appel au service d√©faillantFallback retourn√© instantan√©mentApr√®s un timeout ‚Üí passage en Half-Open  ","version":"Next","tagName":"h3"},{"title":"3. Half-Open (Semi-ouvert)‚Äã","type":1,"pageTitle":"Circuit Breaker Pattern","url":"/docs/microservices/patterns/circuit-breaker#3-half-open-semi-ouvert","content":" Laisse passer quelques requ√™tes de testSi succ√®s ‚Üí retour en ClosedSi √©chec ‚Üí retour en Open  ","version":"Next","tagName":"h3"},{"title":"‚öôÔ∏è Configuration typique‚Äã","type":1,"pageTitle":"Circuit Breaker Pattern","url":"/docs/microservices/patterns/circuit-breaker#Ô∏è-configuration-typique","content":" circuitBreaker: failureThreshold: 50% # % d'√©checs pour ouvrir slowCallThreshold: 5s # Seuil de lenteur minimumNumberOfCalls: 10 # Appels avant √©valuation waitDurationInOpenState: 60s # Dur√©e en √©tat Open permittedCallsInHalfOpen: 3 # Appels de test en Half-Open   ","version":"Next","tagName":"h2"},{"title":"üíª Impl√©mentation‚Äã","type":1,"pageTitle":"Circuit Breaker Pattern","url":"/docs/microservices/patterns/circuit-breaker#-impl√©mentation","content":" ","version":"Next","tagName":"h2"},{"title":"Java (Resilience4j)‚Äã","type":1,"pageTitle":"Circuit Breaker Pattern","url":"/docs/microservices/patterns/circuit-breaker#java-resilience4j","content":" CircuitBreaker circuitBreaker = CircuitBreaker.of(&quot;userService&quot;, CircuitBreakerConfig.custom() .failureRateThreshold(50) .waitDurationInOpenState(Duration.ofSeconds(60)) .slidingWindowSize(10) .build() ); Supplier&lt;User&gt; decoratedSupplier = CircuitBreaker .decorateSupplier(circuitBreaker, () -&gt; userService.getUser(id)); Try&lt;User&gt; result = Try.ofSupplier(decoratedSupplier) .recover(throwable -&gt; getUserFromCache(id));   ","version":"Next","tagName":"h3"},{"title":"Python (pybreaker)‚Äã","type":1,"pageTitle":"Circuit Breaker Pattern","url":"/docs/microservices/patterns/circuit-breaker#python-pybreaker","content":" from pybreaker import CircuitBreaker breaker = CircuitBreaker( fail_max=5, timeout_duration=60 ) @breaker def call_external_service(): response = requests.get('http://api.example.com/data') return response.json() try: data = call_external_service() except CircuitBreakerError: data = get_fallback_data()   ","version":"Next","tagName":"h3"},{"title":"JavaScript (opossum)‚Äã","type":1,"pageTitle":"Circuit Breaker Pattern","url":"/docs/microservices/patterns/circuit-breaker#javascript-opossum","content":" const CircuitBreaker = require('opossum'); const options = { timeout: 3000, errorThresholdPercentage: 50, resetTimeout: 30000 }; const breaker = new CircuitBreaker(callService, options); breaker.fallback(() =&gt; getCachedData()); breaker.fire(userId) .then(data =&gt; console.log(data)) .catch(err =&gt; console.error(err));   ","version":"Next","tagName":"h3"},{"title":"üõ°Ô∏è Strat√©gies de Fallback‚Äã","type":1,"pageTitle":"Circuit Breaker Pattern","url":"/docs/microservices/patterns/circuit-breaker#Ô∏è-strat√©gies-de-fallback","content":" ","version":"Next","tagName":"h2"},{"title":"1. Cache‚Äã","type":1,"pageTitle":"Circuit Breaker Pattern","url":"/docs/microservices/patterns/circuit-breaker#1-cache","content":" Retourner des donn√©es en cache (m√™me p√©rim√©es)  .recover(throwable -&gt; { return cache.get(key) .orElseThrow(() -&gt; new ServiceUnavailableException()); })   ","version":"Next","tagName":"h3"},{"title":"2. Valeur par d√©faut‚Äã","type":1,"pageTitle":"Circuit Breaker Pattern","url":"/docs/microservices/patterns/circuit-breaker#2-valeur-par-d√©faut","content":" .recover(throwable -&gt; User.defaultUser())   ","version":"Next","tagName":"h3"},{"title":"3. D√©gradation fonctionnelle‚Äã","type":1,"pageTitle":"Circuit Breaker Pattern","url":"/docs/microservices/patterns/circuit-breaker#3-d√©gradation-fonctionnelle","content":" .recover(throwable -&gt; { // Retourner profil sans recommandations return new UserProfile(userId, name, Collections.emptyList()); })   ","version":"Next","tagName":"h3"},{"title":"4. Fail fast‚Äã","type":1,"pageTitle":"Circuit Breaker Pattern","url":"/docs/microservices/patterns/circuit-breaker#4-fail-fast","content":" .recover(throwable -&gt; { throw new ServiceUnavailableException(&quot;Service temporairement indisponible&quot;); })   ","version":"Next","tagName":"h3"},{"title":"üìä M√©triques √† surveiller‚Äã","type":1,"pageTitle":"Circuit Breaker Pattern","url":"/docs/microservices/patterns/circuit-breaker#-m√©triques-√†-surveiller","content":" √âtat du circuit : Open/Closed/HalfOpenTaux d'√©chec : % de requ√™tes en erreurNombre d'appels rejet√©s : requ√™tes bloqu√©es en √©tat OpenLatence : temps de r√©ponse moyenTaux de fallback : fr√©quence d'utilisation du fallback  ","version":"Next","tagName":"h2"},{"title":"Dashboard Grafana‚Äã","type":1,"pageTitle":"Circuit Breaker Pattern","url":"/docs/microservices/patterns/circuit-breaker#dashboard-grafana","content":" # √âtat du circuit resilience4j_circuitbreaker_state{name=&quot;userService&quot;} # Taux d'√©chec rate(resilience4j_circuitbreaker_calls_total{kind=&quot;failed&quot;}[5m]) # Appels rejet√©s resilience4j_circuitbreaker_not_permitted_calls_total   ","version":"Next","tagName":"h3"},{"title":"üé® Patterns compl√©mentaires‚Äã","type":1,"pageTitle":"Circuit Breaker Pattern","url":"/docs/microservices/patterns/circuit-breaker#-patterns-compl√©mentaires","content":" ","version":"Next","tagName":"h2"},{"title":"Combinaison avec Retry‚Äã","type":1,"pageTitle":"Circuit Breaker Pattern","url":"/docs/microservices/patterns/circuit-breaker#combinaison-avec-retry","content":" Retry retry = Retry.ofDefaults(&quot;userService&quot;); CircuitBreaker circuitBreaker = CircuitBreaker.ofDefaults(&quot;userService&quot;); Supplier&lt;User&gt; supplier = () -&gt; userService.getUser(id); Supplier&lt;User&gt; decoratedSupplier = Decorators .ofSupplier(supplier) .withRetry(retry) // D'abord retry .withCircuitBreaker(circuitBreaker) // Puis circuit breaker .withFallback(ex -&gt; getUserFromCache(id)) .decorate();   ","version":"Next","tagName":"h3"},{"title":"Avec Bulkhead‚Äã","type":1,"pageTitle":"Circuit Breaker Pattern","url":"/docs/microservices/patterns/circuit-breaker#avec-bulkhead","content":" Limiter les ressources consomm√©es m√™me avant l'ouverture du circuit  Bulkhead bulkhead = Bulkhead.of(&quot;userService&quot;, BulkheadConfig.custom() .maxConcurrentCalls(10) .build()); Supplier&lt;User&gt; decoratedSupplier = Decorators .ofSupplier(supplier) .withBulkhead(bulkhead) .withCircuitBreaker(circuitBreaker) .decorate();   ","version":"Next","tagName":"h3"},{"title":"‚ö†Ô∏è Pi√®ges √† √©viter‚Äã","type":1,"pageTitle":"Circuit Breaker Pattern","url":"/docs/microservices/patterns/circuit-breaker#Ô∏è-pi√®ges-√†-√©viter","content":" ","version":"Next","tagName":"h2"},{"title":"1. Seuil trop sensible‚Äã","type":1,"pageTitle":"Circuit Breaker Pattern","url":"/docs/microservices/patterns/circuit-breaker#1-seuil-trop-sensible","content":" Circuit s'ouvre trop souvent pour des erreurs transitoires  Solution : ajuster minimumNumberOfCalls et failureThreshold  ","version":"Next","tagName":"h3"},{"title":"2. Timeout trop long en Open‚Äã","type":1,"pageTitle":"Circuit Breaker Pattern","url":"/docs/microservices/patterns/circuit-breaker#2-timeout-trop-long-en-open","content":" Service reste indisponible trop longtemps  Solution : waitDurationInOpenState adapt√© (30-60s g√©n√©ralement)  ","version":"Next","tagName":"h3"},{"title":"3. Pas de fallback‚Äã","type":1,"pageTitle":"Circuit Breaker Pattern","url":"/docs/microservices/patterns/circuit-breaker#3-pas-de-fallback","content":" Circuit ouvert = erreur utilisateur  Solution : toujours pr√©voir un fallback gracieux  ","version":"Next","tagName":"h3"},{"title":"4. Circuit global‚Äã","type":1,"pageTitle":"Circuit Breaker Pattern","url":"/docs/microservices/patterns/circuit-breaker#4-circuit-global","content":" Un circuit partag√© entre plusieurs endpoints  Solution : un circuit breaker par d√©pendance  ","version":"Next","tagName":"h3"},{"title":"‚úÖ Bonnes pratiques‚Äã","type":1,"pageTitle":"Circuit Breaker Pattern","url":"/docs/microservices/patterns/circuit-breaker#-bonnes-pratiques","content":" Un circuit par d√©pendance : isolation fine des pannesMonitorer l'√©tat : alertes sur ouverture prolong√©eTester les fallbacks : chaos engineeringDocumenter le comportement : communication avec les √©quipes m√©tierLogs structur√©s : tra√ßabilit√© des ouvertures/fermetures  ","version":"Next","tagName":"h2"},{"title":"üß™ Tests‚Äã","type":1,"pageTitle":"Circuit Breaker Pattern","url":"/docs/microservices/patterns/circuit-breaker#-tests","content":" ","version":"Next","tagName":"h2"},{"title":"Test unitaire‚Äã","type":1,"pageTitle":"Circuit Breaker Pattern","url":"/docs/microservices/patterns/circuit-breaker#test-unitaire","content":" @Test void shouldOpenCircuitAfterThresholdReached() { // Simuler √©checs for (int i = 0; i &lt; 10; i++) { Try.ofSupplier(decoratedSupplier); } assertThat(circuitBreaker.getState()) .isEqualTo(CircuitBreaker.State.OPEN); }   ","version":"Next","tagName":"h3"},{"title":"Test d'int√©gration‚Äã","type":1,"pageTitle":"Circuit Breaker Pattern","url":"/docs/microservices/patterns/circuit-breaker#test-dint√©gration","content":" @Test void shouldReturnFallbackWhenCircuitOpen() { // Ouvrir le circuit openCircuit(); User result = userService.getUser(&quot;123&quot;); assertThat(result).isEqualTo(User.fallbackUser()); verify(externalApi, never()).call(); }   ","version":"Next","tagName":"h3"},{"title":"Ressources‚Äã","type":1,"pageTitle":"Circuit Breaker Pattern","url":"/docs/microservices/patterns/circuit-breaker#ressources","content":" Martin Fowler - Circuit BreakerResilience4j DocumentationNetflix Hystrix (deprecated but educational) ","version":"Next","tagName":"h2"},{"title":"Backend for Frontend (BFF)","type":0,"sectionRef":"#","url":"/docs/microservices/patterns/bff","content":"","keywords":"","version":"Next"},{"title":"Concept‚Äã","type":1,"pageTitle":"Backend for Frontend (BFF)","url":"/docs/microservices/patterns/bff#concept","content":" Le pattern BFF (Backend for Frontend) consiste √† cr√©er des backends s√©par√©s et sp√©cialis√©s pour chaque type de client (web, mobile, IoT, partenaires, etc.).  Principe Un BFF par type d'interface utilisateur pour optimiser l'exp√©rience de chaque client.  ","version":"Next","tagName":"h2"},{"title":"üéØ Probl√®me r√©solu‚Äã","type":1,"pageTitle":"Backend for Frontend (BFF)","url":"/docs/microservices/patterns/bff#-probl√®me-r√©solu","content":" ","version":"Next","tagName":"h2"},{"title":"Sans BFF‚Äã","type":1,"pageTitle":"Backend for Frontend (BFF)","url":"/docs/microservices/patterns/bff#sans-bff","content":"   Probl√®mes :  L'API doit satisfaire tous les clients ‚Üí compromisMobile t√©l√©charge des donn√©es inutiles ‚Üí consommation data/batterieWeb fait plusieurs appels ‚Üí latence r√©seauLogique de pr√©sentation dans les apps clientes ‚Üí duplication  ","version":"Next","tagName":"h3"},{"title":"Avec BFF‚Äã","type":1,"pageTitle":"Backend for Frontend (BFF)","url":"/docs/microservices/patterns/bff#avec-bff","content":"   Avantages :  Payload optimis√© par clientAgr√©gation c√¥t√© serveurAdaptation aux contraintes de chaque plateforme  ","version":"Next","tagName":"h3"},{"title":"üèóÔ∏è Architecture‚Äã","type":1,"pageTitle":"Backend for Frontend (BFF)","url":"/docs/microservices/patterns/bff#Ô∏è-architecture","content":" ","version":"Next","tagName":"h2"},{"title":"Structure typique‚Äã","type":1,"pageTitle":"Backend for Frontend (BFF)","url":"/docs/microservices/patterns/bff#structure-typique","content":" ‚îú‚îÄ‚îÄ bff-web/ ‚îÇ ‚îú‚îÄ‚îÄ endpoints/ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ dashboard.js ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ profile.js ‚îÇ ‚îî‚îÄ‚îÄ aggregators/ ‚îÇ ‚îî‚îÄ‚îÄ user-aggregator.js ‚îú‚îÄ‚îÄ bff-mobile/ ‚îÇ ‚îú‚îÄ‚îÄ endpoints/ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ home.js ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ feed.js ‚îÇ ‚îî‚îÄ‚îÄ transformers/ ‚îÇ ‚îî‚îÄ‚îÄ mobile-transformer.js ‚îú‚îÄ‚îÄ bff-partner-api/ ‚îÇ ‚îî‚îÄ‚îÄ endpoints/ ‚îÇ ‚îî‚îÄ‚îÄ public-data.js ‚îî‚îÄ‚îÄ core-services/ ‚îú‚îÄ‚îÄ user-service/ ‚îú‚îÄ‚îÄ product-service/ ‚îî‚îÄ‚îÄ order-service/   ","version":"Next","tagName":"h3"},{"title":"üíª Exemples‚Äã","type":1,"pageTitle":"Backend for Frontend (BFF)","url":"/docs/microservices/patterns/bff#-exemples","content":" ","version":"Next","tagName":"h2"},{"title":"Endpoint BFF Web‚Äã","type":1,"pageTitle":"Backend for Frontend (BFF)","url":"/docs/microservices/patterns/bff#endpoint-bff-web","content":" // bff-web/endpoints/dashboard.js router.get('/dashboard', async (req, res) =&gt; { const userId = req.user.id; // Agr√©gation de plusieurs services const [user, orders, recommendations, stats] = await Promise.all([ userService.getUser(userId), orderService.getRecentOrders(userId), recommendationService.getPersonalized(userId), analyticsService.getUserStats(userId) ]); // Format adapt√© pour le web (d√©taill√©) res.json({ user: { name: user.fullName, email: user.email, avatar: user.profilePicture, membership: user.membershipTier }, recentOrders: orders.map(o =&gt; ({ id: o.id, date: o.createdAt, total: o.totalAmount, items: o.items.length, status: o.status })), recommendations: recommendations, statistics: { totalSpent: stats.totalAmount, orderCount: stats.orderCount, savedAmount: stats.discountTotal } }); });   ","version":"Next","tagName":"h3"},{"title":"Endpoint BFF Mobile‚Äã","type":1,"pageTitle":"Backend for Frontend (BFF)","url":"/docs/microservices/patterns/bff#endpoint-bff-mobile","content":" // bff-mobile/endpoints/home.js router.get('/home', async (req, res) =&gt; { const userId = req.user.id; // Uniquement les donn√©es essentielles pour mobile const [user, lastOrder] = await Promise.all([ userService.getUser(userId), orderService.getLastOrder(userId) ]); // Format ultra-l√©ger pour mobile res.json({ user: { name: user.firstName, // Pr√©nom uniquement points: user.loyaltyPoints }, lastOrder: lastOrder ? { id: lastOrder.id, status: lastOrder.status, eta: lastOrder.estimatedDelivery } : null, // Images optimis√©es pour mobile banners: await getBanners({ size: 'mobile' }) }); });   ","version":"Next","tagName":"h3"},{"title":"üé® Cas d'usage‚Äã","type":1,"pageTitle":"Backend for Frontend (BFF)","url":"/docs/microservices/patterns/bff#-cas-dusage","content":" ","version":"Next","tagName":"h2"},{"title":"1. Optimisation r√©seau mobile‚Äã","type":1,"pageTitle":"Backend for Frontend (BFF)","url":"/docs/microservices/patterns/bff#1-optimisation-r√©seau-mobile","content":" Web : 10 appels API pour charger une pageMobile BFF : 1 appel agr√©g√©  // Mobile BFF agr√®ge tout en un appel GET /bff/mobile/product/123 Response: { product: {...}, reviews: [...], relatedProducts: [...], availability: {...} }   ","version":"Next","tagName":"h3"},{"title":"2. Adaptation du format‚Äã","type":1,"pageTitle":"Backend for Frontend (BFF)","url":"/docs/microservices/patterns/bff#2-adaptation-du-format","content":" // Web : donn√©es compl√®tes { user: { firstName: &quot;John&quot;, lastName: &quot;Doe&quot;, email: &quot;john.doe@example.com&quot;, address: { street: &quot;123 Main St&quot;, city: &quot;Paris&quot;, postalCode: &quot;75001&quot;, country: &quot;France&quot; }, phoneNumbers: [...] } } // Mobile : donn√©es essentielles { name: &quot;John D.&quot;, email: &quot;john.doe@example.com&quot; }   ","version":"Next","tagName":"h3"},{"title":"3. Logique m√©tier sp√©cifique‚Äã","type":1,"pageTitle":"Backend for Frontend (BFF)","url":"/docs/microservices/patterns/bff#3-logique-m√©tier-sp√©cifique","content":" // BFF Web : Fonctionnalit√©s avanc√©es router.post('/cart/bulk-add', async (req, res) =&gt; { // Ajout en masse avec import CSV await cartService.addMultipleItems(req.body.items); }); // BFF Mobile : Fonctionnalit√©s simplifi√©es router.post('/cart/add', async (req, res) =&gt; { // Ajout unitaire avec scan QR await cartService.addItem(req.body.barcode); });   ","version":"Next","tagName":"h3"},{"title":"üîß Technologies‚Äã","type":1,"pageTitle":"Backend for Frontend (BFF)","url":"/docs/microservices/patterns/bff#-technologies","content":" ","version":"Next","tagName":"h2"},{"title":"Node.js / Express‚Äã","type":1,"pageTitle":"Backend for Frontend (BFF)","url":"/docs/microservices/patterns/bff#nodejs--express","content":" L√©ger, rapide, bon pour I/O intensif  const express = require('express'); const app = express(); app.get('/bff/products', async (req, res) =&gt; { const products = await aggregateProducts(); res.json(transform(products, req.deviceType)); });   ","version":"Next","tagName":"h3"},{"title":"GraphQL‚Äã","type":1,"pageTitle":"Backend for Frontend (BFF)","url":"/docs/microservices/patterns/bff#graphql","content":" Flexible, client choisit les champs  # BFF expos√© en GraphQL type Query { dashboard: Dashboard } type Dashboard { user: User orders: [Order] recommendations: [Product] } # Client mobile demande moins de champs query { dashboard { user { name points } orders { id status } } }   ","version":"Next","tagName":"h3"},{"title":"Spring Boot (Java)‚Äã","type":1,"pageTitle":"Backend for Frontend (BFF)","url":"/docs/microservices/patterns/bff#spring-boot-java","content":" Pour environnements Java  @RestController @RequestMapping(&quot;/bff/mobile&quot;) public class MobileBFFController { @GetMapping(&quot;/home&quot;) public HomeResponse getHome(@AuthenticationPrincipal User user) { return homeAggregator.aggregate(user.getId()); } }   ","version":"Next","tagName":"h3"},{"title":"üõ°Ô∏è S√©curit√©‚Äã","type":1,"pageTitle":"Backend for Frontend (BFF)","url":"/docs/microservices/patterns/bff#Ô∏è-s√©curit√©","content":" ","version":"Next","tagName":"h2"},{"title":"Authentication d√©l√©gu√©e‚Äã","type":1,"pageTitle":"Backend for Frontend (BFF)","url":"/docs/microservices/patterns/bff#authentication-d√©l√©gu√©e","content":" // BFF valide le token mais ne g√®re pas l'auth const auth = async (req, res, next) =&gt; { const token = req.headers.authorization; const user = await authService.validateToken(token); req.user = user; next(); }; app.use(auth);   ","version":"Next","tagName":"h3"},{"title":"Rate limiting par client‚Äã","type":1,"pageTitle":"Backend for Frontend (BFF)","url":"/docs/microservices/patterns/bff#rate-limiting-par-client","content":" const rateLimit = require('express-rate-limit'); // Web : plus g√©n√©reux const webLimiter = rateLimit({ windowMs: 60 * 1000, max: 100 }); // Mobile : plus strict const mobileLimiter = rateLimit({ windowMs: 60 * 1000, max: 30 }); app.use('/bff/web', webLimiter); app.use('/bff/mobile', mobileLimiter);   ","version":"Next","tagName":"h3"},{"title":"‚öñÔ∏è BFF vs API Gateway‚Äã","type":1,"pageTitle":"Backend for Frontend (BFF)","url":"/docs/microservices/patterns/bff#Ô∏è-bff-vs-api-gateway","content":" Aspect\tBFF\tAPI GatewayOwnership\tPar √©quipe frontend\t√âquipe plateforme Logique m√©tier\tOui (agr√©gation, transformation)\tNon (routage uniquement) Nombre\tPlusieurs (1 par client)\tUnique √âvolution\tInd√©pendante par client\tImpacte tous les clients Latence\tPeut agr√©ger ‚Üí gain\tProxy simple ‚Üí overhead  Utiliser les deux API Gateway pour routage/s√©curit√© + BFF pour logique client-sp√©cifique  ","version":"Next","tagName":"h2"},{"title":"‚ö†Ô∏è Pi√®ges √† √©viter‚Äã","type":1,"pageTitle":"Backend for Frontend (BFF)","url":"/docs/microservices/patterns/bff#Ô∏è-pi√®ges-√†-√©viter","content":" ","version":"Next","tagName":"h2"},{"title":"1. Duplication excessive‚Äã","type":1,"pageTitle":"Backend for Frontend (BFF)","url":"/docs/microservices/patterns/bff#1-duplication-excessive","content":" Probl√®me : Copier-coller de code entre BFFs  Solution : Librairies partag√©es pour logique commune  // Shared library const { pagination, imageResize } = require('@company/bff-commons'); // Dans chaque BFF const results = pagination(data, req.query.page);   ","version":"Next","tagName":"h3"},{"title":"2. BFF trop √©pais‚Äã","type":1,"pageTitle":"Backend for Frontend (BFF)","url":"/docs/microservices/patterns/bff#2-bff-trop-√©pais","content":" Probl√®me : Logique m√©tier dans le BFF  Solution : BFF = orchestration uniquement, logique dans les services  // ‚ùå Mauvais : calcul dans BFF const discount = order.total * 0.1; // ‚úÖ Bon : appel au service m√©tier const discount = await pricingService.calculateDiscount(order);   ","version":"Next","tagName":"h3"},{"title":"3. Un BFF pour tout‚Äã","type":1,"pageTitle":"Backend for Frontend (BFF)","url":"/docs/microservices/patterns/bff#3-un-bff-pour-tout","content":" Probl√®me : BFF g√©n√©rique qui sert tous les clients  Solution : Vraiment s√©parer par type de client  ","version":"Next","tagName":"h3"},{"title":"‚úÖ Bonnes pratiques‚Äã","type":1,"pageTitle":"Backend for Frontend (BFF)","url":"/docs/microservices/patterns/bff#-bonnes-pratiques","content":" Ownership clair : √©quipe frontend poss√®de son BFFVersioning : /v1/bff/mobile, /v2/bff/mobileCaching agressif : r√©duire appels aux servicesMonitoring par BFF : m√©triques s√©par√©esTests de contrat : garantir compatibilit√© avec clientsDocumentation : OpenAPI/Swagger par BFF  ","version":"Next","tagName":"h2"},{"title":"üìä M√©triques‚Äã","type":1,"pageTitle":"Backend for Frontend (BFF)","url":"/docs/microservices/patterns/bff#-m√©triques","content":" // Exemple de m√©triques bff_requests_total{client=&quot;mobile&quot;, endpoint=&quot;/home&quot;} bff_response_time{client=&quot;web&quot;, endpoint=&quot;/dashboard&quot;} bff_aggregation_count{client=&quot;mobile&quot;} // Nombre de services agr√©g√©s bff_cache_hit_rate{client=&quot;web&quot;}   ","version":"Next","tagName":"h2"},{"title":"üß™ Tests‚Äã","type":1,"pageTitle":"Backend for Frontend (BFF)","url":"/docs/microservices/patterns/bff#-tests","content":" ","version":"Next","tagName":"h2"},{"title":"Test d'agr√©gation‚Äã","type":1,"pageTitle":"Backend for Frontend (BFF)","url":"/docs/microservices/patterns/bff#test-dagr√©gation","content":" describe('Mobile BFF - Home endpoint', () =&gt; { it('should aggregate user and order data', async () =&gt; { userService.getUser.mockResolvedValue({ id: 1, name: 'John' }); orderService.getLastOrder.mockResolvedValue({ id: 123 }); const response = await request(app).get('/bff/mobile/home'); expect(response.body).toEqual({ user: { name: 'John', points: expect.any(Number) }, lastOrder: { id: 123, status: expect.any(String) } }); }); });   ","version":"Next","tagName":"h3"},{"title":"Ressources‚Äã","type":1,"pageTitle":"Backend for Frontend (BFF)","url":"/docs/microservices/patterns/bff#ressources","content":" Pattern: Backends For FrontendsBFF @ SoundCloudGraphQL as a BFF ","version":"Next","tagName":"h2"},{"title":"CQRS (Command Query Responsibility Segregation)","type":0,"sectionRef":"#","url":"/docs/microservices/patterns/cqrs","content":"","keywords":"","version":"Next"},{"title":"Concept‚Äã","type":1,"pageTitle":"CQRS (Command Query Responsibility Segregation)","url":"/docs/microservices/patterns/cqrs#concept","content":" CQRS s√©pare les op√©rations de lecture (Query) et d'√©criture (Command) en utilisant des mod√®les de donn√©es diff√©rents.  Principe Un mod√®le optimis√© pour l'√©criture, un autre pour la lecture.  ","version":"Next","tagName":"h2"},{"title":"üéØ Probl√®me r√©solu‚Äã","type":1,"pageTitle":"CQRS (Command Query Responsibility Segregation)","url":"/docs/microservices/patterns/cqrs#-probl√®me-r√©solu","content":" ","version":"Next","tagName":"h2"},{"title":"Approche traditionnelle‚Äã","type":1,"pageTitle":"CQRS (Command Query Responsibility Segregation)","url":"/docs/microservices/patterns/cqrs#approche-traditionnelle","content":" ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ API Controller ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ Service ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ BDD ‚îÇ ‚óÑ‚îÄ‚îÄ M√™me mod√®le lecture/√©criture ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   Probl√®mes :  Mod√®le de donn√©es compromis entre lecture et √©critureRequ√™tes complexes avec JOINs multiplesScaling difficile (m√™me BDD pour tout)  ","version":"Next","tagName":"h3"},{"title":"Avec CQRS‚Äã","type":1,"pageTitle":"CQRS (Command Query Responsibility Segregation)","url":"/docs/microservices/patterns/cqrs#avec-cqrs","content":" Commands (Write) Queries (Read) ‚îÇ ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ Write DB ‚îÇ ‚îÄEvents‚îÄ‚Üí ‚îÇ Read DB ‚îÇ ‚îÇ (Normal) ‚îÇ ‚îÇ (D√©nom.) ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   Avantages :  Mod√®les optimis√©s s√©par√©mentScalabilit√© ind√©pendanteLecture ultra-rapide (donn√©es d√©normalis√©es)  ","version":"Next","tagName":"h3"},{"title":"üèóÔ∏è Architecture‚Äã","type":1,"pageTitle":"CQRS (Command Query Responsibility Segregation)","url":"/docs/microservices/patterns/cqrs#Ô∏è-architecture","content":" ","version":"Next","tagName":"h2"},{"title":"S√©paration Command/Query‚Äã","type":1,"pageTitle":"CQRS (Command Query Responsibility Segregation)","url":"/docs/microservices/patterns/cqrs#s√©paration-commandquery","content":" // ============ COMMANDS (Write Side) ============ class CreateOrderCommand { constructor(userId, items) { this.userId = userId; this.items = items; } } class OrderCommandHandler { async handle(command) { // Validation m√©tier if (command.items.length === 0) { throw new Error('Order must have items'); } // √âcrire dans Write DB (normalis√©) const order = await Order.create({ userId: command.userId, status: 'PENDING' }); await OrderItem.bulkCreate( command.items.map(item =&gt; ({ orderId: order.id, productId: item.productId, quantity: item.quantity })) ); // Publier √©v√©nement pour synchronisation eventBus.publish('OrderCreated', { orderId: order.id }); return order.id; } } // ============ QUERIES (Read Side) ============ class GetOrderDetailsQuery { constructor(orderId) { this.orderId = orderId; } } class OrderQueryHandler { async handle(query) { // Lecture depuis Read DB (d√©normalis√©, pr√©-joint√©) return await OrderReadModel.findOne({ where: { orderId: query.orderId } }); // Retourne directement: // { // orderId: '123', // userName: 'John Doe', // D√©normalis√© // userEmail: 'john@...', // D√©normalis√© // items: [ // Pr√©-joint√© // { productName: '...', price: ... } // ], // totalAmount: 150 // } } }   ","version":"Next","tagName":"h3"},{"title":"Synchronisation Read Model‚Äã","type":1,"pageTitle":"CQRS (Command Query Responsibility Segregation)","url":"/docs/microservices/patterns/cqrs#synchronisation-read-model","content":" // Projector : √©coute les √©v√©nements et met √† jour Read DB eventBus.subscribe('OrderCreated', async (event) =&gt; { const order = await Order.findByPk(event.orderId, { include: [User, OrderItems] }); // Cr√©er vue d√©normalis√©e await OrderReadModel.create({ orderId: order.id, userName: order.user.name, userEmail: order.user.email, items: order.items.map(item =&gt; ({ productName: item.product.name, quantity: item.quantity, price: item.price })), totalAmount: order.totalAmount, status: order.status }); });   ","version":"Next","tagName":"h3"},{"title":"üíª Impl√©mentation‚Äã","type":1,"pageTitle":"CQRS (Command Query Responsibility Segregation)","url":"/docs/microservices/patterns/cqrs#-impl√©mentation","content":" ","version":"Next","tagName":"h2"},{"title":"API REST‚Äã","type":1,"pageTitle":"CQRS (Command Query Responsibility Segregation)","url":"/docs/microservices/patterns/cqrs#api-rest","content":" // ===== COMMANDS ===== router.post('/orders', async (req, res) =&gt; { const command = new CreateOrderCommand( req.user.id, req.body.items ); const orderId = await commandBus.dispatch(command); res.status(202).json({ orderId }); // 202 Accepted }); // ===== QUERIES ===== router.get('/orders/:id', async (req, res) =&gt; { const query = new GetOrderDetailsQuery(req.params.id); const order = await queryBus.dispatch(query); res.json(order); });   ","version":"Next","tagName":"h3"},{"title":"Technologies Read DB‚Äã","type":1,"pageTitle":"CQRS (Command Query Responsibility Segregation)","url":"/docs/microservices/patterns/cqrs#technologies-read-db","content":" Use Case\tWrite DB\tRead DBSimple\tPostgreSQL\tPostgreSQL (vues mat√©rialis√©es) Analytics\tPostgreSQL\tElasticsearch High read load\tPostgreSQL\tRedis (cache) Complex queries\tPostgreSQL\tPostgreSQL (sch√©ma d√©normalis√©) Full-text search\tMongoDB\tElasticsearch  ","version":"Next","tagName":"h3"},{"title":"üîÑ Eventual Consistency‚Äã","type":1,"pageTitle":"CQRS (Command Query Responsibility Segregation)","url":"/docs/microservices/patterns/cqrs#-eventual-consistency","content":" Le Read Model est √©ventuellement coh√©rent avec le Write Model.  // T0: Command ex√©cut√©e POST /orders ‚Üí { orderId: '123' } // T1: √âv√©nement publi√© et trait√© (~10-100ms) Event: OrderCreated // T2: Read Model mis √† jour GET /orders/123 ‚Üí { order details } // ‚ö†Ô∏è Entre T0 et T2 : Read Model pas encore √† jour   ","version":"Next","tagName":"h2"},{"title":"G√©rer l'UI‚Äã","type":1,"pageTitle":"CQRS (Command Query Responsibility Segregation)","url":"/docs/microservices/patterns/cqrs#g√©rer-lui","content":" // Option 1: Optimistic UI // Afficher imm√©diatement avec donn√©es de la commande const optimisticOrder = { id: orderId, status: 'PENDING', items: command.items }; // Option 2: Polling async function waitForOrder(orderId) { for (let i = 0; i &lt; 10; i++) { const order = await getOrder(orderId); if (order) return order; await sleep(100); } throw new Error('Order not found'); } // Option 3: WebSocket notification eventBus.subscribe('OrderCreated', (event) =&gt; { websocket.send({ type: 'OrderReady', orderId: event.orderId }); });   ","version":"Next","tagName":"h3"},{"title":"üé® Niveaux de CQRS‚Äã","type":1,"pageTitle":"CQRS (Command Query Responsibility Segregation)","url":"/docs/microservices/patterns/cqrs#-niveaux-de-cqrs","content":" ","version":"Next","tagName":"h2"},{"title":"Niveau 1 : S√©paration logique‚Äã","type":1,"pageTitle":"CQRS (Command Query Responsibility Segregation)","url":"/docs/microservices/patterns/cqrs#niveau-1--s√©paration-logique","content":" M√™me BDD, mod√®les diff√©rents  // Write Model (ORM) class Order { id: number; userId: number; items: OrderItem[]; } // Read Model (DTO simple) interface OrderDTO { orderId: number; userName: string; totalAmount: number; }   ","version":"Next","tagName":"h3"},{"title":"Niveau 2 : S√©paration physique‚Äã","type":1,"pageTitle":"CQRS (Command Query Responsibility Segregation)","url":"/docs/microservices/patterns/cqrs#niveau-2--s√©paration-physique","content":" BDD s√©par√©es, synchronisation √©v√©nementielle  // Write DB: PostgreSQL normalis√© // Read DB: PostgreSQL d√©normalis√© // Sync: CDC (Change Data Capture) via Debezium   ","version":"Next","tagName":"h3"},{"title":"Niveau 3 : Technologies diff√©rentes‚Äã","type":1,"pageTitle":"CQRS (Command Query Responsibility Segregation)","url":"/docs/microservices/patterns/cqrs#niveau-3--technologies-diff√©rentes","content":" Optimisation maximale  // Write: PostgreSQL (ACID) // Read: Elasticsearch (full-text search) // Sync: Kafka events   ","version":"Next","tagName":"h3"},{"title":"‚úÖ Avantages‚Äã","type":1,"pageTitle":"CQRS (Command Query Responsibility Segregation)","url":"/docs/microservices/patterns/cqrs#-avantages","content":" ","version":"Next","tagName":"h2"},{"title":"1. Performance‚Äã","type":1,"pageTitle":"CQRS (Command Query Responsibility Segregation)","url":"/docs/microservices/patterns/cqrs#1-performance","content":" Lecture : donn√©es pr√©-calcul√©es, pas de JOIN√âcriture : pas de contraintes de lecture  ","version":"Next","tagName":"h3"},{"title":"2. Scalabilit√©‚Äã","type":1,"pageTitle":"CQRS (Command Query Responsibility Segregation)","url":"/docs/microservices/patterns/cqrs#2-scalabilit√©","content":" Scaler Read/Write ind√©pendammentRead replicas multiples  ","version":"Next","tagName":"h3"},{"title":"3. Optimisation cibl√©e‚Äã","type":1,"pageTitle":"CQRS (Command Query Responsibility Segregation)","url":"/docs/microservices/patterns/cqrs#3-optimisation-cibl√©e","content":" Indexes adapt√©s par usageCaching agressif sur ReadSharding diff√©rent Read/Write  ","version":"Next","tagName":"h3"},{"title":"4. Flexibilit√©‚Äã","type":1,"pageTitle":"CQRS (Command Query Responsibility Segregation)","url":"/docs/microservices/patterns/cqrs#4-flexibilit√©","content":" Plusieurs Read Models pour diff√©rents besoinsMigration technologique facilit√©e  ","version":"Next","tagName":"h3"},{"title":"‚ö†Ô∏è Inconv√©nients‚Äã","type":1,"pageTitle":"CQRS (Command Query Responsibility Segregation)","url":"/docs/microservices/patterns/cqrs#Ô∏è-inconv√©nients","content":" ","version":"Next","tagName":"h2"},{"title":"1. Complexit√©‚Äã","type":1,"pageTitle":"CQRS (Command Query Responsibility Segregation)","url":"/docs/microservices/patterns/cqrs#1-complexit√©","content":" Code plus complexe que CRUD simple  ","version":"Next","tagName":"h3"},{"title":"2. Eventual Consistency‚Äã","type":1,"pageTitle":"CQRS (Command Query Responsibility Segregation)","url":"/docs/microservices/patterns/cqrs#2-eventual-consistency","content":" UI doit g√©rer le d√©lai de synchronisation  ","version":"Next","tagName":"h3"},{"title":"3. Duplication de donn√©es‚Äã","type":1,"pageTitle":"CQRS (Command Query Responsibility Segregation)","url":"/docs/microservices/patterns/cqrs#3-duplication-de-donn√©es","content":" Plus de stockage n√©cessaire  ","version":"Next","tagName":"h3"},{"title":"4. Synchronisation‚Äã","type":1,"pageTitle":"CQRS (Command Query Responsibility Segregation)","url":"/docs/microservices/patterns/cqrs#4-synchronisation","content":" Erreurs de sync √† g√©rer  ","version":"Next","tagName":"h3"},{"title":"üõ†Ô∏è Frameworks‚Äã","type":1,"pageTitle":"CQRS (Command Query Responsibility Segregation)","url":"/docs/microservices/patterns/cqrs#Ô∏è-frameworks","content":" ","version":"Next","tagName":"h2"},{"title":"Axon Framework (Java)‚Äã","type":1,"pageTitle":"CQRS (Command Query Responsibility Segregation)","url":"/docs/microservices/patterns/cqrs#axon-framework-java","content":" // Command @CommandHandler public OrderId handle(CreateOrderCommand command) { OrderId orderId = new OrderId(); apply(new OrderCreatedEvent(orderId, command.getItems())); return orderId; } // Query @QueryHandler public OrderDetails handle(GetOrderDetailsQuery query) { return orderReadRepository.findById(query.getOrderId()); } // Projection (mise √† jour Read Model) @EventHandler public void on(OrderCreatedEvent event) { OrderDetails details = new OrderDetails(event.getOrderId()); orderReadRepository.save(details); }   ","version":"Next","tagName":"h3"},{"title":"MediatR (.NET)‚Äã","type":1,"pageTitle":"CQRS (Command Query Responsibility Segregation)","url":"/docs/microservices/patterns/cqrs#mediatr-net","content":" // Command public class CreateOrderCommand : IRequest&lt;Guid&gt; { public List&lt;OrderItem&gt; Items { get; set; } } public class CreateOrderHandler : IRequestHandler&lt;CreateOrderCommand, Guid&gt; { public async Task&lt;Guid&gt; Handle(CreateOrderCommand request, ...) { var order = new Order(request.Items); await _repository.SaveAsync(order); return order.Id; } } // Query public class GetOrderQuery : IRequest&lt;OrderDto&gt; { public Guid OrderId { get; set; } } public class GetOrderHandler : IRequestHandler&lt;GetOrderQuery, OrderDto&gt; { public async Task&lt;OrderDto&gt; Handle(GetOrderQuery request, ...) { return await _readRepository.GetOrderAsync(request.OrderId); } }   ","version":"Next","tagName":"h3"},{"title":"üìä Quand utiliser CQRS ?‚Äã","type":1,"pageTitle":"CQRS (Command Query Responsibility Segregation)","url":"/docs/microservices/patterns/cqrs#-quand-utiliser-cqrs-","content":" ","version":"Next","tagName":"h2"},{"title":"‚úÖ Cas appropri√©s‚Äã","type":1,"pageTitle":"CQRS (Command Query Responsibility Segregation)","url":"/docs/microservices/patterns/cqrs#-cas-appropri√©s","content":" Charge de lecture &gt;&gt; √©criture (ratio 100:1 typique)Besoins de performance critiquesRequ√™tes complexes avec agr√©gationsMod√®les de lecture multiplesDomain-Driven Design  ","version":"Next","tagName":"h3"},{"title":"‚ùå √âviter si‚Äã","type":1,"pageTitle":"CQRS (Command Query Responsibility Segregation)","url":"/docs/microservices/patterns/cqrs#-√©viter-si","content":" CRUD simpleCharge √©quilibr√©e lecture/√©criture√âquipe sans exp√©rienceCoh√©rence imm√©diate obligatoire  ","version":"Next","tagName":"h3"},{"title":"‚úÖ Bonnes pratiques‚Äã","type":1,"pageTitle":"CQRS (Command Query Responsibility Segregation)","url":"/docs/microservices/patterns/cqrs#-bonnes-pratiques","content":" Commencer simple : CQRS logique avant physiqueMonitoring de sync : latence Read ModelVersioning : g√©rer √©volution des Read ModelsIdempotence : projections rejouablesTests : v√©rifier coh√©rence finaleDocumentation : expliquer l'eventual consistency  ","version":"Next","tagName":"h2"},{"title":"üß™ Tests‚Äã","type":1,"pageTitle":"CQRS (Command Query Responsibility Segregation)","url":"/docs/microservices/patterns/cqrs#-tests","content":" describe('CQRS Order Flow', () =&gt; { it('should eventually sync Read Model', async () =&gt; { // Command const orderId = await commandBus.dispatch( new CreateOrderCommand(userId, items) ); // Wait for projection await waitFor(() =&gt; queryBus.dispatch(new GetOrderQuery(orderId)) ); // Verify Read Model const order = await queryBus.dispatch( new GetOrderQuery(orderId) ); expect(order.totalAmount).toBe(150); }); });   ","version":"Next","tagName":"h2"},{"title":"Ressources‚Äã","type":1,"pageTitle":"CQRS (Command Query Responsibility Segregation)","url":"/docs/microservices/patterns/cqrs#ressources","content":" CQRS - Martin FowlerMicrosoft CQRS PatternGreg Young - CQRS Documents ","version":"Next","tagName":"h2"},{"title":"Event Sourcing","type":0,"sectionRef":"#","url":"/docs/microservices/patterns/event-sourcing","content":"","keywords":"","version":"Next"},{"title":"Concept‚Äã","type":1,"pageTitle":"Event Sourcing","url":"/docs/microservices/patterns/event-sourcing#concept","content":" Event Sourcing consiste √† persister l'√©tat d'une application sous forme d'une s√©quence d'√©v√©nements plut√¥t que l'√©tat actuel. Chaque changement est captur√© comme un √©v√©nement immuable.  Principe Au lieu de sauvegarder &quot;Compte = 100‚Ç¨&quot;, on sauvegarde : &quot;Cr√©dit 50‚Ç¨&quot;, &quot;D√©bit 20‚Ç¨&quot;, &quot;Cr√©dit 70‚Ç¨&quot;  ","version":"Next","tagName":"h2"},{"title":"üéØ Comparaison‚Äã","type":1,"pageTitle":"Event Sourcing","url":"/docs/microservices/patterns/event-sourcing#-comparaison","content":" ","version":"Next","tagName":"h2"},{"title":"Approche traditionnelle (CRUD)‚Äã","type":1,"pageTitle":"Event Sourcing","url":"/docs/microservices/patterns/event-sourcing#approche-traditionnelle-crud","content":" -- √âtat actuel seulement UPDATE accounts SET balance = 100 WHERE id = 123;   Perte d'information : On ne sait pas comment on est arriv√© √† 100‚Ç¨  ","version":"Next","tagName":"h3"},{"title":"Event Sourcing‚Äã","type":1,"pageTitle":"Event Sourcing","url":"/docs/microservices/patterns/event-sourcing#event-sourcing-1","content":" events = [ { type: 'AccountCreated', amount: 0, timestamp: '2024-01-01' }, { type: 'MoneyDeposited', amount: 150, timestamp: '2024-01-02' }, { type: 'MoneyWithdrawn', amount: 50, timestamp: '2024-01-03' } ]; // Balance actuelle = somme des √©v√©nements balance = events.reduce((sum, e) =&gt; { if (e.type === 'MoneyDeposited') return sum + e.amount; if (e.type === 'MoneyWithdrawn') return sum - e.amount; return sum; }, 0); // = 100   ","version":"Next","tagName":"h3"},{"title":"üèóÔ∏è Architecture‚Äã","type":1,"pageTitle":"Event Sourcing","url":"/docs/microservices/patterns/event-sourcing#Ô∏è-architecture","content":" ","version":"Next","tagName":"h2"},{"title":"Event Store‚Äã","type":1,"pageTitle":"Event Sourcing","url":"/docs/microservices/patterns/event-sourcing#event-store","content":" Base de donn√©es append-only qui stocke les √©v√©nements  class EventStore { async append(streamId, event) { await db.events.insert({ streamId: streamId, eventType: event.type, data: event.data, timestamp: new Date(), version: await this.getNextVersion(streamId) }); } async getEvents(streamId, fromVersion = 0) { return db.events.find({ streamId: streamId, version: { $gte: fromVersion } }).sort({ version: 1 }); } }   ","version":"Next","tagName":"h3"},{"title":"Reconstruction de l'√©tat‚Äã","type":1,"pageTitle":"Event Sourcing","url":"/docs/microservices/patterns/event-sourcing#reconstruction-de-l√©tat","content":" class Account { constructor() { this.balance = 0; this.version = 0; } // Appliquer un √©v√©nement apply(event) { switch(event.type) { case 'MoneyDeposited': this.balance += event.amount; break; case 'MoneyWithdrawn': this.balance -= event.amount; break; } this.version = event.version; } // Rehydrater depuis l'Event Store static async load(accountId, eventStore) { const account = new Account(); const events = await eventStore.getEvents(`account-${accountId}`); events.forEach(e =&gt; account.apply(e)); return account; } }   ","version":"Next","tagName":"h3"},{"title":"‚úÖ Avantages‚Äã","type":1,"pageTitle":"Event Sourcing","url":"/docs/microservices/patterns/event-sourcing#-avantages","content":" ","version":"Next","tagName":"h2"},{"title":"1. Audit trail complet‚Äã","type":1,"pageTitle":"Event Sourcing","url":"/docs/microservices/patterns/event-sourcing#1-audit-trail-complet","content":" Historique immuable de tous les changements  // Qui a fait quoi et quand ? events.forEach(e =&gt; { console.log(`${e.timestamp}: ${e.type} by ${e.userId}`); });   ","version":"Next","tagName":"h3"},{"title":"2. Temporal queries‚Äã","type":1,"pageTitle":"Event Sourcing","url":"/docs/microservices/patterns/event-sourcing#2-temporal-queries","content":" Reconstruire l'√©tat √† n'importe quel moment  // √âtat du compte au 01/01/2024 ? const pastState = events .filter(e =&gt; e.timestamp &lt;= '2024-01-01') .reduce(applyEvent, initialState);   ","version":"Next","tagName":"h3"},{"title":"3. Event replay‚Äã","type":1,"pageTitle":"Event Sourcing","url":"/docs/microservices/patterns/event-sourcing#3-event-replay","content":" Rejouer les √©v√©nements pour :  Corriger des bugsMigrer vers nouveau mod√®leAnalytics  ","version":"Next","tagName":"h3"},{"title":"4. Multiple projections‚Äã","type":1,"pageTitle":"Event Sourcing","url":"/docs/microservices/patterns/event-sourcing#4-multiple-projections","content":" Cr√©er diff√©rentes vues des m√™mes donn√©es  // Projection 1: Solde actuel const balance = computeBalance(events); // Projection 2: Transactions par cat√©gorie const categories = groupByCategory(events); // Projection 3: Graphe temporel const timeSeriesData = aggregateByMonth(events);   ","version":"Next","tagName":"h3"},{"title":"‚ö†Ô∏è Inconv√©nients‚Äã","type":1,"pageTitle":"Event Sourcing","url":"/docs/microservices/patterns/event-sourcing#Ô∏è-inconv√©nients","content":" ","version":"Next","tagName":"h2"},{"title":"1. Complexit√©‚Äã","type":1,"pageTitle":"Event Sourcing","url":"/docs/microservices/patterns/event-sourcing#1-complexit√©","content":" Plus difficile √† comprendre que CRUD  ","version":"Next","tagName":"h3"},{"title":"2. Performance en lecture‚Äã","type":1,"pageTitle":"Event Sourcing","url":"/docs/microservices/patterns/event-sourcing#2-performance-en-lecture","content":" Besoin de reconstruire l'√©tat ‚Üí utiliser des snapshots  // Snapshot tous les 100 √©v√©nements if (version % 100 === 0) { await snapshotStore.save(accountId, currentState, version); } // Chargement optimis√© const snapshot = await snapshotStore.getLatest(accountId); const events = await eventStore.getEvents(accountId, snapshot.version + 1); const state = events.reduce(applyEvent, snapshot.state);   ","version":"Next","tagName":"h3"},{"title":"3. √âvolution du sch√©ma‚Äã","type":1,"pageTitle":"Event Sourcing","url":"/docs/microservices/patterns/event-sourcing#3-√©volution-du-sch√©ma","content":" G√©rer la compatibilit√© des anciens √©v√©nements  // Upcasting : transformer vieux √©v√©nements const upcast = (event) =&gt; { if (event.version === 1) { // V1: { type: 'Deposit', amount: 100 } // V2: { type: 'Deposit', amount: 100, currency: 'EUR' } return { ...event, currency: 'EUR' }; } return event; };   ","version":"Next","tagName":"h3"},{"title":"üîß Technologies‚Äã","type":1,"pageTitle":"Event Sourcing","url":"/docs/microservices/patterns/event-sourcing#-technologies","content":" ","version":"Next","tagName":"h2"},{"title":"EventStoreDB‚Äã","type":1,"pageTitle":"Event Sourcing","url":"/docs/microservices/patterns/event-sourcing#eventstoredb","content":" Base de donn√©es d√©di√©e √† l'Event Sourcing  const { EventStoreDBClient } = require('@eventstore/db-client'); const client = EventStoreDBClient.connectionString( 'esdb://localhost:2113?tls=false' ); // Append await client.appendToStream('account-123', [ { type: 'MoneyDeposited', data: { amount: 100 } } ]); // Read const events = client.readStream('account-123'); for await (const event of events) { console.log(event); }   ","version":"Next","tagName":"h3"},{"title":"Axon Framework (Java)‚Äã","type":1,"pageTitle":"Event Sourcing","url":"/docs/microservices/patterns/event-sourcing#axon-framework-java","content":" @Aggregate public class Account { @AggregateIdentifier private String accountId; private BigDecimal balance; @CommandHandler public Account(CreateAccountCommand cmd) { apply(new AccountCreatedEvent(cmd.getAccountId())); } @CommandHandler public void handle(DepositMoneyCommand cmd) { apply(new MoneyDepositedEvent(cmd.getAmount())); } @EventSourcingHandler public void on(MoneyDepositedEvent event) { this.balance = this.balance.add(event.getAmount()); } }   ","version":"Next","tagName":"h3"},{"title":"Kafka comme Event Store‚Äã","type":1,"pageTitle":"Event Sourcing","url":"/docs/microservices/patterns/event-sourcing#kafka-comme-event-store","content":" // Publier √©v√©nement await producer.send({ topic: 'account-events', messages: [{ key: accountId, value: JSON.stringify({ type: 'MoneyDeposited', amount: 100 }) }] }); // Consommer et reconstruire √©tat consumer.on('message', (message) =&gt; { const event = JSON.parse(message.value); projection.apply(event); });   ","version":"Next","tagName":"h3"},{"title":"üé® Patterns combin√©s‚Äã","type":1,"pageTitle":"Event Sourcing","url":"/docs/microservices/patterns/event-sourcing#-patterns-combin√©s","content":" ","version":"Next","tagName":"h2"},{"title":"Event Sourcing + CQRS‚Äã","type":1,"pageTitle":"Event Sourcing","url":"/docs/microservices/patterns/event-sourcing#event-sourcing--cqrs","content":" Write side : Event StoreRead side : Projections optimis√©es (SQL, Elasticsearch, etc.)  // Write: Append event await eventStore.append('order-123', new OrderPlacedEvent(...)); // Read: Projection pr√©calcul√©e const order = await readModel.getOrder('order-123'); // Instantan√©   ","version":"Next","tagName":"h3"},{"title":"Event Sourcing + Saga‚Äã","type":1,"pageTitle":"Event Sourcing","url":"/docs/microservices/patterns/event-sourcing#event-sourcing--saga","content":" Les √©v√©nements d√©clenchent les √©tapes de saga  eventBus.subscribe('OrderPlaced', async (event) =&gt; { await saga.start(new ReserveInventorySagaStep(event.orderId)); });   ","version":"Next","tagName":"h3"},{"title":"‚úÖ Bonnes pratiques‚Äã","type":1,"pageTitle":"Event Sourcing","url":"/docs/microservices/patterns/event-sourcing#-bonnes-pratiques","content":" √âv√©nements immuables : jamais modifier un √©v√©nement publi√©√âv√©nements m√©tier : nommer selon le langage du domaineIdempotence : supporter le replay sans effets de bordVersioning : inclure version dans l'√©v√©nementSnapshots : optimiser les reconstructions longuesProjections asynchrones : d√©coupler lecture/√©criture  ","version":"Next","tagName":"h2"},{"title":"üìä Quand utiliser ?‚Äã","type":1,"pageTitle":"Event Sourcing","url":"/docs/microservices/patterns/event-sourcing#-quand-utiliser-","content":" ","version":"Next","tagName":"h2"},{"title":"‚úÖ Cas appropri√©s‚Äã","type":1,"pageTitle":"Event Sourcing","url":"/docs/microservices/patterns/event-sourcing#-cas-appropri√©s","content":" Audit l√©gal obligatoireDomaines complexes (finance, e-commerce)Besoin d'historique completAnalytics temporels  ","version":"Next","tagName":"h3"},{"title":"‚ùå √âviter si‚Äã","type":1,"pageTitle":"Event Sourcing","url":"/docs/microservices/patterns/event-sourcing#-√©viter-si","content":" CRUD simple suffit√âquipe sans expertiseContraintes de performance strictesDonn√©es peu √©v√©nementielles  ","version":"Next","tagName":"h3"},{"title":"Ressources‚Äã","type":1,"pageTitle":"Event Sourcing","url":"/docs/microservices/patterns/event-sourcing#ressources","content":" Event Sourcing - Martin FowlerEventStoreDBImplementing Domain-Driven Design (Book) ","version":"Next","tagName":"h2"},{"title":"S√©curit√©","type":0,"sectionRef":"#","url":"/docs/security","content":"S√©curit√©","keywords":"","version":"Next"},{"title":"Application Security Testing","type":0,"sectionRef":"#","url":"/docs/security/application-security-testing","content":"Application Security Testing","keywords":"","version":"Next"},{"title":"Saga Pattern","type":0,"sectionRef":"#","url":"/docs/microservices/patterns/saga","content":"","keywords":"","version":"Next"},{"title":"Concept‚Äã","type":1,"pageTitle":"Saga Pattern","url":"/docs/microservices/patterns/saga#concept","content":" Le Saga Pattern est une solution pour g√©rer les transactions distribu√©es dans une architecture microservices. Au lieu d'une transaction ACID globale (impossible avec des bases s√©par√©es), une saga d√©compose la transaction en une s√©rie d'√©tapes locales avec des m√©canismes de compensation en cas d'√©chec.  Principe Une saga = une s√©quence de transactions locales. Si une √©tape √©choue, on compense les √©tapes pr√©c√©dentes.  ","version":"Next","tagName":"h2"},{"title":"üéØ Probl√®me r√©solu‚Äã","type":1,"pageTitle":"Saga Pattern","url":"/docs/microservices/patterns/saga#-probl√®me-r√©solu","content":" Sc√©nario : Commander un produit n√©cessite :  R√©server le stock (Inventory Service)D√©biter le compte (Payment Service)Cr√©er l'exp√©dition (Shipping Service)  Sans Saga :  Impossible d'avoir une transaction ACID globaleSi Payment √©choue apr√®s r√©servation du stock ‚Üí incoh√©rence  Avec Saga :  Chaque service effectue sa transaction localeEn cas d'√©chec, compensation automatique (annuler r√©servation, rembourser, etc.)  ","version":"Next","tagName":"h2"},{"title":"üîÑ Types de Saga‚Äã","type":1,"pageTitle":"Saga Pattern","url":"/docs/microservices/patterns/saga#-types-de-saga","content":" ","version":"Next","tagName":"h2"},{"title":"1. Choreography (Chor√©graphie)‚Äã","type":1,"pageTitle":"Saga Pattern","url":"/docs/microservices/patterns/saga#1-choreography-chor√©graphie","content":" Chaque service publie des √©v√©nements et r√©agit aux √©v√©nements des autres. Pas de coordinateur central.    Avantages :  D√©couplage maximalPas de SPOF (Single Point of Failure)Scalabilit√©  Inconv√©nients :  Complexit√© accrueDifficile √† tracer/d√©buggerPas de vue globale  Impl√©mentation :  // Order Service orderCreated(order) { eventBus.publish('OrderCreated', order); } // Inventory Service eventBus.subscribe('OrderCreated', async (order) =&gt; { try { await reserveStock(order.items); eventBus.publish('StockReserved', order); } catch (error) { eventBus.publish('StockReservationFailed', order); } }); // Payment Service eventBus.subscribe('StockReserved', async (order) =&gt; { try { await chargePayment(order); eventBus.publish('PaymentCompleted', order); } catch (error) { eventBus.publish('PaymentFailed', order); // Trigger compensation eventBus.publish('CancelStockReservation', order); } });   ","version":"Next","tagName":"h3"},{"title":"2. Orchestration‚Äã","type":1,"pageTitle":"Saga Pattern","url":"/docs/microservices/patterns/saga#2-orchestration","content":" Un coordinateur central (orchestrateur) dirige la saga et appelle s√©quentiellement les services.    Avantages :  Vue centralis√©e de la sagaFacile √† tracer et d√©buggerLogique de compensation explicite  Inconv√©nients :  Point de d√©faillance uniqueCouplage avec l'orchestrateur  Impl√©mentation :  public class OrderSagaOrchestrator { @Transactional public void executeOrderSaga(Order order) { SagaInstance saga = new SagaInstance(order.getId()); try { // Step 1: Reserve stock saga.addStep( () -&gt; inventoryService.reserveStock(order), () -&gt; inventoryService.cancelReservation(order) ); // Step 2: Charge payment saga.addStep( () -&gt; paymentService.charge(order), () -&gt; paymentService.refund(order) ); // Step 3: Create shipment saga.addStep( () -&gt; shippingService.createShipment(order), () -&gt; shippingService.cancelShipment(order) ); saga.execute(); } catch (SagaException e) { saga.compensate(); throw new OrderFailedException(e); } } }   ","version":"Next","tagName":"h3"},{"title":"üõ°Ô∏è Compensation‚Äã","type":1,"pageTitle":"Saga Pattern","url":"/docs/microservices/patterns/saga#Ô∏è-compensation","content":" ","version":"Next","tagName":"h2"},{"title":"Principe‚Äã","type":1,"pageTitle":"Saga Pattern","url":"/docs/microservices/patterns/saga#principe","content":" Chaque transaction locale doit avoir une transaction compensatoire qui annule son effet.  Action\tCompensationR√©server stock\tLib√©rer stock D√©biter compte\tCr√©diter compte (remboursement) Cr√©er exp√©dition\tAnnuler exp√©dition Envoyer email\tEnvoyer email d'annulation  ","version":"Next","tagName":"h3"},{"title":"Types de transactions‚Äã","type":1,"pageTitle":"Saga Pattern","url":"/docs/microservices/patterns/saga#types-de-transactions","content":" 1. Compensable‚Äã  Peut √™tre annul√©e (ex: r√©servation)  2. Pivot‚Äã  Point de non-retour (ex: paiement confirm√© avec SLA)  3. Retriable‚Äã  Peut √™tre r√©essay√©e jusqu'au succ√®s (ex: notification)  ","version":"Next","tagName":"h3"},{"title":"Exemple de compensation‚Äã","type":1,"pageTitle":"Saga Pattern","url":"/docs/microservices/patterns/saga#exemple-de-compensation","content":" class OrderSaga: def __init__(self): self.completed_steps = [] def execute(self, order): try: # Step 1 inventory_id = self.reserve_stock(order) self.completed_steps.append(('inventory', inventory_id)) # Step 2 payment_id = self.charge_payment(order) self.completed_steps.append(('payment', payment_id)) # Step 3 shipment_id = self.create_shipment(order) self.completed_steps.append(('shipment', shipment_id)) except Exception as e: self.compensate() raise SagaFailedException(e) def compensate(self): # Compenser dans l'ordre inverse for step_type, step_id in reversed(self.completed_steps): if step_type == 'inventory': self.cancel_stock_reservation(step_id) elif step_type == 'payment': self.refund_payment(step_id) elif step_type == 'shipment': self.cancel_shipment(step_id)   ","version":"Next","tagName":"h3"},{"title":"üìä Gestion de l'√©tat‚Äã","type":1,"pageTitle":"Saga Pattern","url":"/docs/microservices/patterns/saga#-gestion-de-l√©tat","content":" ","version":"Next","tagName":"h2"},{"title":"Table de saga‚Äã","type":1,"pageTitle":"Saga Pattern","url":"/docs/microservices/patterns/saga#table-de-saga","content":" Persister l'√©tat de chaque saga pour g√©rer les reprises  CREATE TABLE saga_instances ( saga_id UUID PRIMARY KEY, saga_type VARCHAR(50), status VARCHAR(20), -- STARTED, COMPLETED, COMPENSATING, FAILED current_step INT, payload JSONB, created_at TIMESTAMP, updated_at TIMESTAMP ); CREATE TABLE saga_steps ( step_id UUID PRIMARY KEY, saga_id UUID REFERENCES saga_instances(saga_id), step_name VARCHAR(100), status VARCHAR(20), -- PENDING, COMPLETED, FAILED, COMPENSATED compensated BOOLEAN DEFAULT false );   ","version":"Next","tagName":"h3"},{"title":"State Machine‚Äã","type":1,"pageTitle":"Saga Pattern","url":"/docs/microservices/patterns/saga#state-machine","content":" public enum SagaState { STARTED, STOCK_RESERVED, PAYMENT_COMPLETED, SHIPMENT_CREATED, COMPLETED, COMPENSATING, FAILED }   ","version":"Next","tagName":"h3"},{"title":"üîß Frameworks‚Äã","type":1,"pageTitle":"Saga Pattern","url":"/docs/microservices/patterns/saga#-frameworks","content":" ","version":"Next","tagName":"h2"},{"title":"Axon Framework (Java)‚Äã","type":1,"pageTitle":"Saga Pattern","url":"/docs/microservices/patterns/saga#axon-framework-java","content":" @Saga public class OrderSaga { @StartSaga @SagaEventHandler(associationProperty = &quot;orderId&quot;) public void handle(OrderCreatedEvent event) { commandGateway.send(new ReserveStockCommand(event.getOrderId())); } @SagaEventHandler(associationProperty = &quot;orderId&quot;) public void handle(StockReservedEvent event) { commandGateway.send(new ChargePaymentCommand(event.getOrderId())); } @SagaEventHandler(associationProperty = &quot;orderId&quot;) public void handle(PaymentFailedEvent event) { commandGateway.send(new CancelStockReservationCommand(event.getOrderId())); } @EndSaga @SagaEventHandler(associationProperty = &quot;orderId&quot;) public void handle(OrderCompletedEvent event) { // Saga termin√©e } }   ","version":"Next","tagName":"h3"},{"title":"Netflix Conductor‚Äã","type":1,"pageTitle":"Saga Pattern","url":"/docs/microservices/patterns/saga#netflix-conductor","content":" Workflow as code avec interface graphique  { &quot;name&quot;: &quot;order_saga&quot;, &quot;tasks&quot;: [ { &quot;name&quot;: &quot;reserve_stock&quot;, &quot;taskReferenceName&quot;: &quot;reserve_stock_ref&quot;, &quot;type&quot;: &quot;SIMPLE&quot; }, { &quot;name&quot;: &quot;charge_payment&quot;, &quot;taskReferenceName&quot;: &quot;charge_payment_ref&quot;, &quot;type&quot;: &quot;SIMPLE&quot; } ] }   ","version":"Next","tagName":"h3"},{"title":"Temporal (Go, Java, TypeScript)‚Äã","type":1,"pageTitle":"Saga Pattern","url":"/docs/microservices/patterns/saga#temporal-go-java-typescript","content":" export async function orderSaga(order: Order): Promise&lt;void&gt; { try { await activities.reserveStock(order); await activities.chargePayment(order); await activities.createShipment(order); } catch (error) { // Compensation automatique await compensate(); throw error; } }   ","version":"Next","tagName":"h3"},{"title":"‚ö†Ô∏è D√©fis‚Äã","type":1,"pageTitle":"Saga Pattern","url":"/docs/microservices/patterns/saga#Ô∏è-d√©fis","content":" ","version":"Next","tagName":"h2"},{"title":"1. Isolation‚Äã","type":1,"pageTitle":"Saga Pattern","url":"/docs/microservices/patterns/saga#1-isolation","content":" Pas de lecture r√©p√©table entre √©tapes  Solution : Semantic Lock (verrouillage logique)  ","version":"Next","tagName":"h3"},{"title":"2. Idempotence‚Äã","type":1,"pageTitle":"Saga Pattern","url":"/docs/microservices/patterns/saga#2-idempotence","content":" Une compensation peut √™tre appel√©e plusieurs fois  Solution : Identifiants de d√©duplication  def cancel_reservation(reservation_id, idempotency_key): if already_processed(idempotency_key): return # D√©j√† compens√© inventory.release(reservation_id) mark_as_processed(idempotency_key)   ","version":"Next","tagName":"h3"},{"title":"3. Dur√©e d'ex√©cution‚Äã","type":1,"pageTitle":"Saga Pattern","url":"/docs/microservices/patterns/saga#3-dur√©e-dex√©cution","content":" Saga longue = risque de timeout  Solution : Timeout par √©tape, retry avec backoff  ","version":"Next","tagName":"h3"},{"title":"‚úÖ Bonnes pratiques‚Äã","type":1,"pageTitle":"Saga Pattern","url":"/docs/microservices/patterns/saga#-bonnes-pratiques","content":" Concevoir des compensations idempotentesLogger chaque √©tape pour tra√ßabilit√©Monitorer les sagas en cours (dur√©e, taux d'√©chec)Tester les sc√©narios d'√©chec (chaos engineering)√âviter les sagas trop longues (&gt; 5-10 √©tapes)Pr√©f√©rer l'orchestration pour les cas complexesDocumenter les flux de compensation  ","version":"Next","tagName":"h2"},{"title":"üìà M√©triques‚Äã","type":1,"pageTitle":"Saga Pattern","url":"/docs/microservices/patterns/saga#-m√©triques","content":" Taux de succ√®s des sagasTemps moyen d'ex√©cutionNombre de compensationsSagas en timeout√âtape la plus √©chou√©e  ","version":"Next","tagName":"h2"},{"title":"Ressources‚Äã","type":1,"pageTitle":"Saga Pattern","url":"/docs/microservices/patterns/saga#ressources","content":" Saga Pattern - Microservices.ioDistributed Sagas: A Protocol for Coordinating Microservices (Paper)Axon FrameworkTemporal.io ","version":"Next","tagName":"h2"},{"title":"Authentification/Autorisation","type":0,"sectionRef":"#","url":"/docs/security/authentification-autorisation","content":"Authentification/Autorisation","keywords":"","version":"Next"},{"title":"üåê DAST - Dynamic Application Security Testing","type":0,"sectionRef":"#","url":"/docs/security/application-security-testing/dast","content":"","keywords":"","version":"Next"},{"title":"üéØ Pourquoi DAST ?‚Äã","type":1,"pageTitle":"üåê DAST - Dynamic Application Security Testing","url":"/docs/security/application-security-testing/dast#-pourquoi-dast-","content":" ‚úÖ Runtime : Teste l'application d√©ploy√©e‚úÖ Black-box : Pas besoin du code source‚úÖ Vuln√©rabilit√©s r√©elles : D√©tecte ce qui est exploitable‚úÖ Configuration : Trouve les erreurs de config‚ùå Plus lent : N√©cessite l'application en cours d'ex√©cution‚ùå D√©tection tardive : Apr√®s le d√©veloppement  ","version":"Next","tagName":"h2"},{"title":"üîß Meilleurs outils DAST‚Äã","type":1,"pageTitle":"üåê DAST - Dynamic Application Security Testing","url":"/docs/security/application-security-testing/dast#-meilleurs-outils-dast","content":" ","version":"Next","tagName":"h2"},{"title":"1. OWASP ZAP (Recommand√© - Open-source)‚Äã","type":1,"pageTitle":"üåê DAST - Dynamic Application Security Testing","url":"/docs/security/application-security-testing/dast#1-owasp-zap-recommand√©---open-source","content":" Type : Scanner de vuln√©rabilit√©s web  Installation :  docker pull zaproxy/zap-stable   GitLab CI :  # .gitlab-ci.yml zap-scan: stage: dast image: zaproxy/zap-stable script: - zap-baseline.py -t https://app.example.com -r zap-report.html artifacts: paths: - zap-report.html reports: dast: gl-dast-report.json only: - schedules   Scan avanc√© :  # Scan complet docker run -v $(pwd):/zap/wrk:rw -t zaproxy/zap-stable \\ zap-full-scan.py -t https://app.example.com -r report.html # API scan docker run -t zaproxy/zap-stable \\ zap-api-scan.py -t https://api.example.com/openapi.json -f openapi -r report.html # Baseline (rapide) docker run -t zaproxy/zap-stable \\ zap-baseline.py -t https://app.example.com   Configuration :  # zap-config.yaml rules: - id: 10096 name: Timestamp Disclosure threshold: LOW - id: 40012 name: Cross Site Scripting threshold: MEDIUM     ","version":"Next","tagName":"h3"},{"title":"2. Nuclei (Moderne - Open-source)‚Äã","type":1,"pageTitle":"üåê DAST - Dynamic Application Security Testing","url":"/docs/security/application-security-testing/dast#2-nuclei-moderne---open-source","content":" Type : Scanner de vuln√©rabilit√©s avec templates  Installation :  # Linux/macOS curl -sL https://nuclei.sh | sh # Docker docker pull projectdiscovery/nuclei:latest   GitLab CI :  nuclei-scan: stage: dast image: projectdiscovery/nuclei:latest script: - nuclei -u https://app.example.com -t cves/ -t vulnerabilities/ -o results.txt artifacts: paths: - results.txt   Utilisation :  # Scan avec templates nuclei -u https://app.example.com # Scan CVEs uniquement nuclei -u https://app.example.com -t cves/ # Scan avec custom templates nuclei -u https://app.example.com -t custom-templates/ # Scan avec liste d'URLs nuclei -l urls.txt -t vulnerabilities/   Template personnalis√© :  # custom-xss.yaml id: custom-xss-check info: name: XSS Detection severity: high requests: - method: GET path: - &quot;{{BaseURL}}/search?q=&lt;script&gt;alert(1)&lt;/script&gt;&quot; matchers: - type: word words: - &quot;&lt;script&gt;alert(1)&lt;/script&gt;&quot;     ","version":"Next","tagName":"h3"},{"title":"3. Burp Suite (Enterprise)‚Äã","type":1,"pageTitle":"üåê DAST - Dynamic Application Security Testing","url":"/docs/security/application-security-testing/dast#3-burp-suite-enterprise","content":" Type : Suite compl√®te de test de s√©curit√©  GitLab CI :  burp-scan: stage: dast script: - | curl -X POST &quot;$BURP_API_URL/scan&quot; \\ -H &quot;Authorization: Bearer $BURP_API_KEY&quot; \\ -d '{&quot;urls&quot;:[&quot;https://app.example.com&quot;]}' only: - schedules     ","version":"Next","tagName":"h3"},{"title":"4. Arachni (Open-source)‚Äã","type":1,"pageTitle":"üåê DAST - Dynamic Application Security Testing","url":"/docs/security/application-security-testing/dast#4-arachni-open-source","content":" Type : Scanner web de vuln√©rabilit√©s  # Installation docker pull arachni/arachni # Scan docker run arachni/arachni \\ arachni https://app.example.com --report-save-path=report.afr   # .gitlab-ci.yml arachni-scan: stage: dast image: arachni/arachni script: - arachni https://app.example.com --report-save-path=report.afr artifacts: paths: - report.afr     ","version":"Next","tagName":"h3"},{"title":"5. Nikto (Web server scanner)‚Äã","type":1,"pageTitle":"üåê DAST - Dynamic Application Security Testing","url":"/docs/security/application-security-testing/dast#5-nikto-web-server-scanner","content":" Type : Scanner de serveur web  nikto-scan: stage: dast image: sullo/nikto script: - nikto -h https://app.example.com -o nikto-report.html -Format html artifacts: paths: - nikto-report.html   # Scan basique nikto -h https://app.example.com # Scan avec plugins nikto -h https://app.example.com -Plugins @@ALL # Scan SSL nikto -h https://app.example.com -ssl     ","version":"Next","tagName":"h3"},{"title":"6. Acunetix (Enterprise)‚Äã","type":1,"pageTitle":"üåê DAST - Dynamic Application Security Testing","url":"/docs/security/application-security-testing/dast#6-acunetix-enterprise","content":" Type : Scanner commercial avanc√©  acunetix-scan: stage: dast script: - | curl -X POST &quot;$ACUNETIX_API/scans&quot; \\ -H &quot;X-Auth: $ACUNETIX_TOKEN&quot; \\ -d '{&quot;target_id&quot;:&quot;xxx&quot;,&quot;profile_id&quot;:&quot;yyy&quot;}'     ","version":"Next","tagName":"h3"},{"title":"üìä Comparaison des outils‚Äã","type":1,"pageTitle":"üåê DAST - Dynamic Application Security Testing","url":"/docs/security/application-security-testing/dast#-comparaison-des-outils","content":" Outil\tType\tGratuit\tCI/CD\tVitesse\tPr√©cisionOWASP ZAP\tWeb\t‚úÖ\t‚úÖ\tüü° Moyen\tüü¢ Bonne Nuclei\tMulti\t‚úÖ\t‚úÖ\tüü¢ Rapide\tüü¢ Bonne Burp Suite\tWeb\t‚ùå\t‚úÖ\tüü° Moyen\tüü¢ Excellente Arachni\tWeb\t‚úÖ\t‚úÖ\tüü° Moyen\tüü¢ Bonne Nikto\tServer\t‚úÖ\t‚úÖ\tüü¢ Rapide\tüü° Moyenne Acunetix\tWeb\t‚ùå\t‚úÖ\tüü¢ Rapide\tüü¢ Excellente    ","version":"Next","tagName":"h2"},{"title":"üîÑ Pipeline DAST complet‚Äã","type":1,"pageTitle":"üåê DAST - Dynamic Application Security Testing","url":"/docs/security/application-security-testing/dast#-pipeline-dast-complet","content":" # .gitlab-ci.yml stages: - build - deploy-staging - dast - deploy-prod variables: STAGING_URL: &quot;https://staging.app.example.com&quot; DAST_EXCLUDED_URLS: &quot;logout,admin&quot; deploy-staging: stage: deploy-staging script: - deploy_to_staging.sh environment: name: staging url: $STAGING_URL # ZAP Baseline zap-baseline: stage: dast image: zaproxy/zap-stable script: - zap-baseline.py -t $STAGING_URL -r zap-baseline.html artifacts: paths: - zap-baseline.html dependencies: - deploy-staging # Nuclei CVE scan nuclei-cve: stage: dast image: projectdiscovery/nuclei:latest script: - nuclei -u $STAGING_URL -t cves/ -o nuclei-cves.txt artifacts: paths: - nuclei-cves.txt allow_failure: true # Nikto web server scan nikto-scan: stage: dast image: sullo/nikto script: - nikto -h $STAGING_URL -o nikto-report.json -Format json artifacts: paths: - nikto-report.json # Template GitLab int√©gr√© include: - template: DAST.gitlab-ci.yml dast: variables: DAST_WEBSITE: $STAGING_URL DAST_FULL_SCAN_ENABLED: &quot;true&quot;     ","version":"Next","tagName":"h2"},{"title":"üéØ Types de scans‚Äã","type":1,"pageTitle":"üåê DAST - Dynamic Application Security Testing","url":"/docs/security/application-security-testing/dast#-types-de-scans","content":" ","version":"Next","tagName":"h2"},{"title":"1. Baseline Scan (Rapide - 1-5 min)‚Äã","type":1,"pageTitle":"üåê DAST - Dynamic Application Security Testing","url":"/docs/security/application-security-testing/dast#1-baseline-scan-rapide---1-5-min","content":" # ZAP zap-baseline.py -t https://app.example.com # Nuclei nuclei -u https://app.example.com -t technologies/   ","version":"Next","tagName":"h3"},{"title":"2. Full Scan (Complet - 30 min - 2h)‚Äã","type":1,"pageTitle":"üåê DAST - Dynamic Application Security Testing","url":"/docs/security/application-security-testing/dast#2-full-scan-complet---30-min---2h","content":" # ZAP zap-full-scan.py -t https://app.example.com # Nuclei nuclei -u https://app.example.com -t cves/ -t vulnerabilities/ -t exposures/   ","version":"Next","tagName":"h3"},{"title":"3. API Scan‚Äã","type":1,"pageTitle":"üåê DAST - Dynamic Application Security Testing","url":"/docs/security/application-security-testing/dast#3-api-scan","content":" # ZAP avec OpenAPI zap-api-scan.py -t https://api.example.com/openapi.json -f openapi # Nuclei avec fichier YAML nuclei -u https://api.example.com -t api-templates/   ","version":"Next","tagName":"h3"},{"title":"4. Authenticated Scan‚Äã","type":1,"pageTitle":"üåê DAST - Dynamic Application Security Testing","url":"/docs/security/application-security-testing/dast#4-authenticated-scan","content":" # ZAP avec authentification zap-full-scan.py -t https://app.example.com -z &quot;-config auth.method=form&quot;     ","version":"Next","tagName":"h3"},{"title":"üîê Vuln√©rabilit√©s d√©tect√©es‚Äã","type":1,"pageTitle":"üåê DAST - Dynamic Application Security Testing","url":"/docs/security/application-security-testing/dast#-vuln√©rabilit√©s-d√©tect√©es","content":" ","version":"Next","tagName":"h2"},{"title":"OWASP Top 10‚Äã","type":1,"pageTitle":"üåê DAST - Dynamic Application Security Testing","url":"/docs/security/application-security-testing/dast#owasp-top-10","content":" ‚úÖ SQL Injection‚úÖ XSS (Cross-Site Scripting)‚úÖ CSRF (Cross-Site Request Forgery)‚úÖ Authentication issues‚úÖ Security misconfigurations‚úÖ Sensitive data exposure‚úÖ XML External Entities (XXE)‚úÖ Broken Access Control  ","version":"Next","tagName":"h3"},{"title":"Autres‚Äã","type":1,"pageTitle":"üåê DAST - Dynamic Application Security Testing","url":"/docs/security/application-security-testing/dast#autres","content":" ‚úÖ CVEs connus‚úÖ Outdated libraries‚úÖ SSL/TLS issues‚úÖ Header security‚úÖ Cookie security    ","version":"Next","tagName":"h3"},{"title":"üéØ Configuration avanc√©e‚Äã","type":1,"pageTitle":"üåê DAST - Dynamic Application Security Testing","url":"/docs/security/application-security-testing/dast#-configuration-avanc√©e","content":" ","version":"Next","tagName":"h2"},{"title":"ZAP avec authentification‚Äã","type":1,"pageTitle":"üåê DAST - Dynamic Application Security Testing","url":"/docs/security/application-security-testing/dast#zap-avec-authentification","content":" # zap-auth.yaml env: contexts: - name: &quot;Application Context&quot; urls: - &quot;https://app.example.com.*&quot; authentication: method: &quot;form&quot; parameters: loginUrl: &quot;https://app.example.com/login&quot; loginRequestData: &quot;username={%username%}&amp;password={%password%}&quot; verification: method: &quot;response&quot; loggedInRegex: &quot;\\\\Qlogout\\\\E&quot; loggedOutRegex: &quot;\\\\Qlogin\\\\E&quot; users: - name: &quot;test-user&quot; credentials: username: &quot;testuser&quot; password: &quot;testpass&quot;   ","version":"Next","tagName":"h3"},{"title":"Nuclei avec rate limiting‚Äã","type":1,"pageTitle":"üåê DAST - Dynamic Application Security Testing","url":"/docs/security/application-security-testing/dast#nuclei-avec-rate-limiting","content":" nuclei -u https://app.example.com \\ -rate-limit 10 \\ -bulk-size 25 \\ -timeout 10     ","version":"Next","tagName":"h3"},{"title":"üÜò Troubleshooting‚Äã","type":1,"pageTitle":"üåê DAST - Dynamic Application Security Testing","url":"/docs/security/application-security-testing/dast#-troubleshooting","content":" ","version":"Next","tagName":"h2"},{"title":"Trop de faux positifs‚Äã","type":1,"pageTitle":"üåê DAST - Dynamic Application Security Testing","url":"/docs/security/application-security-testing/dast#trop-de-faux-positifs","content":" # ZAP - R√©duire la sensibilit√© zap-baseline.py -t https://app.example.com -c zap-config.yaml # Nuclei - Filtrer par s√©v√©rit√© nuclei -u https://app.example.com -severity high,critical   ","version":"Next","tagName":"h3"},{"title":"Scan bloqu√© par WAF‚Äã","type":1,"pageTitle":"üåê DAST - Dynamic Application Security Testing","url":"/docs/security/application-security-testing/dast#scan-bloqu√©-par-waf","content":" # R√©duire le taux de requ√™tes nuclei -u https://app.example.com -rate-limit 5 # User-Agent custom nuclei -u https://app.example.com -H &quot;User-Agent: Mozilla/5.0...&quot;   ","version":"Next","tagName":"h3"},{"title":"Timeout‚Äã","type":1,"pageTitle":"üåê DAST - Dynamic Application Security Testing","url":"/docs/security/application-security-testing/dast#timeout","content":" # Augmenter le timeout nuclei -u https://app.example.com -timeout 30     ","version":"Next","tagName":"h3"},{"title":"üéØ Meilleures pratiques‚Äã","type":1,"pageTitle":"üåê DAST - Dynamic Application Security Testing","url":"/docs/security/application-security-testing/dast#-meilleures-pratiques","content":" ","version":"Next","tagName":"h2"},{"title":"1. Scanner l'environnement de staging‚Äã","type":1,"pageTitle":"üåê DAST - Dynamic Application Security Testing","url":"/docs/security/application-security-testing/dast#1-scanner-lenvironnement-de-staging","content":" only: - schedules # Nuit, pas √† chaque commit   ","version":"Next","tagName":"h3"},{"title":"2. Authentification‚Äã","type":1,"pageTitle":"üåê DAST - Dynamic Application Security Testing","url":"/docs/security/application-security-testing/dast#2-authentification","content":" # Tester avec un utilisateur test variables: DAST_USERNAME: &quot;test-user&quot; DAST_PASSWORD: &quot;test-pass&quot;   ","version":"Next","tagName":"h3"},{"title":"3. Exclure les URLs sensibles‚Äã","type":1,"pageTitle":"üåê DAST - Dynamic Application Security Testing","url":"/docs/security/application-security-testing/dast#3-exclure-les-urls-sensibles","content":" variables: DAST_EXCLUDED_URLS: &quot;logout,delete,admin&quot;   ","version":"Next","tagName":"h3"},{"title":"4. Scan progressif‚Äã","type":1,"pageTitle":"üåê DAST - Dynamic Application Security Testing","url":"/docs/security/application-security-testing/dast#4-scan-progressif","content":" # 1. Baseline quotidien # 2. Full scan hebdomadaire # 3. Authenticated scan mensuel   ","version":"Next","tagName":"h3"},{"title":"5. Combiner avec SAST‚Äã","type":1,"pageTitle":"üåê DAST - Dynamic Application Security Testing","url":"/docs/security/application-security-testing/dast#5-combiner-avec-sast","content":" stages: - sast - dast     ","version":"Next","tagName":"h3"},{"title":"üìö Ressources‚Äã","type":1,"pageTitle":"üåê DAST - Dynamic Application Security Testing","url":"/docs/security/application-security-testing/dast#-ressources","content":" OWASP ZAP DocumentationNuclei TemplatesOWASP DASTGitLab DAST    DAST teste votre application en production et d√©tecte les vuln√©rabilit√©s exploitables ! üåêüîí ","version":"Next","tagName":"h2"},{"title":"üîç SAST - Static Application Security Testing","type":0,"sectionRef":"#","url":"/docs/security/application-security-testing/sast","content":"","keywords":"","version":"Next"},{"title":"üéØ Pourquoi SAST ?‚Äã","type":1,"pageTitle":"üîç SAST - Static Application Security Testing","url":"/docs/security/application-security-testing/sast#-pourquoi-sast-","content":" ‚úÖ D√©tection pr√©coce : Trouve les failles avant le d√©ploiement‚úÖ Code source : Analyse directe du code (white-box)‚úÖ Rapide : Int√©gration CI/CD automatique‚úÖ Pas de runtime : Pas besoin d'application en cours d'ex√©cution‚ùå Faux positifs : Peut g√©n√©rer des alertes incorrectes  ","version":"Next","tagName":"h2"},{"title":"üîß Meilleurs outils SAST‚Äã","type":1,"pageTitle":"üîç SAST - Static Application Security Testing","url":"/docs/security/application-security-testing/sast#-meilleurs-outils-sast","content":" ","version":"Next","tagName":"h2"},{"title":"1. SonarQube (Recommand√©)‚Äã","type":1,"pageTitle":"üîç SAST - Static Application Security Testing","url":"/docs/security/application-security-testing/sast#1-sonarqube-recommand√©","content":" Langages : Java, PHP, JavaScript, TypeScript, Python, C#, Go, Ruby...  # .gitlab-ci.yml sonarqube: stage: security image: sonarsource/sonar-scanner-cli:latest script: - sonar-scanner -Dsonar.projectKey=my-project -Dsonar.sources=. -Dsonar.host.url=$SONAR_HOST_URL -Dsonar.token=$SONAR_TOKEN   # sonar-project.properties sonar.projectKey=my-project sonar.sources=src sonar.exclusions=**/test/**,**/vendor/**     ","version":"Next","tagName":"h3"},{"title":"2. Semgrep (Open-source)‚Äã","type":1,"pageTitle":"üîç SAST - Static Application Security Testing","url":"/docs/security/application-security-testing/sast#2-semgrep-open-source","content":" Langages : 30+ langages support√©s  # .gitlab-ci.yml semgrep: stage: security image: returntocorp/semgrep:latest script: - semgrep ci --config=auto --sarif &gt; semgrep.sarif artifacts: reports: sast: semgrep.sarif   # .semgrep.yml (r√®gles personnalis√©es) rules: - id: sql-injection patterns: - pattern: $DB.query($USER_INPUT) message: Potential SQL injection severity: ERROR     ","version":"Next","tagName":"h3"},{"title":"3. Snyk Code‚Äã","type":1,"pageTitle":"üîç SAST - Static Application Security Testing","url":"/docs/security/application-security-testing/sast#3-snyk-code","content":" Langages : JavaScript, TypeScript, Java, Python, Go, Ruby, PHP, C#  # .gitlab-ci.yml snyk-code: stage: security image: snyk/snyk:node script: - snyk code test --sarif-file-output=snyk-code.sarif artifacts: reports: sast: snyk-code.sarif only: - merge_requests   Configuration :  # .snyk language-settings: javascript: exclude: - node_modules/** - dist/**     ","version":"Next","tagName":"h3"},{"title":"4. CodeQL (GitHub)‚Äã","type":1,"pageTitle":"üîç SAST - Static Application Security Testing","url":"/docs/security/application-security-testing/sast#4-codeql-github","content":" Langages : JavaScript, Python, Java, C/C++, C#, Ruby, Go  # .gitlab-ci.yml codeql: stage: security image: ghcr.io/github/codeql-action/codeql:latest script: - codeql database create db --language=java - codeql database analyze db --format=sarif-latest --output=results.sarif artifacts: reports: sast: results.sarif     ","version":"Next","tagName":"h3"},{"title":"5. Checkmarx (Enterprise)‚Äã","type":1,"pageTitle":"üîç SAST - Static Application Security Testing","url":"/docs/security/application-security-testing/sast#5-checkmarx-enterprise","content":" Langages : 30+ langages  # .gitlab-ci.yml checkmarx: stage: security script: - | docker run --rm \\ -v $(pwd):/src \\ checkmarx/cx-flow:latest \\ --scan \\ --project=my-project \\ --cx-token=$CX_TOKEN     ","version":"Next","tagName":"h3"},{"title":"6. SpotBugs (Java)‚Äã","type":1,"pageTitle":"üîç SAST - Static Application Security Testing","url":"/docs/security/application-security-testing/sast#6-spotbugs-java","content":" Langage : Java uniquement  &lt;!-- pom.xml --&gt; &lt;plugin&gt; &lt;groupId&gt;com.github.spotbugs&lt;/groupId&gt; &lt;artifactId&gt;spotbugs-maven-plugin&lt;/artifactId&gt; &lt;version&gt;4.8.3.0&lt;/version&gt; &lt;configuration&gt; &lt;effort&gt;Max&lt;/effort&gt; &lt;threshold&gt;Low&lt;/threshold&gt; &lt;/configuration&gt; &lt;/plugin&gt;   mvn spotbugs:check     ","version":"Next","tagName":"h3"},{"title":"7. Bandit (Python)‚Äã","type":1,"pageTitle":"üîç SAST - Static Application Security Testing","url":"/docs/security/application-security-testing/sast#7-bandit-python","content":" Langage : Python uniquement  # .gitlab-ci.yml bandit: stage: security image: python:3.11 script: - pip install bandit - bandit -r src/ -f json -o bandit-report.json artifacts: paths: - bandit-report.json   # .bandit skips: ['B101', 'B601'] exclude_dirs: ['/test', '/venv']     ","version":"Next","tagName":"h3"},{"title":"8. ESLint Security (JavaScript)‚Äã","type":1,"pageTitle":"üîç SAST - Static Application Security Testing","url":"/docs/security/application-security-testing/sast#8-eslint-security-javascript","content":" Langage : JavaScript/Node.js  // package.json { &quot;devDependencies&quot;: { &quot;eslint&quot;: &quot;^8.0.0&quot;, &quot;eslint-plugin-security&quot;: &quot;^1.7.1&quot; } }   // .eslintrc.js module.exports = { plugins: ['security'], extends: ['plugin:security/recommended'] };   npm run lint     ","version":"Next","tagName":"h3"},{"title":"üìä Comparaison des outils‚Äã","type":1,"pageTitle":"üîç SAST - Static Application Security Testing","url":"/docs/security/application-security-testing/sast#-comparaison-des-outils","content":" Outil\tLangages\tGratuit\tCI/CD\tFaux positifsSonarQube\t25+\t‚úÖ Community\t‚úÖ\tüü° Moyen Semgrep\t30+\t‚úÖ Open-source\t‚úÖ\tüü¢ Faible Snyk Code\t8+\tüü° Limit√©\t‚úÖ\tüü¢ Faible CodeQL\t7+\t‚úÖ Open-source\t‚úÖ\tüü° Moyen Checkmarx\t30+\t‚ùå Payant\t‚úÖ\tüü° Moyen SpotBugs\tJava\t‚úÖ\t‚úÖ\tüü¢ Faible Bandit\tPython\t‚úÖ\t‚úÖ\tüü¢ Faible    ","version":"Next","tagName":"h2"},{"title":"üîÑ Pipeline SAST complet‚Äã","type":1,"pageTitle":"üîç SAST - Static Application Security Testing","url":"/docs/security/application-security-testing/sast#-pipeline-sast-complet","content":" # .gitlab-ci.yml stages: - sast variables: SAST_EXCLUDED_PATHS: &quot;test/**,vendor/**,node_modules/**&quot; # Multi-langage avec SonarQube sonarqube-sast: stage: sast image: sonarsource/sonar-scanner-cli:latest script: - sonar-scanner -Dsonar.projectKey=$CI_PROJECT_NAME -Dsonar.sources=. -Dsonar.host.url=$SONAR_HOST_URL -Dsonar.token=$SONAR_TOKEN only: - merge_requests - main # Semgrep semgrep-sast: stage: sast image: returntocorp/semgrep:latest script: - semgrep ci --config=auto --sarif &gt; semgrep.sarif artifacts: reports: sast: semgrep.sarif allow_failure: false # Template GitLab int√©gr√© include: - template: Security/SAST.gitlab-ci.yml     ","version":"Next","tagName":"h2"},{"title":"üéØ Configuration par langage‚Äã","type":1,"pageTitle":"üîç SAST - Static Application Security Testing","url":"/docs/security/application-security-testing/sast#-configuration-par-langage","content":" ","version":"Next","tagName":"h2"},{"title":"Java‚Äã","type":1,"pageTitle":"üîç SAST - Static Application Security Testing","url":"/docs/security/application-security-testing/sast#java","content":" sast-java: stage: sast script: - mvn spotbugs:check - mvn pmd:check   ","version":"Next","tagName":"h3"},{"title":"PHP‚Äã","type":1,"pageTitle":"üîç SAST - Static Application Security Testing","url":"/docs/security/application-security-testing/sast#php","content":" sast-php: stage: sast script: - composer require --dev phpstan/phpstan - vendor/bin/phpstan analyse src --level=max   ","version":"Next","tagName":"h3"},{"title":"JavaScript/Node.js‚Äã","type":1,"pageTitle":"üîç SAST - Static Application Security Testing","url":"/docs/security/application-security-testing/sast#javascriptnodejs","content":" sast-js: stage: sast script: - npm install - npm run lint - npx eslint src/ --ext .js,.ts   ","version":"Next","tagName":"h3"},{"title":"Python‚Äã","type":1,"pageTitle":"üîç SAST - Static Application Security Testing","url":"/docs/security/application-security-testing/sast#python","content":" sast-python: stage: sast script: - pip install bandit - bandit -r src/     ","version":"Next","tagName":"h3"},{"title":"üîê Int√©gration des r√©sultats‚Äã","type":1,"pageTitle":"üîç SAST - Static Application Security Testing","url":"/docs/security/application-security-testing/sast#-int√©gration-des-r√©sultats","content":" ","version":"Next","tagName":"h2"},{"title":"Format SARIF (Standard)‚Äã","type":1,"pageTitle":"üîç SAST - Static Application Security Testing","url":"/docs/security/application-security-testing/sast#format-sarif-standard","content":" { &quot;$schema&quot;: &quot;https://raw.githubusercontent.com/oasis-tcs/sarif-spec/master/Schemata/sarif-schema-2.1.0.json&quot;, &quot;version&quot;: &quot;2.1.0&quot;, &quot;runs&quot;: [ { &quot;tool&quot;: { &quot;driver&quot;: { &quot;name&quot;: &quot;SemGrep&quot; } }, &quot;results&quot;: [ { &quot;ruleId&quot;: &quot;sql-injection&quot;, &quot;message&quot;: { &quot;text&quot;: &quot;Potential SQL injection&quot; }, &quot;level&quot;: &quot;error&quot; } ] } ] }   ","version":"Next","tagName":"h3"},{"title":"GitLab Security Dashboard‚Äã","type":1,"pageTitle":"üîç SAST - Static Application Security Testing","url":"/docs/security/application-security-testing/sast#gitlab-security-dashboard","content":" artifacts: reports: sast: results.sarif     ","version":"Next","tagName":"h3"},{"title":"üéØ Meilleures pratiques‚Äã","type":1,"pageTitle":"üîç SAST - Static Application Security Testing","url":"/docs/security/application-security-testing/sast#-meilleures-pratiques","content":" ","version":"Next","tagName":"h2"},{"title":"1. Scanner √† chaque MR‚Äã","type":1,"pageTitle":"üîç SAST - Static Application Security Testing","url":"/docs/security/application-security-testing/sast#1-scanner-√†-chaque-mr","content":" only: - merge_requests   ","version":"Next","tagName":"h3"},{"title":"2. Bloquer les critiques‚Äã","type":1,"pageTitle":"üîç SAST - Static Application Security Testing","url":"/docs/security/application-security-testing/sast#2-bloquer-les-critiques","content":" allow_failure: false script: - semgrep ci --error   ","version":"Next","tagName":"h3"},{"title":"3. Exclure les fichiers inutiles‚Äã","type":1,"pageTitle":"üîç SAST - Static Application Security Testing","url":"/docs/security/application-security-testing/sast#3-exclure-les-fichiers-inutiles","content":" sonar.exclusions=**/test/**,**/vendor/**,**/node_modules/**   ","version":"Next","tagName":"h3"},{"title":"4. R√®gles personnalis√©es‚Äã","type":1,"pageTitle":"üîç SAST - Static Application Security Testing","url":"/docs/security/application-security-testing/sast#4-r√®gles-personnalis√©es","content":" # .semgrep.yml rules: - id: custom-rule pattern: dangerous_function(...) severity: ERROR   ","version":"Next","tagName":"h3"},{"title":"5. Scan incr√©mental‚Äã","type":1,"pageTitle":"üîç SAST - Static Application Security Testing","url":"/docs/security/application-security-testing/sast#5-scan-incr√©mental","content":" # Scanner uniquement les fichiers modifi√©s semgrep ci --baseline=main     ","version":"Next","tagName":"h3"},{"title":"üÜò Troubleshooting‚Äã","type":1,"pageTitle":"üîç SAST - Static Application Security Testing","url":"/docs/security/application-security-testing/sast#-troubleshooting","content":" ","version":"Next","tagName":"h2"},{"title":"Trop de faux positifs‚Äã","type":1,"pageTitle":"üîç SAST - Static Application Security Testing","url":"/docs/security/application-security-testing/sast#trop-de-faux-positifs","content":" # Ajuster la s√©v√©rit√© - semgrep ci --config=auto --severity=high   ","version":"Next","tagName":"h3"},{"title":"Scan trop long‚Äã","type":1,"pageTitle":"üîç SAST - Static Application Security Testing","url":"/docs/security/application-security-testing/sast#scan-trop-long","content":" # Parall√©lisation parallel: matrix: - LANGUAGE: [java, javascript, python]   ","version":"Next","tagName":"h3"},{"title":"R√®gles obsol√®tes‚Äã","type":1,"pageTitle":"üîç SAST - Static Application Security Testing","url":"/docs/security/application-security-testing/sast#r√®gles-obsol√®tes","content":" # Mettre √† jour les r√®gles semgrep --update     ","version":"Next","tagName":"h3"},{"title":"üìö Ressources‚Äã","type":1,"pageTitle":"üîç SAST - Static Application Security Testing","url":"/docs/security/application-security-testing/sast#-ressources","content":" OWASP SASTSonarQube DocumentationSemgrep RegistrySARIF Format    SAST analyse votre code source et d√©tecte les vuln√©rabilit√©s avant d√©ploiement ! üîç‚úÖ ","version":"Next","tagName":"h2"},{"title":"üîÑ IAST - Interactive Application Security Testing","type":0,"sectionRef":"#","url":"/docs/security/application-security-testing/iast","content":"","keywords":"","version":"Next"},{"title":"üéØ Pourquoi IAST ?‚Äã","type":1,"pageTitle":"üîÑ IAST - Interactive Application Security Testing","url":"/docs/security/application-security-testing/iast#-pourquoi-iast-","content":" ‚úÖ Hybrid : Combine SAST (code) + DAST (runtime)‚úÖ Pr√©cision : Moins de faux positifs que SAST/DAST seuls‚úÖ Context-aware : Comprend le flux de donn√©es‚úÖ Real-time : D√©tection pendant les tests‚ùå Performance : Impact sur l'application instrument√©e‚ùå Complexit√© : Configuration plus complexe  ","version":"Next","tagName":"h2"},{"title":"üîß Meilleurs outils IAST‚Äã","type":1,"pageTitle":"üîÑ IAST - Interactive Application Security Testing","url":"/docs/security/application-security-testing/iast#-meilleurs-outils-iast","content":" ","version":"Next","tagName":"h2"},{"title":"1. Contrast Security (Recommand√© - Enterprise)‚Äã","type":1,"pageTitle":"üîÑ IAST - Interactive Application Security Testing","url":"/docs/security/application-security-testing/iast#1-contrast-security-recommand√©---enterprise","content":" Langages : Java, .NET, Node.js, Python, Ruby, Go  Installation Java :  &lt;!-- pom.xml --&gt; &lt;dependency&gt; &lt;groupId&gt;com.contrastsecurity&lt;/groupId&gt; &lt;artifactId&gt;contrast-agent&lt;/artifactId&gt; &lt;version&gt;4.0.0&lt;/version&gt; &lt;/dependency&gt;   # D√©marrage avec agent java -javaagent:contrast-agent.jar \\ -Dcontrast.api.url=https://app.contrastsecurity.com/Contrast \\ -Dcontrast.api.api_key=$API_KEY \\ -Dcontrast.api.service_key=$SERVICE_KEY \\ -Dcontrast.api.user_name=$USERNAME \\ -jar myapp.jar   Docker :  FROM openjdk:17 COPY contrast-agent.jar /opt/contrast/ COPY app.jar /app/ ENV JAVA_TOOL_OPTIONS=&quot;-javaagent:/opt/contrast/contrast-agent.jar&quot; CMD [&quot;java&quot;, &quot;-jar&quot;, &quot;/app/app.jar&quot;]   GitLab CI :  contrast-iast: stage: test image: openjdk:17 before_script: - wget -O contrast-agent.jar https://repo1.maven.org/maven2/com/contrastsecurity/contrast-agent/4.0.0/contrast-agent-4.0.0.jar script: - java -javaagent:contrast-agent.jar -jar target/myapp.jar &amp; - sleep 30 - npm run e2e-tests - curl &quot;$CONTRAST_API_URL/api/ng/$ORG_ID/traces/vulnerabilities&quot;     ","version":"Next","tagName":"h3"},{"title":"2. Hdiv IAST (Open-source / Enterprise)‚Äã","type":1,"pageTitle":"üîÑ IAST - Interactive Application Security Testing","url":"/docs/security/application-security-testing/iast#2-hdiv-iast-open-source--enterprise","content":" Langages : Java, .NET  Installation :  &lt;!-- pom.xml --&gt; &lt;dependency&gt; &lt;groupId&gt;org.hdiv&lt;/groupId&gt; &lt;artifactId&gt;hdiv-iast-agent&lt;/artifactId&gt; &lt;version&gt;3.0.0&lt;/version&gt; &lt;/dependency&gt;   java -javaagent:hdiv-iast-agent.jar \\ -Dhdiv.console.url=https://console.hdiv.io \\ -Dhdiv.console.token=$HDIV_TOKEN \\ -jar myapp.jar     ","version":"Next","tagName":"h3"},{"title":"3. Seeker (Synopsys)‚Äã","type":1,"pageTitle":"üîÑ IAST - Interactive Application Security Testing","url":"/docs/security/application-security-testing/iast#3-seeker-synopsys","content":" Langages : Java, .NET, Node.js, Python  # Java java -javaagent:seeker-agent.jar \\ -Dseeker.server.url=https://seeker.synopsys.com \\ -Dseeker.project.key=$PROJECT_KEY \\ -jar myapp.jar     ","version":"Next","tagName":"h3"},{"title":"4. Checkmarx CxIAST‚Äã","type":1,"pageTitle":"üîÑ IAST - Interactive Application Security Testing","url":"/docs/security/application-security-testing/iast#4-checkmarx-cxiast","content":" Langages : Java, .NET  # .gitlab-ci.yml cxiast: stage: iast script: - docker run -d --name app-iast \\ -e CXIAST_MANAGER_URL=$CX_MANAGER_URL \\ -e CXIAST_AGENT_TOKEN=$CX_TOKEN \\ myapp:latest - docker exec app-iast run-tests - curl &quot;$CX_MANAGER_URL/api/vulnerabilities&quot;     ","version":"Next","tagName":"h3"},{"title":"5. Sqreen (Datadog - SaaS)‚Äã","type":1,"pageTitle":"üîÑ IAST - Interactive Application Security Testing","url":"/docs/security/application-security-testing/iast#5-sqreen-datadog---saas","content":" Langages : Java, Python, Ruby, Node.js, PHP, Go  Node.js :  // app.js require('sqreen'); const express = require('express'); const app = express(); // ... rest of your app   export SQREEN_TOKEN=$SQREEN_TOKEN node app.js     ","version":"Next","tagName":"h3"},{"title":"6. Acunetix AcuSensor (IAST add-on)‚Äã","type":1,"pageTitle":"üîÑ IAST - Interactive Application Security Testing","url":"/docs/security/application-security-testing/iast#6-acunetix-acusensor-iast-add-on","content":" Langages : PHP, Java, .NET  PHP :  // Ajouter au d√©but de votre app require_once('/path/to/acusensor/acusensor.php');     ","version":"Next","tagName":"h3"},{"title":"üìä Comparaison des outils‚Äã","type":1,"pageTitle":"üîÑ IAST - Interactive Application Security Testing","url":"/docs/security/application-security-testing/iast#-comparaison-des-outils","content":" Outil\tLangages\tType\tGratuit\tImpact perfContrast Security\t6+\tEnterprise\t‚ùå\tüü° 5-10% Hdiv IAST\tJava, .NET\tOpen/Enterprise\tüü°\tüü° 5-15% Seeker\t4+\tEnterprise\t‚ùå\tüü° 10-15% Checkmarx CxIAST\tJava, .NET\tEnterprise\t‚ùå\tüü° 5-10% Sqreen\t6+\tSaaS\t‚ùå\tüü¢ 2-5% Acunetix AcuSensor\t3+\tAdd-on\t‚ùå\tüü° 5-10%    ","version":"Next","tagName":"h2"},{"title":"üîÑ Architecture IAST‚Äã","type":1,"pageTitle":"üîÑ IAST - Interactive Application Security Testing","url":"/docs/security/application-security-testing/iast#-architecture-iast","content":"   Fonctionnement :  L'agent IAST s'int√®gre √† l'applicationLors des tests, l'agent suit le flux de donn√©esD√©tection des vuln√©rabilit√©s en temps r√©elRapport avec contexte complet (stack trace, variables)    ","version":"Next","tagName":"h2"},{"title":"üîÑ Pipeline IAST complet‚Äã","type":1,"pageTitle":"üîÑ IAST - Interactive Application Security Testing","url":"/docs/security/application-security-testing/iast#-pipeline-iast-complet","content":" # .gitlab-ci.yml stages: - build - iast - report variables: CONTRAST_API_URL: &quot;https://app.contrastsecurity.com/Contrast&quot; APP_URL: &quot;http://localhost:8080&quot; build: stage: build script: - mvn clean package - wget -O contrast-agent.jar $CONTRAST_AGENT_URL artifacts: paths: - target/*.jar - contrast-agent.jar iast-testing: stage: iast image: openjdk:17 services: - postgres:latest variables: POSTGRES_DB: testdb POSTGRES_USER: test POSTGRES_PASSWORD: test script: # 1. D√©marrer l'app avec agent IAST - | java -javaagent:contrast-agent.jar \\ -Dcontrast.api.url=$CONTRAST_API_URL \\ -Dcontrast.api.api_key=$CONTRAST_API_KEY \\ -Dcontrast.api.service_key=$CONTRAST_SERVICE_KEY \\ -Dcontrast.api.user_name=$CONTRAST_USERNAME \\ -Dspring.datasource.url=jdbc:postgresql://postgres:5432/testdb \\ -jar target/myapp.jar &amp; # 2. Attendre le d√©marrage - sleep 30 - curl --retry 10 --retry-delay 3 $APP_URL/actuator/health # 3. Ex√©cuter les tests (IAST analyse en temps r√©el) - npm install - npm run test:e2e - mvn verify -Dtest.url=$APP_URL # 4. R√©cup√©rer les r√©sultats - sleep 10 - | curl -X GET &quot;$CONTRAST_API_URL/api/ng/$CONTRAST_ORG_ID/traces/vulnerabilities&quot; \\ -H &quot;Authorization: $CONTRAST_AUTH_HEADER&quot; \\ -H &quot;API-Key: $CONTRAST_API_KEY&quot; \\ -o iast-results.json artifacts: paths: - iast-results.json reports: sast: iast-results.json allow_failure: false report: stage: report script: - echo &quot;IAST vulnerabilities found:&quot; - cat iast-results.json | jq '.vulnerabilities[] | {title, severity, url}'     ","version":"Next","tagName":"h2"},{"title":"üéØ Configuration par langage‚Äã","type":1,"pageTitle":"üîÑ IAST - Interactive Application Security Testing","url":"/docs/security/application-security-testing/iast#-configuration-par-langage","content":" ","version":"Next","tagName":"h2"},{"title":"Java Spring Boot‚Äã","type":1,"pageTitle":"üîÑ IAST - Interactive Application Security Testing","url":"/docs/security/application-security-testing/iast#java-spring-boot","content":" # application-iast.yml spring: profiles: iast # D√©marrage java -javaagent:contrast-agent.jar \\ -Dspring.profiles.active=iast \\ -jar myapp.jar   ","version":"Next","tagName":"h3"},{"title":".NET‚Äã","type":1,"pageTitle":"üîÑ IAST - Interactive Application Security Testing","url":"/docs/security/application-security-testing/iast#net","content":" &lt;!-- web.config --&gt; &lt;configuration&gt; &lt;appSettings&gt; &lt;add key=&quot;Contrast.Api.Url&quot; value=&quot;https://app.contrastsecurity.com/Contrast&quot;/&gt; &lt;add key=&quot;Contrast.Api.ApiKey&quot; value=&quot;YOUR_API_KEY&quot;/&gt; &lt;/appSettings&gt; &lt;/configuration&gt;   # D√©marrage dotnet myapp.dll --Contrast:Enable=true   ","version":"Next","tagName":"h3"},{"title":"Node.js‚Äã","type":1,"pageTitle":"üîÑ IAST - Interactive Application Security Testing","url":"/docs/security/application-security-testing/iast#nodejs","content":" // app.js if (process.env.NODE_ENV === 'iast') { require('contrast-agent'); } const express = require('express'); const app = express(); // ... rest   ","version":"Next","tagName":"h3"},{"title":"Python‚Äã","type":1,"pageTitle":"üîÑ IAST - Interactive Application Security Testing","url":"/docs/security/application-security-testing/iast#python","content":" # app.py from contrast.agent import install_agent if os.getenv('ENABLE_IAST'): install_agent() from flask import Flask app = Flask(__name__) # ... rest     ","version":"Next","tagName":"h3"},{"title":"üîê Vuln√©rabilit√©s d√©tect√©es‚Äã","type":1,"pageTitle":"üîÑ IAST - Interactive Application Security Testing","url":"/docs/security/application-security-testing/iast#-vuln√©rabilit√©s-d√©tect√©es","content":" ","version":"Next","tagName":"h2"},{"title":"Runtime-specific‚Äã","type":1,"pageTitle":"üîÑ IAST - Interactive Application Security Testing","url":"/docs/security/application-security-testing/iast#runtime-specific","content":" ‚úÖ SQL Injection (avec query r√©elle)‚úÖ XSS (avec payload exact)‚úÖ Path Traversal (chemin complet)‚úÖ Command Injection (commande ex√©cut√©e)‚úÖ XXE (entit√© charg√©e)‚úÖ Insecure Deserialization  ","version":"Next","tagName":"h3"},{"title":"Avec contexte complet‚Äã","type":1,"pageTitle":"üîÑ IAST - Interactive Application Security Testing","url":"/docs/security/application-security-testing/iast#avec-contexte-complet","content":" Stack trace compl√®teVariables impliqu√©esFlux de donn√©es (source ‚Üí sink)Impact r√©el    ","version":"Next","tagName":"h3"},{"title":"üéØ Meilleures pratiques‚Äã","type":1,"pageTitle":"üîÑ IAST - Interactive Application Security Testing","url":"/docs/security/application-security-testing/iast#-meilleures-pratiques","content":" ","version":"Next","tagName":"h2"},{"title":"1. Environnement d√©di√©‚Äã","type":1,"pageTitle":"üîÑ IAST - Interactive Application Security Testing","url":"/docs/security/application-security-testing/iast#1-environnement-d√©di√©","content":" # Ne jamais en production ! environment: name: iast-testing   ","version":"Next","tagName":"h3"},{"title":"2. Tests automatis√©s complets‚Äã","type":1,"pageTitle":"üîÑ IAST - Interactive Application Security Testing","url":"/docs/security/application-security-testing/iast#2-tests-automatis√©s-complets","content":" script: - npm run test:unit - npm run test:integration - npm run test:e2e # Coverage maximale   ","version":"Next","tagName":"h3"},{"title":"3. Monitoring de performance‚Äã","type":1,"pageTitle":"üîÑ IAST - Interactive Application Security Testing","url":"/docs/security/application-security-testing/iast#3-monitoring-de-performance","content":" script: - monitor_app_performance.sh - if [ $RESPONSE_TIME -gt 1000 ]; then echo &quot;Too slow&quot;; exit 1; fi   ","version":"Next","tagName":"h3"},{"title":"4. Rotation des credentials‚Äã","type":1,"pageTitle":"üîÑ IAST - Interactive Application Security Testing","url":"/docs/security/application-security-testing/iast#4-rotation-des-credentials","content":" variables: IAST_TEST_USER: &quot;iast-user-$CI_PIPELINE_ID&quot;   ","version":"Next","tagName":"h3"},{"title":"5. Nettoyage post-test‚Äã","type":1,"pageTitle":"üîÑ IAST - Interactive Application Security Testing","url":"/docs/security/application-security-testing/iast#5-nettoyage-post-test","content":" after_script: - pkill -f &quot;java.*contrast-agent&quot; - docker stop iast-app     ","version":"Next","tagName":"h3"},{"title":"üîÑ Combinaison SAST + DAST + IAST‚Äã","type":1,"pageTitle":"üîÑ IAST - Interactive Application Security Testing","url":"/docs/security/application-security-testing/iast#-combinaison-sast--dast--iast","content":" stages: - sast - build - iast - dast # 1. SAST : Analyse statique sonarqube: stage: sast script: - sonar-scanner # 2. Build avec instrumentation build-iast: stage: build script: - mvn package - wget contrast-agent.jar # 3. IAST : Tests avec agent iast-test: stage: iast script: - java -javaagent:contrast-agent.jar -jar app.jar &amp; - npm run test:e2e # 4. DAST : Scan de l'app d√©ploy√©e zap-scan: stage: dast script: - zap-baseline.py -t https://staging.app.com     ","version":"Next","tagName":"h2"},{"title":"üÜò Troubleshooting‚Äã","type":1,"pageTitle":"üîÑ IAST - Interactive Application Security Testing","url":"/docs/security/application-security-testing/iast#-troubleshooting","content":" ","version":"Next","tagName":"h2"},{"title":"Agent ne d√©marre pas‚Äã","type":1,"pageTitle":"üîÑ IAST - Interactive Application Security Testing","url":"/docs/security/application-security-testing/iast#agent-ne-d√©marre-pas","content":" # V√©rifier les logs java -javaagent:contrast-agent.jar -Dcontrast.log.level=DEBUG -jar app.jar # Check permissions ls -la contrast-agent.jar   ","version":"Next","tagName":"h3"},{"title":"Performance d√©grad√©e‚Äã","type":1,"pageTitle":"üîÑ IAST - Interactive Application Security Testing","url":"/docs/security/application-security-testing/iast#performance-d√©grad√©e","content":" # R√©duire le mode de d√©tection -Dcontrast.assess.enable=false # D√©sactiver assess -Dcontrast.protect.enable=true # Garder protect uniquement   ","version":"Next","tagName":"h3"},{"title":"Pas de vuln√©rabilit√©s d√©tect√©es‚Äã","type":1,"pageTitle":"üîÑ IAST - Interactive Application Security Testing","url":"/docs/security/application-security-testing/iast#pas-de-vuln√©rabilit√©s-d√©tect√©es","content":" # V√©rifier la couverture des tests # Plus de tests = plus de d√©tection # V√©rifier l'agent curl http://localhost:8080/contrast/health     ","version":"Next","tagName":"h3"},{"title":"üìà M√©triques IAST‚Äã","type":1,"pageTitle":"üîÑ IAST - Interactive Application Security Testing","url":"/docs/security/application-security-testing/iast#-m√©triques-iast","content":" # √Ä surveiller - Test coverage: &gt; 80% - Agent overhead: &lt; 15% - Vulnerabilities: 0 high/critical - False positives: &lt; 5% - Detection time: Real-time     ","version":"Next","tagName":"h2"},{"title":"üìö Ressources‚Äã","type":1,"pageTitle":"üîÑ IAST - Interactive Application Security Testing","url":"/docs/security/application-security-testing/iast#-ressources","content":" Contrast Security DocumentationOWASP IASTHdiv IAST    IAST analyse votre application pendant l'ex√©cution des tests avec une pr√©cision maximale ! üîÑüéØ ","version":"Next","tagName":"h2"},{"title":"Basic Authentication","type":0,"sectionRef":"#","url":"/docs/security/authentification-autorisation/basic-auth","content":"","keywords":"","version":"Next"},{"title":"Introduction‚Äã","type":1,"pageTitle":"Basic Authentication","url":"/docs/security/authentification-autorisation/basic-auth#introduction","content":" Basic Authentication (ou HTTP Basic Auth) est la m√©thode d'authentification la plus simple du protocole HTTP. Elle consiste √† envoyer un nom d'utilisateur et un mot de passe encod√©s en Base64 dans le header Authorization de chaque requ√™te.  warning Basic Auth est simple mais peu s√©curis√© si utilis√© sans HTTPS. Les credentials sont simplement encod√©s, pas chiffr√©s.  ","version":"Next","tagName":"h2"},{"title":"Principe de Fonctionnement‚Äã","type":1,"pageTitle":"Basic Authentication","url":"/docs/security/authentification-autorisation/basic-auth#principe-de-fonctionnement","content":"   √âtapes d√©taill√©es :  Le client fait une requ√™te sans authentificationLe serveur r√©pond 401 Unauthorized et demande l'authentificationLe client encode username:password en Base64Le client renvoie la requ√™te avec le header AuthorizationLe serveur d√©code, v√©rifie les credentialsSi valide : acc√®s accord√©, sinon : 401 ou 403  ","version":"Next","tagName":"h2"},{"title":"Concepts Cl√©s‚Äã","type":1,"pageTitle":"Basic Authentication","url":"/docs/security/authentification-autorisation/basic-auth#concepts-cl√©s","content":" ","version":"Next","tagName":"h2"},{"title":"Realm (Domaine)‚Äã","type":1,"pageTitle":"Basic Authentication","url":"/docs/security/authentification-autorisation/basic-auth#realm-domaine","content":" Le realm d√©finit une zone de protection. Il permet de :  Grouper des ressources prot√©g√©esAfficher un message personnalis√© dans le navigateurG√©rer diff√©rents espaces d'authentification  Exemple : realm=&quot;Admin Area&quot; ou realm=&quot;API Access&quot;  ","version":"Next","tagName":"h3"},{"title":"Encodage Base64‚Äã","type":1,"pageTitle":"Basic Authentication","url":"/docs/security/authentification-autorisation/basic-auth#encodage-base64","content":" Important : Base64 est un encodage, pas un chiffrement !  username:password ‚Üí dXNlcm5hbWU6cGFzc3dvcmQ=   danger Base64 peut √™tre d√©cod√© instantan√©ment. N'importe qui interceptant la requ√™te peut lire les credentials.HTTPS est absolument obligatoire avec Basic Auth.  ","version":"Next","tagName":"h3"},{"title":"Format du Header‚Äã","type":1,"pageTitle":"Basic Authentication","url":"/docs/security/authentification-autorisation/basic-auth#format-du-header","content":" Authorization: Basic &lt;base64(username:password)&gt;   ","version":"Next","tagName":"h3"},{"title":"Exemples de Requ√™tes HTTP‚Äã","type":1,"pageTitle":"Basic Authentication","url":"/docs/security/authentification-autorisation/basic-auth#exemples-de-requ√™tes-http","content":" ","version":"Next","tagName":"h2"},{"title":"Premi√®re Requ√™te (sans authentification)‚Äã","type":1,"pageTitle":"Basic Authentication","url":"/docs/security/authentification-autorisation/basic-auth#premi√®re-requ√™te-sans-authentification","content":" GET /api/users HTTP/1.1 Host: api.example.com   R√©ponse du serveur :  HTTP/1.1 401 Unauthorized WWW-Authenticate: Basic realm=&quot;API Access Required&quot; Content-Type: application/json { &quot;error&quot;: &quot;Authentication required&quot; }     ","version":"Next","tagName":"h3"},{"title":"Requ√™te avec Basic Auth‚Äã","type":1,"pageTitle":"Basic Authentication","url":"/docs/security/authentification-autorisation/basic-auth#requ√™te-avec-basic-auth","content":" GET /api/users HTTP/1.1 Host: api.example.com Authorization: Basic dXNlcm5hbWU6cGFzc3dvcmQ=   Calcul du header :  Username : usernamePassword : passwordConcat√©nation : username:passwordEncodage Base64 : dXNlcm5hbWU6cGFzc3dvcmQ=  R√©ponse en cas de succ√®s :  HTTP/1.1 200 OK Content-Type: application/json { &quot;users&quot;: [ {&quot;id&quot;: 1, &quot;name&quot;: &quot;John Doe&quot;}, {&quot;id&quot;: 2, &quot;name&quot;: &quot;Jane Smith&quot;} ] }   R√©ponse en cas d'√©chec :  HTTP/1.1 401 Unauthorized WWW-Authenticate: Basic realm=&quot;API Access Required&quot; { &quot;error&quot;: &quot;Invalid credentials&quot; }     ","version":"Next","tagName":"h3"},{"title":"POST avec Basic Auth‚Äã","type":1,"pageTitle":"Basic Authentication","url":"/docs/security/authentification-autorisation/basic-auth#post-avec-basic-auth","content":" POST /api/users HTTP/1.1 Host: api.example.com Authorization: Basic YWRtaW46c2VjcmV0MTIz Content-Type: application/json { &quot;name&quot;: &quot;Alice Johnson&quot;, &quot;email&quot;: &quot;alice@example.com&quot; }   R√©ponse :  HTTP/1.1 201 Created Location: /api/users/3 Content-Type: application/json { &quot;id&quot;: 3, &quot;name&quot;: &quot;Alice Johnson&quot;, &quot;email&quot;: &quot;alice@example.com&quot; }     ","version":"Next","tagName":"h3"},{"title":"PUT avec Basic Auth‚Äã","type":1,"pageTitle":"Basic Authentication","url":"/docs/security/authentification-autorisation/basic-auth#put-avec-basic-auth","content":" PUT /api/users/3 HTTP/1.1 Host: api.example.com Authorization: Basic YWRtaW46c2VjcmV0MTIz Content-Type: application/json { &quot;name&quot;: &quot;Alice Johnson-Smith&quot;, &quot;email&quot;: &quot;alice.smith@example.com&quot; }     ","version":"Next","tagName":"h3"},{"title":"DELETE avec Basic Auth‚Äã","type":1,"pageTitle":"Basic Authentication","url":"/docs/security/authentification-autorisation/basic-auth#delete-avec-basic-auth","content":" DELETE /api/users/3 HTTP/1.1 Host: api.example.com Authorization: Basic YWRtaW46c2VjcmV0MTIz   R√©ponse :  HTTP/1.1 204 No Content     ","version":"Next","tagName":"h3"},{"title":"Encodage/D√©codage Base64‚Äã","type":1,"pageTitle":"Basic Authentication","url":"/docs/security/authentification-autorisation/basic-auth#encodaged√©codage-base64","content":" ","version":"Next","tagName":"h2"},{"title":"Encodage manuel‚Äã","type":1,"pageTitle":"Basic Authentication","url":"/docs/security/authentification-autorisation/basic-auth#encodage-manuel","content":" Linux/Mac (terminal) :  echo -n &quot;username:password&quot; | base64 # R√©sultat : dXNlcm5hbWU6cGFzc3dvcmQ=   Windows (PowerShell) :  [Convert]::ToBase64String([Text.Encoding]::UTF8.GetBytes(&quot;username:password&quot;))   ","version":"Next","tagName":"h3"},{"title":"D√©codage manuel‚Äã","type":1,"pageTitle":"Basic Authentication","url":"/docs/security/authentification-autorisation/basic-auth#d√©codage-manuel","content":" Linux/Mac (terminal) :  echo &quot;dXNlcm5hbWU6cGFzc3dvcmQ=&quot; | base64 -d # R√©sultat : username:password   Windows (PowerShell) :  [Text.Encoding]::UTF8.GetString([Convert]::FromBase64String(&quot;dXNlcm5hbWU6cGFzc3dvcmQ=&quot;))     ","version":"Next","tagName":"h3"},{"title":"Configuration Postman‚Äã","type":1,"pageTitle":"Basic Authentication","url":"/docs/security/authentification-autorisation/basic-auth#configuration-postman","content":" ","version":"Next","tagName":"h2"},{"title":"M√©thode 1 : Onglet Authorization‚Äã","type":1,"pageTitle":"Basic Authentication","url":"/docs/security/authentification-autorisation/basic-auth#m√©thode-1--onglet-authorization","content":" S√©lectionner Type : Basic AuthEntrer Username : your_usernameEntrer Password : your_passwordPostman g√©n√®re automatiquement le header  ","version":"Next","tagName":"h3"},{"title":"M√©thode 2 : Header manuel‚Äã","type":1,"pageTitle":"Basic Authentication","url":"/docs/security/authentification-autorisation/basic-auth#m√©thode-2--header-manuel","content":" Onglet HeadersKey : AuthorizationValue : Basic dXNlcm5hbWU6cGFzc3dvcmQ=    ","version":"Next","tagName":"h3"},{"title":"Cas d'Usage‚Äã","type":1,"pageTitle":"Basic Authentication","url":"/docs/security/authentification-autorisation/basic-auth#cas-dusage","content":" ","version":"Next","tagName":"h2"},{"title":"‚úÖ Quand utiliser Basic Auth‚Äã","type":1,"pageTitle":"Basic Authentication","url":"/docs/security/authentification-autorisation/basic-auth#-quand-utiliser-basic-auth","content":" APIs internes : Communication entre services d'une m√™me infrastructurePrototypes et d√©veloppement : Tests rapidesScripts et outils CLI : Automatisation simpleDevices IoT : Appareils avec capacit√©s limit√©esWebhooks simples : Notifications entre services  ","version":"Next","tagName":"h3"},{"title":"‚ùå Quand ne PAS utiliser Basic Auth‚Äã","type":1,"pageTitle":"Basic Authentication","url":"/docs/security/authentification-autorisation/basic-auth#-quand-ne-pas-utiliser-basic-auth","content":" APIs publiques : Pr√©f√©rer OAuth 2.0 ou API KeysApplications web grand public : Utiliser session cookies ou JWTSans HTTPS : JAMAIS (credentials en clair)Besoins avanc√©s : Gestion de tokens, scopes, r√©vocation    ","version":"Next","tagName":"h3"},{"title":"S√©curit√©‚Äã","type":1,"pageTitle":"Basic Authentication","url":"/docs/security/authentification-autorisation/basic-auth#s√©curit√©","content":" ","version":"Next","tagName":"h2"},{"title":"Vuln√©rabilit√©s‚Äã","type":1,"pageTitle":"Basic Authentication","url":"/docs/security/authentification-autorisation/basic-auth#vuln√©rabilit√©s","content":" 1. Transmission en clair (sans HTTPS)‚Äã  ‚ùå http://api.example.com Authorization: Basic dXNlcm5hbWU6cGFzc3dvcmQ= ‚Üí Interceptable par Man-in-the-Middle ‚úÖ https://api.example.com Authorization: Basic dXNlcm5hbWU6cGFzc3dvcmQ= ‚Üí Chiffr√© par TLS   2. Pas d'expiration‚Äã  Les credentials sont valides ind√©finiment jusqu'√† changement de mot de passe.  3. Pas de r√©vocation‚Äã  Impossible de r√©voquer un acc√®s sans changer le mot de passe.  4. Stockage dans le navigateur‚Äã  Le navigateur peut m√©moriser les credentials (cache, historique).  5. Logs serveur‚Äã  Les credentials peuvent appara√Ætre dans les logs si mal configur√©.  ","version":"Next","tagName":"h3"},{"title":"Bonnes Pratiques‚Äã","type":1,"pageTitle":"Basic Authentication","url":"/docs/security/authentification-autorisation/basic-auth#bonnes-pratiques","content":" Obligatoires‚Äã  ‚úÖ TOUJOURS utiliser HTTPS - Non n√©gociable‚úÖ Mots de passe forts - Minimum 16 caract√®res, al√©atoires‚úÖ Hachage c√¥t√© serveur - Jamais stocker en clair (bcrypt, Argon2)‚úÖ Rate limiting - Limiter les tentatives de connexion‚úÖ Monitoring - Surveiller les √©checs d'authentification  Recommand√©es‚Äã  ‚úÖ Comptes d√©di√©s - Un compte par service/application‚úÖ Rotation des credentials - Changement p√©riodique‚úÖ Least privilege - Permissions minimales n√©cessaires‚úÖ Timeouts - Sessions avec dur√©e limit√©e‚úÖ Audit logs - Tracer les acc√®s  Avanc√©es‚Äã  ‚úÖ IP whitelisting - Limiter les IP autoris√©es‚úÖ 2FA si possible - Authentification multi-facteurs‚úÖ Alertes - Notifier les acc√®s suspects‚úÖ Chiffrement des logs - Prot√©ger les logs d'acc√®s    ","version":"Next","tagName":"h3"},{"title":"Codes de R√©ponse HTTP‚Äã","type":1,"pageTitle":"Basic Authentication","url":"/docs/security/authentification-autorisation/basic-auth#codes-de-r√©ponse-http","content":" Code\tSignification\tDescription200\tOK\tAuthentification r√©ussie 201\tCreated\tRessource cr√©√©e avec succ√®s 204\tNo Content\tOp√©ration r√©ussie sans contenu 401\tUnauthorized\tCredentials manquants ou invalides 403\tForbidden\tAuthentifi√© mais pas autoris√© 429\tToo Many Requests\tRate limit d√©pass√© 500\tInternal Server Error\tErreur serveur    ","version":"Next","tagName":"h2"},{"title":"Comparaison avec d'autres m√©thodes‚Äã","type":1,"pageTitle":"Basic Authentication","url":"/docs/security/authentification-autorisation/basic-auth#comparaison-avec-dautres-m√©thodes","content":" Aspect\tBasic Auth\tAPI Key\tOAuth 2.0\tJWTComplexit√©\tüü¢ Tr√®s simple\tüü¢ Simple\tüî¥ Complexe\tüü° Moyenne S√©curit√©\tüü° Moyenne\tüü° Moyenne\tüü¢ Haute\tüü¢ Haute Expiration\t‚ùå Non\t‚ùå Non (sauf impl√©ment√©)\t‚úÖ Oui\t‚úÖ Oui R√©vocation\t‚ùå Difficile\t‚úÖ Facile\t‚úÖ Facile\tüü° Moyenne Granularit√©\t‚ùå Tout ou rien\tüü° Par cl√©\t‚úÖ Scopes\t‚úÖ Claims Use case\tAPIs internes\tAPIs publiques\tAuth utilisateur\tStateless auth    ","version":"Next","tagName":"h2"},{"title":"Exemples Avanc√©s‚Äã","type":1,"pageTitle":"Basic Authentication","url":"/docs/security/authentification-autorisation/basic-auth#exemples-avanc√©s","content":" ","version":"Next","tagName":"h2"},{"title":"Basic Auth avec diff√©rents statuts‚Äã","type":1,"pageTitle":"Basic Authentication","url":"/docs/security/authentification-autorisation/basic-auth#basic-auth-avec-diff√©rents-statuts","content":" Credentials invalides :  GET /api/admin HTTP/1.1 Host: api.example.com Authorization: Basic d3JvbmdhY2NvdW50Ondyb25ncGFzcw== ‚Üí HTTP/1.1 401 Unauthorized   Utilisateur non autoris√© :  GET /api/admin HTTP/1.1 Host: api.example.com Authorization: Basic dXNlcjpwYXNzd29yZA== ‚Üí HTTP/1.1 403 Forbidden { &quot;error&quot;: &quot;Insufficient permissions&quot;, &quot;message&quot;: &quot;Admin access required&quot; }   Rate limit d√©pass√© :  GET /api/users HTTP/1.1 Host: api.example.com Authorization: Basic dXNlcjpwYXNzd29yZA== ‚Üí HTTP/1.1 429 Too Many Requests Retry-After: 60 { &quot;error&quot;: &quot;Rate limit exceeded&quot;, &quot;retry_after&quot;: 60 }     ","version":"Next","tagName":"h3"},{"title":"Basic Auth avec param√®tres de requ√™te‚Äã","type":1,"pageTitle":"Basic Authentication","url":"/docs/security/authentification-autorisation/basic-auth#basic-auth-avec-param√®tres-de-requ√™te","content":" GET /api/users?page=2&amp;limit=10&amp;sort=name HTTP/1.1 Host: api.example.com Authorization: Basic YWRtaW46c2VjcmV0MTIz     ","version":"Next","tagName":"h3"},{"title":"Basic Auth avec headers personnalis√©s‚Äã","type":1,"pageTitle":"Basic Authentication","url":"/docs/security/authentification-autorisation/basic-auth#basic-auth-avec-headers-personnalis√©s","content":" GET /api/users HTTP/1.1 Host: api.example.com Authorization: Basic YWRtaW46c2VjcmV0MTIz X-Request-ID: abc-123-def-456 X-Client-Version: 1.0.0 Accept: application/json Accept-Language: fr-FR     ","version":"Next","tagName":"h3"},{"title":"Authentification multi-niveaux‚Äã","type":1,"pageTitle":"Basic Authentication","url":"/docs/security/authentification-autorisation/basic-auth#authentification-multi-niveaux","content":" GET /api/admin/critical HTTP/1.1 Host: api.example.com Authorization: Basic c3VwZXJhZG1pbjpzdXBlcnNlY3JldA== X-2FA-Token: 123456     ","version":"Next","tagName":"h3"},{"title":"Configuration Serveur‚Äã","type":1,"pageTitle":"Basic Authentication","url":"/docs/security/authentification-autorisation/basic-auth#configuration-serveur","content":" ","version":"Next","tagName":"h2"},{"title":"Apache (.htaccess)‚Äã","type":1,"pageTitle":"Basic Authentication","url":"/docs/security/authentification-autorisation/basic-auth#apache-htaccess","content":" AuthType Basic AuthName &quot;Restricted Area&quot; AuthUserFile /path/to/.htpasswd Require valid-user   Cr√©ation du fichier de mots de passe :  htpasswd -c /path/to/.htpasswd username     ","version":"Next","tagName":"h3"},{"title":"Nginx‚Äã","type":1,"pageTitle":"Basic Authentication","url":"/docs/security/authentification-autorisation/basic-auth#nginx","content":" location /api { auth_basic &quot;API Access&quot;; auth_basic_user_file /etc/nginx/.htpasswd; }     ","version":"Next","tagName":"h3"},{"title":"Headers de r√©ponse typiques‚Äã","type":1,"pageTitle":"Basic Authentication","url":"/docs/security/authentification-autorisation/basic-auth#headers-de-r√©ponse-typiques","content":" WWW-Authenticate (lors d'un 401) :  WWW-Authenticate: Basic realm=&quot;API Access&quot;, charset=&quot;UTF-8&quot;   Multiples realms :  WWW-Authenticate: Basic realm=&quot;Admin Area&quot; WWW-Authenticate: Basic realm=&quot;User Area&quot;     ","version":"Next","tagName":"h3"},{"title":"Migration vers des m√©thodes plus s√©curis√©es‚Äã","type":1,"pageTitle":"Basic Authentication","url":"/docs/security/authentification-autorisation/basic-auth#migration-vers-des-m√©thodes-plus-s√©curis√©es","content":" ","version":"Next","tagName":"h2"},{"title":"De Basic Auth vers Bearer Token‚Äã","type":1,"pageTitle":"Basic Authentication","url":"/docs/security/authentification-autorisation/basic-auth#de-basic-auth-vers-bearer-token","content":" Avant :  Authorization: Basic dXNlcjpwYXNzd29yZA==   Apr√®s :  Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...     ","version":"Next","tagName":"h3"},{"title":"D√©pannage‚Äã","type":1,"pageTitle":"Basic Authentication","url":"/docs/security/authentification-autorisation/basic-auth#d√©pannage","content":" ","version":"Next","tagName":"h2"},{"title":"Probl√®me : 401 Unauthorized persistant‚Äã","type":1,"pageTitle":"Basic Authentication","url":"/docs/security/authentification-autorisation/basic-auth#probl√®me--401-unauthorized-persistant","content":" V√©rifications :  ‚úÖ Encodage Base64 correct ?‚úÖ Format username:password respect√© ?‚úÖ Pas d'espaces superflus ?‚úÖ Header Authorization pr√©sent ?‚úÖ HTTPS activ√© ?  Test de l'encodage :  # Encoder echo -n &quot;admin:secret123&quot; | base64 # YWRtaW46c2VjcmV0MTIz # D√©coder pour v√©rifier echo &quot;YWRtaW46c2VjcmV0MTIz&quot; | base64 -d # admin:secret123   ","version":"Next","tagName":"h3"},{"title":"Probl√®me : Caract√®res sp√©ciaux dans le mot de passe‚Äã","type":1,"pageTitle":"Basic Authentication","url":"/docs/security/authentification-autorisation/basic-auth#probl√®me--caract√®res-sp√©ciaux-dans-le-mot-de-passe","content":" Caract√®res √† √©chapper : :, @, /, etc.  Si le mot de passe contient :, cela pose probl√®me car c'est le s√©parateur.  Solution : URL-encoder le mot de passe avant l'encodage Base64  Password: pass:word ‚Üí pass%3Aword ‚Üí username:pass%3Aword ‚Üí Base64     ","version":"Next","tagName":"h3"},{"title":"Glossaire‚Äã","type":1,"pageTitle":"Basic Authentication","url":"/docs/security/authentification-autorisation/basic-auth#glossaire","content":" Base64 : Encodage (pas chiffrement) de donn√©es binaires en ASCIIRealm : Zone de protection d√©finie par le serveurWWW-Authenticate : Header indiquant le type d'authentification requisAuthorization : Header contenant les credentials encod√©s401 Unauthorized : Authentification requise ou invalide403 Forbidden : Authentifi√© mais sans permissionRate Limiting : Limitation du nombre de requ√™tes par p√©riode    ","version":"Next","tagName":"h2"},{"title":"Ressources Suppl√©mentaires‚Äã","type":1,"pageTitle":"Basic Authentication","url":"/docs/security/authentification-autorisation/basic-auth#ressources-suppl√©mentaires","content":" RFC 7617 - HTTP Basic AuthenticationRFC 7235 - HTTP AuthenticationOWASP Authentication Cheat Sheet ","version":"Next","tagName":"h2"},{"title":"OAuth 2.0","type":0,"sectionRef":"#","url":"/docs/security/authentification-autorisation/oauth","content":"","keywords":"","version":"Next"},{"title":"Introduction‚Äã","type":1,"pageTitle":"OAuth 2.0","url":"/docs/security/authentification-autorisation/oauth#introduction","content":" OAuth 2.0 est un protocole d'autorisation qui permet √† des applications tierces d'acc√©der aux ressources d'un utilisateur sans exposer ses identifiants. Il est devenu le standard de facto pour l'autorisation sur le web.  ","version":"Next","tagName":"h2"},{"title":"Concepts Cl√©s‚Äã","type":1,"pageTitle":"OAuth 2.0","url":"/docs/security/authentification-autorisation/oauth#concepts-cl√©s","content":" ","version":"Next","tagName":"h2"},{"title":"Les Acteurs (Roles)‚Äã","type":1,"pageTitle":"OAuth 2.0","url":"/docs/security/authentification-autorisation/oauth#les-acteurs-roles","content":" Resource Owner : L'utilisateur qui poss√®de les donn√©esClient : L'application qui souhaite acc√©der aux ressourcesAuthorization Server : Le serveur qui authentifie l'utilisateur et d√©livre les tokensResource Server : Le serveur qui h√©berge les ressources prot√©g√©es  ","version":"Next","tagName":"h3"},{"title":"Les Tokens‚Äã","type":1,"pageTitle":"OAuth 2.0","url":"/docs/security/authentification-autorisation/oauth#les-tokens","content":" Access Token‚Äã  Token utilis√© pour acc√©der aux ressources prot√©g√©es. Il a une dur√©e de vie limit√©e (g√©n√©ralement courte).  Refresh Token‚Äã  Token optionnel utilis√© pour obtenir un nouvel access token sans r√©-authentification. Plus longue dur√©e de vie.  ","version":"Next","tagName":"h3"},{"title":"Les Scopes‚Äã","type":1,"pageTitle":"OAuth 2.0","url":"/docs/security/authentification-autorisation/oauth#les-scopes","content":" Les scopes d√©finissent les permissions accord√©es. Exemples : read:user, write:posts, admin:all  ","version":"Next","tagName":"h3"},{"title":"Les Flux d'Autorisation (Grant Types)‚Äã","type":1,"pageTitle":"OAuth 2.0","url":"/docs/security/authentification-autorisation/oauth#les-flux-dautorisation-grant-types","content":" ","version":"Next","tagName":"h2"},{"title":"Authorization Code Flow‚Äã","type":1,"pageTitle":"OAuth 2.0","url":"/docs/security/authentification-autorisation/oauth#authorization-code-flow","content":" Cas d'usage : Applications web avec backend s√©curis√©, applications mobiles natives  Avantages : Le plus s√©curis√©, le client ne voit jamais les credentials de l'utilisateur    √âtapes d√©taill√©es :  L'utilisateur clique sur &quot;Se connecter avec...&quot;Redirection vers l'authorization server avec les param√®tres : response_type=codeclient_idredirect_uriscopestate (protection CSRF) L'utilisateur s'authentifie et autorise l'applicationRedirection vers le client avec un code d'autorisationLe client √©change le code contre un access token (requ√™te backend)Le client peut maintenant acc√©der aux ressources    ","version":"Next","tagName":"h3"},{"title":"Client Credentials Flow‚Äã","type":1,"pageTitle":"OAuth 2.0","url":"/docs/security/authentification-autorisation/oauth#client-credentials-flow","content":" Cas d'usage : Communication machine-to-machine, services backend, jobs automatis√©s  Avantages : Simple, pas d'interaction utilisateur n√©cessaire    √âtapes d√©taill√©es :  Le client envoie directement ses credentials (client_id + client_secret)L'authorization server v√©rifie les credentialsUn access token est retourn√© (pas de refresh token g√©n√©ralement)Le client utilise l'access token pour acc√©der aux ressources  Exemple de requ√™te :  POST /oauth/token Content-Type: application/x-www-form-urlencoded grant_type=client_credentials &amp;client_id=my_client_id &amp;client_secret=my_client_secret &amp;scope=api:read     ","version":"Next","tagName":"h3"},{"title":"Resource Owner Password Credentials (ROPC)‚Äã","type":1,"pageTitle":"OAuth 2.0","url":"/docs/security/authentification-autorisation/oauth#resource-owner-password-credentials-ropc","content":" Cas d'usage : Applications de premi√®re partie (first-party), migration depuis syst√®mes legacy  ‚ö†Ô∏è Attention : D√©conseill√© car le client manipule directement les credentials de l'utilisateur    √âtapes d√©taill√©es :  L'utilisateur entre ses identifiants directement dans l'applicationLe client envoie les credentials √† l'authorization serverSi valides, un access token (et √©ventuellement refresh token) est retourn√©Le client utilise l'access token normalement  Exemple de requ√™te :  POST /oauth/token Content-Type: application/x-www-form-urlencoded grant_type=password &amp;username=user@example.com &amp;password=secret123 &amp;client_id=my_client_id &amp;scope=read write   Pourquoi c'est d√©conseill√© :  Le client voit le mot de passe de l'utilisateurPas de MFA possibleMoins s√©curis√© que Authorization Code Flow    ","version":"Next","tagName":"h3"},{"title":"Comparaison des Flux‚Äã","type":1,"pageTitle":"OAuth 2.0","url":"/docs/security/authentification-autorisation/oauth#comparaison-des-flux","content":" Flow\tInteraction User\tS√©curit√©\tCas d'usage typiqueAuthorization Code\t‚úÖ Oui\tüü¢ Tr√®s haute\tApps web, mobiles Client Credentials\t‚ùå Non\tüü¢ Haute\tServices backend Password Grant\t‚úÖ Oui\tüü° Moyenne\tApps first-party (legacy)  ","version":"Next","tagName":"h2"},{"title":"S√©curit√© - Bonnes Pratiques‚Äã","type":1,"pageTitle":"OAuth 2.0","url":"/docs/security/authentification-autorisation/oauth#s√©curit√©---bonnes-pratiques","content":" ","version":"Next","tagName":"h2"},{"title":"Pour tous les flux‚Äã","type":1,"pageTitle":"OAuth 2.0","url":"/docs/security/authentification-autorisation/oauth#pour-tous-les-flux","content":" ‚úÖ Toujours utiliser HTTPS‚úÖ Valider les redirect URIs‚úÖ Impl√©menter une expiration des tokens‚úÖ Stocker les secrets de mani√®re s√©curis√©e  ","version":"Next","tagName":"h3"},{"title":"Authorization Code Flow‚Äã","type":1,"pageTitle":"OAuth 2.0","url":"/docs/security/authentification-autorisation/oauth#authorization-code-flow-1","content":" ‚úÖ Utiliser le param√®tre state pour pr√©venir CSRF‚úÖ Impl√©menter PKCE (Proof Key for Code Exchange) pour les apps mobiles‚úÖ Ne jamais exposer le client_secret c√¥t√© client  ","version":"Next","tagName":"h3"},{"title":"Client Credentials‚Äã","type":1,"pageTitle":"OAuth 2.0","url":"/docs/security/authentification-autorisation/oauth#client-credentials","content":" ‚úÖ Rotation r√©guli√®re des secrets‚úÖ Limiter les scopes au strict n√©cessaire‚úÖ Monitoring des acc√®s  ","version":"Next","tagName":"h3"},{"title":"Password Grant‚Äã","type":1,"pageTitle":"OAuth 2.0","url":"/docs/security/authentification-autorisation/oauth#password-grant","content":" üö´ √Ä √©viter si possible, pr√©f√©rer Authorization Code Flow‚úÖ Si utilis√© : uniquement pour applications de confiance absolue‚úÖ Impl√©menter rate limiting pour pr√©venir brute force  ","version":"Next","tagName":"h3"},{"title":"Refresh Token Flow‚Äã","type":1,"pageTitle":"OAuth 2.0","url":"/docs/security/authentification-autorisation/oauth#refresh-token-flow","content":" Lorsque l'access token expire, utilisez le refresh token :    ","version":"Next","tagName":"h2"},{"title":"Exemples de Requ√™tes HTTP‚Äã","type":1,"pageTitle":"OAuth 2.0","url":"/docs/security/authentification-autorisation/oauth#exemples-de-requ√™tes-http","content":" ","version":"Next","tagName":"h2"},{"title":"Authorization Code Flow‚Äã","type":1,"pageTitle":"OAuth 2.0","url":"/docs/security/authentification-autorisation/oauth#authorization-code-flow-2","content":" √âtape 1 : Redirection vers l'authorization server  GET /authorize?response_type=code&amp;client_id=my_app_id&amp;redirect_uri=https://myapp.com/callback&amp;scope=read:user%20write:posts&amp;state=xyz123 HTTP/1.1 Host: auth.example.com   √âtape 2 : √âchange du code contre un token  POST /oauth/token HTTP/1.1 Host: auth.example.com Content-Type: application/x-www-form-urlencoded grant_type=authorization_code &amp;code=SplxlOBeZQQYbYS6WxSbIA &amp;client_id=my_app_id &amp;client_secret=my_app_secret &amp;redirect_uri=https://myapp.com/callback   R√©ponse :  { &quot;access_token&quot;: &quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...&quot;, &quot;token_type&quot;: &quot;Bearer&quot;, &quot;expires_in&quot;: 3600, &quot;refresh_token&quot;: &quot;tGzv3JOkF0XG5Qx2TlKWIA&quot;, &quot;scope&quot;: &quot;read:user write:posts&quot; }     ","version":"Next","tagName":"h3"},{"title":"Client Credentials Flow‚Äã","type":1,"pageTitle":"OAuth 2.0","url":"/docs/security/authentification-autorisation/oauth#client-credentials-flow-1","content":" POST /oauth/token HTTP/1.1 Host: auth.example.com Content-Type: application/x-www-form-urlencoded grant_type=client_credentials &amp;client_id=service_app_id &amp;client_secret=service_app_secret &amp;scope=api:read api:write   R√©ponse :  { &quot;access_token&quot;: &quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...&quot;, &quot;token_type&quot;: &quot;Bearer&quot;, &quot;expires_in&quot;: 7200, &quot;scope&quot;: &quot;api:read api:write&quot; }     ","version":"Next","tagName":"h3"},{"title":"Password Grant Flow‚Äã","type":1,"pageTitle":"OAuth 2.0","url":"/docs/security/authentification-autorisation/oauth#password-grant-flow","content":" POST /oauth/token HTTP/1.1 Host: auth.example.com Content-Type: application/x-www-form-urlencoded grant_type=password &amp;username=user@example.com &amp;password=secret123 &amp;client_id=trusted_app_id &amp;scope=read write   R√©ponse :  { &quot;access_token&quot;: &quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...&quot;, &quot;token_type&quot;: &quot;Bearer&quot;, &quot;expires_in&quot;: 3600, &quot;refresh_token&quot;: &quot;tGzv3JOkF0XG5Qx2TlKWIA&quot;, &quot;scope&quot;: &quot;read write&quot; }     ","version":"Next","tagName":"h3"},{"title":"Refresh Token Flow‚Äã","type":1,"pageTitle":"OAuth 2.0","url":"/docs/security/authentification-autorisation/oauth#refresh-token-flow-1","content":" POST /oauth/token HTTP/1.1 Host: auth.example.com Content-Type: application/x-www-form-urlencoded grant_type=refresh_token &amp;refresh_token=tGzv3JOkF0XG5Qx2TlKWIA &amp;client_id=my_app_id &amp;client_secret=my_app_secret   R√©ponse :  { &quot;access_token&quot;: &quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...&quot;, &quot;token_type&quot;: &quot;Bearer&quot;, &quot;expires_in&quot;: 3600, &quot;refresh_token&quot;: &quot;8xLOxBtZp8rrJnZ4GsdU3V&quot; }     ","version":"Next","tagName":"h3"},{"title":"Utilisation de l'Access Token‚Äã","type":1,"pageTitle":"OAuth 2.0","url":"/docs/security/authentification-autorisation/oauth#utilisation-de-laccess-token","content":" Requ√™te authentifi√©e vers une API prot√©g√©e :  GET /api/user/profile HTTP/1.1 Host: api.example.com Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...   R√©ponse :  { &quot;id&quot;: &quot;123456&quot;, &quot;name&quot;: &quot;John Doe&quot;, &quot;email&quot;: &quot;john.doe@example.com&quot; }     ","version":"Next","tagName":"h3"},{"title":"R√©vocation de Token‚Äã","type":1,"pageTitle":"OAuth 2.0","url":"/docs/security/authentification-autorisation/oauth#r√©vocation-de-token","content":" POST /oauth/revoke HTTP/1.1 Host: auth.example.com Content-Type: application/x-www-form-urlencoded token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9... &amp;token_type_hint=access_token &amp;client_id=my_app_id &amp;client_secret=my_app_secret   ","version":"Next","tagName":"h3"},{"title":"Ressources Suppl√©mentaires‚Äã","type":1,"pageTitle":"OAuth 2.0","url":"/docs/security/authentification-autorisation/oauth#ressources-suppl√©mentaires","content":" RFC 6749 - OAuth 2.0 FrameworkOAuth 2.0 Security Best PracticesOAuth 2.1 (draft)    ","version":"Next","tagName":"h2"},{"title":"Glossaire‚Äã","type":1,"pageTitle":"OAuth 2.0","url":"/docs/security/authentification-autorisation/oauth#glossaire","content":" PKCE : Proof Key for Code Exchange - Extension de s√©curit√© pour apps mobiles/SPACSRF : Cross-Site Request Forgery - Attaque webJWT : JSON Web Token - Format courant pour les access tokensBearer Token : Type de token transmis dans le header Authorization ","version":"Next","tagName":"h2"},{"title":"SAML 2.0","type":0,"sectionRef":"#","url":"/docs/security/authentification-autorisation/saml","content":"","keywords":"","version":"Next"},{"title":"Introduction‚Äã","type":1,"pageTitle":"SAML 2.0","url":"/docs/security/authentification-autorisation/saml#introduction","content":" SAML (Security Assertion Markup Language) 2.0 est un standard XML pour l'authentification unique (SSO) en entreprise. Il permet √† un utilisateur de se connecter une seule fois et d'acc√©der √† plusieurs applications.  ","version":"Next","tagName":"h2"},{"title":"Concepts Cl√©s‚Äã","type":1,"pageTitle":"SAML 2.0","url":"/docs/security/authentification-autorisation/saml#concepts-cl√©s","content":" ","version":"Next","tagName":"h2"},{"title":"Les Acteurs‚Äã","type":1,"pageTitle":"SAML 2.0","url":"/docs/security/authentification-autorisation/saml#les-acteurs","content":" User (Principal) : L'utilisateur qui s'authentifieIdentity Provider (IdP) : Service d'authentification (Okta, Azure AD, Google Workspace)Service Provider (SP) : L'application cible (Salesforce, Slack, AWS)  ","version":"Next","tagName":"h3"},{"title":"L'Assertion SAML‚Äã","type":1,"pageTitle":"SAML 2.0","url":"/docs/security/authentification-autorisation/saml#lassertion-saml","content":" Document XML sign√© contenant :  Identit√© de l'utilisateurAttributs (email, nom, r√¥le)Conditions de validit√© (temporelle, audience)  ","version":"Next","tagName":"h3"},{"title":"Les Flux SAML‚Äã","type":1,"pageTitle":"SAML 2.0","url":"/docs/security/authentification-autorisation/saml#les-flux-saml","content":" ","version":"Next","tagName":"h2"},{"title":"SP-Initiated SSO‚Äã","type":1,"pageTitle":"SAML 2.0","url":"/docs/security/authentification-autorisation/saml#sp-initiated-sso","content":" L'utilisateur acc√®de directement √† l'application.    √âtapes :  Tentative d'acc√®s √† une ressource prot√©g√©eSP g√©n√®re une AuthnRequest et redirige vers l'IdPL'IdP affiche le formulaire de connexionL'utilisateur s'authentifieL'IdP g√©n√®re une Response SAML sign√©e et redirige vers le SPLe SP valide la signature et les conditionsSession cr√©√©e, acc√®s accord√©    ","version":"Next","tagName":"h3"},{"title":"IdP-Initiated SSO‚Äã","type":1,"pageTitle":"SAML 2.0","url":"/docs/security/authentification-autorisation/saml#idp-initiated-sso","content":" L'utilisateur part du portail de l'IdP.    Diff√©rence : Pas d'AuthnRequest, l'IdP initie directement.    ","version":"Next","tagName":"h3"},{"title":"Single Logout (SLO)‚Äã","type":1,"pageTitle":"SAML 2.0","url":"/docs/security/authentification-autorisation/saml#single-logout-slo","content":" D√©connexion de toutes les applications simultan√©ment.      ","version":"Next","tagName":"h3"},{"title":"Structure des Messages‚Äã","type":1,"pageTitle":"SAML 2.0","url":"/docs/security/authentification-autorisation/saml#structure-des-messages","content":" ","version":"Next","tagName":"h2"},{"title":"AuthnRequest (simplifi√©)‚Äã","type":1,"pageTitle":"SAML 2.0","url":"/docs/security/authentification-autorisation/saml#authnrequest-simplifi√©","content":" &lt;samlp:AuthnRequest ID=&quot;_unique_id&quot; Destination=&quot;https://idp.example.com/sso&quot; AssertionConsumerServiceURL=&quot;https://sp.example.com/acs&quot;&gt; &lt;saml:Issuer&gt;https://sp.example.com&lt;/saml:Issuer&gt; &lt;/samlp:AuthnRequest&gt;   ","version":"Next","tagName":"h3"},{"title":"SAML Response (simplifi√©)‚Äã","type":1,"pageTitle":"SAML 2.0","url":"/docs/security/authentification-autorisation/saml#saml-response-simplifi√©","content":" &lt;samlp:Response InResponseTo=&quot;_unique_id&quot;&gt; &lt;saml:Issuer&gt;https://idp.example.com&lt;/saml:Issuer&gt; &lt;samlp:Status&gt;&lt;samlp:StatusCode Value=&quot;Success&quot;/&gt;&lt;/samlp:Status&gt; &lt;saml:Assertion&gt; &lt;ds:Signature&gt;...&lt;/ds:Signature&gt; &lt;saml:Subject&gt; &lt;saml:NameID&gt;john.doe@example.com&lt;/saml:NameID&gt; &lt;/saml:Subject&gt; &lt;saml:Conditions NotBefore=&quot;...&quot; NotOnOrAfter=&quot;...&quot;&gt; &lt;saml:Audience&gt;https://sp.example.com&lt;/saml:Audience&gt; &lt;/saml:Conditions&gt; &lt;saml:AttributeStatement&gt; &lt;saml:Attribute Name=&quot;email&quot;&gt; &lt;saml:AttributeValue&gt;john.doe@example.com&lt;/saml:AttributeValue&gt; &lt;/saml:Attribute&gt; &lt;saml:Attribute Name=&quot;role&quot;&gt; &lt;saml:AttributeValue&gt;admin&lt;/saml:AttributeValue&gt; &lt;/saml:Attribute&gt; &lt;/saml:AttributeStatement&gt; &lt;/saml:Assertion&gt; &lt;/samlp:Response&gt;     ","version":"Next","tagName":"h3"},{"title":"Exemples de Requ√™tes HTTP‚Äã","type":1,"pageTitle":"SAML 2.0","url":"/docs/security/authentification-autorisation/saml#exemples-de-requ√™tes-http","content":" ","version":"Next","tagName":"h2"},{"title":"Redirection vers IdP (HTTP Redirect)‚Äã","type":1,"pageTitle":"SAML 2.0","url":"/docs/security/authentification-autorisation/saml#redirection-vers-idp-http-redirect","content":" GET /sso?SAMLRequest=fZJNT8IwFMff...&amp;RelayState=https://sp.example.com/dashboard HTTP/1.1 Host: idp.example.com   SAMLRequest : AuthnRequest encod√© en Base64RelayState : URL de destination finale    ","version":"Next","tagName":"h3"},{"title":"Retour vers SP (HTTP POST)‚Äã","type":1,"pageTitle":"SAML 2.0","url":"/docs/security/authentification-autorisation/saml#retour-vers-sp-http-post","content":" Formulaire auto-soumis :  &lt;form method=&quot;POST&quot; action=&quot;https://sp.example.com/acs&quot;&gt; &lt;input type=&quot;hidden&quot; name=&quot;SAMLResponse&quot; value=&quot;PHNhbWxw...&quot; /&gt; &lt;input type=&quot;hidden&quot; name=&quot;RelayState&quot; value=&quot;https://sp.example.com/dashboard&quot; /&gt; &lt;/form&gt;   R√©ception :  POST /acs HTTP/1.1 Host: sp.example.com Content-Type: application/x-www-form-urlencoded SAMLResponse=PHNhbWxw...&amp;RelayState=https://sp.example.com/dashboard     ","version":"Next","tagName":"h3"},{"title":"M√©tadonn√©es‚Äã","type":1,"pageTitle":"SAML 2.0","url":"/docs/security/authentification-autorisation/saml#m√©tadonn√©es","content":" IdP Metadata :  &lt;md:EntityDescriptor entityID=&quot;https://idp.example.com&quot;&gt; &lt;md:IDPSSODescriptor&gt; &lt;md:KeyDescriptor use=&quot;signing&quot;&gt; &lt;ds:X509Certificate&gt;MIIDXTCCAkWg...&lt;/ds:X509Certificate&gt; &lt;/md:KeyDescriptor&gt; &lt;md:SingleSignOnService Binding=&quot;HTTP-POST&quot; Location=&quot;https://idp.example.com/sso&quot;/&gt; &lt;/md:IDPSSODescriptor&gt; &lt;/md:EntityDescriptor&gt;   SP Metadata :  &lt;md:EntityDescriptor entityID=&quot;https://sp.example.com&quot;&gt; &lt;md:SPSSODescriptor&gt; &lt;md:AssertionConsumerService Binding=&quot;HTTP-POST&quot; Location=&quot;https://sp.example.com/acs&quot;/&gt; &lt;/md:SPSSODescriptor&gt; &lt;/md:EntityDescriptor&gt;     ","version":"Next","tagName":"h3"},{"title":"Configuration‚Äã","type":1,"pageTitle":"SAML 2.0","url":"/docs/security/authentification-autorisation/saml#configuration","content":" ","version":"Next","tagName":"h2"},{"title":"C√¥t√© Service Provider‚Äã","type":1,"pageTitle":"SAML 2.0","url":"/docs/security/authentification-autorisation/saml#c√¥t√©-service-provider","content":" G√©n√©rer Entity ID et ACS URLImporter m√©tadonn√©es IdP (certificat + endpoints)Configurer mapping des attributs  ","version":"Next","tagName":"h3"},{"title":"C√¥t√© Identity Provider‚Äã","type":1,"pageTitle":"SAML 2.0","url":"/docs/security/authentification-autorisation/saml#c√¥t√©-identity-provider","content":" Ajouter le SP (Entity ID + ACS URL)Configurer les attributs √† envoyerAssigner utilisateurs/groupes    ","version":"Next","tagName":"h3"},{"title":"Validation de l'Assertion‚Äã","type":1,"pageTitle":"SAML 2.0","url":"/docs/security/authentification-autorisation/saml#validation-de-lassertion","content":" Le SP doit v√©rifier :  ‚úÖ Signature (avec certificat IdP)‚úÖ Issuer (IdP attendu)‚úÖ Audience (pour ce SP)‚úÖ Validit√© temporelle (NotBefore/NotOnOrAfter)‚úÖ InResponseTo (correspond √† l'AuthnRequest)  danger Ne jamais accepter une assertion sans valider la signature !    ","version":"Next","tagName":"h2"},{"title":"S√©curit√©‚Äã","type":1,"pageTitle":"SAML 2.0","url":"/docs/security/authentification-autorisation/saml#s√©curit√©","content":" ","version":"Next","tagName":"h2"},{"title":"Bonnes Pratiques‚Äã","type":1,"pageTitle":"SAML 2.0","url":"/docs/security/authentification-autorisation/saml#bonnes-pratiques","content":" ‚úÖ HTTPS obligatoire‚úÖ Valider les signatures‚úÖ V√©rifier les conditions temporelles‚úÖ Certificats robustes (RSA 2048+ bits)‚úÖ Dur√©e de vie courte des assertions (‚â§ 5 min)‚úÖ Synchronisation horaire (NTP)    ","version":"Next","tagName":"h3"},{"title":"Comparaison‚Äã","type":1,"pageTitle":"SAML 2.0","url":"/docs/security/authentification-autorisation/saml#comparaison","content":" Aspect\tSAML 2.0\tOAuth 2.0\tOIDCFormat\tXML\tJSON\tJSON Objectif\tSSO entreprise\tAutorisation\tAuthentification Use case\tB2B, Intranet\tAPIs\tWeb/Mobile Complexit√©\t√âlev√©e\tMoyenne\tFaible    ","version":"Next","tagName":"h2"},{"title":"Quand utiliser SAML ?‚Äã","type":1,"pageTitle":"SAML 2.0","url":"/docs/security/authentification-autorisation/saml#quand-utiliser-saml-","content":" ","version":"Next","tagName":"h2"},{"title":"‚úÖ Utiliser SAML‚Äã","type":1,"pageTitle":"SAML 2.0","url":"/docs/security/authentification-autorisation/saml#-utiliser-saml","content":" SSO entreprise centralis√©Int√©gration B2BIdP SAML existantApplications SaaS d'entreprise  ","version":"Next","tagName":"h3"},{"title":"‚ùå √âviter SAML‚Äã","type":1,"pageTitle":"SAML 2.0","url":"/docs/security/authentification-autorisation/saml#-√©viter-saml","content":" Applications mobiles natives ‚Üí OIDCAPIs REST ‚Üí OAuth 2.0Projets simples ‚Üí OIDCPas d'expertise XML    ","version":"Next","tagName":"h3"},{"title":"D√©pannage Rapide‚Äã","type":1,"pageTitle":"SAML 2.0","url":"/docs/security/authentification-autorisation/saml#d√©pannage-rapide","content":" Erreur\tCause\tSolutionInvalid Signature\tCertificat incorrect\tV√©rifier certificat IdP Audience Restriction\tEntity ID diff√©rent\tV√©rifier Entity IDs Assertion Expired\tD√©calage d'horloge\tSynchroniser NTP InResponseTo mismatch\tSession perdue\tV√©rifier cookies    ","version":"Next","tagName":"h2"},{"title":"Ressources‚Äã","type":1,"pageTitle":"SAML 2.0","url":"/docs/security/authentification-autorisation/saml#ressources","content":" SAML 2.0 Specification    ","version":"Next","tagName":"h2"},{"title":"Glossaire‚Äã","type":1,"pageTitle":"SAML 2.0","url":"/docs/security/authentification-autorisation/saml#glossaire","content":" SSO : Single Sign-On - Authentification uniqueAssertion : Document XML sign√© avec infos utilisateurEntity ID : Identifiant unique du SP ou IdPACS : Assertion Consumer Service - Endpoint de r√©ceptionIdP : Identity Provider - Fournisseur d'identit√©SP : Service Provider - Application cibleRelayState : URL de redirection apr√®s authentification ","version":"Next","tagName":"h2"},{"title":"TOP 10 OWASP","type":0,"sectionRef":"#","url":"/docs/security/owasp","content":"TOP 10 OWASP","keywords":"","version":"Next"},{"title":"Software Composition Analysis","type":0,"sectionRef":"#","url":"/docs/security/software-composition-analysis","content":"Software Composition Analysis","keywords":"","version":"Next"},{"title":"OpenID Connect (OIDC)","type":0,"sectionRef":"#","url":"/docs/security/authentification-autorisation/oidc","content":"","keywords":"","version":"Next"},{"title":"Introduction‚Äã","type":1,"pageTitle":"OpenID Connect (OIDC)","url":"/docs/security/authentification-autorisation/oidc#introduction","content":" OpenID Connect (OIDC) est une couche d'identit√© construite au-dessus d'OAuth 2.0. Alors qu'OAuth 2.0 g√®re l'autorisation (acc√®s aux ressources), OIDC ajoute l'authentification (v√©rification de l'identit√© de l'utilisateur).  ","version":"Next","tagName":"h2"},{"title":"OAuth 2.0 vs OIDC‚Äã","type":1,"pageTitle":"OpenID Connect (OIDC)","url":"/docs/security/authentification-autorisation/oidc#oauth-20-vs-oidc","content":" Aspect\tOAuth 2.0\tOpenID ConnectObjectif\tAutorisation\tAuthentification + Autorisation R√©ponse\tAccess token\tAccess token + ID token Use case\t&quot;Acc√©der √† mes photos&quot;\t&quot;Qui suis-je ?&quot; Information\tPermissions\tIdentit√© utilisateur  tip En r√©sum√© : OIDC = OAuth 2.0 + Authentification  ","version":"Next","tagName":"h2"},{"title":"Concepts Cl√©s‚Äã","type":1,"pageTitle":"OpenID Connect (OIDC)","url":"/docs/security/authentification-autorisation/oidc#concepts-cl√©s","content":" ","version":"Next","tagName":"h2"},{"title":"Les Acteurs‚Äã","type":1,"pageTitle":"OpenID Connect (OIDC)","url":"/docs/security/authentification-autorisation/oidc#les-acteurs","content":" End User : L'utilisateur final qui s'authentifieRelying Party (RP) : L'application cliente (√©quivalent du &quot;Client&quot; OAuth)OpenID Provider (OP) : Le serveur d'identit√© (√©quivalent de l'&quot;Authorization Server&quot;)  ","version":"Next","tagName":"h3"},{"title":"Les Tokens‚Äã","type":1,"pageTitle":"OpenID Connect (OIDC)","url":"/docs/security/authentification-autorisation/oidc#les-tokens","content":" ID Token‚Äã  Le c≈ìur d'OIDC : Un JWT sign√© contenant les informations d'identit√© de l'utilisateur.  Exemple de contenu :  { &quot;iss&quot;: &quot;https://auth.example.com&quot;, &quot;sub&quot;: &quot;248289761001&quot;, &quot;aud&quot;: &quot;my_client_id&quot;, &quot;exp&quot;: 1311281970, &quot;iat&quot;: 1311280970, &quot;name&quot;: &quot;John Doe&quot;, &quot;email&quot;: &quot;john.doe@example.com&quot;, &quot;email_verified&quot;: true, &quot;picture&quot;: &quot;https://example.com/avatar.jpg&quot; }   Claims standards :  iss : Issuer (qui a √©mis le token)sub : Subject (identifiant unique de l'utilisateur)aud : Audience (pour quelle application)exp : Expiration timestampiat : Issued at (date d'√©mission)nonce : Protection contre les attaques replay  Access Token‚Äã  Identique √† OAuth 2.0, utilis√© pour acc√©der aux ressources prot√©g√©es.  Refresh Token‚Äã  Identique √† OAuth 2.0, permet d'obtenir de nouveaux tokens.  ","version":"Next","tagName":"h3"},{"title":"Les Scopes OIDC‚Äã","type":1,"pageTitle":"OpenID Connect (OIDC)","url":"/docs/security/authentification-autorisation/oidc#les-scopes-oidc","content":" OIDC d√©finit des scopes standards :  openid : Obligatoire - Active OIDC et retourne l'ID tokenprofile : Infos de profil (name, family_name, given_name, picture, etc.)email : Adresse email et statut de v√©rificationaddress : Adresse postalephone : Num√©ro de t√©l√©phone  ","version":"Next","tagName":"h3"},{"title":"UserInfo Endpoint‚Äã","type":1,"pageTitle":"OpenID Connect (OIDC)","url":"/docs/security/authentification-autorisation/oidc#userinfo-endpoint","content":" Endpoint standard pour r√©cup√©rer des informations suppl√©mentaires sur l'utilisateur.  ","version":"Next","tagName":"h3"},{"title":"Les Flux OIDC‚Äã","type":1,"pageTitle":"OpenID Connect (OIDC)","url":"/docs/security/authentification-autorisation/oidc#les-flux-oidc","content":" ","version":"Next","tagName":"h2"},{"title":"Authorization Code Flow‚Äã","type":1,"pageTitle":"OpenID Connect (OIDC)","url":"/docs/security/authentification-autorisation/oidc#authorization-code-flow","content":" Cas d'usage : Applications web avec backend, le plus s√©curis√©  Particularit√© OIDC : Retourne un ID token en plus de l'access token    √âtapes d√©taill√©es :  L'utilisateur clique sur &quot;Se connecter&quot;Redirection vers l'OP avec scope=openid (obligatoire)L'utilisateur s'authentifie aupr√®s de l'OPRetour avec un authorization code√âchange du code contre les tokensValidation de l'ID token (signature, expiration, issuer, audience)Extraction des informations d'identit√©Optionnel : appel √† /userinfo pour plus de d√©tails    ","version":"Next","tagName":"h3"},{"title":"Implicit Flow‚Äã","type":1,"pageTitle":"OpenID Connect (OIDC)","url":"/docs/security/authentification-autorisation/oidc#implicit-flow","content":" Cas d'usage : Applications SPA (Single Page Applications) - D√©pr√©ci√©, utiliser Authorization Code + PKCE  ‚ö†Ô∏è D√©conseill√© : Moins s√©curis√© car les tokens transitent par l'URL    warning L'Implicit Flow est d√©pr√©ci√©. Utilisez Authorization Code Flow + PKCE √† la place.    ","version":"Next","tagName":"h3"},{"title":"Hybrid Flow‚Äã","type":1,"pageTitle":"OpenID Connect (OIDC)","url":"/docs/security/authentification-autorisation/oidc#hybrid-flow","content":" Cas d'usage : Applications n√©cessitant un acc√®s imm√©diat √† l'identit√© + s√©curit√© backend  Particularit√© : Combine Authorization Code et Implicit Flow    Response types disponibles :  code id_token : Code + ID tokencode token : Code + Access tokencode id_token token : Les trois    ","version":"Next","tagName":"h3"},{"title":"Comparaison des Flux‚Äã","type":1,"pageTitle":"OpenID Connect (OIDC)","url":"/docs/security/authentification-autorisation/oidc#comparaison-des-flux","content":" Flow\tTokens retourn√©s\tS√©curit√©\tRecommandationAuthorization Code\tTous via /token\tüü¢ Tr√®s haute\t‚úÖ Recommand√© Implicit\tTous via URL fragment\tüî¥ Faible\t‚ùå D√©pr√©ci√© Hybrid\tMix des deux\tüü° Moyenne\tüü° Cas sp√©cifiques  ","version":"Next","tagName":"h2"},{"title":"Exemples de Requ√™tes HTTP‚Äã","type":1,"pageTitle":"OpenID Connect (OIDC)","url":"/docs/security/authentification-autorisation/oidc#exemples-de-requ√™tes-http","content":" ","version":"Next","tagName":"h2"},{"title":"Authorization Code Flow‚Äã","type":1,"pageTitle":"OpenID Connect (OIDC)","url":"/docs/security/authentification-autorisation/oidc#authorization-code-flow-1","content":" √âtape 1 : Redirection vers l'OpenID Provider  GET /authorize?response_type=code&amp;client_id=my_app_id&amp;redirect_uri=https://myapp.com/callback&amp;scope=openid%20profile%20email&amp;state=xyz123&amp;nonce=abc789 HTTP/1.1 Host: auth.example.com   Param√®tres importants :  scope=openid : Obligatoire pour activer OIDCnonce : Valeur al√©atoire pour lier la requ√™te √† l'ID token  √âtape 2 : √âchange du code contre les tokens  POST /oauth/token HTTP/1.1 Host: auth.example.com Content-Type: application/x-www-form-urlencoded grant_type=authorization_code &amp;code=SplxlOBeZQQYbYS6WxSbIA &amp;client_id=my_app_id &amp;client_secret=my_app_secret &amp;redirect_uri=https://myapp.com/callback   R√©ponse :  { &quot;access_token&quot;: &quot;eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9...&quot;, &quot;token_type&quot;: &quot;Bearer&quot;, &quot;expires_in&quot;: 3600, &quot;refresh_token&quot;: &quot;tGzv3JOkF0XG5Qx2TlKWIA&quot;, &quot;id_token&quot;: &quot;eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJodHRwczovL2F1dGguZXhhbXBsZS5jb20iLCJzdWIiOiIyNDgyODk3NjEwMDEiLCJhdWQiOiJteV9hcHBfaWQiLCJleHAiOjEzMTEyODE5NzAsImlhdCI6MTMxMTI4MDk3MCwibm9uY2UiOiJhYmM3ODkiLCJuYW1lIjoiSm9obiBEb2UiLCJlbWFpbCI6ImpvaG4uZG9lQGV4YW1wbGUuY29tIiwiZW1haWxfdmVyaWZpZWQiOnRydWV9...&quot;, &quot;scope&quot;: &quot;openid profile email&quot; }     ","version":"Next","tagName":"h3"},{"title":"Appel au UserInfo Endpoint‚Äã","type":1,"pageTitle":"OpenID Connect (OIDC)","url":"/docs/security/authentification-autorisation/oidc#appel-au-userinfo-endpoint","content":" GET /oauth/userinfo HTTP/1.1 Host: auth.example.com Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9...   R√©ponse :  { &quot;sub&quot;: &quot;248289761001&quot;, &quot;name&quot;: &quot;John Doe&quot;, &quot;given_name&quot;: &quot;John&quot;, &quot;family_name&quot;: &quot;Doe&quot;, &quot;email&quot;: &quot;john.doe@example.com&quot;, &quot;email_verified&quot;: true, &quot;picture&quot;: &quot;https://example.com/avatar.jpg&quot;, &quot;locale&quot;: &quot;fr-FR&quot;, &quot;updated_at&quot;: 1311280970 }     ","version":"Next","tagName":"h3"},{"title":"Implicit Flow (D√©pr√©ci√©)‚Äã","type":1,"pageTitle":"OpenID Connect (OIDC)","url":"/docs/security/authentification-autorisation/oidc#implicit-flow-d√©pr√©ci√©","content":" GET /authorize?response_type=id_token%20token&amp;client_id=my_app_id&amp;redirect_uri=https://myapp.com/callback&amp;scope=openid%20profile&amp;state=xyz123&amp;nonce=abc789 HTTP/1.1 Host: auth.example.com   R√©ponse : Redirection vers  https://myapp.com/callback# id_token=eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9... &amp;access_token=eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9... &amp;token_type=Bearer &amp;expires_in=3600 &amp;state=xyz123     ","version":"Next","tagName":"h3"},{"title":"Hybrid Flow‚Äã","type":1,"pageTitle":"OpenID Connect (OIDC)","url":"/docs/security/authentification-autorisation/oidc#hybrid-flow-1","content":" GET /authorize?response_type=code%20id_token&amp;client_id=my_app_id&amp;redirect_uri=https://myapp.com/callback&amp;scope=openid%20profile%20email&amp;state=xyz123&amp;nonce=abc789 HTTP/1.1 Host: auth.example.com   R√©ponse : Redirection vers  https://myapp.com/callback? code=SplxlOBeZQQYbYS6WxSbIA &amp;state=xyz123 #id_token=eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9...     ","version":"Next","tagName":"h3"},{"title":"D√©codage d'un ID Token‚Äã","type":1,"pageTitle":"OpenID Connect (OIDC)","url":"/docs/security/authentification-autorisation/oidc#d√©codage-dun-id-token","content":" Un ID token est un JWT en 3 parties : header.payload.signature  Header (Base64 d√©cod√©) :  { &quot;alg&quot;: &quot;RS256&quot;, &quot;typ&quot;: &quot;JWT&quot;, &quot;kid&quot;: &quot;key-id-123&quot; }   Payload (Base64 d√©cod√©) :  { &quot;iss&quot;: &quot;https://auth.example.com&quot;, &quot;sub&quot;: &quot;248289761001&quot;, &quot;aud&quot;: &quot;my_app_id&quot;, &quot;exp&quot;: 1735476000, &quot;iat&quot;: 1735472400, &quot;nonce&quot;: &quot;abc789&quot;, &quot;name&quot;: &quot;John Doe&quot;, &quot;email&quot;: &quot;john.doe@example.com&quot;, &quot;email_verified&quot;: true }   Signature : V√©rifi√©e avec la cl√© publique de l'OP    ","version":"Next","tagName":"h3"},{"title":"Discovery Endpoint‚Äã","type":1,"pageTitle":"OpenID Connect (OIDC)","url":"/docs/security/authentification-autorisation/oidc#discovery-endpoint","content":" OIDC fournit un endpoint de d√©couverte automatique :  GET /.well-known/openid-configuration HTTP/1.1 Host: auth.example.com   R√©ponse :  { &quot;issuer&quot;: &quot;https://auth.example.com&quot;, &quot;authorization_endpoint&quot;: &quot;https://auth.example.com/authorize&quot;, &quot;token_endpoint&quot;: &quot;https://auth.example.com/oauth/token&quot;, &quot;userinfo_endpoint&quot;: &quot;https://auth.example.com/oauth/userinfo&quot;, &quot;jwks_uri&quot;: &quot;https://auth.example.com/.well-known/jwks.json&quot;, &quot;response_types_supported&quot;: [ &quot;code&quot;, &quot;token&quot;, &quot;id_token&quot;, &quot;code token&quot;, &quot;code id_token&quot;, &quot;token id_token&quot;, &quot;code token id_token&quot; ], &quot;subject_types_supported&quot;: [&quot;public&quot;], &quot;id_token_signing_alg_values_supported&quot;: [&quot;RS256&quot;], &quot;scopes_supported&quot;: [&quot;openid&quot;, &quot;profile&quot;, &quot;email&quot;, &quot;address&quot;, &quot;phone&quot;], &quot;claims_supported&quot;: [ &quot;sub&quot;, &quot;iss&quot;, &quot;aud&quot;, &quot;exp&quot;, &quot;iat&quot;, &quot;name&quot;, &quot;email&quot;, &quot;email_verified&quot; ] }     ","version":"Next","tagName":"h3"},{"title":"R√©cup√©ration des cl√©s publiques (JWKS)‚Äã","type":1,"pageTitle":"OpenID Connect (OIDC)","url":"/docs/security/authentification-autorisation/oidc#r√©cup√©ration-des-cl√©s-publiques-jwks","content":" GET /.well-known/jwks.json HTTP/1.1 Host: auth.example.com   R√©ponse :  { &quot;keys&quot;: [ { &quot;kty&quot;: &quot;RSA&quot;, &quot;kid&quot;: &quot;key-id-123&quot;, &quot;use&quot;: &quot;sig&quot;, &quot;alg&quot;: &quot;RS256&quot;, &quot;n&quot;: &quot;0vx7agoebGcQSuuPiLJXZptN9nndrQmbXEps2aiAFbWhM78LhWx...&quot;, &quot;e&quot;: &quot;AQAB&quot; } ] }   Ces cl√©s permettent de valider la signature des ID tokens.    ","version":"Next","tagName":"h3"},{"title":"Validation de l'ID Token‚Äã","type":1,"pageTitle":"OpenID Connect (OIDC)","url":"/docs/security/authentification-autorisation/oidc#validation-de-lid-token","content":" √âtapes critiques :  ‚úÖ V√©rifier la signature JWT avec la cl√© publique de l'OP‚úÖ V√©rifier l'iss (issuer) correspond √† l'OP attendu‚úÖ V√©rifier l'aud (audience) correspond au client_id‚úÖ V√©rifier que le token n'est pas expir√© (exp)‚úÖ V√©rifier le nonce correspond √† celui envoy√©‚úÖ Optionnel : v√©rifier l'iat (issued at)  danger Ne jamais faire confiance √† un ID token sans valider sa signature !  ","version":"Next","tagName":"h2"},{"title":"S√©curit√© - Bonnes Pratiques‚Äã","type":1,"pageTitle":"OpenID Connect (OIDC)","url":"/docs/security/authentification-autorisation/oidc#s√©curit√©---bonnes-pratiques","content":" ","version":"Next","tagName":"h2"},{"title":"Toujours‚Äã","type":1,"pageTitle":"OpenID Connect (OIDC)","url":"/docs/security/authentification-autorisation/oidc#toujours","content":" ‚úÖ Valider la signature de l'ID token‚úÖ Utiliser HTTPS uniquement‚úÖ V√©rifier tous les claims critiques (iss, aud, exp, nonce)‚úÖ Utiliser des state et nonce al√©atoires et uniques‚úÖ Impl√©menter PKCE pour les applications publiques  ","version":"Next","tagName":"h3"},{"title":"Authorization Code Flow‚Äã","type":1,"pageTitle":"OpenID Connect (OIDC)","url":"/docs/security/authentification-autorisation/oidc#authorization-code-flow-2","content":" ‚úÖ Stocker le client_secret de mani√®re s√©curis√©e (backend uniquement)‚úÖ Valider le redirect_uri‚úÖ Ne jamais exposer l'ID token c√¥t√© client si sensible  ","version":"Next","tagName":"h3"},{"title":"Implicit Flow (√† √©viter)‚Äã","type":1,"pageTitle":"OpenID Connect (OIDC)","url":"/docs/security/authentification-autorisation/oidc#implicit-flow-√†-√©viter","content":" üö´ Ne plus utiliser, pr√©f√©rer Authorization Code + PKCE‚ö†Ô∏è Si utilis√© : dur√©e de vie tr√®s courte des tokens  ","version":"Next","tagName":"h3"},{"title":"UserInfo‚Äã","type":1,"pageTitle":"OpenID Connect (OIDC)","url":"/docs/security/authentification-autorisation/oidc#userinfo","content":" ‚úÖ Toujours utiliser HTTPS‚úÖ Comparer le sub du UserInfo avec celui de l'ID token  ","version":"Next","tagName":"h3"},{"title":"OIDC vs OAuth 2.0 - Quand utiliser quoi ?‚Äã","type":1,"pageTitle":"OpenID Connect (OIDC)","url":"/docs/security/authentification-autorisation/oidc#oidc-vs-oauth-20---quand-utiliser-quoi-","content":" ","version":"Next","tagName":"h2"},{"title":"Utiliser OAuth 2.0 pur quand :‚Äã","type":1,"pageTitle":"OpenID Connect (OIDC)","url":"/docs/security/authentification-autorisation/oidc#utiliser-oauth-20-pur-quand-","content":" ‚ùå Vous n'avez pas besoin de conna√Ætre l'identit√© de l'utilisateur‚úÖ Vous voulez uniquement acc√©der √† des ressources (API, donn√©es)‚úÖ Exemple : &quot;Publier sur mon compte Twitter&quot;  ","version":"Next","tagName":"h3"},{"title":"Utiliser OIDC quand :‚Äã","type":1,"pageTitle":"OpenID Connect (OIDC)","url":"/docs/security/authentification-autorisation/oidc#utiliser-oidc-quand-","content":" ‚úÖ Vous avez besoin d'authentifier l'utilisateur‚úÖ Vous voulez conna√Ætre &quot;qui&quot; est l'utilisateur‚úÖ Vous construisez un syst√®me de SSO (Single Sign-On)‚úÖ Exemple : &quot;Se connecter avec Google&quot;  ","version":"Next","tagName":"h3"},{"title":"Utiliser les deux :‚Äã","type":1,"pageTitle":"OpenID Connect (OIDC)","url":"/docs/security/authentification-autorisation/oidc#utiliser-les-deux-","content":" ‚úÖ Authentification de l'utilisateur (OIDC)‚úÖ + Acc√®s √† ses ressources (OAuth 2.0)‚úÖ Exemple : &quot;Se connecter avec Google et acc√©der √† Google Drive&quot;  ","version":"Next","tagName":"h3"},{"title":"Claims Standards‚Äã","type":1,"pageTitle":"OpenID Connect (OIDC)","url":"/docs/security/authentification-autorisation/oidc#claims-standards","content":" ","version":"Next","tagName":"h2"},{"title":"Claims du profil (profile scope)‚Äã","type":1,"pageTitle":"OpenID Connect (OIDC)","url":"/docs/security/authentification-autorisation/oidc#claims-du-profil-profile-scope","content":" Claim\tDescription\tExemplename\tNom complet\t&quot;John Doe&quot; given_name\tPr√©nom\t&quot;John&quot; family_name\tNom de famille\t&quot;Doe&quot; middle_name\tDeuxi√®me pr√©nom\t&quot;William&quot; nickname\tSurnom\t&quot;Johnny&quot; preferred_username\tNom d'utilisateur\t&quot;johndoe&quot; profile\tURL du profil\t&quot;https://example.com/johndoe&quot; picture\tURL de l'avatar\t&quot;https://example.com/avatar.jpg&quot; website\tSite web\t&quot;https://johndoe.com&quot; gender\tGenre\t&quot;male&quot; / &quot;female&quot; birthdate\tDate de naissance\t&quot;1990-01-15&quot; zoneinfo\tFuseau horaire\t&quot;Europe/Paris&quot; locale\tLangue\t&quot;fr-FR&quot; updated_at\tDerni√®re MAJ\t1311280970  ","version":"Next","tagName":"h3"},{"title":"Claims de l'email (email scope)‚Äã","type":1,"pageTitle":"OpenID Connect (OIDC)","url":"/docs/security/authentification-autorisation/oidc#claims-de-lemail-email-scope","content":" Claim\tDescription\tExempleemail\tAdresse email\t&quot;john@example.com&quot; email_verified\tEmail v√©rifi√©\ttrue / false  ","version":"Next","tagName":"h3"},{"title":"Claims de l'adresse (address scope)‚Äã","type":1,"pageTitle":"OpenID Connect (OIDC)","url":"/docs/security/authentification-autorisation/oidc#claims-de-ladresse-address-scope","content":" Claim\tDescriptionaddress\tObjet JSON contenant : formatted, street_address, locality, region, postal_code, country  ","version":"Next","tagName":"h3"},{"title":"Claims du t√©l√©phone (phone scope)‚Äã","type":1,"pageTitle":"OpenID Connect (OIDC)","url":"/docs/security/authentification-autorisation/oidc#claims-du-t√©l√©phone-phone-scope","content":" Claim\tDescription\tExemplephone_number\tNum√©ro\t&quot;+33612345678&quot; phone_number_verified\tV√©rifi√©\ttrue / false  ","version":"Next","tagName":"h3"},{"title":"Logout‚Äã","type":1,"pageTitle":"OpenID Connect (OIDC)","url":"/docs/security/authentification-autorisation/oidc#logout","content":" ","version":"Next","tagName":"h2"},{"title":"RP-Initiated Logout‚Äã","type":1,"pageTitle":"OpenID Connect (OIDC)","url":"/docs/security/authentification-autorisation/oidc#rp-initiated-logout","content":" L'application demande la d√©connexion de l'utilisateur :  GET /logout?id_token_hint=eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9...&amp;post_logout_redirect_uri=https://myapp.com/goodbye&amp;state=xyz123 HTTP/1.1 Host: auth.example.com   Param√®tres :  id_token_hint : L'ID token de l'utilisateurpost_logout_redirect_uri : O√π rediriger apr√®s logoutstate : Valeur de s√©curit√©  ","version":"Next","tagName":"h3"},{"title":"Front-Channel Logout‚Äã","type":1,"pageTitle":"OpenID Connect (OIDC)","url":"/docs/security/authentification-autorisation/oidc#front-channel-logout","content":" L'OP notifie toutes les applications que l'utilisateur s'est d√©connect√© via des iframes.  ","version":"Next","tagName":"h3"},{"title":"Back-Channel Logout‚Äã","type":1,"pageTitle":"OpenID Connect (OIDC)","url":"/docs/security/authentification-autorisation/oidc#back-channel-logout","content":" L'OP envoie des notifications serveur-√†-serveur aux applications.  ","version":"Next","tagName":"h3"},{"title":"Ressources Suppl√©mentaires‚Äã","type":1,"pageTitle":"OpenID Connect (OIDC)","url":"/docs/security/authentification-autorisation/oidc#ressources-suppl√©mentaires","content":" OpenID Connect Core SpecOpenID Connect DiscoveryJWT.io - D√©coder et d√©boguer les JWT    ","version":"Next","tagName":"h2"},{"title":"Glossaire‚Äã","type":1,"pageTitle":"OpenID Connect (OIDC)","url":"/docs/security/authentification-autorisation/oidc#glossaire","content":" RP : Relying Party - L'application clienteOP : OpenID Provider - Le serveur d'identit√©JWT : JSON Web Token - Format des ID tokensJWK : JSON Web Key - Cl√©s publiques pour valider les JWTJWKS : JSON Web Key Set - Ensemble de cl√©s publiquesSSO : Single Sign-On - Authentification uniqueClaims : Attributs de l'utilisateur (nom, email, etc.)Nonce : Number used once - Protection contre replay attacks ","version":"Next","tagName":"h2"},{"title":"üîç Trivy - Scan de vuln√©rabilit√©s","type":0,"sectionRef":"#","url":"/docs/security/software-composition-analysis/trivy","content":"","keywords":"","version":"Next"},{"title":"üéØ Pourquoi Trivy ?‚Äã","type":1,"pageTitle":"üîç Trivy - Scan de vuln√©rabilit√©s","url":"/docs/security/software-composition-analysis/trivy#-pourquoi-trivy-","content":" ‚úÖ Complet : Conteneurs, FS, IaC, SBOM‚úÖ Rapide : Scan en quelques secondes‚úÖ Pr√©cis : Faible taux de faux positifs‚úÖ Gratuit : Open-source et maintenu activement  ","version":"Next","tagName":"h2"},{"title":"üì¶ Installation‚Äã","type":1,"pageTitle":"üîç Trivy - Scan de vuln√©rabilit√©s","url":"/docs/security/software-composition-analysis/trivy#-installation","content":" # Linux wget https://github.com/aquasecurity/trivy/releases/download/v0.48.0/trivy_0.48.0_Linux-64bit.tar.gz tar zxvf trivy_0.48.0_Linux-64bit.tar.gz sudo mv trivy /usr/local/bin/ # macOS brew install trivy # Docker docker pull aquasec/trivy:latest   ","version":"Next","tagName":"h2"},{"title":"üîç Types de scans‚Äã","type":1,"pageTitle":"üîç Trivy - Scan de vuln√©rabilit√©s","url":"/docs/security/software-composition-analysis/trivy#-types-de-scans","content":" ","version":"Next","tagName":"h2"},{"title":"Images Docker‚Äã","type":1,"pageTitle":"üîç Trivy - Scan de vuln√©rabilit√©s","url":"/docs/security/software-composition-analysis/trivy#images-docker","content":" # Scan basique trivy image mon-app:latest # S√©v√©rit√© sp√©cifique trivy image --severity HIGH,CRITICAL mon-app:latest # Exit code si vuln√©rabilit√©s trivy image --exit-code 1 --severity CRITICAL mon-app:latest # Ignorer non fix√©es trivy image --ignore-unfixed mon-app:latest # Format JSON trivy image --format json --output results.json mon-app:latest   ","version":"Next","tagName":"h3"},{"title":"Syst√®me de fichiers‚Äã","type":1,"pageTitle":"üîç Trivy - Scan de vuln√©rabilit√©s","url":"/docs/security/software-composition-analysis/trivy#syst√®me-de-fichiers","content":" # R√©pertoire actuel trivy fs . # R√©pertoire sp√©cifique trivy fs /path/to/project # Fichier JAR/WAR trivy fs target/my-app.jar   ","version":"Next","tagName":"h3"},{"title":"Configuration IaC‚Äã","type":1,"pageTitle":"üîç Trivy - Scan de vuln√©rabilit√©s","url":"/docs/security/software-composition-analysis/trivy#configuration-iac","content":" # Terraform trivy config ./infrastructure/terraform # Kubernetes trivy config ./k8s-manifests # Docker Compose trivy config docker-compose.yml   ","version":"Next","tagName":"h3"},{"title":"Repository Git‚Äã","type":1,"pageTitle":"üîç Trivy - Scan de vuln√©rabilit√©s","url":"/docs/security/software-composition-analysis/trivy#repository-git","content":" # Repo distant trivy repo https://github.com/org/repo # Branche sp√©cifique trivy repo --branch develop https://github.com/org/repo   ","version":"Next","tagName":"h3"},{"title":"SBOM‚Äã","type":1,"pageTitle":"üîç Trivy - Scan de vuln√©rabilit√©s","url":"/docs/security/software-composition-analysis/trivy#sbom","content":" # Scan SBOM trivy sbom sbom.json   ","version":"Next","tagName":"h3"},{"title":"üîß Configuration‚Äã","type":1,"pageTitle":"üîç Trivy - Scan de vuln√©rabilit√©s","url":"/docs/security/software-composition-analysis/trivy#-configuration","content":" ","version":"Next","tagName":"h2"},{"title":"Fichier de configuration‚Äã","type":1,"pageTitle":"üîç Trivy - Scan de vuln√©rabilit√©s","url":"/docs/security/software-composition-analysis/trivy#fichier-de-configuration","content":" # trivy.yaml severity: - CRITICAL - HIGH vulnerability: ignore-unfixed: true output: json format: sarif   trivy image --config trivy.yaml mon-app:latest   ","version":"Next","tagName":"h3"},{"title":"Fichier d'exclusion‚Äã","type":1,"pageTitle":"üîç Trivy - Scan de vuln√©rabilit√©s","url":"/docs/security/software-composition-analysis/trivy#fichier-dexclusion","content":" # .trivyignore CVE-2023-12345 CVE-2023-67890 # Justification   ","version":"Next","tagName":"h3"},{"title":"üîÑ Int√©gration CI/CD‚Äã","type":1,"pageTitle":"üîç Trivy - Scan de vuln√©rabilit√©s","url":"/docs/security/software-composition-analysis/trivy#-int√©gration-cicd","content":" ","version":"Next","tagName":"h2"},{"title":"GitLab CI‚Äã","type":1,"pageTitle":"üîç Trivy - Scan de vuln√©rabilit√©s","url":"/docs/security/software-composition-analysis/trivy#gitlab-ci","content":" # .gitlab-ci.yml stages: - security variables: IMAGE: $CI_REGISTRY_IMAGE:$CI_COMMIT_SHA trivy-scan: stage: security image: name: aquasec/trivy:latest entrypoint: [&quot;&quot;] script: # Scan filesystem - trivy fs --exit-code 0 --format json --output trivy-fs.json . # Scan image - trivy image --exit-code 1 --severity HIGH,CRITICAL $IMAGE # Scan IaC - trivy config --exit-code 0 ./infrastructure artifacts: reports: container_scanning: trivy-fs.json paths: - trivy-fs.json only: - main - merge_requests # Scan quotidien trivy-daily: stage: security image: name: aquasec/trivy:latest entrypoint: [&quot;&quot;] script: - trivy image --severity CRITICAL,HIGH $CI_REGISTRY_IMAGE:latest only: - schedules   ","version":"Next","tagName":"h3"},{"title":"Jenkins‚Äã","type":1,"pageTitle":"üîç Trivy - Scan de vuln√©rabilit√©s","url":"/docs/security/software-composition-analysis/trivy#jenkins","content":" pipeline { agent any stages { stage('Trivy Scan') { steps { sh ''' trivy image \\ --format json \\ --output trivy-results.json \\ --severity CRITICAL,HIGH \\ --exit-code 1 \\ my-app:${BUILD_NUMBER} ''' } post { always { archiveArtifacts artifacts: 'trivy-results.json' } } } } }   ","version":"Next","tagName":"h3"},{"title":"üìä Formats de sortie‚Äã","type":1,"pageTitle":"üîç Trivy - Scan de vuln√©rabilit√©s","url":"/docs/security/software-composition-analysis/trivy#-formats-de-sortie","content":" ","version":"Next","tagName":"h2"},{"title":"JSON‚Äã","type":1,"pageTitle":"üîç Trivy - Scan de vuln√©rabilit√©s","url":"/docs/security/software-composition-analysis/trivy#json","content":" trivy image --format json --output results.json mon-app:latest   ","version":"Next","tagName":"h3"},{"title":"SARIF (GitHub Security)‚Äã","type":1,"pageTitle":"üîç Trivy - Scan de vuln√©rabilit√©s","url":"/docs/security/software-composition-analysis/trivy#sarif-github-security","content":" trivy image --format sarif --output results.sarif mon-app:latest   ","version":"Next","tagName":"h3"},{"title":"Table (d√©faut)‚Äã","type":1,"pageTitle":"üîç Trivy - Scan de vuln√©rabilit√©s","url":"/docs/security/software-composition-analysis/trivy#table-d√©faut","content":" trivy image mon-app:latest # Output: Total: 15 (CRITICAL: 2, HIGH: 7, MEDIUM: 6)   ","version":"Next","tagName":"h3"},{"title":"HTML‚Äã","type":1,"pageTitle":"üîç Trivy - Scan de vuln√©rabilit√©s","url":"/docs/security/software-composition-analysis/trivy#html","content":" trivy image --format template --template &quot;@contrib/html.tpl&quot; --output report.html mon-app:latest   ","version":"Next","tagName":"h3"},{"title":"üéØ Meilleures pratiques‚Äã","type":1,"pageTitle":"üîç Trivy - Scan de vuln√©rabilit√©s","url":"/docs/security/software-composition-analysis/trivy#-meilleures-pratiques","content":" ","version":"Next","tagName":"h2"},{"title":"1. Scans r√©guliers‚Äã","type":1,"pageTitle":"üîç Trivy - Scan de vuln√©rabilit√©s","url":"/docs/security/software-composition-analysis/trivy#1-scans-r√©guliers","content":" # Scan quotidien schedule: - cron: '0 2 * * *'   ","version":"Next","tagName":"h3"},{"title":"2. Politique de s√©v√©rit√©‚Äã","type":1,"pageTitle":"üîç Trivy - Scan de vuln√©rabilit√©s","url":"/docs/security/software-composition-analysis/trivy#2-politique-de-s√©v√©rit√©","content":" # Bloquer CRITICAL uniquement trivy image --exit-code 1 --severity CRITICAL mon-app:latest # Ou CRITICAL+HIGH trivy image --exit-code 1 --severity CRITICAL,HIGH mon-app:latest   ","version":"Next","tagName":"h3"},{"title":"3. Cache pour performance‚Äã","type":1,"pageTitle":"üîç Trivy - Scan de vuln√©rabilit√©s","url":"/docs/security/software-composition-analysis/trivy#3-cache-pour-performance","content":" export TRIVY_CACHE_DIR=/tmp/trivy-cache trivy image mon-app:latest   ","version":"Next","tagName":"h3"},{"title":"4. Ignorer non fix√©es‚Äã","type":1,"pageTitle":"üîç Trivy - Scan de vuln√©rabilit√©s","url":"/docs/security/software-composition-analysis/trivy#4-ignorer-non-fix√©es","content":" trivy image --ignore-unfixed mon-app:latest   ","version":"Next","tagName":"h3"},{"title":"üîê Registries priv√©s‚Äã","type":1,"pageTitle":"üîç Trivy - Scan de vuln√©rabilit√©s","url":"/docs/security/software-composition-analysis/trivy#-registries-priv√©s","content":" ","version":"Next","tagName":"h2"},{"title":"Docker Hub‚Äã","type":1,"pageTitle":"üîç Trivy - Scan de vuln√©rabilit√©s","url":"/docs/security/software-composition-analysis/trivy#docker-hub","content":" docker login trivy image private-registry/mon-app:latest   ","version":"Next","tagName":"h3"},{"title":"AWS ECR‚Äã","type":1,"pageTitle":"üîç Trivy - Scan de vuln√©rabilit√©s","url":"/docs/security/software-composition-analysis/trivy#aws-ecr","content":" aws ecr get-login-password --region eu-west-1 | docker login --username AWS --password-stdin 123456789.dkr.ecr.eu-west-1.amazonaws.com trivy image 123456789.dkr.ecr.eu-west-1.amazonaws.com/mon-app:latest   ","version":"Next","tagName":"h3"},{"title":"Azure ACR‚Äã","type":1,"pageTitle":"üîç Trivy - Scan de vuln√©rabilit√©s","url":"/docs/security/software-composition-analysis/trivy#azure-acr","content":" az acr login --name myregistry trivy image myregistry.azurecr.io/mon-app:latest   ","version":"Next","tagName":"h3"},{"title":"GitLab Registry‚Äã","type":1,"pageTitle":"üîç Trivy - Scan de vuln√©rabilit√©s","url":"/docs/security/software-composition-analysis/trivy#gitlab-registry","content":" docker login registry.gitlab.com trivy image registry.gitlab.com/group/project:latest   ","version":"Next","tagName":"h3"},{"title":"üîÑ Automatisation‚Äã","type":1,"pageTitle":"üîç Trivy - Scan de vuln√©rabilit√©s","url":"/docs/security/software-composition-analysis/trivy#-automatisation","content":" ","version":"Next","tagName":"h2"},{"title":"Pre-commit hook‚Äã","type":1,"pageTitle":"üîç Trivy - Scan de vuln√©rabilit√©s","url":"/docs/security/software-composition-analysis/trivy#pre-commit-hook","content":" #!/bin/bash # .git/hooks/pre-commit echo &quot;Running Trivy scan...&quot; trivy fs --exit-code 1 --severity CRITICAL,HIGH . if [ $? -ne 0 ]; then echo &quot;‚ùå Trivy scan failed&quot; exit 1 fi echo &quot;‚úÖ Trivy scan passed&quot;   ","version":"Next","tagName":"h3"},{"title":"üÜò Troubleshooting‚Äã","type":1,"pageTitle":"üîç Trivy - Scan de vuln√©rabilit√©s","url":"/docs/security/software-composition-analysis/trivy#-troubleshooting","content":" ","version":"Next","tagName":"h2"},{"title":"Base de donn√©es non √† jour‚Äã","type":1,"pageTitle":"üîç Trivy - Scan de vuln√©rabilit√©s","url":"/docs/security/software-composition-analysis/trivy#base-de-donn√©es-non-√†-jour","content":" trivy image --download-db-only   ","version":"Next","tagName":"h3"},{"title":"Erreur de connexion‚Äã","type":1,"pageTitle":"üîç Trivy - Scan de vuln√©rabilit√©s","url":"/docs/security/software-composition-analysis/trivy#erreur-de-connexion","content":" export HTTP_PROXY=http://proxy:8080 export HTTPS_PROXY=http://proxy:8080 trivy image mon-app:latest   ","version":"Next","tagName":"h3"},{"title":"Scan trop lent‚Äã","type":1,"pageTitle":"üîç Trivy - Scan de vuln√©rabilit√©s","url":"/docs/security/software-composition-analysis/trivy#scan-trop-lent","content":" # R√©duire les scanners trivy image --scanners vuln mon-app:latest # Ignorer node_modules trivy image --skip-dirs node_modules mon-app:latest   ","version":"Next","tagName":"h3"},{"title":"üìö Ressources‚Äã","type":1,"pageTitle":"üîç Trivy - Scan de vuln√©rabilit√©s","url":"/docs/security/software-composition-analysis/trivy#-ressources","content":" Documentation TrivyGitHub TrivyInt√©grations CI/CD    Trivy scanne maintenant automatiquement vos vuln√©rabilit√©s ! üîí ","version":"Next","tagName":"h2"},{"title":"üìã SBOM - Software Bill of Materials","type":0,"sectionRef":"#","url":"/docs/security/software-composition-analysis/sbom","content":"","keywords":"","version":"Next"},{"title":"üéØ Pourquoi un SBOM ?‚Äã","type":1,"pageTitle":"üìã SBOM - Software Bill of Materials","url":"/docs/security/software-composition-analysis/sbom#-pourquoi-un-sbom-","content":" ‚úÖ Tra√ßabilit√© : Savoir ce qui est dans vos applications‚úÖ S√©curit√© : Identifier rapidement les vuln√©rabilit√©s (ex: Log4Shell)‚úÖ Conformit√© : R√©pondre aux exigences r√©glementaires‚úÖ Supply Chain Security : Prot√©ger la cha√Æne d'approvisionnement  ","version":"Next","tagName":"h2"},{"title":"üìä Formats SBOM‚Äã","type":1,"pageTitle":"üìã SBOM - Software Bill of Materials","url":"/docs/security/software-composition-analysis/sbom#-formats-sbom","content":" ","version":"Next","tagName":"h2"},{"title":"CycloneDX (Recommand√©)‚Äã","type":1,"pageTitle":"üìã SBOM - Software Bill of Materials","url":"/docs/security/software-composition-analysis/sbom#cyclonedx-recommand√©","content":" { &quot;bomFormat&quot;: &quot;CycloneDX&quot;, &quot;specVersion&quot;: &quot;1.5&quot;, &quot;components&quot;: [ { &quot;type&quot;: &quot;library&quot;, &quot;name&quot;: &quot;spring-boot-starter-web&quot;, &quot;version&quot;: &quot;3.2.0&quot;, &quot;purl&quot;: &quot;pkg:maven/org.springframework.boot/spring-boot-starter-web@3.2.0&quot; } ] }   ","version":"Next","tagName":"h3"},{"title":"SPDX‚Äã","type":1,"pageTitle":"üìã SBOM - Software Bill of Materials","url":"/docs/security/software-composition-analysis/sbom#spdx","content":" { &quot;spdxVersion&quot;: &quot;SPDX-2.3&quot;, &quot;name&quot;: &quot;mon-app&quot;, &quot;packages&quot;: [ { &quot;name&quot;: &quot;spring-boot-starter-web&quot;, &quot;versionInfo&quot;: &quot;3.2.0&quot; } ] }   ","version":"Next","tagName":"h3"},{"title":"üîß G√©n√©ration du SBOM‚Äã","type":1,"pageTitle":"üìã SBOM - Software Bill of Materials","url":"/docs/security/software-composition-analysis/sbom#-g√©n√©ration-du-sbom","content":" ","version":"Next","tagName":"h2"},{"title":"Syft (Recommand√© - Universel)‚Äã","type":1,"pageTitle":"üìã SBOM - Software Bill of Materials","url":"/docs/security/software-composition-analysis/sbom#syft-recommand√©---universel","content":" Installation  # Linux/macOS curl -sSfL https://raw.githubusercontent.com/anchore/syft/main/install.sh | sh -s -- -b /usr/local/bin # Docker docker pull anchore/syft:latest   Utilisation  # Image Docker syft mon-app:latest -o cyclonedx-json &gt; sbom.json # R√©pertoire syft dir:. -o cyclonedx-json &gt; sbom.json # Fichier (JAR, ZIP, TAR...) syft target/mon-app.jar -o cyclonedx-json &gt; sbom.json # Format SPDX syft mon-app:latest -o spdx-json &gt; sbom.json   ","version":"Next","tagName":"h3"},{"title":"Outils sp√©cifiques par langage‚Äã","type":1,"pageTitle":"üìã SBOM - Software Bill of Materials","url":"/docs/security/software-composition-analysis/sbom#outils-sp√©cifiques-par-langage","content":" Langage\tOutil\tCommandeJava\tCycloneDX Maven\tmvn cyclonedx:makeAggregateBom Java\tCycloneDX Gradle\tgradle cyclonedxBom PHP\tCycloneDX Composer\tcyclonedx-php-composer make-sbom Node.js\tCycloneDX npm\tcyclonedx-npm --output-file sbom.json Python\tCycloneDX Python\tcyclonedx-py --output sbom.json .NET\tCycloneDX .NET\tdotnet cyclonedx Go\tCycloneDX Go\tcyclonedx-gomod mod -json &gt; sbom.json  ","version":"Next","tagName":"h3"},{"title":"Configuration Maven (Java)‚Äã","type":1,"pageTitle":"üìã SBOM - Software Bill of Materials","url":"/docs/security/software-composition-analysis/sbom#configuration-maven-java","content":" &lt;!-- pom.xml --&gt; &lt;plugin&gt; &lt;groupId&gt;org.cyclonedx&lt;/groupId&gt; &lt;artifactId&gt;cyclonedx-maven-plugin&lt;/artifactId&gt; &lt;version&gt;2.7.11&lt;/version&gt; &lt;executions&gt; &lt;execution&gt; &lt;phase&gt;package&lt;/phase&gt; &lt;goals&gt; &lt;goal&gt;makeAggregateBom&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;/executions&gt; &lt;/plugin&gt;   ","version":"Next","tagName":"h3"},{"title":"üîÑ Int√©gration CI/CD‚Äã","type":1,"pageTitle":"üìã SBOM - Software Bill of Materials","url":"/docs/security/software-composition-analysis/sbom#-int√©gration-cicd","content":" ","version":"Next","tagName":"h2"},{"title":"Pipeline GitLab CI‚Äã","type":1,"pageTitle":"üìã SBOM - Software Bill of Materials","url":"/docs/security/software-composition-analysis/sbom#pipeline-gitlab-ci","content":" # .gitlab-ci.yml stages: - build - sbom - security variables: SBOM_FILE: &quot;sbom.json&quot; generate-sbom: stage: sbom image: anchore/syft:latest script: # Pour image Docker - syft $CI_REGISTRY_IMAGE:$CI_COMMIT_SHA -o cyclonedx-json=$SBOM_FILE # OU pour r√©pertoire - syft dir:. -o cyclonedx-json=$SBOM_FILE # OU pour artifact - syft path/to/artifact.jar -o cyclonedx-json=$SBOM_FILE artifacts: paths: - $SBOM_FILE reports: cyclonedx: $SBOM_FILE scan-sbom: stage: security image: anchore/grype:latest script: - grype sbom:$SBOM_FILE --fail-on high dependencies: - generate-sbom # Template GitLab int√©gr√© include: - template: Security/Dependency-Scanning.gitlab-ci.yml   ","version":"Next","tagName":"h3"},{"title":"Pipeline Jenkins‚Äã","type":1,"pageTitle":"üìã SBOM - Software Bill of Materials","url":"/docs/security/software-composition-analysis/sbom#pipeline-jenkins","content":" pipeline { agent any stages { stage('Generate SBOM') { steps { sh 'syft . -o cyclonedx-json=sbom.json' } } stage('Scan SBOM') { steps { sh 'grype sbom:sbom.json --fail-on high' } } stage('Archive') { steps { archiveArtifacts artifacts: 'sbom.json' } } } } ## üîç Analyse du SBOM ### Grype (Scan de vuln√©rabilit√©s) ```bash # Scanner un SBOM grype sbom:sbom.json # Format JSON grype sbom:sbom.json -o json &gt; vulnerabilities.json # S√©v√©rit√© minimale grype sbom:sbom.json --fail-on high   ","version":"Next","tagName":"h3"},{"title":"Dependency Track (Plateforme centralis√©e)‚Äã","type":1,"pageTitle":"üìã SBOM - Software Bill of Materials","url":"/docs/security/software-composition-analysis/sbom#dependency-track-plateforme-centralis√©e","content":" # docker-compose.yml services: dtrack-apiserver: image: dependencytrack/apiserver:latest environment: - ALPINE_DATABASE_MODE=external - ALPINE_DATABASE_URL=jdbc:postgresql://postgres:5432/dtrack - ALPINE_DATABASE_USERNAME=dtrack - ALPINE_DATABASE_PASSWORD=changeme ports: - '8081:8080' dtrack-frontend: image: dependencytrack/frontend:latest environment: - API_BASE_URL=http://dtrack-apiserver:8080 ports: - '8080:8080' postgres: image: postgres:15-alpine environment: - POSTGRES_DB=dtrack - POSTGRES_USER=dtrack - POSTGRES_PASSWORD=changeme   Upload automatique  curl -X POST &quot;http://localhost:8081/api/v1/bom&quot; \\ -H &quot;X-Api-Key: YOUR_API_KEY&quot; \\ -F &quot;project=PROJECT_UUID&quot; \\ -F &quot;bom=@sbom.json&quot;   ","version":"Next","tagName":"h3"},{"title":"üîê Signature et v√©rification‚Äã","type":1,"pageTitle":"üìã SBOM - Software Bill of Materials","url":"/docs/security/software-composition-analysis/sbom#-signature-et-v√©rification","content":" ","version":"Next","tagName":"h2"},{"title":"Cosign‚Äã","type":1,"pageTitle":"üìã SBOM - Software Bill of Materials","url":"/docs/security/software-composition-analysis/sbom#cosign","content":" # Signer cosign sign-blob --key cosign.key sbom.json --output-signature sbom.sig # V√©rifier cosign verify-blob --key cosign.pub --signature sbom.sig sbom.json   ","version":"Next","tagName":"h3"},{"title":"Sigstore (keyless)‚Äã","type":1,"pageTitle":"üìã SBOM - Software Bill of Materials","url":"/docs/security/software-composition-analysis/sbom#sigstore-keyless","content":" # Signature sans cl√© cosign sign-blob sbom.json --bundle sbom.bundle # V√©rification cosign verify-blob \\ --bundle sbom.bundle \\ --certificate-identity=user@example.com \\ --certificate-oidc-issuer=https://accounts.google.com \\ sbom.json   ","version":"Next","tagName":"h3"},{"title":"üéØ Meilleures pratiques‚Äã","type":1,"pageTitle":"üìã SBOM - Software Bill of Materials","url":"/docs/security/software-composition-analysis/sbom#-meilleures-pratiques","content":" ","version":"Next","tagName":"h2"},{"title":"1. G√©n√©ration automatique‚Äã","type":1,"pageTitle":"üìã SBOM - Software Bill of Materials","url":"/docs/security/software-composition-analysis/sbom#1-g√©n√©ration-automatique","content":" # √Ä chaque build on: [push, merge_request, tag]   ","version":"Next","tagName":"h3"},{"title":"2. Validation syst√©matique‚Äã","type":1,"pageTitle":"üìã SBOM - Software Bill of Materials","url":"/docs/security/software-composition-analysis/sbom#2-validation-syst√©matique","content":" cyclonedx validate --input-file sbom.json   ","version":"Next","tagName":"h3"},{"title":"3. Signature des SBOMs‚Äã","type":1,"pageTitle":"üìã SBOM - Software Bill of Materials","url":"/docs/security/software-composition-analysis/sbom#3-signature-des-sboms","content":" # Production uniquement only: [main, tags]   ","version":"Next","tagName":"h3"},{"title":"4. Analyse continue‚Äã","type":1,"pageTitle":"üìã SBOM - Software Bill of Materials","url":"/docs/security/software-composition-analysis/sbom#4-analyse-continue","content":" # Scan quotidien dans scheduled pipeline schedule: - cron: '0 2 * * *'   ","version":"Next","tagName":"h3"},{"title":"5. Storage centralis√©‚Äã","type":1,"pageTitle":"üìã SBOM - Software Bill of Materials","url":"/docs/security/software-composition-analysis/sbom#5-storage-centralis√©","content":" # Dependency Track ou Artifactory artifacts: expire_in: never # SBOMs produits   ","version":"Next","tagName":"h3"},{"title":"üìã SBOM Compliance‚Äã","type":1,"pageTitle":"üìã SBOM - Software Bill of Materials","url":"/docs/security/software-composition-analysis/sbom#-sbom-compliance","content":" ","version":"Next","tagName":"h2"},{"title":"NTIA Minimum Elements‚Äã","type":1,"pageTitle":"üìã SBOM - Software Bill of Materials","url":"/docs/security/software-composition-analysis/sbom#ntia-minimum-elements","content":" { &quot;minimum_elements&quot;: { &quot;author&quot;: &quot;Organization Name&quot;, &quot;timestamp&quot;: &quot;2024-01-01T00:00:00Z&quot;, &quot;component&quot;: { &quot;name&quot;: &quot;component-name&quot;, &quot;version&quot;: &quot;1.0.0&quot;, &quot;unique_identifier&quot;: &quot;pkg:maven/...&quot; } } }   ","version":"Next","tagName":"h3"},{"title":"üîÑ Script d'automatisation‚Äã","type":1,"pageTitle":"üìã SBOM - Software Bill of Materials","url":"/docs/security/software-composition-analysis/sbom#-script-dautomatisation","content":" ","version":"Next","tagName":"h2"},{"title":"Makefile‚Äã","type":1,"pageTitle":"üìã SBOM - Software Bill of Materials","url":"/docs/security/software-composition-analysis/sbom#makefile","content":" .PHONY: sbom scan sign upload sbom: syft . -o cyclonedx-json=sbom.json cyclonedx validate --input-file sbom.json scan: grype sbom:sbom.json --fail-on high sign: cosign sign-blob --key cosign.key sbom.json --output-signature sbom.sig upload: curl -X POST &quot;$(DTRACK_URL)/api/v1/bom&quot; \\ -H &quot;X-Api-Key: $(DTRACK_API_KEY)&quot; \\ -F &quot;project=$(PROJECT_UUID)&quot; \\ -F &quot;bom=@sbom.json&quot; all: sbom scan sign upload   ","version":"Next","tagName":"h3"},{"title":"üìà M√©triques importantes‚Äã","type":1,"pageTitle":"üìã SBOM - Software Bill of Materials","url":"/docs/security/software-composition-analysis/sbom#-m√©triques-importantes","content":" - Total components: 350 - Direct dependencies: 50 - Critical vulnerabilities: 0 - High vulnerabilities: 2 - SBOM freshness: &lt; 24h   ","version":"Next","tagName":"h2"},{"title":"üÜò Troubleshooting‚Äã","type":1,"pageTitle":"üìã SBOM - Software Bill of Materials","url":"/docs/security/software-composition-analysis/sbom#-troubleshooting","content":" ","version":"Next","tagName":"h2"},{"title":"SBOM incomplet‚Äã","type":1,"pageTitle":"üìã SBOM - Software Bill of Materials","url":"/docs/security/software-composition-analysis/sbom#sbom-incomplet","content":" # V√©rifier cyclonedx validate --input-file sbom.json # R√©g√©n√©rer avec verbose syft . -vv -o cyclonedx-json   ","version":"Next","tagName":"h3"},{"title":"Conversion de format‚Äã","type":1,"pageTitle":"üìã SBOM - Software Bill of Materials","url":"/docs/security/software-composition-analysis/sbom#conversion-de-format","content":" cyclonedx convert \\ --input-file sbom.spdx.json \\ --output-file sbom.cdx.json \\ --input-format spdx-json \\ --output-format cyclonedx-json   ","version":"Next","tagName":"h3"},{"title":"üìö Ressources‚Äã","type":1,"pageTitle":"üìã SBOM - Software Bill of Materials","url":"/docs/security/software-composition-analysis/sbom#-ressources","content":" CycloneDX SpecificationSyft DocumentationDependency TrackNTIA SBOM Guidelines    Votre SBOM est maintenant automatiquement g√©n√©r√©, valid√©, scann√© et archiv√© ! üìãüîí ","version":"Next","tagName":"h2"},{"title":"Outils","type":0,"sectionRef":"#","url":"/docs/tools","content":"Outils","keywords":"","version":"Next"},{"title":"üîç SonarQube Community + Branch Plugin","type":0,"sectionRef":"#","url":"/docs/tools/sonarqube","content":"","keywords":"","version":"Next"},{"title":"üéØ Pourquoi ce plugin ?‚Äã","type":1,"pageTitle":"üîç SonarQube Community + Branch Plugin","url":"/docs/tools/sonarqube#-pourquoi-ce-plugin-","content":" ‚úÖ Branch analysis : Scanner plusieurs branches (feature, develop, main)‚úÖ PR/MR decoration : Commentaires automatiques sur les PR/MR‚úÖ Gratuit : Alternative √† SonarQube Developer Edition‚úÖ Multi-plateforme : GitLab, GitHub, Bitbucket, Azure DevOps  ","version":"Next","tagName":"h2"},{"title":"üì¶ Installation‚Äã","type":1,"pageTitle":"üîç SonarQube Community + Branch Plugin","url":"/docs/tools/sonarqube#-installation","content":" ","version":"Next","tagName":"h2"},{"title":"Docker Compose (Recommand√©)‚Äã","type":1,"pageTitle":"üîç SonarQube Community + Branch Plugin","url":"/docs/tools/sonarqube#docker-compose-recommand√©","content":" # docker-compose.yml version: '3' services: sonarqube: image: mc1arke/sonarqube-with-community-branch-plugin:latest container_name: sonarqube ports: - &quot;9000:9000&quot; environment: - SONAR_JDBC_URL=jdbc:postgresql://db:5432/sonar - SONAR_JDBC_USERNAME=sonar - SONAR_JDBC_PASSWORD=sonar volumes: - sonarqube_data:/opt/sonarqube/data - sonarqube_logs:/opt/sonarqube/logs - sonarqube_extensions:/opt/sonarqube/extensions depends_on: - db db: image: postgres:15-alpine container_name: sonarqube-db environment: - POSTGRES_USER=sonar - POSTGRES_PASSWORD=sonar - POSTGRES_DB=sonar volumes: - postgresql_data:/var/lib/postgresql/data volumes: sonarqube_data: sonarqube_logs: sonarqube_extensions: postgresql_data:   # D√©marrage docker-compose up -d # Acc√®s : http://localhost:9000 # Login par d√©faut : admin / admin   ","version":"Next","tagName":"h3"},{"title":"Installation manuelle‚Äã","type":1,"pageTitle":"üîç SonarQube Community + Branch Plugin","url":"/docs/tools/sonarqube#installation-manuelle","content":" # 1. T√©l√©charger SonarQube Community wget https://binaries.sonarsource.com/Distribution/sonarqube/sonarqube-10.3.0.82913.zip unzip sonarqube-10.3.0.82913.zip # 2. T√©l√©charger le plugin wget https://github.com/mc1arke/sonarqube-community-branch-plugin/releases/download/1.18.0/sonarqube-community-branch-plugin-1.18.0.jar # 3. Installer le plugin cp sonarqube-community-branch-plugin-1.18.0.jar sonarqube-10.3.0.82913/extensions/plugins/ # 4. D√©marrer SonarQube cd sonarqube-10.3.0.82913/bin/linux-x86-64 ./sonar.sh start   ","version":"Next","tagName":"h3"},{"title":"‚öôÔ∏è Configuration‚Äã","type":1,"pageTitle":"üîç SonarQube Community + Branch Plugin","url":"/docs/tools/sonarqube#Ô∏è-configuration","content":" ","version":"Next","tagName":"h2"},{"title":"1. Premi√®re connexion‚Äã","type":1,"pageTitle":"üîç SonarQube Community + Branch Plugin","url":"/docs/tools/sonarqube#1-premi√®re-connexion","content":" # URL : http://localhost:9000 # Login : admin / admin # ‚Üí Changer le mot de passe   ","version":"Next","tagName":"h3"},{"title":"2. Cr√©er un projet‚Äã","type":1,"pageTitle":"üîç SonarQube Community + Branch Plugin","url":"/docs/tools/sonarqube#2-cr√©er-un-projet","content":" Administration ‚Üí Projects ‚Üí Create ProjectProject key : my-projectDisplay name : My ProjectMain branch : main  ","version":"Next","tagName":"h3"},{"title":"3. G√©n√©rer un token‚Äã","type":1,"pageTitle":"üîç SonarQube Community + Branch Plugin","url":"/docs/tools/sonarqube#3-g√©n√©rer-un-token","content":" My Account ‚Üí Security ‚Üí Generate TokensName : gitlab-ci ou github-actionsType : Global Analysis TokenExpires in : No expirationGenerate ‚Üí Copier le token  ","version":"Next","tagName":"h3"},{"title":"4. Configuration GitLab/GitHub‚Äã","type":1,"pageTitle":"üîç SonarQube Community + Branch Plugin","url":"/docs/tools/sonarqube#4-configuration-gitlabgithub","content":" GitLab :  Administration ‚Üí Configuration ‚Üí ALMGitLab ‚Üí Create configurationConfiguration name : GitLabGitLab URL : https://gitlab.comPersonal Access Token : Token GitLab avec scope api  GitHub :  Administration ‚Üí Configuration ‚Üí ALMGitHub ‚Üí Create configurationGitHub App : Cr√©er une GitHub App avec permissions  ","version":"Next","tagName":"h3"},{"title":"üîÑ Int√©gration CI/CD‚Äã","type":1,"pageTitle":"üîç SonarQube Community + Branch Plugin","url":"/docs/tools/sonarqube#-int√©gration-cicd","content":" ","version":"Next","tagName":"h2"},{"title":"GitLab CI‚Äã","type":1,"pageTitle":"üîç SonarQube Community + Branch Plugin","url":"/docs/tools/sonarqube#gitlab-ci","content":" # .gitlab-ci.yml stages: - sonar variables: SONAR_HOST_URL: &quot;http://sonarqube:9000&quot; SONAR_TOKEN: $SONAR_TOKEN GIT_DEPTH: 0 sonarqube-check: stage: sonar image: name: sonarsource/sonar-scanner-cli:latest entrypoint: [&quot;&quot;] script: - sonar-scanner -Dsonar.projectKey=my-project -Dsonar.sources=. -Dsonar.host.url=$SONAR_HOST_URL -Dsonar.token=$SONAR_TOKEN -Dsonar.branch.name=$CI_COMMIT_REF_NAME only: - branches - merge_requests sonarqube-mr-decoration: stage: sonar image: name: sonarsource/sonar-scanner-cli:latest entrypoint: [&quot;&quot;] script: - sonar-scanner -Dsonar.projectKey=my-project -Dsonar.sources=. -Dsonar.host.url=$SONAR_HOST_URL -Dsonar.token=$SONAR_TOKEN -Dsonar.pullrequest.key=$CI_MERGE_REQUEST_IID -Dsonar.pullrequest.branch=$CI_MERGE_REQUEST_SOURCE_BRANCH_NAME -Dsonar.pullrequest.base=$CI_MERGE_REQUEST_TARGET_BRANCH_NAME -Dsonar.pullrequest.gitlab.projectId=$CI_PROJECT_PATH only: - merge_requests   ","version":"Next","tagName":"h3"},{"title":"Jenkins‚Äã","type":1,"pageTitle":"üîç SonarQube Community + Branch Plugin","url":"/docs/tools/sonarqube#jenkins","content":" pipeline { agent any environment { SONAR_HOST = 'http://sonarqube:9000' SONAR_TOKEN = credentials('sonar-token') } stages { stage('SonarQube Analysis') { steps { script { def scannerHome = tool 'SonarScanner' withSonarQubeEnv('SonarQube') { sh &quot;&quot;&quot; ${scannerHome}/bin/sonar-scanner \\ -Dsonar.projectKey=my-project \\ -Dsonar.sources=. \\ -Dsonar.host.url=${SONAR_HOST} \\ -Dsonar.token=${SONAR_TOKEN} \\ -Dsonar.branch.name=${env.BRANCH_NAME} &quot;&quot;&quot; } } } } } }   ","version":"Next","tagName":"h3"},{"title":"Ligne de commande‚Äã","type":1,"pageTitle":"üîç SonarQube Community + Branch Plugin","url":"/docs/tools/sonarqube#ligne-de-commande","content":" # Scan basique sonar-scanner \\ -Dsonar.projectKey=my-project \\ -Dsonar.sources=. \\ -Dsonar.host.url=http://localhost:9000 \\ -Dsonar.token=$SONAR_TOKEN # Avec branch sonar-scanner \\ -Dsonar.projectKey=my-project \\ -Dsonar.sources=. \\ -Dsonar.host.url=http://localhost:9000 \\ -Dsonar.token=$SONAR_TOKEN \\ -Dsonar.branch.name=feature/my-feature   ","version":"Next","tagName":"h3"},{"title":"üìÅ Configuration g√©n√©rique‚Äã","type":1,"pageTitle":"üîç SonarQube Community + Branch Plugin","url":"/docs/tools/sonarqube#-configuration-g√©n√©rique","content":" ","version":"Next","tagName":"h2"},{"title":"Fichier sonar-project.properties‚Äã","type":1,"pageTitle":"üîç SonarQube Community + Branch Plugin","url":"/docs/tools/sonarqube#fichier-sonar-projectproperties","content":" # Configuration de base (tous langages) sonar.projectKey=my-project sonar.projectName=My Project sonar.projectVersion=1.0 # Chemins sources sonar.sources=src sonar.tests=tests # Exclusions communes sonar.exclusions=\\ **/node_modules/**,\\ **/vendor/**,\\ **/dist/**,\\ **/build/**,\\ **/target/**,\\ **/*.min.js,\\ **/*.generated.* sonar.test.exclusions=\\ **/*Test.*,\\ **/*.spec.*,\\ **/test/**   ","version":"Next","tagName":"h3"},{"title":"Configuration par outil de build‚Äã","type":1,"pageTitle":"üîç SonarQube Community + Branch Plugin","url":"/docs/tools/sonarqube#configuration-par-outil-de-build","content":" Maven (Java)‚Äã  &lt;!-- pom.xml --&gt; &lt;properties&gt; &lt;sonar.projectKey&gt;my-project&lt;/sonar.projectKey&gt; &lt;sonar.host.url&gt;http://localhost:9000&lt;/sonar.host.url&gt; &lt;sonar.coverage.jacoco.xmlReportPaths&gt;target/site/jacoco/jacoco.xml&lt;/sonar.coverage.jacoco.xmlReportPaths&gt; &lt;/properties&gt;   mvn clean verify sonar:sonar -Dsonar.token=$SONAR_TOKEN   Gradle (Java/Kotlin)‚Äã  // build.gradle plugins { id 'org.sonarqube' version '4.4.1.3373' } sonar { properties { property &quot;sonar.projectKey&quot;, &quot;my-project&quot; property &quot;sonar.host.url&quot;, &quot;http://localhost:9000&quot; } }   ./gradlew sonar -Dsonar.token=$SONAR_TOKEN   Composer (PHP)‚Äã  # sonar-project.properties sonar.projectKey=my-project sonar.sources=src,modules sonar.tests=tests sonar.php.coverage.reportPaths=coverage.xml sonar.exclusions=vendor/**   npm (JavaScript/TypeScript)‚Äã  # sonar-project.properties sonar.projectKey=my-project sonar.sources=src sonar.tests=tests sonar.javascript.lcov.reportPaths=coverage/lcov.info sonar.typescript.lcov.reportPaths=coverage/lcov.info sonar.exclusions=node_modules/**,dist/**   Autres langages‚Äã  # Python sonar.python.coverage.reportPaths=coverage.xml # Go sonar.go.coverage.reportPaths=coverage.out # .NET sonar.cs.vscoveragexml.reportsPaths=coverage.xml # Ruby sonar.ruby.coverage.reportPaths=coverage/coverage.xml   ","version":"Next","tagName":"h3"},{"title":"Scan universel avec sonar-scanner‚Äã","type":1,"pageTitle":"üîç SonarQube Community + Branch Plugin","url":"/docs/tools/sonarqube#scan-universel-avec-sonar-scanner","content":" # Installation # Linux wget https://binaries.sonarsource.com/Distribution/sonar-scanner-cli/sonar-scanner-cli-5.0.1.3006-linux.zip unzip sonar-scanner-cli-5.0.1.3006-linux.zip export PATH=$PATH:/path/to/sonar-scanner/bin # macOS brew install sonar-scanner # Docker docker run sonarsource/sonar-scanner-cli sonar-scanner [options] # Scan sonar-scanner -Dsonar.token=$SONAR_TOKEN   ","version":"Next","tagName":"h3"},{"title":"üéØ Configuration avanc√©e‚Äã","type":1,"pageTitle":"üîç SonarQube Community + Branch Plugin","url":"/docs/tools/sonarqube#-configuration-avanc√©e","content":" ","version":"Next","tagName":"h2"},{"title":"Quality Gate‚Äã","type":1,"pageTitle":"üîç SonarQube Community + Branch Plugin","url":"/docs/tools/sonarqube#quality-gate","content":" # Dans SonarQube UI # Quality Gates ‚Üí Create ‚Üí Configure: - Coverage &gt; 80% - Duplicated Lines &lt; 3% - Maintainability Rating = A - Reliability Rating = A - Security Rating = A - Security Hotspots Reviewed &gt; 80%   ","version":"Next","tagName":"h3"},{"title":"Quality Profile‚Äã","type":1,"pageTitle":"üîç SonarQube Community + Branch Plugin","url":"/docs/tools/sonarqube#quality-profile","content":" # Administration ‚Üí Quality Profiles # Cr√©er un profil personnalis√© par langage # Activer/d√©sactiver des r√®gles selon vos besoins   ","version":"Next","tagName":"h3"},{"title":"Exclusions globales‚Äã","type":1,"pageTitle":"üîç SonarQube Community + Branch Plugin","url":"/docs/tools/sonarqube#exclusions-globales","content":" # sonar-project.properties sonar.exclusions=\\ **/node_modules/**,\\ **/vendor/**,\\ **/dist/**,\\ **/build/**,\\ **/target/**,\\ **/*.min.js,\\ **/*.generated.* sonar.test.exclusions=\\ **/*Test.java,\\ **/*.spec.ts,\\ **/test/**   ","version":"Next","tagName":"h3"},{"title":"üîê S√©curit√©‚Äã","type":1,"pageTitle":"üîç SonarQube Community + Branch Plugin","url":"/docs/tools/sonarqube#-s√©curit√©","content":" ","version":"Next","tagName":"h2"},{"title":"SSL/TLS‚Äã","type":1,"pageTitle":"üîç SonarQube Community + Branch Plugin","url":"/docs/tools/sonarqube#ssltls","content":" # docker-compose.yml services: sonarqube: environment: - SONAR_WEB_HTTPS_ENABLED=true - SONAR_WEB_HTTPS_KEYSTORE_PATH=/opt/sonarqube/certs/keystore.p12 - SONAR_WEB_HTTPS_KEYSTORE_PASSWORD=changeit volumes: - ./certs:/opt/sonarqube/certs   ","version":"Next","tagName":"h3"},{"title":"Authentification LDAP‚Äã","type":1,"pageTitle":"üîç SonarQube Community + Branch Plugin","url":"/docs/tools/sonarqube#authentification-ldap","content":" # sonar.properties sonar.security.realm=LDAP ldap.url=ldap://ldap.example.com:389 ldap.bindDn=cn=sonar,ou=users,dc=example,dc=com ldap.bindPassword=secret ldap.user.baseDn=ou=users,dc=example,dc=com   ","version":"Next","tagName":"h3"},{"title":"üìä Webhooks et int√©grations‚Äã","type":1,"pageTitle":"üîç SonarQube Community + Branch Plugin","url":"/docs/tools/sonarqube#-webhooks-et-int√©grations","content":" ","version":"Next","tagName":"h2"},{"title":"GitLab Webhook‚Äã","type":1,"pageTitle":"üîç SonarQube Community + Branch Plugin","url":"/docs/tools/sonarqube#gitlab-webhook","content":" # Administration ‚Üí Configuration ‚Üí Webhooks # URL: https://gitlab.com/api/v4/projects/{project_id}/statuses/{commit_sha} # Secret: Token GitLab   ","version":"Next","tagName":"h3"},{"title":"Alertes email‚Äã","type":1,"pageTitle":"üîç SonarQube Community + Branch Plugin","url":"/docs/tools/sonarqube#alertes-email","content":" # Administration ‚Üí Configuration ‚Üí Email SMTP host: smtp.gmail.com SMTP port: 587 SMTP username: your-email@gmail.com From address: sonarqube@example.com   ","version":"Next","tagName":"h3"},{"title":"üÜò Troubleshooting‚Äã","type":1,"pageTitle":"üîç SonarQube Community + Branch Plugin","url":"/docs/tools/sonarqube#-troubleshooting","content":" ","version":"Next","tagName":"h2"},{"title":"Plugin non charg√©‚Äã","type":1,"pageTitle":"üîç SonarQube Community + Branch Plugin","url":"/docs/tools/sonarqube#plugin-non-charg√©","content":" # V√©rifier les logs docker logs sonarqube # V√©rifier le plugin ls -la /opt/sonarqube/extensions/plugins/ # Restart docker-compose restart sonarqube   ","version":"Next","tagName":"h3"},{"title":"Erreur de connexion DB‚Äã","type":1,"pageTitle":"üîç SonarQube Community + Branch Plugin","url":"/docs/tools/sonarqube#erreur-de-connexion-db","content":" # V√©rifier PostgreSQL docker logs sonarqube-db # Recreate docker-compose down -v docker-compose up -d   ","version":"Next","tagName":"h3"},{"title":"Branch analysis ne fonctionne pas‚Äã","type":1,"pageTitle":"üîç SonarQube Community + Branch Plugin","url":"/docs/tools/sonarqube#branch-analysis-ne-fonctionne-pas","content":" # V√©rifier la version du plugin # Plugin version &gt;= 1.14.0 requis pour SonarQube 10.x # V√©rifier les param√®tres -Dsonar.branch.name=$CI_COMMIT_REF_NAME   ","version":"Next","tagName":"h3"},{"title":"MR decoration ne s'affiche pas‚Äã","type":1,"pageTitle":"üîç SonarQube Community + Branch Plugin","url":"/docs/tools/sonarqube#mr-decoration-ne-saffiche-pas","content":" # V√©rifier la configuration ALM # Administration ‚Üí Configuration ‚Üí ALM ‚Üí GitLab/GitHub # V√©rifier le token # Token doit avoir les permissions api/repo   ","version":"Next","tagName":"h3"},{"title":"üéØ Meilleures pratiques‚Äã","type":1,"pageTitle":"üîç SonarQube Community + Branch Plugin","url":"/docs/tools/sonarqube#-meilleures-pratiques","content":" ","version":"Next","tagName":"h2"},{"title":"1. Scanner √† chaque commit‚Äã","type":1,"pageTitle":"üîç SonarQube Community + Branch Plugin","url":"/docs/tools/sonarqube#1-scanner-√†-chaque-commit","content":" on: [push, pull_request]   ","version":"Next","tagName":"h3"},{"title":"2. Quality Gate obligatoire‚Äã","type":1,"pageTitle":"üîç SonarQube Community + Branch Plugin","url":"/docs/tools/sonarqube#2-quality-gate-obligatoire","content":" # Bloquer les MR si Quality Gate failed allow_failure: false   ","version":"Next","tagName":"h3"},{"title":"3. Coverage minimale‚Äã","type":1,"pageTitle":"üîç SonarQube Community + Branch Plugin","url":"/docs/tools/sonarqube#3-coverage-minimale","content":" sonar.coverage.minimum=80   ","version":"Next","tagName":"h3"},{"title":"4. Exclure les fichiers g√©n√©r√©s‚Äã","type":1,"pageTitle":"üîç SonarQube Community + Branch Plugin","url":"/docs/tools/sonarqube#4-exclure-les-fichiers-g√©n√©r√©s","content":" sonar.exclusions=**/*.generated.*,**/node_modules/**   ","version":"Next","tagName":"h3"},{"title":"5. Maintenance r√©guli√®re‚Äã","type":1,"pageTitle":"üîç SonarQube Community + Branch Plugin","url":"/docs/tools/sonarqube#5-maintenance-r√©guli√®re","content":" # Backup DB hebdomadaire # Nettoyage des anciennes analyses (&gt; 90 jours) # Mise √† jour du plugin   ","version":"Next","tagName":"h3"},{"title":"üìà M√©triques importantes‚Äã","type":1,"pageTitle":"üîç SonarQube Community + Branch Plugin","url":"/docs/tools/sonarqube#-m√©triques-importantes","content":" # √Ä surveiller dans SonarQube - Code Coverage: &gt; 80% - Duplicated Lines: &lt; 3% - Technical Debt: &lt; 5 days - Security Hotspots: 0 - Bugs: 0 - Vulnerabilities: 0 - Code Smells: &lt; 10   ","version":"Next","tagName":"h2"},{"title":"üîÑ Mise √† jour‚Äã","type":1,"pageTitle":"üîç SonarQube Community + Branch Plugin","url":"/docs/tools/sonarqube#-mise-√†-jour","content":" # 1. Backup docker-compose exec db pg_dump -U sonar sonar &gt; backup.sql # 2. Arr√™t docker-compose down # 3. Mise √† jour docker-compose pull # 4. Red√©marrage docker-compose up -d   ","version":"Next","tagName":"h2"},{"title":"üìö Ressources‚Äã","type":1,"pageTitle":"üîç SonarQube Community + Branch Plugin","url":"/docs/tools/sonarqube#-ressources","content":" SonarQube Community Branch PluginSonarQube DocumentationSonarScanner CLI    SonarQube analyse maintenant vos branches et d√©core vos MR/PR automatiquement ! üîç‚ú® ","version":"Next","tagName":"h2"},{"title":"üîÑ Renovate - Automatisation des d√©pendances","type":0,"sectionRef":"#","url":"/docs/tools/renovate","content":"","keywords":"","version":"Next"},{"title":"üéØ Pourquoi Renovate ?‚Äã","type":1,"pageTitle":"üîÑ Renovate - Automatisation des d√©pendances","url":"/docs/tools/renovate#-pourquoi-renovate-","content":" ‚úÖ Automatique : Cr√©ation automatique de MR/PR‚úÖ Multi-langage : Java, PHP, Node.js, Python, Docker, Terraform, Go...‚úÖ Flexible : Configuration fine par projet‚úÖ S√©curit√© : D√©tection de vuln√©rabilit√©s‚úÖ Gratuit : Open-source  ","version":"Next","tagName":"h2"},{"title":"üöÄ Installation‚Äã","type":1,"pageTitle":"üîÑ Renovate - Automatisation des d√©pendances","url":"/docs/tools/renovate#-installation","content":" ","version":"Next","tagName":"h2"},{"title":"GitLab (Recommand√©)‚Äã","type":1,"pageTitle":"üîÑ Renovate - Automatisation des d√©pendances","url":"/docs/tools/renovate#gitlab-recommand√©","content":" # .gitlab-ci.yml include: - project: 'renovate-bot/renovate-runner' file: '/templates/renovate.gitlab-ci.yml' variables: RENOVATE_TOKEN: $GITLAB_TOKEN RENOVATE_PLATFORM: gitlab   ","version":"Next","tagName":"h3"},{"title":"Self-hosted‚Äã","type":1,"pageTitle":"üîÑ Renovate - Automatisation des d√©pendances","url":"/docs/tools/renovate#self-hosted","content":" # Docker docker run -e RENOVATE_TOKEN=$GITLAB_TOKEN \\ -e RENOVATE_PLATFORM=gitlab \\ renovate/renovate # npm npm install -g renovate renovate --platform=gitlab --token=$GITLAB_TOKEN   ","version":"Next","tagName":"h3"},{"title":"üìù Configuration de base‚Äã","type":1,"pageTitle":"üîÑ Renovate - Automatisation des d√©pendances","url":"/docs/tools/renovate#-configuration-de-base","content":" { &quot;$schema&quot;: &quot;https://docs.renovatebot.com/renovate-schema.json&quot;, &quot;extends&quot;: [&quot;config:recommended&quot;], &quot;schedule&quot;: [&quot;before 3am on Monday&quot;], &quot;timezone&quot;: &quot;Europe/Paris&quot;, &quot;labels&quot;: [&quot;dependencies&quot;], &quot;assignees&quot;: [&quot;@devops-team&quot;], &quot;prConcurrentLimit&quot;: 5, &quot;prHourlyLimit&quot;: 2, &quot;platformAutomerge&quot;: true }   ","version":"Next","tagName":"h2"},{"title":"üîß Configuration par langage‚Äã","type":1,"pageTitle":"üîÑ Renovate - Automatisation des d√©pendances","url":"/docs/tools/renovate#-configuration-par-langage","content":" ","version":"Next","tagName":"h2"},{"title":"Java/Maven‚Äã","type":1,"pageTitle":"üîÑ Renovate - Automatisation des d√©pendances","url":"/docs/tools/renovate#javamaven","content":" { &quot;packageRules&quot;: [ { &quot;matchManagers&quot;: [&quot;maven&quot;], &quot;matchUpdateTypes&quot;: [&quot;minor&quot;, &quot;patch&quot;], &quot;groupName&quot;: &quot;Spring Boot&quot;, &quot;matchPackagePatterns&quot;: [&quot;^org.springframework.boot&quot;], &quot;schedule&quot;: [&quot;before 3am on Monday&quot;] }, { &quot;matchManagers&quot;: [&quot;maven&quot;], &quot;matchUpdateTypes&quot;: [&quot;major&quot;], &quot;enabled&quot;: false }, { &quot;matchManagers&quot;: [&quot;maven&quot;], &quot;matchDepTypes&quot;: [&quot;test&quot;], &quot;automerge&quot;: true } ] }   ","version":"Next","tagName":"h3"},{"title":"PHP/Composer (Drupal, Symfony, Laravel)‚Äã","type":1,"pageTitle":"üîÑ Renovate - Automatisation des d√©pendances","url":"/docs/tools/renovate#phpcomposer-drupal-symfony-laravel","content":" { &quot;packageRules&quot;: [ { &quot;matchManagers&quot;: [&quot;composer&quot;], &quot;matchPackagePatterns&quot;: [&quot;^drupal/&quot;], &quot;groupName&quot;: &quot;Drupal modules&quot;, &quot;schedule&quot;: [&quot;before 3am on Tuesday&quot;] }, { &quot;matchManagers&quot;: [&quot;composer&quot;], &quot;matchDepTypes&quot;: [&quot;require-dev&quot;], &quot;automerge&quot;: true } ] }   ","version":"Next","tagName":"h3"},{"title":"Node.js/npm‚Äã","type":1,"pageTitle":"üîÑ Renovate - Automatisation des d√©pendances","url":"/docs/tools/renovate#nodejsnpm","content":" { &quot;packageRules&quot;: [ { &quot;matchManagers&quot;: [&quot;npm&quot;], &quot;matchUpdateTypes&quot;: [&quot;minor&quot;, &quot;patch&quot;], &quot;groupName&quot;: &quot;npm dependencies&quot;, &quot;automerge&quot;: true }, { &quot;matchManagers&quot;: [&quot;npm&quot;], &quot;matchDepTypes&quot;: [&quot;devDependencies&quot;], &quot;automerge&quot;: true } ] }   ","version":"Next","tagName":"h3"},{"title":"Docker‚Äã","type":1,"pageTitle":"üîÑ Renovate - Automatisation des d√©pendances","url":"/docs/tools/renovate#docker","content":" { &quot;docker&quot;: { &quot;enabled&quot;: true, &quot;major&quot;: { &quot;enabled&quot;: false } }, &quot;packageRules&quot;: [ { &quot;matchDatasources&quot;: [&quot;docker&quot;], &quot;matchPackageNames&quot;: [&quot;eclipse-temurin&quot;, &quot;maven&quot;, &quot;php&quot;, &quot;node&quot;], &quot;groupName&quot;: &quot;Base images&quot;, &quot;schedule&quot;: [&quot;before 3am on Wednesday&quot;] } ] }   ","version":"Next","tagName":"h3"},{"title":"üéØ Configuration multi-projet‚Äã","type":1,"pageTitle":"üîÑ Renovate - Automatisation des d√©pendances","url":"/docs/tools/renovate#-configuration-multi-projet","content":" ","version":"Next","tagName":"h2"},{"title":"Configuration globale‚Äã","type":1,"pageTitle":"üîÑ Renovate - Automatisation des d√©pendances","url":"/docs/tools/renovate#configuration-globale","content":" { &quot;$schema&quot;: &quot;https://docs.renovatebot.com/renovate-schema.json&quot;, &quot;extends&quot;: [&quot;config:recommended&quot;], &quot;timezone&quot;: &quot;Europe/Paris&quot;, &quot;schedule&quot;: [&quot;before 3am on Monday&quot;], &quot;labels&quot;: [&quot;dependencies&quot;], &quot;prConcurrentLimit&quot;: 5, &quot;prHourlyLimit&quot;: 2, &quot;packageRules&quot;: [ { &quot;matchUpdateTypes&quot;: [&quot;minor&quot;, &quot;patch&quot;], &quot;groupName&quot;: &quot;All non-major updates&quot;, &quot;automerge&quot;: true, &quot;automergeType&quot;: &quot;pr&quot; }, { &quot;matchUpdateTypes&quot;: [&quot;major&quot;], &quot;enabled&quot;: false, &quot;description&quot;: &quot;Manual approval for major updates&quot; }, { &quot;matchDepTypes&quot;: [&quot;devDependencies&quot;, &quot;test&quot;], &quot;automerge&quot;: true } ], &quot;vulnerabilityAlerts&quot;: { &quot;enabled&quot;: true, &quot;labels&quot;: [&quot;security&quot;], &quot;assignees&quot;: [&quot;@security-team&quot;] } }   ","version":"Next","tagName":"h3"},{"title":"Par stack technologique‚Äã","type":1,"pageTitle":"üîÑ Renovate - Automatisation des d√©pendances","url":"/docs/tools/renovate#par-stack-technologique","content":" { &quot;packageRules&quot;: [ { &quot;matchManagers&quot;: [&quot;maven&quot;], &quot;matchPackagePatterns&quot;: [&quot;^org.springframework&quot;], &quot;groupName&quot;: &quot;Spring Framework&quot; }, { &quot;matchManagers&quot;: [&quot;composer&quot;], &quot;matchPackagePatterns&quot;: [&quot;^drupal/&quot;], &quot;groupName&quot;: &quot;Drupal modules&quot; }, { &quot;matchManagers&quot;: [&quot;npm&quot;], &quot;matchPackagePatterns&quot;: [&quot;^@angular/&quot;], &quot;groupName&quot;: &quot;Angular&quot; }, { &quot;matchDatasources&quot;: [&quot;docker&quot;], &quot;groupName&quot;: &quot;Docker images&quot; } ] }   ","version":"Next","tagName":"h3"},{"title":"üîí S√©curit√©‚Äã","type":1,"pageTitle":"üîÑ Renovate - Automatisation des d√©pendances","url":"/docs/tools/renovate#-s√©curit√©","content":" ","version":"Next","tagName":"h2"},{"title":"Vuln√©rabilit√©s en priorit√©‚Äã","type":1,"pageTitle":"üîÑ Renovate - Automatisation des d√©pendances","url":"/docs/tools/renovate#vuln√©rabilit√©s-en-priorit√©","content":" { &quot;vulnerabilityAlerts&quot;: { &quot;enabled&quot;: true, &quot;labels&quot;: [&quot;security&quot;, &quot;vulnerability&quot;], &quot;assignees&quot;: [&quot;@security-team&quot;], &quot;prPriority&quot;: 10 }, &quot;osvVulnerabilityAlerts&quot;: true, &quot;packageRules&quot;: [ { &quot;matchUpdateTypes&quot;: [&quot;patch&quot;], &quot;matchCurrentVersion&quot;: &quot;!/^0/&quot;, &quot;labels&quot;: [&quot;security-patch&quot;] } ] }   ","version":"Next","tagName":"h3"},{"title":"Tests obligatoires avant merge‚Äã","type":1,"pageTitle":"üîÑ Renovate - Automatisation des d√©pendances","url":"/docs/tools/renovate#tests-obligatoires-avant-merge","content":" { &quot;prCreation&quot;: &quot;not-pending&quot;, &quot;packageRules&quot;: [ { &quot;matchPackagePatterns&quot;: [&quot;*&quot;], &quot;stabilityDays&quot;: 3, &quot;minimumReleaseAge&quot;: &quot;3 days&quot;, &quot;requiredStatusChecks&quot;: [ &quot;ci/build&quot;, &quot;ci/test&quot;, &quot;security/trivy&quot; ] } ] }   ","version":"Next","tagName":"h3"},{"title":"üîÑ Int√©gration GitLab CI‚Äã","type":1,"pageTitle":"üîÑ Renovate - Automatisation des d√©pendances","url":"/docs/tools/renovate#-int√©gration-gitlab-ci","content":" ","version":"Next","tagName":"h2"},{"title":"Pipeline Renovate‚Äã","type":1,"pageTitle":"üîÑ Renovate - Automatisation des d√©pendances","url":"/docs/tools/renovate#pipeline-renovate","content":" # .gitlab-ci.yml stages: - dependencies renovate: stage: dependencies image: renovate/renovate:latest script: - renovate --platform=gitlab --token=$GITLAB_TOKEN only: - schedules variables: RENOVATE_BASE_BRANCHES: main RENOVATE_GIT_AUTHOR: &quot;Renovate Bot &lt;bot@renovateapp.com&gt;&quot; LOG_LEVEL: info # Validation de la config renovate-validate: stage: dependencies image: renovate/renovate:latest script: - renovate-config-validator only: changes: - renovate.json - .gitlab/renovate.json   ","version":"Next","tagName":"h3"},{"title":"Configuration des schedules‚Äã","type":1,"pageTitle":"üîÑ Renovate - Automatisation des d√©pendances","url":"/docs/tools/renovate#configuration-des-schedules","content":" # Dans GitLab CI/CD &gt; Schedules # Description: Renovate weekly run # Interval: 0 2 * * 1 (Monday 2 AM) # Target branch: main # Variables: # RENOVATE_TOKEN: $GITLAB_TOKEN   ","version":"Next","tagName":"h3"},{"title":"üìä Dashboard et reporting‚Äã","type":1,"pageTitle":"üîÑ Renovate - Automatisation des d√©pendances","url":"/docs/tools/renovate#-dashboard-et-reporting","content":" ","version":"Next","tagName":"h2"},{"title":"Dependency Dashboard‚Äã","type":1,"pageTitle":"üîÑ Renovate - Automatisation des d√©pendances","url":"/docs/tools/renovate#dependency-dashboard","content":" { &quot;dependencyDashboard&quot;: true, &quot;dependencyDashboardTitle&quot;: &quot;üìä Dependency Updates&quot;, &quot;dependencyDashboardLabels&quot;: [&quot;dependencies&quot;], &quot;dependencyDashboardFooter&quot;: &quot;Managed by Renovate ü§ñ&quot; }   ","version":"Next","tagName":"h3"},{"title":"Groupement intelligent‚Äã","type":1,"pageTitle":"üîÑ Renovate - Automatisation des d√©pendances","url":"/docs/tools/renovate#groupement-intelligent","content":" { &quot;packageRules&quot;: [ { &quot;groupName&quot;: &quot;All minor and patch&quot;, &quot;matchUpdateTypes&quot;: [&quot;minor&quot;, &quot;patch&quot;], &quot;schedule&quot;: [&quot;before 3am on Monday&quot;] }, { &quot;groupName&quot;: &quot;Test dependencies&quot;, &quot;matchDepTypes&quot;: [&quot;test&quot;, &quot;devDependencies&quot;], &quot;automerge&quot;: true }, { &quot;groupName&quot;: &quot;Security updates&quot;, &quot;matchUpdateTypes&quot;: [&quot;patch&quot;], &quot;matchCurrentVersion&quot;: &quot;!/^0/&quot;, &quot;labels&quot;: [&quot;security&quot;] } ] }   ","version":"Next","tagName":"h3"},{"title":"üéØ Exemples complets‚Äã","type":1,"pageTitle":"üîÑ Renovate - Automatisation des d√©pendances","url":"/docs/tools/renovate#-exemples-complets","content":" ","version":"Next","tagName":"h2"},{"title":"Java Spring Boot‚Äã","type":1,"pageTitle":"üîÑ Renovate - Automatisation des d√©pendances","url":"/docs/tools/renovate#java-spring-boot","content":" { &quot;$schema&quot;: &quot;https://docs.renovatebot.com/renovate-schema.json&quot;, &quot;extends&quot;: [&quot;config:recommended&quot;], &quot;labels&quot;: [&quot;dependencies&quot;, &quot;java&quot;], &quot;schedule&quot;: [&quot;before 3am on Monday&quot;], &quot;packageRules&quot;: [ { &quot;matchManagers&quot;: [&quot;maven&quot;], &quot;matchPackagePatterns&quot;: [&quot;^org.springframework&quot;], &quot;groupName&quot;: &quot;Spring Framework&quot; }, { &quot;matchManagers&quot;: [&quot;maven&quot;], &quot;matchUpdateTypes&quot;: [&quot;major&quot;], &quot;enabled&quot;: false }, { &quot;matchManagers&quot;: [&quot;maven&quot;], &quot;matchDepTypes&quot;: [&quot;test&quot;], &quot;automerge&quot;: true } ], &quot;maven&quot;: { &quot;fileMatch&quot;: [&quot;(^|/)pom\\\\.xml$&quot;] } }   ","version":"Next","tagName":"h3"},{"title":"Drupal‚Äã","type":1,"pageTitle":"üîÑ Renovate - Automatisation des d√©pendances","url":"/docs/tools/renovate#drupal","content":" { &quot;$schema&quot;: &quot;https://docs.renovatebot.com/renovate-schema.json&quot;, &quot;extends&quot;: [&quot;config:recommended&quot;], &quot;labels&quot;: [&quot;dependencies&quot;, &quot;drupal&quot;], &quot;schedule&quot;: [&quot;before 3am on Tuesday&quot;], &quot;packageRules&quot;: [ { &quot;matchManagers&quot;: [&quot;composer&quot;], &quot;matchPackageNames&quot;: [&quot;drupal/core-recommended&quot;], &quot;groupName&quot;: &quot;Drupal Core&quot;, &quot;major&quot;: { &quot;enabled&quot;: false } }, { &quot;matchManagers&quot;: [&quot;composer&quot;], &quot;matchPackagePatterns&quot;: [&quot;^drupal/&quot;], &quot;excludePackageNames&quot;: [&quot;drupal/core-recommended&quot;], &quot;groupName&quot;: &quot;Drupal Modules&quot; } ], &quot;postUpgradeTasks&quot;: { &quot;commands&quot;: [ &quot;composer normalize&quot;, &quot;drush updatedb --no-interaction&quot; ] } }   ","version":"Next","tagName":"h3"},{"title":"Node.js/Angular‚Äã","type":1,"pageTitle":"üîÑ Renovate - Automatisation des d√©pendances","url":"/docs/tools/renovate#nodejsangular","content":" { &quot;$schema&quot;: &quot;https://docs.renovatebot.com/renovate-schema.json&quot;, &quot;extends&quot;: [&quot;config:recommended&quot;], &quot;labels&quot;: [&quot;dependencies&quot;, &quot;nodejs&quot;], &quot;packageRules&quot;: [ { &quot;matchManagers&quot;: [&quot;npm&quot;], &quot;matchPackagePatterns&quot;: [&quot;^@angular/&quot;], &quot;groupName&quot;: &quot;Angular&quot; }, { &quot;matchManagers&quot;: [&quot;npm&quot;], &quot;matchUpdateTypes&quot;: [&quot;minor&quot;, &quot;patch&quot;], &quot;automerge&quot;: true }, { &quot;matchManagers&quot;: [&quot;npm&quot;], &quot;matchDepTypes&quot;: [&quot;devDependencies&quot;], &quot;automerge&quot;: true } ] }   ","version":"Next","tagName":"h3"},{"title":"üîß Configuration avanc√©e‚Äã","type":1,"pageTitle":"üîÑ Renovate - Automatisation des d√©pendances","url":"/docs/tools/renovate#-configuration-avanc√©e","content":" ","version":"Next","tagName":"h2"},{"title":"Auto-merge s√©lectif‚Äã","type":1,"pageTitle":"üîÑ Renovate - Automatisation des d√©pendances","url":"/docs/tools/renovate#auto-merge-s√©lectif","content":" { &quot;packageRules&quot;: [ { &quot;matchUpdateTypes&quot;: [&quot;patch&quot;], &quot;automerge&quot;: true, &quot;automergeType&quot;: &quot;pr&quot;, &quot;automergeStrategy&quot;: &quot;squash&quot;, &quot;platformAutomerge&quot;: true, &quot;requiredStatusChecks&quot;: [&quot;ci/test&quot;] } ] }   ","version":"Next","tagName":"h3"},{"title":"Post-upgrade tasks‚Äã","type":1,"pageTitle":"üîÑ Renovate - Automatisation des d√©pendances","url":"/docs/tools/renovate#post-upgrade-tasks","content":" { &quot;postUpgradeTasks&quot;: { &quot;commands&quot;: [ &quot;npm run lint --fix&quot;, &quot;npm run format&quot;, &quot;npm test&quot; ], &quot;fileFilters&quot;: [&quot;**/*&quot;], &quot;executionMode&quot;: &quot;branch&quot; } }   ","version":"Next","tagName":"h3"},{"title":"Regex Manager personnalis√©‚Äã","type":1,"pageTitle":"üîÑ Renovate - Automatisation des d√©pendances","url":"/docs/tools/renovate#regex-manager-personnalis√©","content":" { &quot;regexManagers&quot;: [ { &quot;fileMatch&quot;: [&quot;^Dockerfile$&quot;], &quot;matchStrings&quot;: [ &quot;# renovate: datasource=(?&lt;datasource&gt;.*?) depName=(?&lt;depName&gt;.*?)\\\\s+ARG .*?_VERSION=(?&lt;currentValue&gt;.*)\\\\s&quot; ], &quot;datasourceTemplate&quot;: &quot;docker&quot; } ] }   ","version":"Next","tagName":"h3"},{"title":"üÜò Troubleshooting‚Äã","type":1,"pageTitle":"üîÑ Renovate - Automatisation des d√©pendances","url":"/docs/tools/renovate#-troubleshooting","content":" ","version":"Next","tagName":"h2"},{"title":"Renovate ne cr√©e pas de MR‚Äã","type":1,"pageTitle":"üîÑ Renovate - Automatisation des d√©pendances","url":"/docs/tools/renovate#renovate-ne-cr√©e-pas-de-mr","content":" { &quot;logLevel&quot;: &quot;debug&quot;, &quot;printConfig&quot;: true, &quot;dryRun&quot;: &quot;full&quot; }   ","version":"Next","tagName":"h3"},{"title":"Trop de MR‚Äã","type":1,"pageTitle":"üîÑ Renovate - Automatisation des d√©pendances","url":"/docs/tools/renovate#trop-de-mr","content":" { &quot;prConcurrentLimit&quot;: 3, &quot;prHourlyLimit&quot;: 1, &quot;branchConcurrentLimit&quot;: 5 }   ","version":"Next","tagName":"h3"},{"title":"Erreurs de merge‚Äã","type":1,"pageTitle":"üîÑ Renovate - Automatisation des d√©pendances","url":"/docs/tools/renovate#erreurs-de-merge","content":" { &quot;rebaseWhen&quot;: &quot;behind-base-branch&quot;, &quot;conflictResolution&quot;: &quot;auto&quot; }   ","version":"Next","tagName":"h3"},{"title":"üìà M√©triques‚Äã","type":1,"pageTitle":"üîÑ Renovate - Automatisation des d√©pendances","url":"/docs/tools/renovate#-m√©triques","content":" ","version":"Next","tagName":"h2"},{"title":"Statistiques Renovate‚Äã","type":1,"pageTitle":"üîÑ Renovate - Automatisation des d√©pendances","url":"/docs/tools/renovate#statistiques-renovate","content":" # Nombre de MR par semaine renovate --platform=gitlab --dry-run=true # Temps moyen de merge # Via GitLab Merge Request Analytics   ","version":"Next","tagName":"h3"},{"title":"üéØ Meilleures pratiques‚Äã","type":1,"pageTitle":"üîÑ Renovate - Automatisation des d√©pendances","url":"/docs/tools/renovate#-meilleures-pratiques","content":" ","version":"Next","tagName":"h2"},{"title":"1. Schedule adapt√©‚Äã","type":1,"pageTitle":"üîÑ Renovate - Automatisation des d√©pendances","url":"/docs/tools/renovate#1-schedule-adapt√©","content":" { &quot;schedule&quot;: [&quot;before 3am on Monday&quot;], &quot;timezone&quot;: &quot;Europe/Paris&quot; }   ","version":"Next","tagName":"h3"},{"title":"2. Limiter les MR‚Äã","type":1,"pageTitle":"üîÑ Renovate - Automatisation des d√©pendances","url":"/docs/tools/renovate#2-limiter-les-mr","content":" { &quot;prConcurrentLimit&quot;: 5, &quot;prHourlyLimit&quot;: 2 }   ","version":"Next","tagName":"h3"},{"title":"3. Grouper les updates‚Äã","type":1,"pageTitle":"üîÑ Renovate - Automatisation des d√©pendances","url":"/docs/tools/renovate#3-grouper-les-updates","content":" { &quot;packageRules&quot;: [ { &quot;groupName&quot;: &quot;All non-major&quot;, &quot;matchUpdateTypes&quot;: [&quot;minor&quot;, &quot;patch&quot;] } ] }   ","version":"Next","tagName":"h3"},{"title":"4. Auto-merge s√©curis√©‚Äã","type":1,"pageTitle":"üîÑ Renovate - Automatisation des d√©pendances","url":"/docs/tools/renovate#4-auto-merge-s√©curis√©","content":" { &quot;packageRules&quot;: [ { &quot;automerge&quot;: true, &quot;requiredStatusChecks&quot;: [&quot;ci/test&quot;, &quot;security/scan&quot;] } ] }   ","version":"Next","tagName":"h3"},{"title":"5. Stabilit√© avant merge‚Äã","type":1,"pageTitle":"üîÑ Renovate - Automatisation des d√©pendances","url":"/docs/tools/renovate#5-stabilit√©-avant-merge","content":" { &quot;stabilityDays&quot;: 3, &quot;minimumReleaseAge&quot;: &quot;3 days&quot; }   ","version":"Next","tagName":"h3"},{"title":"üìö Ressources‚Äã","type":1,"pageTitle":"üîÑ Renovate - Automatisation des d√©pendances","url":"/docs/tools/renovate#-ressources","content":" Documentation RenovateConfiguration OptionsPresetsGitLab Integration    Renovate maintient automatiquement vos d√©pendances √† jour et s√©curis√©es ! üîÑ‚ú® ","version":"Next","tagName":"h2"},{"title":"OWASP Top 10","type":0,"sectionRef":"#","url":"/docs/security/owasp/owasp-top-10","content":"","keywords":"","version":"Next"},{"title":"Introduction‚Äã","type":1,"pageTitle":"OWASP Top 10","url":"/docs/security/owasp/owasp-top-10#introduction","content":" L'OWASP Top 10 est la liste des 10 risques de s√©curit√© les plus critiques pour les applications web (version 2021).  ","version":"Next","tagName":"h2"},{"title":"Vue d'ensemble‚Äã","type":1,"pageTitle":"OWASP Top 10","url":"/docs/security/owasp/owasp-top-10#vue-densemble","content":" Rang\tRisque\tImpactA01\tBroken Access Control\tüî¥ Critique A02\tCryptographic Failures\tüî¥ Critique A03\tInjection\tüî¥ Critique A04\tInsecure Design\tüü† √âlev√© A05\tSecurity Misconfiguration\tüü† √âlev√© A06\tVulnerable Components\tüü† √âlev√© A07\tAuthentication Failures\tüî¥ Critique A08\tSoftware &amp; Data Integrity\tüü† √âlev√© A09\tSecurity Logging Failures\tüü° Moyen A10\tServer-Side Request Forgery\tüü† √âlev√©    ","version":"Next","tagName":"h2"},{"title":"A01 - Broken Access Control‚Äã","type":1,"pageTitle":"OWASP Top 10","url":"/docs/security/owasp/owasp-top-10#a01---broken-access-control","content":" ","version":"Next","tagName":"h2"},{"title":"Probl√®me‚Äã","type":1,"pageTitle":"OWASP Top 10","url":"/docs/security/owasp/owasp-top-10#probl√®me","content":" Utilisateurs acc√©dant √† des ressources non autoris√©es.  Exemples : Modification d'ID dans l'URL, √©l√©vation de privil√®ges, bypass d'autorisations.  ","version":"Next","tagName":"h3"},{"title":"O√π s√©curiser ?‚Äã","type":1,"pageTitle":"OWASP Top 10","url":"/docs/security/owasp/owasp-top-10#o√π-s√©curiser-","content":"   üî¥ Applicatif (Prioritaire)‚Äã  Spring Boot :  // ‚ùå Mauvais @GetMapping(&quot;/users/{id}&quot;) public User getUser(@PathVariable Long id) { return userService.findById(id); } // ‚úÖ Bon @GetMapping(&quot;/users/{id}&quot;) @PreAuthorize(&quot;@userSecurity.canAccessUser(authentication, #id)&quot;) public User getUser(@PathVariable Long id) { return userService.findById(id); } // UserSecurity.java @Component public class UserSecurity { public boolean canAccessUser(Authentication auth, Long userId) { User currentUser = (User) auth.getPrincipal(); return currentUser.getId().equals(userId) || currentUser.isAdmin(); } }   Angular :  // ‚úÖ Bon - Guard @Injectable() export class AuthGuard implements CanActivate { canActivate(route: ActivatedRouteSnapshot): boolean { const userId = route.params['id']; return this.authService.canAccess(userId); } } // Route { path: 'users/:id', component: UserComponent, canActivate: [AuthGuard] }   Actions :  ‚úÖ @PreAuthorize, @Secured sur chaque endpoint‚úÖ Guards Angular sur routes sensibles‚úÖ V√©rifier ownership des ressources  üü† Infra‚Äã  ‚úÖ WAF avec r√®gles anti-bypass‚úÖ API Gateway avec authentification centralis√©e  üü° DevOps‚Äã  ‚úÖ Tests d'autorisation automatis√©s‚úÖ SAST pour d√©tecter endpoints non prot√©g√©s    ","version":"Next","tagName":"h3"},{"title":"A02 - Cryptographic Failures‚Äã","type":1,"pageTitle":"OWASP Top 10","url":"/docs/security/owasp/owasp-top-10#a02---cryptographic-failures","content":" ","version":"Next","tagName":"h2"},{"title":"Probl√®me‚Äã","type":1,"pageTitle":"OWASP Top 10","url":"/docs/security/owasp/owasp-top-10#probl√®me-1","content":" Donn√©es sensibles expos√©es (transmission en clair, stockage non chiffr√©, algorithmes faibles).  ","version":"Next","tagName":"h3"},{"title":"O√π s√©curiser ?‚Äã","type":1,"pageTitle":"OWASP Top 10","url":"/docs/security/owasp/owasp-top-10#o√π-s√©curiser--1","content":"   üî¥ Infra (Prioritaire)‚Äã  ‚úÖ HTTPS/TLS 1.3 partout‚úÖ Certificats valides (Let's Encrypt)‚úÖ HSTS activ√©‚úÖ Chiffrement des disques et backups  üî¥ Applicatif‚Äã  Spring Boot :  // ‚úÖ Bon - Hachage mot de passe @Configuration public class SecurityConfig { @Bean public PasswordEncoder passwordEncoder() { return new BCryptPasswordEncoder(12); } } // Service public void createUser(String password) { String hashed = passwordEncoder.encode(password); user.setPassword(hashed); }   application.yml :  # ‚úÖ Bon - Pas de secrets en dur spring: datasource: password: ${DB_PASSWORD} # Variable d'environnement   Actions :  ‚úÖ BCrypt/Argon2 pour mots de passe‚úÖ Pas de secrets dans le code‚úÖ Chiffrement AES-256 pour donn√©es sensibles  üü† DevOps‚Äã  ‚úÖ Vault (HashiCorp, AWS Secrets Manager)‚úÖ Scan de secrets (git-secrets, truffleHog)    ","version":"Next","tagName":"h3"},{"title":"A03 - Injection‚Äã","type":1,"pageTitle":"OWASP Top 10","url":"/docs/security/owasp/owasp-top-10#a03---injection","content":" ","version":"Next","tagName":"h2"},{"title":"Probl√®me‚Äã","type":1,"pageTitle":"OWASP Top 10","url":"/docs/security/owasp/owasp-top-10#probl√®me-2","content":" Injection SQL, NoSQL, OS commands, LDAP.  ","version":"Next","tagName":"h3"},{"title":"O√π s√©curiser ?‚Äã","type":1,"pageTitle":"OWASP Top 10","url":"/docs/security/owasp/owasp-top-10#o√π-s√©curiser--2","content":"   üî¥ Applicatif (Prioritaire)‚Äã  Spring Boot :  // ‚ùå Mauvais - SQL Injection String query = &quot;SELECT * FROM users WHERE username = '&quot; + username + &quot;'&quot;; jdbcTemplate.query(query, ...); // ‚úÖ Bon - Prepared Statement @Query(&quot;SELECT u FROM User u WHERE u.username = :username&quot;) User findByUsername(@Param(&quot;username&quot;) String username); // ‚úÖ Bon - JPA Repository public interface UserRepository extends JpaRepository&lt;User, Long&gt; { Optional&lt;User&gt; findByUsername(String username); }   Validation :  // ‚úÖ Bon - Validation @RestController public class UserController { @PostMapping(&quot;/users&quot;) public User create(@Valid @RequestBody UserDto userDto) { return userService.create(userDto); } } @Data public class UserDto { @NotBlank @Pattern(regexp = &quot;^[a-zA-Z0-9_-]{3,20}$&quot;) private String username; @Email private String email; }   Angular :  // ‚úÖ Bon - Validation c√¥t√© client this.userForm = this.fb.group({ username: ['', [Validators.required, Validators.pattern('^[a-zA-Z0-9_-]{3,20}$')]], email: ['', [Validators.required, Validators.email]] });   Actions :  ‚úÖ JPA/Hibernate (ORM)‚úÖ @Valid + Bean Validation‚úÖ Whitelist sur inputs  üü† Infra‚Äã  ‚úÖ WAF avec r√®gles anti-injection‚úÖ Comptes DB avec permissions minimales  üü° DevOps‚Äã  ‚úÖ SAST pour d√©tecter injections    ","version":"Next","tagName":"h3"},{"title":"A04 - Insecure Design‚Äã","type":1,"pageTitle":"OWASP Top 10","url":"/docs/security/owasp/owasp-top-10#a04---insecure-design","content":" ","version":"Next","tagName":"h2"},{"title":"Probl√®me‚Äã","type":1,"pageTitle":"OWASP Top 10","url":"/docs/security/owasp/owasp-top-10#probl√®me-3","content":" Failles de conception (pas de threat modeling, pas de rate limiting).  ","version":"Next","tagName":"h3"},{"title":"O√π s√©curiser ?‚Äã","type":1,"pageTitle":"OWASP Top 10","url":"/docs/security/owasp/owasp-top-10#o√π-s√©curiser--3","content":"   üî¥ Applicatif (Prioritaire)‚Äã  Spring Boot - Rate Limiting :  // ‚úÖ Bon - Bucket4j @RestController public class AuthController { private final Bucket bucket = Bucket.builder() .addLimit(Limit.of(5, Duration.ofMinutes(1))) .build(); @PostMapping(&quot;/login&quot;) public ResponseEntity&lt;?&gt; login(@RequestBody LoginDto dto) { if (!bucket.tryConsume(1)) { return ResponseEntity.status(429).body(&quot;Too many requests&quot;); } // Login logic } }   Actions :  ‚úÖ Threat modeling (STRIDE)‚úÖ Rate limiting sur endpoints sensibles‚úÖ Validation m√©tier stricte  üü† DevOps‚Äã  ‚úÖ Security champions‚úÖ Design reviews    ","version":"Next","tagName":"h3"},{"title":"A05 - Security Misconfiguration‚Äã","type":1,"pageTitle":"OWASP Top 10","url":"/docs/security/owasp/owasp-top-10#a05---security-misconfiguration","content":" ","version":"Next","tagName":"h2"},{"title":"Probl√®me‚Äã","type":1,"pageTitle":"OWASP Top 10","url":"/docs/security/owasp/owasp-top-10#probl√®me-4","content":" Configuration par d√©faut, services inutiles, erreurs d√©taill√©es en prod.  ","version":"Next","tagName":"h3"},{"title":"O√π s√©curiser ?‚Äã","type":1,"pageTitle":"OWASP Top 10","url":"/docs/security/owasp/owasp-top-10#o√π-s√©curiser--4","content":"   üî¥ Infra (Prioritaire)‚Äã  Dockerfile :  # ‚úÖ Bon FROM eclipse-temurin:17-jre-alpine RUN addgroup -g 1001 spring &amp;&amp; adduser -u 1001 -G spring -s /bin/sh -D spring USER spring:spring WORKDIR /app COPY --chown=spring:spring target/*.jar app.jar EXPOSE 8080 ENTRYPOINT [&quot;java&quot;, &quot;-jar&quot;, &quot;app.jar&quot;]   Nginx :  # ‚úÖ Bon - Security headers add_header X-Frame-Options &quot;DENY&quot;; add_header X-Content-Type-Options &quot;nosniff&quot;; add_header X-XSS-Protection &quot;1; mode=block&quot;; add_header Strict-Transport-Security &quot;max-age=31536000&quot;; add_header Content-Security-Policy &quot;default-src 'self'&quot;;   Actions :  ‚úÖ Principe du moindre privil√®ge‚úÖ D√©sactiver services inutiles‚úÖ Hardening OS (CIS Benchmarks)  üü† Applicatif‚Äã  Spring Boot :  # ‚úÖ Bon - application-prod.yml spring: security: headers: frame-options: DENY content-type-options: nosniff xss-protection: 1; mode=block server: error: include-message: never include-stacktrace: never management: endpoints: web: exposure: include: health,metrics   Angular :  // ‚úÖ Bon - ErrorHandler personnalis√© @Injectable() export class GlobalErrorHandler implements ErrorHandler { handleError(error: Error): void { console.error('Error occurred:', error.message); // Log interne this.notificationService.show('Une erreur est survenue'); // Message g√©n√©rique } }   üî¥ DevOps (Prioritaire)‚Äã  ‚úÖ Infrastructure as Code (Terraform)‚úÖ Scan de configuration (Checkov, TFSec)‚úÖ Environnements identiques    ","version":"Next","tagName":"h3"},{"title":"A06 - Vulnerable Components‚Äã","type":1,"pageTitle":"OWASP Top 10","url":"/docs/security/owasp/owasp-top-10#a06---vulnerable-components","content":" ","version":"Next","tagName":"h2"},{"title":"Probl√®me‚Äã","type":1,"pageTitle":"OWASP Top 10","url":"/docs/security/owasp/owasp-top-10#probl√®me-5","content":" D√©pendances vuln√©rables (Log4Shell, Spring4Shell, etc.).  ","version":"Next","tagName":"h3"},{"title":"O√π s√©curiser ?‚Äã","type":1,"pageTitle":"OWASP Top 10","url":"/docs/security/owasp/owasp-top-10#o√π-s√©curiser--5","content":"   üî¥ DevOps (Prioritaire)‚Äã  SCA (Software Composition Analysis) analyse les d√©pendances pour d√©tecter vuln√©rabilit√©s et licences.  SBOM (Software Bill of Materials) = Inventaire des composants logiciels.  Maven - OWASP Dependency Check + SBOM :  &lt;!-- ‚úÖ Bon --&gt; &lt;plugin&gt; &lt;groupId&gt;org.owasp&lt;/groupId&gt; &lt;artifactId&gt;dependency-check-maven&lt;/artifactId&gt; &lt;version&gt;9.0.0&lt;/version&gt; &lt;configuration&gt; &lt;failBuildOnCVSS&gt;7&lt;/failBuildOnCVSS&gt; &lt;/configuration&gt; &lt;/plugin&gt; &lt;plugin&gt; &lt;groupId&gt;org.cyclonedx&lt;/groupId&gt; &lt;artifactId&gt;cyclonedx-maven-plugin&lt;/artifactId&gt; &lt;version&gt;2.7.9&lt;/version&gt; &lt;executions&gt; &lt;execution&gt; &lt;phase&gt;package&lt;/phase&gt; &lt;goals&gt; &lt;goal&gt;makeAggregateBom&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;/executions&gt; &lt;/plugin&gt;   GitLab CI - Pipeline s√©curit√© :  # .gitlab-ci.yml # ‚úÖ Bon stages: - build - security - deploy variables: MAVEN_OPTS: &quot;-Dmaven.repo.local=.m2/repository&quot; build: stage: build image: maven:3.9-eclipse-temurin-17 script: - mvn clean package - mvn cyclonedx:makeAggregateBom artifacts: paths: - target/*.jar - target/bom.json expire_in: 1 week dependency-check: stage: security image: maven:3.9-eclipse-temurin-17 script: - mvn org.owasp:dependency-check-maven:check artifacts: reports: dependency_scanning: target/dependency-check-report.json allow_failure: false container-scan: stage: security image: docker:latest services: - docker:dind script: - docker build -t $CI_REGISTRY_IMAGE:$CI_COMMIT_SHA . - docker run --rm -v /var/run/docker.sock:/var/run/docker.sock aquasec/trivy image --severity HIGH,CRITICAL --exit-code 1 $CI_REGISTRY_IMAGE:$CI_COMMIT_SHA dependencies: - build # GitLab SAST int√©gr√© include: - template: Security/SAST.gitlab-ci.yml - template: Security/Dependency-Scanning.gitlab-ci.yml - template: Security/Container-Scanning.gitlab-ci.yml   Dependabot (GitLab Renovate) :  { &quot;extends&quot;: [&quot;config:base&quot;], &quot;packageRules&quot;: [ { &quot;matchUpdateTypes&quot;: [&quot;minor&quot;, &quot;patch&quot;], &quot;automerge&quot;: true }, { &quot;matchUpdateTypes&quot;: [&quot;major&quot;], &quot;labels&quot;: [&quot;security&quot;, &quot;dependencies&quot;] } ] }   Outils SCA :  Outil\tUsage\tCI/CDOWASP Dependency Check\tCVE detection\tmvn check Trivy\tContainer + FS scan\ttrivy image GitLab Security\tInt√©gr√©\tTemplates Snyk\tVulns + Fixes\tsnyk test  Actions :  ‚úÖ SCA dans pipeline GitLab CI‚úÖ SBOM g√©n√©r√© automatiquement‚úÖ Scan conteneurs avec Trivy‚úÖ Bloquer build si vulns critiques‚úÖ Renovate pour updates auto  üü† Infra‚Äã  ‚úÖ Images de base minimales (Alpine)‚úÖ Registry avec scan (Harbor)    ","version":"Next","tagName":"h3"},{"title":"A07 - Authentication Failures‚Äã","type":1,"pageTitle":"OWASP Top 10","url":"/docs/security/owasp/owasp-top-10#a07---authentication-failures","content":" ","version":"Next","tagName":"h2"},{"title":"Probl√®me‚Äã","type":1,"pageTitle":"OWASP Top 10","url":"/docs/security/owasp/owasp-top-10#probl√®me-6","content":" Bruteforce, mots de passe faibles, pas de MFA.  ","version":"Next","tagName":"h3"},{"title":"O√π s√©curiser ?‚Äã","type":1,"pageTitle":"OWASP Top 10","url":"/docs/security/owasp/owasp-top-10#o√π-s√©curiser--6","content":"   üî¥ Applicatif (Prioritaire)‚Äã  Spring Security avec OIDC :  // ‚úÖ Bon - Configuration OIDC @Configuration @EnableWebSecurity public class SecurityConfig { @Bean public SecurityFilterChain filterChain(HttpSecurity http) throws Exception { return http .csrf().csrfTokenRepository(CookieCsrfTokenRepository.withHttpOnlyFalse()) .and() .authorizeHttpRequests(auth -&gt; auth .requestMatchers(&quot;/api/public/**&quot;).permitAll() .anyRequest().authenticated() ) .oauth2ResourceServer(oauth2 -&gt; oauth2 .jwt(jwt -&gt; jwt.jwtAuthenticationConverter(jwtAuthConverter())) ) .oauth2Login(oauth2 -&gt; oauth2 .defaultSuccessUrl(&quot;/dashboard&quot;) .failureUrl(&quot;/login?error=true&quot;) ) .logout(logout -&gt; logout .logoutSuccessUrl(&quot;/&quot;) .invalidateHttpSession(true) .deleteCookies(&quot;JSESSIONID&quot;) ) .build(); } @Bean public JwtAuthenticationConverter jwtAuthConverter() { JwtAuthenticationConverter converter = new JwtAuthenticationConverter(); JwtGrantedAuthoritiesConverter authoritiesConverter = new JwtGrantedAuthoritiesConverter(); authoritiesConverter.setAuthoritiesClaimName(&quot;roles&quot;); authoritiesConverter.setAuthorityPrefix(&quot;ROLE_&quot;); converter.setJwtGrantedAuthoritiesConverter(authoritiesConverter); return converter; } @Bean public PasswordEncoder passwordEncoder() { return new BCryptPasswordEncoder(12); } }   application.yml - OIDC :  # ‚úÖ Bon - Configuration OIDC spring: security: oauth2: client: registration: keycloak: client-id: ${OIDC_CLIENT_ID} client-secret: ${OIDC_CLIENT_SECRET} scope: openid,profile,email authorization-grant-type: authorization_code redirect-uri: &quot;{baseUrl}/login/oauth2/code/{registrationId}&quot; provider: keycloak: issuer-uri: https://auth.example.com/realms/myrealm user-name-attribute: preferred_username resourceserver: jwt: issuer-uri: https://auth.example.com/realms/myrealm jwk-set-uri: https://auth.example.com/realms/myrealm/protocol/openid-connect/certs   Contr√¥leur avec OIDC :  // ‚úÖ Bon - Utilisation OIDC @RestController @RequestMapping(&quot;/api&quot;) public class UserController { @GetMapping(&quot;/me&quot;) public Map&lt;String, Object&gt; getCurrentUser(@AuthenticationPrincipal Jwt jwt) { return Map.of( &quot;sub&quot;, jwt.getSubject(), &quot;email&quot;, jwt.getClaim(&quot;email&quot;), &quot;name&quot;, jwt.getClaim(&quot;name&quot;), &quot;roles&quot;, jwt.getClaim(&quot;roles&quot;) ); } @GetMapping(&quot;/admin&quot;) @PreAuthorize(&quot;hasRole('ADMIN')&quot;) public String adminEndpoint(@AuthenticationPrincipal Jwt jwt) { return &quot;Admin access granted for: &quot; + jwt.getSubject(); } }   Angular - OIDC Client :  // ‚úÖ Bon - angular-oauth2-oidc import { AuthConfig, OAuthService } from 'angular-oauth2-oidc'; export const authConfig: AuthConfig = { issuer: 'https://auth.example.com/realms/myrealm', clientId: 'angular-client', redirectUri: window.location.origin + '/callback', scope: 'openid profile email', responseType: 'code', showDebugInformation: false, requireHttps: true }; @Injectable() export class AuthService { constructor(private oauthService: OAuthService) { this.configure(); } configure() { this.oauthService.configure(authConfig); this.oauthService.loadDiscoveryDocumentAndTryLogin(); } login() { this.oauthService.initCodeFlow(); } logout() { this.oauthService.logOut(); } getToken(): string { return this.oauthService.getAccessToken(); } }   Rate Limiting sur Login :  // ‚úÖ Bon - Bucket4j @Service public class AuthService { private final LoadingCache&lt;String, Integer&gt; attemptsCache = CacheBuilder.newBuilder() .expireAfterWrite(5, TimeUnit.MINUTES) .build(new CacheLoader&lt;&gt;() { public Integer load(String key) { return 0; } }); public void loginFailed(String username) { int attempts = attemptsCache.get(username); attemptsCache.put(username, attempts + 1); if (attempts &gt;= 5) { throw new AccountLockedException(&quot;Account locked&quot;); } } }   Angular - JWT Interceptor :  // ‚úÖ Bon @Injectable() export class JwtInterceptor implements HttpInterceptor { constructor(private authService: AuthService) {} intercept(req: HttpRequest&lt;any&gt;, next: HttpHandler): Observable&lt;HttpEvent&lt;any&gt;&gt; { const token = this.authService.getToken(); if (token) { req = req.clone({ setHeaders: { Authorization: `Bearer ${token}` } }); } return next.handle(req).pipe( catchError((error: HttpErrorResponse) =&gt; { if (error.status === 401) { this.authService.login(); } return throwError(() =&gt; error); }) ); } }   Actions :  ‚úÖ OIDC/OAuth2 pour authentification‚úÖ MFA au niveau IdP‚úÖ JWT validation (signature, expiration)‚úÖ Rate limiting (5 tentatives/5min)‚úÖ Account lockout‚úÖ Session timeout‚úÖ Secure cookies (HttpOnly, Secure, SameSite)  üü† Infra‚Äã  ‚úÖ WAF : protection bruteforce    ","version":"Next","tagName":"h3"},{"title":"A08 - Software & Data Integrity Failures‚Äã","type":1,"pageTitle":"OWASP Top 10","url":"/docs/security/owasp/owasp-top-10#a08---software--data-integrity-failures","content":" ","version":"Next","tagName":"h2"},{"title":"Probl√®me‚Äã","type":1,"pageTitle":"OWASP Top 10","url":"/docs/security/owasp/owasp-top-10#probl√®me-7","content":" Pipeline compromis, CDN non v√©rifi√©, d√©s√©rialisation non s√©curis√©e.  ","version":"Next","tagName":"h3"},{"title":"O√π s√©curiser ?‚Äã","type":1,"pageTitle":"OWASP Top 10","url":"/docs/security/owasp/owasp-top-10#o√π-s√©curiser--7","content":"   üî¥ DevOps (Prioritaire)‚Äã  Maven - Signature :  &lt;!-- ‚úÖ Bon - GPG Plugin --&gt; &lt;plugin&gt; &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt; &lt;artifactId&gt;maven-gpg-plugin&lt;/artifactId&gt; &lt;executions&gt; &lt;execution&gt; &lt;goals&gt;&lt;goal&gt;sign&lt;/goal&gt;&lt;/goals&gt; &lt;/execution&gt; &lt;/executions&gt; &lt;/plugin&gt;   Angular - SRI pour CDN :  &lt;!-- ‚úÖ Bon --&gt; &lt;script src=&quot;https://cdn.example.com/lib.js&quot; integrity=&quot;sha384-oqVuAfXRKap7fdgcCY5uykM6+R9GqQ8K...&quot; crossorigin=&quot;anonymous&quot;&gt; &lt;/script&gt;   Actions :  ‚úÖ Signature des commits (GPG)‚úÖ Signature des images Docker‚úÖ SRI pour CDN‚úÖ Pipeline CI/CD s√©curis√©  üü† Applicatif‚Äã  Spring Boot - D√©s√©rialisation :  // ‚ùå Mauvais ObjectInputStream ois = new ObjectInputStream(input); Object obj = ois.readObject(); // Dangereux // ‚úÖ Bon - Utiliser JSON ObjectMapper mapper = new ObjectMapper(); User user = mapper.readValue(json, User.class);     ","version":"Next","tagName":"h3"},{"title":"A09 - Security Logging Failures‚Äã","type":1,"pageTitle":"OWASP Top 10","url":"/docs/security/owasp/owasp-top-10#a09---security-logging-failures","content":" ","version":"Next","tagName":"h2"},{"title":"Probl√®me‚Äã","type":1,"pageTitle":"OWASP Top 10","url":"/docs/security/owasp/owasp-top-10#probl√®me-8","content":" Logs insuffisants, pas de monitoring, pas d'alertes.  ","version":"Next","tagName":"h3"},{"title":"O√π s√©curiser ?‚Äã","type":1,"pageTitle":"OWASP Top 10","url":"/docs/security/owasp/owasp-top-10#o√π-s√©curiser--8","content":"   üî¥ Infra (Prioritaire)‚Äã  ‚úÖ Logging centralis√© (ELK, Splunk)‚úÖ SIEM avec alertes‚úÖ R√©tention logs (compliance)  üü† Applicatif‚Äã  Spring Boot avec Actuator :  // ‚úÖ Bon - Logging s√©curit√© @Slf4j @RestController public class AuthController { private final MeterRegistry meterRegistry; @PostMapping(&quot;/login&quot;) public ResponseEntity&lt;?&gt; login(@RequestBody LoginDto dto) { try { User user = authService.authenticate(dto); log.info(&quot;Successful login for user: {}&quot;, user.getUsername()); meterRegistry.counter(&quot;auth.login.success&quot;).increment(); return ResponseEntity.ok(token); } catch (BadCredentialsException e) { log.warn(&quot;Failed login attempt for username: {}&quot;, dto.getUsername()); meterRegistry.counter(&quot;auth.login.failed&quot;).increment(); return ResponseEntity.status(401).build(); } } }   application.yml - Actuator + Prometheus :  # ‚úÖ Bon - Configuration compl√®te management: endpoints: web: exposure: include: health,metrics,prometheus,info base-path: /actuator endpoint: health: show-details: when-authorized metrics: export: prometheus: enabled: true tags: application: ${spring.application.name} environment: ${spring.profiles.active} spring: application: name: my-secure-app   pom.xml - D√©pendances :  &lt;!-- Actuator + Prometheus --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;io.micrometer&lt;/groupId&gt; &lt;artifactId&gt;micrometer-registry-prometheus&lt;/artifactId&gt; &lt;/dependency&gt;   Prometheus - prometheus.yml :  # ‚úÖ Bon - Scraping Spring Boot scrape_configs: - job_name: 'spring-boot-app' metrics_path: '/actuator/prometheus' scrape_interval: 15s static_configs: - targets: ['app:8080']   Grafana - Dashboard JSON :  { &quot;dashboard&quot;: { &quot;title&quot;: &quot;Security Metrics&quot;, &quot;panels&quot;: [ { &quot;title&quot;: &quot;Failed Login Attempts&quot;, &quot;targets&quot;: [ { &quot;expr&quot;: &quot;rate(auth_login_failed_total[5m])&quot; } ] }, { &quot;title&quot;: &quot;HTTP 4xx Errors&quot;, &quot;targets&quot;: [ { &quot;expr&quot;: &quot;rate(http_server_requests_seconds_count{status=~\\&quot;4..\\&quot;}[5m])&quot; } ] } ] } }   M√©triques personnalis√©es :  // ‚úÖ Bon - M√©triques m√©tier @Service public class SecurityMetrics { private final MeterRegistry registry; public void recordSuspiciousActivity(String type) { registry.counter(&quot;security.suspicious.activity&quot;, &quot;type&quot;, type).increment(); } public void recordAuthAttempt(boolean success) { registry.counter(&quot;auth.attempts&quot;, &quot;result&quot;, success ? &quot;success&quot; : &quot;failure&quot;).increment(); } }   logback-spring.xml :  &lt;!-- ‚úÖ Bon - JSON pour parsing --&gt; &lt;configuration&gt; &lt;appender name=&quot;JSON&quot; class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt; &lt;file&gt;logs/app.log&lt;/file&gt; &lt;encoder class=&quot;net.logstash.logback.encoder.LogstashEncoder&quot;&gt; &lt;includeContext&gt;true&lt;/includeContext&gt; &lt;includeMdc&gt;true&lt;/includeMdc&gt; &lt;/encoder&gt; &lt;rollingPolicy class=&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;&gt; &lt;fileNamePattern&gt;logs/app-%d{yyyy-MM-dd}.log&lt;/fileNamePattern&gt; &lt;maxHistory&gt;30&lt;/maxHistory&gt; &lt;/rollingPolicy&gt; &lt;/appender&gt; &lt;logger name=&quot;com.example.security&quot; level=&quot;INFO&quot;/&gt; &lt;root level=&quot;INFO&quot;&gt; &lt;appender-ref ref=&quot;JSON&quot;/&gt; &lt;/root&gt; &lt;/configuration&gt;   Docker Compose - Stack compl√®te :  # ‚úÖ Bon - Monitoring stack version: '3.8' services: app: image: my-app:latest ports: - &quot;8080:8080&quot; environment: - SPRING_PROFILES_ACTIVE=prod prometheus: image: prom/prometheus:latest ports: - &quot;9090:9090&quot; volumes: - ./prometheus.yml:/etc/prometheus/prometheus.yml grafana: image: grafana/grafana:latest ports: - &quot;3000:3000&quot; environment: - GF_SECURITY_ADMIN_PASSWORD=admin123 volumes: - grafana-storage:/var/lib/grafana loki: image: grafana/loki:latest ports: - &quot;3100:3100&quot; promtail: image: grafana/promtail:latest volumes: - ./logs:/var/log/app - ./promtail-config.yml:/etc/promtail/config.yml volumes: grafana-storage:   Actions :  ‚úÖ Logger √©v√©nements de s√©curit√©‚úÖ Actuator + Prometheus metrics‚úÖ Grafana dashboards pour alertes‚úÖ Correlation IDs (MDC)‚úÖ Pas de donn√©es sensibles dans logs    ","version":"Next","tagName":"h3"},{"title":"A10 - Server-Side Request Forgery (SSRF)‚Äã","type":1,"pageTitle":"OWASP Top 10","url":"/docs/security/owasp/owasp-top-10#a10---server-side-request-forgery-ssrf","content":" ","version":"Next","tagName":"h2"},{"title":"Probl√®me‚Äã","type":1,"pageTitle":"OWASP Top 10","url":"/docs/security/owasp/owasp-top-10#probl√®me-9","content":" Attaquant force le serveur √† faire des requ√™tes vers destinations malveillantes.  ","version":"Next","tagName":"h3"},{"title":"O√π s√©curiser ?‚Äã","type":1,"pageTitle":"OWASP Top 10","url":"/docs/security/owasp/owasp-top-10#o√π-s√©curiser--9","content":"   üî¥ Applicatif (Prioritaire)‚Äã  Spring Boot :  // ‚ùå Mauvais @GetMapping(&quot;/fetch&quot;) public String fetch(@RequestParam String url) { RestTemplate restTemplate = new RestTemplate(); return restTemplate.getForObject(url, String.class); // SSRF } // ‚úÖ Bon - Whitelist @GetMapping(&quot;/fetch&quot;) public String fetch(@RequestParam String url) { List&lt;String&gt; allowedHosts = List.of(&quot;api.trusted.com&quot;, &quot;cdn.trusted.com&quot;); URI uri = URI.create(url); if (!allowedHosts.contains(uri.getHost())) { throw new IllegalArgumentException(&quot;Host not allowed&quot;); } // Bloquer IPs priv√©es InetAddress addr = InetAddress.getByName(uri.getHost()); if (addr.isSiteLocalAddress() || addr.isLoopbackAddress()) { throw new IllegalArgumentException(&quot;Private IP not allowed&quot;); } RestTemplate restTemplate = new RestTemplate(); return restTemplate.getForObject(url, String.class); }   Actions :  ‚úÖ Whitelist des destinations autoris√©es‚úÖ Bloquer IPs priv√©es (127.0.0.1, 192.168.x.x, 10.x.x.x)‚úÖ Validation stricte des URLs  üü† Infra‚Äã  ‚úÖ Network segmentation‚úÖ Egress filtering    ","version":"Next","tagName":"h3"},{"title":"Bonnes Pratiques Suppl√©mentaires‚Äã","type":1,"pageTitle":"OWASP Top 10","url":"/docs/security/owasp/owasp-top-10#bonnes-pratiques-suppl√©mentaires","content":" ","version":"Next","tagName":"h2"},{"title":"CORS (Cross-Origin Resource Sharing)‚Äã","type":1,"pageTitle":"OWASP Top 10","url":"/docs/security/owasp/owasp-top-10#cors-cross-origin-resource-sharing","content":" Spring Boot :  // ‚úÖ Bon - CORS restrictif @Configuration public class CorsConfig implements WebMvcConfigurer { @Override public void addCorsMappings(CorsRegistry registry) { registry.addMapping(&quot;/api/**&quot;) .allowedOrigins(&quot;https://app.example.com&quot;) .allowedMethods(&quot;GET&quot;, &quot;POST&quot;, &quot;PUT&quot;, &quot;DELETE&quot;) .allowedHeaders(&quot;Authorization&quot;, &quot;Content-Type&quot;) .allowCredentials(true) .maxAge(3600); } }   Angular :  // Configuration proxy pour dev // proxy.conf.json { &quot;/api&quot;: { &quot;target&quot;: &quot;http://localhost:8080&quot;, &quot;secure&quot;: false, &quot;changeOrigin&quot;: true } }     ","version":"Next","tagName":"h3"},{"title":"Security Headers‚Äã","type":1,"pageTitle":"OWASP Top 10","url":"/docs/security/owasp/owasp-top-10#security-headers","content":" Spring Security :  // ‚úÖ Bon - Security headers complets @Bean public SecurityFilterChain filterChain(HttpSecurity http) throws Exception { return http .headers(headers -&gt; headers .frameOptions().deny() .xssProtection().and() .contentTypeOptions().and() .httpStrictTransportSecurity() .includeSubDomains(true) .maxAgeInSeconds(31536000) .and() .contentSecurityPolicy(&quot;default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline'&quot;) .and() .referrerPolicy(ReferrerPolicyHeaderWriter.ReferrerPolicy.STRICT_ORIGIN_WHEN_CROSS_ORIGIN) .and() .permissionsPolicy(policy -&gt; policy .policy(&quot;geolocation=(self)&quot;) .policy(&quot;camera=()&quot;) .policy(&quot;microphone=()&quot;) ) ) .build(); }     ","version":"Next","tagName":"h3"},{"title":"Input Validation & Sanitization‚Äã","type":1,"pageTitle":"OWASP Top 10","url":"/docs/security/owasp/owasp-top-10#input-validation--sanitization","content":" Spring Boot - Validation avanc√©e :  // ‚úÖ Bon - DTO avec validation compl√®te @Data public class UserDto { @NotBlank(message = &quot;Username required&quot;) @Size(min = 3, max = 20) @Pattern(regexp = &quot;^[a-zA-Z0-9_-]+$&quot;, message = &quot;Invalid characters&quot;) private String username; @Email(message = &quot;Invalid email&quot;) @NotBlank private String email; @NotBlank @Size(min = 12, message = &quot;Password too short&quot;) @Pattern(regexp = &quot;^(?=.*[a-z])(?=.*[A-Z])(?=.*\\\\d)(?=.*[@$!%*?&amp;])[A-Za-z\\\\d@$!%*?&amp;]+$&quot;, message = &quot;Password must contain uppercase, lowercase, digit, and special char&quot;) private String password; @Past(message = &quot;Birth date must be in the past&quot;) private LocalDate birthDate; @URL private String website; }   Angular - Validation formulaire :  // ‚úÖ Bon export class UserFormComponent { userForm = this.fb.group({ username: ['', [ Validators.required, Validators.minLength(3), Validators.maxLength(20), Validators.pattern(/^[a-zA-Z0-9_-]+$/) ]], email: ['', [Validators.required, Validators.email]], password: ['', [ Validators.required, Validators.minLength(12), this.passwordStrengthValidator() ]] }); passwordStrengthValidator(): ValidatorFn { return (control: AbstractControl): ValidationErrors | null =&gt; { const value = control.value; if (!value) return null; const hasUpperCase = /[A-Z]/.test(value); const hasLowerCase = /[a-z]/.test(value); const hasNumeric = /[0-9]/.test(value); const hasSpecialChar = /[@$!%*?&amp;]/.test(value); const valid = hasUpperCase &amp;&amp; hasLowerCase &amp;&amp; hasNumeric &amp;&amp; hasSpecialChar; return !valid ? { passwordStrength: true } : null; }; } }   Sanitization HTML :  // ‚úÖ Bon - Angular import { DomSanitizer, SafeHtml } from '@angular/platform-browser'; @Component({...}) export class ArticleComponent { constructor(private sanitizer: DomSanitizer) {} getSafeHtml(content: string): SafeHtml { return this.sanitizer.sanitize(SecurityContext.HTML, content) || ''; } }     ","version":"Next","tagName":"h3"},{"title":"API Rate Limiting‚Äã","type":1,"pageTitle":"OWASP Top 10","url":"/docs/security/owasp/owasp-top-10#api-rate-limiting","content":" Spring Boot - Bucket4j :  // ‚úÖ Bon - Rate limiting par IP @Component public class RateLimitingFilter extends OncePerRequestFilter { private final Map&lt;String, Bucket&gt; cache = new ConcurrentHashMap&lt;&gt;(); @Override protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException { String ip = request.getRemoteAddr(); Bucket bucket = resolveBucket(ip); if (bucket.tryConsume(1)) { filterChain.doFilter(request, response); } else { response.setStatus(429); response.getWriter().write(&quot;Too many requests&quot;); } } private Bucket resolveBucket(String ip) { return cache.computeIfAbsent(ip, k -&gt; createNewBucket()); } private Bucket createNewBucket() { return Bucket.builder() .addLimit(Limit.of(100, Duration.ofMinutes(1))) .build(); } }   Nginx - Rate limiting :  # ‚úÖ Bon http { limit_req_zone $binary_remote_addr zone=api:10m rate=10r/s; server { location /api/ { limit_req zone=api burst=20 nodelay; proxy_pass http://backend; } } }     ","version":"Next","tagName":"h3"},{"title":"Secrets Management‚Äã","type":1,"pageTitle":"OWASP Top 10","url":"/docs/security/owasp/owasp-top-10#secrets-management","content":" Spring Cloud Config + Vault :  # bootstrap.yml # ‚úÖ Bon spring: cloud: config: uri: http://config-server:8888 vault: host: vault.example.com port: 8200 scheme: https authentication: TOKEN token: ${VAULT_TOKEN} kv: enabled: true backend: secret profile-separator: '/'   HashiCorp Vault :  # ‚úÖ Bon - Stockage secrets vault kv put secret/myapp/db \\ username=dbuser \\ password=supersecret # R√©cup√©ration vault kv get -field=password secret/myapp/db     ","version":"Next","tagName":"h3"},{"title":"Container Security‚Äã","type":1,"pageTitle":"OWASP Top 10","url":"/docs/security/owasp/owasp-top-10#container-security","content":" Dockerfile - Hardening complet :  # ‚úÖ Bon - Multi-stage s√©curis√© FROM maven:3.9-eclipse-temurin-17-alpine AS build WORKDIR /build COPY pom.xml . RUN mvn dependency:go-offline COPY src ./src RUN mvn clean package -DskipTests &amp;&amp; \\ mvn cyclonedx:makeAggregateBom # Scan de vuln√©rabilit√©s FROM aquasec/trivy:latest AS scan COPY --from=build /build/target/*.jar /scan/app.jar RUN trivy rootfs --severity HIGH,CRITICAL --exit-code 1 /scan # Runtime FROM eclipse-temurin:17-jre-alpine AS runtime # Mises √† jour s√©curit√© RUN apk update &amp;&amp; apk upgrade &amp;&amp; \\ apk add --no-cache dumb-init &amp;&amp; \\ rm -rf /var/cache/apk/* # Utilisateur non-root RUN addgroup -g 1001 -S appuser &amp;&amp; \\ adduser -u 1001 -S appuser -G appuser # R√©pertoire avec permissions restreintes WORKDIR /app RUN chown -R appuser:appuser /app # Copie avec ownership COPY --from=build --chown=appuser:appuser /build/target/*.jar app.jar COPY --from=build --chown=appuser:appuser /build/target/bom.json /sbom/ USER appuser # Port non-privil√©gi√© EXPOSE 8080 # Health check HEALTHCHECK --interval=30s --timeout=3s --retries=3 \\ CMD wget --no-verbose --tries=1 --spider http://localhost:8080/actuator/health || exit 1 # Init system pour PID 1 ENTRYPOINT [&quot;dumb-init&quot;, &quot;--&quot;] CMD [&quot;java&quot;, \\ &quot;-XX:+UseContainerSupport&quot;, \\ &quot;-XX:MaxRAMPercentage=75.0&quot;, \\ &quot;-Djava.security.egd=file:/dev/./urandom&quot;, \\ &quot;-jar&quot;, &quot;app.jar&quot;]   Kubernetes - Security Context :  # ‚úÖ Bon - Pod s√©curis√© apiVersion: v1 kind: Pod metadata: name: secure-app spec: securityContext: runAsNonRoot: true runAsUser: 1001 fsGroup: 1001 seccompProfile: type: RuntimeDefault containers: - name: app image: myapp:latest securityContext: allowPrivilegeEscalation: false readOnlyRootFilesystem: true capabilities: drop: - ALL resources: limits: memory: &quot;512Mi&quot; cpu: &quot;500m&quot; requests: memory: &quot;256Mi&quot; cpu: &quot;250m&quot; livenessProbe: httpGet: path: /actuator/health/liveness port: 8080 initialDelaySeconds: 30 periodSeconds: 10 readinessProbe: httpGet: path: /actuator/health/readiness port: 8080 initialDelaySeconds: 10 periodSeconds: 5     ","version":"Next","tagName":"h3"},{"title":"Network Security‚Äã","type":1,"pageTitle":"OWASP Top 10","url":"/docs/security/owasp/owasp-top-10#network-security","content":" Architecture Zero Trust :    Network Policies (Kubernetes) :  # ‚úÖ Bon - Isolation r√©seau apiVersion: networking.k8s.io/v1 kind: NetworkPolicy metadata: name: app-network-policy spec: podSelector: matchLabels: app: myapp policyTypes: - Ingress - Egress ingress: - from: - podSelector: matchLabels: app: api-gateway ports: - protocol: TCP port: 8080 egress: - to: - podSelector: matchLabels: app: database ports: - protocol: TCP port: 5432 - to: - podSelector: matchLabels: app: redis ports: - protocol: TCP port: 6379     ","version":"Next","tagName":"h3"},{"title":"Backup & Disaster Recovery‚Äã","type":1,"pageTitle":"OWASP Top 10","url":"/docs/security/owasp/owasp-top-10#backup--disaster-recovery","content":" PostgreSQL - Backup chiffr√© :  # ‚úÖ Bon - Backup automatis√© #!/bin/bash DATE=$(date +%Y%m%d_%H%M%S) BACKUP_DIR=&quot;/backups&quot; DB_NAME=&quot;myapp&quot; # Dump + Compression + Chiffrement pg_dump $DB_NAME | \\ gzip | \\ openssl enc -aes-256-cbc -salt -pbkdf2 -pass file:/secrets/backup.key \\ &gt; $BACKUP_DIR/backup_${DB_NAME}_${DATE}.sql.gz.enc # Upload vers S3 avec chiffrement c√¥t√© serveur aws s3 cp $BACKUP_DIR/backup_${DB_NAME}_${DATE}.sql.gz.enc \\ s3://my-backups/ \\ --storage-class GLACIER \\ --server-side-encryption AES256 # R√©tention: supprimer backups &gt; 30 jours find $BACKUP_DIR -name &quot;*.enc&quot; -mtime +30 -delete     ","version":"Next","tagName":"h3"},{"title":"Compliance & Audit‚Äã","type":1,"pageTitle":"OWASP Top 10","url":"/docs/security/owasp/owasp-top-10#compliance--audit","content":" Spring Boot Actuator - Audit Events :  // ‚úÖ Bon - Audit des actions sensibles @Service @Slf4j public class AuditService { private final ApplicationEventPublisher publisher; public void auditLogin(String username, boolean success) { AuditEvent event = new AuditEvent( username, success ? &quot;LOGIN_SUCCESS&quot; : &quot;LOGIN_FAILURE&quot;, Map.of( &quot;timestamp&quot;, Instant.now(), &quot;ip&quot;, getCurrentIP(), &quot;userAgent&quot;, getCurrentUserAgent() ) ); publisher.publishEvent(new AuditApplicationEvent(event)); log.info(&quot;Audit: {} - {}&quot;, event.getType(), username); } public void auditDataAccess(String username, String resource) { AuditEvent event = new AuditEvent( username, &quot;DATA_ACCESS&quot;, Map.of(&quot;resource&quot;, resource) ); publisher.publishEvent(new AuditApplicationEvent(event)); } }   GDPR - Data retention :  // ‚úÖ Bon - Suppression automatique donn√©es @Scheduled(cron = &quot;0 0 2 * * *&quot;) // 2h du matin public void deleteExpiredData() { LocalDateTime threshold = LocalDateTime.now().minusDays(90); // Logs &gt; 90 jours logRepository.deleteByCreatedAtBefore(threshold); // Donn√©es utilisateurs supprim√©s userRepository.findByDeletedAtBefore(threshold.minusDays(30)) .forEach(user -&gt; { // Anonymisation user.setEmail(&quot;deleted@example.com&quot;); user.setName(&quot;Deleted User&quot;); userRepository.save(user); }); }     ","version":"Next","tagName":"h3"},{"title":"R√©capitulatif par Couche‚Äã","type":1,"pageTitle":"OWASP Top 10","url":"/docs/security/owasp/owasp-top-10#r√©capitulatif-par-couche","content":" ","version":"Next","tagName":"h2"},{"title":"üî¥ Applicatif (Priorit√© Haute)‚Äã","type":1,"pageTitle":"OWASP Top 10","url":"/docs/security/owasp/owasp-top-10#-applicatif-priorit√©-haute","content":" A01: @PreAuthorize, GuardsA02: BCrypt, pas de secrets en durA03: JPA, @ValidA04: Rate limiting, validation m√©tierA07: OIDC/OAuth2, MFA, JWTA10: Whitelist URLs, bloquer IPs priv√©esBonus: CORS restrictif, Security headers, Input validation  ","version":"Next","tagName":"h3"},{"title":"üî¥ Infra (Priorit√© Haute)‚Äã","type":1,"pageTitle":"OWASP Top 10","url":"/docs/security/owasp/owasp-top-10#-infra-priorit√©-haute","content":" A02: HTTPS/TLS 1.3, HSTSA05: Hardening, moindre privil√®geA09: Prometheus + Grafana + LokiBonus: WAF, Network segmentation, Backup chiffr√©  ","version":"Next","tagName":"h3"},{"title":"üî¥ DevOps (Priorit√© Haute)‚Äã","type":1,"pageTitle":"OWASP Top 10","url":"/docs/security/owasp/owasp-top-10#-devops-priorit√©-haute","content":" A05: IaC, scan configurationA06: SCA + SBOM (CycloneDX, Trivy, Snyk)A08: Signature commits/imagesA09: Actuator + MetricsBonus: Secrets management (Vault), Container hardening    ","version":"Next","tagName":"h3"},{"title":"Ressources‚Äã","type":1,"pageTitle":"OWASP Top 10","url":"/docs/security/owasp/owasp-top-10#ressources","content":" OWASP Top 10 2021Spring Security DocumentationAngular Security GuideCycloneDX SBOMOWASP Dependency CheckTrivy DocumentationPrometheus DocumentationGrafana Documentation ","version":"Next","tagName":"h2"}],"options":{"id":"default"}}